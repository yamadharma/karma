diff -Naur ../work/WindowMaker-0.91.0/acinclude.m4 wm/acinclude.m4
--- ../work/WindowMaker-0.91.0/acinclude.m4	2004-05-05 02:14:47.000000000 +0400
+++ wm/acinclude.m4	2004-11-04 12:10:09.000000000 +0300
@@ -41,6 +41,7 @@
 AC_CACHE_VAL(ac_cv_lib_xft_version_ok,
 [AC_TRY_LINK(
 [/* Test version of libXft we have */
+#include <X11/Xlib.h>
 #include <X11/Xft/Xft.h>
 
 #if !defined(XFT_VERSION) || XFT_VERSION < $xft_major_version*10000 + $xft_minor_version*100 + $xft_micro_version
diff -Naur ../work/WindowMaker-0.91.0/autogen.sh wm/autogen.sh
--- ../work/WindowMaker-0.91.0/autogen.sh	1970-01-01 03:00:00.000000000 +0300
+++ wm/autogen.sh	2002-03-04 09:28:14.000000000 +0300
@@ -0,0 +1,58 @@
+#!/bin/sh
+# Run this to generate all the initial makefiles, etc.
+
+DIE=0
+
+echo "Generating configuration files for WindowMaker, please wait...."
+
+(autoconf --version) < /dev/null > /dev/null 2>&1 || {
+	echo
+        echo "You must have autoconf installed to compile WindowMaker."
+        echo "Download the appropriate package for your distribution,"
+        echo "or get the source tarball at ftp://ftp.gnu.org/pub/gnu/"
+        DIE=1
+}
+
+(libtool --version) < /dev/null > /dev/null 2>&1 || {
+        echo
+        echo "You must have libtool installed to compile WindowMaker."
+        echo "Download the appropriate package for your distribution,"
+        echo "or get the source tarball at ftp://ftp.gnu.org/pub/gnu/"
+        DIE=1
+}
+
+(automake --version) < /dev/null > /dev/null 2>&1 || {
+        echo
+        echo "You must have automake installed to compile WindowMaker."
+        echo "Download the appropriate package for your distribution,"
+        echo "or get the source tarball at ftp://ftp.gnu.org/pub/gnu/"
+        DIE=1
+}
+
+if test "$DIE" -eq 1; then
+        exit 1
+fi
+
+echo "  libtoolize --copy --force --automake"
+libtoolize --copy --force --automake
+echo "  aclocal -I . $ACLOCAL_FLAGS"
+aclocal -I . $ACLOCAL_FLAGS
+echo "  autoheader"
+autoheader
+echo "  automake --add-missing --gnu --include-deps"
+automake --add-missing --gnu --include-deps
+echo "  autoconf"
+autoconf
+
+if [ -x config.status -a -z "$*" ]; then
+  ./config.status --recheck
+else
+  if test -z "$*"; then
+    echo "I am going to run ./configure with no arguments - if you wish "
+    echo "to pass any to it, please specify them on the $0 command line."
+    echo "If you do not wish to run ./configure, press Ctrl-C now."
+    trap 'echo "configure aborted" ; exit 0' 1 2 15
+    sleep 1
+  fi
+  ./configure "$@"
+fi
diff -Naur ../work/WindowMaker-0.91.0/ChangeLog wm/ChangeLog
--- ../work/WindowMaker-0.91.0/ChangeLog	2004-10-26 08:09:57.000000000 +0400
+++ wm/ChangeLog	2004-11-11 12:39:46.000000000 +0300
@@ -1,3 +1,17 @@
+Changes since version 0.91.0:
+.............................
+- fixed crash with info panel and alt-tabbing
+- updated Japanese translations (Takeo Hashimoto <HashimotoTakeo@mac.com>)
+- allow disable of switch panel when SwitchPanelImages=None
+- added X Input Methods support in WINGs
+- fixed issues with compiling on Solaris with openwin
+- reduced minimum required version number for the Xft library to 2.1.0
+- fixed some compilation issues with gcc-2.9x
+- Removed --with-appsdir option and replaced it with --with-gnustepdir. Also,
+  default installation path (for non GNUstep users) is now $(prefix)/bin
+- fixed bug with infinite loop in some circumstances in fitText() in WINGs
+
+
 Changes since version 0.90.0:
 .............................
 
diff -Naur ../work/WindowMaker-0.91.0/configure.ac wm/configure.ac
--- ../work/WindowMaker-0.91.0/configure.ac	2004-10-26 08:09:57.000000000 +0400
+++ wm/configure.ac	2004-11-15 10:07:24.000000000 +0300
@@ -15,24 +15,10 @@
 
 
 
-AM_INIT_AUTOMAKE(WindowMaker, 0.91.0)
+AM_INIT_AUTOMAKE(WindowMaker, 0.92.0)
 
 AC_PROG_LIBTOOL
 
-dnl # by Marcelo Magallon <mmagallo@efis.ucr.ac.cr>
-dnl # Turn around -rpath problem with libtool 1.0c
-dnl # This define should be improbable enough to not conflict with anything
-dnl case ${host} in
-dnl   *-pc-linux-gnu)
-dnl     AC_MSG_RESULT([Fixing libtool for -rpath problems.])
-dnl     sed < libtool > libtool-2 \
-dnl     's/^hardcode_libdir_flag_spec.*$/hardcode_libdir_flag_spec=" -D__LIBTOOL_IS_A_FOOL__ "/'
-dnl     mv libtool-2 libtool
-dnl     chmod 755 libtool
-dnl   ;;
-dnl esac
-
-
 AM_CONFIG_HEADER(src/config.h)
 
 
@@ -205,23 +191,19 @@
 asm_support=no
 mmx_support=no
 if test "$ac_cv_prog_gcc" = yes; then
-   
-    # gcc-3.4 complains about some of our stuff without this
-    NOSTRICTALIASING="-fno-strict-aliasing"
 
-    x86=0
-    changequote(,)dnl
-    case "$host_cpu" in
-       i[3456]86) x86=1
-       ;;
-    esac
-    changequote([,])dnl
+    # gcc-3.3 or newer complains about some of our stuff without this
+    NOSTRICTALIASING="-fno-strict-aliasing"
 
-    if test "$host_os" != "linux" -a "$host_os" != "linux-gnu" ; then
-       x86=0
-    fi
+    AC_CACHE_CHECK(whether gcc supports x86 inline asm,
+                   ac_cv_c_inline_asm,
+                   [AC_TRY_LINK(,[{int x; asm volatile("movl %%eax, %%ebx\n"::
+                          "m" (x),"m" (x),"m" (x),"m" (x),"m" (x),"m" (x),
+                          "m" (x),"m" (x),"m" (x),"m" (x),"m" (x),"m" (x));}],
+                   ac_cv_c_inline_asm=yes,
+                   ac_cv_c_inline_asm=no)])
 
-    if test $x86 = 1; then
+    if test "x$ac_cv_c_inline_asm" = xyes; then
        AC_DEFINE(ASM_X86, 1, [define if processor is x86 (normally detected by configure)])
        asm_support=yes
 
@@ -299,8 +281,8 @@
 
 dnl List of supported locales
 dnl -------------------------
-supported_locales="be bg bs ca cs da de el es et fi fr gl hr hu it ja ko ms nl no pl pt ro ru sk sv tr zh_CN zh_TW.Big5"
-supported_wprefs_locales="bg ca cs de es et fi fr hr hu it ja ko pt ru sk zh_CN zh_TW.Big5"
+supported_locales="be bg bs ca cs da de el es et fi fr gl hr hu it ja ko ms nl no pl pt ro ru sk sv tr zh_CN zh_TW"
+supported_wprefs_locales="bg ca cs de es et fi fr hr hu it ja ko pt ru sk zh_CN zh_TW"
 supported_wings_locales="bg ca cs de fr sk"
 
 for lang in $LINGUAS; do
@@ -535,7 +517,7 @@
         exit 1
 fi
 
-minXFT="2.1.2"
+minXFT="2.1.0"
 goodxft="no"
 
 dnl
@@ -846,25 +828,30 @@
 dnl Support for GNUSTEP_LOCAL_ROOT, for WPrefs.app
 dnl ==============================================
 
-appspath=""
-
 AC_ARG_WITH(appspath,
-[  --with-appspath=PATH    specify the directory for GNUstep applications], appspath=$withval )
+[  --with-gnustepdir=PATH  specify the directory for GNUstep applications])
+
+appspath=$with_gnustepdir
 
-if test "x$appspath" = "x"; then
-    gnustepdir='${prefix}/GNUstep'
+if test "x$appspath$GNUSTEP_LOCAL_ROOT" = "x"; then
+    wprefs_base_dir=${prefix}
+    wprefs_datadir="${datadir}/WPrefs"
+    wprefs_bindir="${bindir}"
+else
+    gnustepdir=$appspath
 
     if test "x$GNUSTEP_LOCAL_ROOT" != "x" ; then
 	gnustepdir=`echo "$GNUSTEP_LOCAL_ROOT" | sed -e "s|^${prefix}|prefix|"`
 	gnustepdir=`echo $gnustepdir | sed -e 's|^prefix|${prefix}|'`
     fi
 
-    with_appspath=$gnustepdir/Applications
+    wprefs_base_dir=$gnustepdir/Applications
+    wprefs_datadir=$wprefs_base_dir/WPrefs.app
+    wprefs_bindir=$wprefs_base_dir/WPrefs.app
 fi
 
-wprefsdir=$with_appspath/WPrefs.app
-
-AC_SUBST(wprefsdir)
+AC_SUBST(wprefs_datadir)
+AC_SUBST(wprefs_bindir)
 
 
 dnl Enable User Defined Menu thing
@@ -1098,7 +1085,7 @@
 echo
 echo "Installation path prefix            : $prefix"
 echo "Installation path for binaries      : $_bindir"
-echo "Installation path for WPrefs.app    : $with_appspath" | sed -e 's|\${prefix}|'"$prefix|"
+echo "Installation path for WPrefs.app    : $wprefs_base_dir" | sed -e 's|\${prefix}|'"$prefix|"
 echo "Supported graphic format libraries  : $supported_gfx"
 echo "Use assembly routines for wrlib     : $asm_support"
 echo "Use inline MMX(tm) x86 assembly     : $mmx_support"
diff -Naur ../work/WindowMaker-0.91.0/COPYING.OPL wm/COPYING.OPL
--- ../work/WindowMaker-0.91.0/COPYING.OPL	1970-01-01 03:00:00.000000000 +0300
+++ wm/COPYING.OPL	1999-02-17 14:06:40.000000000 +0300
@@ -0,0 +1,91 @@
+
+     OpenContent License (OPL)
+     Version 1.0, July 14, 1998.
+
+     This document outlines the principles underlying the OpenContent
+     (OC) movement and may be redistributed provided it remains
+     unaltered. For legal purposes, this document is the license under
+     which OpenContent is made available for use.
+
+     The original version of this document may be found at
+     http://www.opencontent.org/opl.shtml
+
+     LICENSE
+
+     Terms and Conditions for Copying, Distributing, and Modifying
+
+     Items other than copying, distributing, and modifying the Content
+     with which this license was distributed (such as using, etc.) are
+     outside the scope of this license.
+
+     1. You may copy and distribute exact replicas of the OpenContent
+     (OC) as you receive it, in any medium, provided that you
+     conspicuously and appropriately publish on each copy an appropriate
+     copyright notice and disclaimer of warranty; keep intact all the
+     notices that refer to this License and to the absence of any
+     warranty; and give any other recipients of the OC a copy of this
+     License along with the OC. You may at your option charge a fee for
+     the media and/or handling involved in creating a unique copy of the
+     OC for use offline, you may at your option offer instructional
+     support for the OC in exchange for a fee, or you may at your option
+     offer warranty in exchange for a fee. You may not charge a fee for
+     the OC itself. You may not charge a fee for the sole service of
+     providing access to and/or use of the OC via a network (e.g. the
+     Internet), whether it be via the world wide web, FTP, or any other
+     method.
+
+     2. You may modify your copy or copies of the OpenContent or any
+     portion of it, thus forming works based on the Content, and
+     distribute such modifications or work under the terms of Section 1
+     above, provided that you also meet all of these conditions:
+
+     a) You must cause the modified content to carry prominent notices
+     stating that you changed it, the exact nature and content of the
+     changes, and the date of any change.
+
+     b) You must cause any work that you distribute or publish, that in
+     whole or in part contains or is derived from the OC or any part
+     thereof, to be licensed as a whole at no charge to all third
+     parties under the terms of this License, unless otherwise permitted
+     under applicable Fair Use law.
+
+     These requirements apply to the modified work as a whole. If
+     identifiable sections of that work are not derived from the OC, and
+     can be reasonably considered independent and separate works in
+     themselves, then this License, and its terms, do not apply to those
+     sections when you distribute them as separate works. But when you
+     distribute the same sections as part of a whole which is a work
+     based on the OC, the distribution of the whole must be on the terms
+     of this License, whose permissions for other licensees extend to
+     the entire whole, and thus to each and every part regardless of who
+     wrote it. Exceptions are made to this requirement to release
+     modified works free of charge under this license only in compliance
+     with Fair Use law where applicable.
+
+     3. You are not required to accept this License, since you have not
+     signed it. However, nothing else grants you permission to copy,
+     distribute or modify the OC. These actions are prohibited by law if
+     you do not accept this License. Therefore, by distributing or
+     translating the OC, or by deriving works herefrom, you indicate
+     your acceptance of this License to do so, and all its terms and
+     conditions for copying, distributing or translating the OC.
+
+     NO WARRANTY
+
+     4. BECAUSE THE OPENCONTENT (OC) IS LICENSED FREE OF CHARGE, THERE
+     IS NO WARRANTY FOR THE OC, TO THE EXTENT PERMITTED BY APPLICABLE
+     LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS
+     AND/OR OTHER PARTIES PROVIDE THE OC "AS IS" WITHOUT WARRANTY OF ANY
+     KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
+     THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
+     PARTICULAR PURPOSE. THE ENTIRE RISK OF USE OF THE OC IS WITH YOU.
+     SHOULD THE OC PROVE FAULTY, INACCURATE, OR OTHERWISE UNACCEPTABLE
+     YOU ASSUME THE COST OF ALL NECESSARY REPAIR OR CORRECTION.
+
+     5. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
+     WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY
+     MIRROR AND/OR REDISTRIBUTE THE OC AS PERMITTED ABOVE, BE LIABLE TO
+     YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
+     CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE
+     THE OC, EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
+     POSSIBILITY OF SUCH DAMAGES.
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/geticonset.1x wm/doc/cs/geticonset.1x
--- ../work/WindowMaker-0.91.0/doc/cs/geticonset.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/geticonset.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,36 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH geticonset 1x "Leden 1999"
+.SH JMÉNO
+geticonset \- extrahuje aktuální sadu ikon Window Makera
+.SH SYNTAXE
+.B geticonset
+.I [volby] [soubor]
+.SH POPIS
+.B geticonset
+naèíta doménu WMWindowAttributes a zapí¹e sadu nalezených ikon
+buï na standardtní výstup nebo do
+.I souboru.
+.SH VOLBY
+.TP
+.B \-\-help
+vypí¹e nápovìdu
+.TP
+.B \-\-version
+vypí¹e èíslo verze
+.SH PROMÌNNÉ PROSTØEDÍ
+.IP GNUSTEP_USER_ROOT
+specifikuje cestu k adresáøi Defaults. Øetìzec "Defaults/" je pøidán k této
+promìnné, èím¾ se urèí umístìní databází. Jakmile promìnná není nastavená,
+tak její implicitní hodnota je "~/GNUstep"
+.SH SOUBORY
+.IP GNUSTEP_USER_ROOT/Defaults/WMWindowAttributes
+Toto je soubor, který se zapí¹e.
+.SH PODÍVEJTE SE TAKÉ
+.BR seticons (1x),
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>.
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/getstyle.1x wm/doc/cs/getstyle.1x
--- ../work/WindowMaker-0.91.0/doc/cs/getstyle.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/getstyle.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,54 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH getstyle 1x "Leden 1999"
+.SH JMÉNO
+getstyle \- vytvoøí balík s aktuálním stylem Window Makera.
+.SH SYNTAXE
+.B getstyle
+[[-t|--theme-options] [-p|--pack] [soubor se stylem]]
+.SH POPIS
+.B getstyle
+mù¾e buï vypsat konfiguraèní informace aktuálního stylu Window Makera do
+souboru/standardního výstupu nebo vytvoøit samostatný balík s tématem. Balík
+s tématem je adresáø, který obsahuje v¹echno potøebné pro distributovatelné
+téma, informace o stylech a obrázcích.
+
+Dejte pozor na to, ¾e informace o stylu ulo¾ené v globální konfiguraci
+systému se nenaèítají.
+
+Standardnì se ulo¾í nasledné vlastnosti: \fIIconBack\fP,
+\fIIconBack\fP, \fITitleJustify\fP, \fIWindowTitleFont\fP,
+\fIMenuTitleFont, MenuTextFont\fP, \fIIconTitleFont\fP,
+\fIDisplayFont\fP, \fIHighlightColor\fP, \fIHighlightTextColor\fP,
+\fIIconTitleColor\fP, \fICClipTitleColor\fP, \fIIconBackColor\fP,
+\fIFTitleColor\fP, \fIPTitleColor\fP, \fIUTitleColor\fP,
+\fIFTitleBack\fP, \fIPTitleBack, UTitleBack\fP, \fIMenuTitleColor\fP,
+\fIMenuTextColor\fP, \fIMenuDisabledColor\fP, \fIMenuTitleBack\fP and
+\fIMenuTextBack\fP. Jakmile je dána volba \fB-t\fP nebo \fB--theme-options\fP,
+vlastnost \fIWorkspaceBack\fP se ulo¾í také.
+
+.SH VOLBY
+.TP
+.B \-t
+ulo¾í i informace související s tématem, co¾ je textura pozadí hlavního okna.
+Tato volba je v¾dy nastavená, jakmile je pou¾itá volba \-p.
+.TP
+.B \-p
+vytvoøí balík s tématem v adresáøi nazvaným podla jména tématu s pøíponou .themed.
+
+.SH PROMÌNNÉ PROSTØEDÍ
+.IP GNUSTEP_USER_ROOT
+specifikuje cestu k adresáøi Defaults. Øetìzec "Defaults/" je pøidán k této
+promìnné, èím¾ se urèí umístìní databází. Jakmile promìnná není nastavená,
+tak její implicitní hodnota je "~/GNUstep"
+.SH SOUBORY
+.IP GNUSTEP_USER_ROOT/Defaults/WindowMaker
+Toto je soubor, který se zapí¹e.
+.SH PODÍVEJTE SE TAKÉ
+.BR setstyle (1x),
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pølo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>.
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/Makefile.am wm/doc/cs/Makefile.am
--- ../work/WindowMaker-0.91.0/doc/cs/Makefile.am	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/Makefile.am	2004-10-26 12:44:35.000000000 +0400
@@ -0,0 +1,17 @@
+## Process this file with automake to produce Makefile.in
+
+mandir=@mandir@/cs
+
+man_MANS = \
+	geticonset.1x \
+	setstyle.1x \
+	wxpaste.1x \
+	getstyle.1x \
+	wdwrite.1x \
+	wmsetbg.1x \
+	seticons.1x \
+	wmaker.1x \
+	wxcopy.1x
+
+EXTRA_DIST = $(man_MANS)
+
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/seticons.1x wm/doc/cs/seticons.1x
--- ../work/WindowMaker-0.91.0/doc/cs/seticons.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/seticons.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,38 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH seticons 1x "Bøezen 1998"
+.SH JMÉNO
+seticons \- nastaví ikony pro Window Maker
+.SH SYNTAXe
+.B seticons
+.I soubor
+.SH POPIS
+.B seticons
+naèíta
+.I soubor
+a zapí¹e jeho obsah do domény WMWindowAttributes, èím¾ se nastaví ikony,
+které pou¾ívá Window Maker pro dané tøídy (napøíklad XTerm, "xterm.XTerm",
+"pine.XTerm", atd.)
+.SH VOLBY
+.TP
+.B \-\-help
+vypí¹e nápovìdu
+.TP
+.B \-\-version
+vypí¹e èíslo verze
+.SH PROMÌNNÉ PROSTØEDÍ
+.IP GNUSTEP_USER_ROOT
+specifikuje cestu k adresáøi Defaults. Øetìzec "Defaults/" je pøidán k této
+promìnné, èím¾ se urèí umístìní databází. Jakmile promìnná není nastavená,
+tak její implicitní hodnota je "~/GNUstep"
+.SH SOUBORY
+.IP GNUSTEP_USER_ROOT/Defaults/WMWindowAttributes
+Toto je soubor, který se zapí¹e.
+.SH PODÍVEJTE SE TAKÉ
+.BR geticonset (1x),
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>.
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/setstyle.1x wm/doc/cs/setstyle.1x
--- ../work/WindowMaker-0.91.0/doc/cs/setstyle.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/setstyle.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,47 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH setstyle 1x "Leden 1999"
+.SH JMÉNO
+setstyle \- zmìní nastavení Window Makera související se stylem nebo
+zavede téma
+.SH SYNTAXE
+.B setstyle
+.I "[--no-fonts] [--help] [--version]"
+.I soubor se stylem
+.SH DESCRIPTION
+.B setstyle
+naèítá
+.I soubor se stylem
+a zapí¹e jeho obsah do domény Window Makera, èím¾ nastaví aktuální styl
+Window Makera. Jakmile je poskytnutá cesta, adresáø bude pova¾ovaný za balík
+s tématem a podla toho bude i zavedený. Jakmile je daný argument
+\fB\-\-no\-fonts\fP, nastavení související s fonty (\fIIconTitleFont\fP,
+\fIClipTitleFont\fP, \fIDisplayFont\fP, \fIMenuTextFont\fP,
+\fIMenuTitleFont\fP, \fIWindowTitleFont\fP) v souboru se stylem budou
+ignorované.
+.SH VOLBY
+.TP
+.B \-\-no\-fonts
+ignorovat nastavení fontù v souboru se stylem.
+.TP
+.B \-\-help
+vypí¹e nápovìdu
+.TP
+.B \-\-version
+vypí¹e èíslo verze
+.SH PROMìNNÉ PROSTØEDÍ
+.IP GNUSTEP_USER_ROOT
+specifikuje cestu k adresáøi Defaults. Øetìzec "Defaults/" je pøidán k této
+promìnné, èím¾ se urèí umístìní databází. Jakmile promìnná není nastavená,
+tak její implicitní hodnota je "~/GNUstep"
+.SH SOUBORY
+.IP GNUSTEP_USER_ROOT/Defaults/WindowMaker
+Toto je soubor, který se zapí¹e.
+.SH PODÍVEJTE SE TAKÉ
+.BR getstyle (1x),
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>.
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/wdwrite.1x wm/doc/cs/wdwrite.1x
--- ../work/WindowMaker-0.91.0/doc/cs/wdwrite.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/wdwrite.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,39 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH wdwrite 1x "Leden 1999"
+.SH JMÉNO
+wdwrite \- zapí¹e klíèe a hodnoty do databáze standardních nastavení
+.SH SYNTAXE
+.B wdwrite
+.I doména
+.I volba
+.I hodnota
+.SH POPIS
+.B wdwrite
+zapí¹e
+.I volbu
+a
+.I hodnotu
+do dané
+.I domény.
+.SH VOLBY
+.TP
+.B \-\-help
+vypí¹e nápovìdu
+.TP
+.B \-\-version
+vypí¹e èíslo verze
+.SH PROMÌNNÉ PROSTØEDÍ
+.IP GNUSTEP_USER_ROOT
+specifikuje cestu k adresáøi Defaults. Øetìzec "Defaults/" je pøidán k této
+promìnné, èím¾ se urèí umístìní databází. Jakmile promìnná není nastavená,
+tak její implicitní hodnota je "~/GNUstep"
+.SH SOUBORY
+Domény se nacházejí v GNUSTEP_USER_ROOT/Defaults/
+.SH PODÍVEJTE SE TAKÉ
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/wmaker.1x wm/doc/cs/wmaker.1x
--- ../work/WindowMaker-0.91.0/doc/cs/wmaker.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/wmaker.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,148 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH Window\ Maker 1x "Srpen 1998"
+.SH JMÉNO
+wmaker \- okenní mana¾er pro X11 se vzhledem NEXTSTEPu
+.SH SYNTAXE
+.B wmaker
+.I "[-volby]"
+.SH "POPIS"
+Window Maker je okenní mana¾er pro X11 se vzhledem NEXTSTEPu. Sna¾í se
+napodobit vzhled NeXTu jak jen to je mo¾né, ale v pøípadì potøeby tento
+trend nedodr¾uje.
+.SH "VOLBY"
+.TP
+.B \-\-no\-cpp
+zakázat preprocessing konfiguraèních souborù
+.TP
+.B \-\-no\-dock
+neotvírat Dok aplikací
+.TP
+.B \-\-no\-clip
+neotvírat Sponku pracovních ploch
+.TP
+.B \-display host:display.screen
+pou¾ít danou obrazovku.
+Na strojích s více obrazovkami bude Window Maker automaticky spravovat
+v¹echny obrazovky. Pokud chcete, aby Window Maker spravoval jen specifickou
+obrazovku, musíte zadat èíslo obrazovky pomocí argumentu pøíkazové øádky
+.B \-display.
+Napøíklad, pokud chcete, aby Window Maker spravoval jen obrazovku 1, spus»te ho
+takto:
+.B wmaker -display :0.1
+.TP
+.B \-\-version
+vypí¹e verzi a ukonèí se
+.TP
+.B \-\-visual\-id
+urèí èísla obrazového re¾imu. Spus»te
+.BR xdpyinfo (1x)
+pro seznam obrazových re¾imù dostupných na va¹em displeji.
+.TP
+.B \-\-help
+vypí¹e krátký pomocný text
+.PP
+.SH SOUBORY
+.TP
+.B ~/GNUstep/Defaults/WindowMaker
+v¹eobecné nastavení Window Makera.
+.TP
+.B ~/GNUstep/Defaults/WMState
+informace o Doku a Sponce. Neditujte za bìhu Window Makera. Bude
+pøepsaný.
+.TP
+.B ~/GNUstep/Defaults/WMRootMenu
+Obsahuje jméno souboru, z kterého se má naèíst hlavní menu nebo
+menu samotné ve formátu proplist.
+.TP
+.B ~/GNUstep/Defaults/WMWindowAttributes
+Atributy pro rùzné tøídy a instance aplikací. Pou¾ijte editor nastavení
+(stisknìte pravé tlaèítko my¹i na horní li¹tì aplikace, zvolte Atributy)
+namísto pøímého editování tohoto souboru. Je jen málo nastavení, která
+nejsou dostupná z editora nastavení.
+.TP
+.B /usr/share/WindowMaker/Defaults/
+V¹echny vý¹e uvedené soubory se NAèÍTAJÍ odtud. Pokud se je nepodaøí
+najít, kromì WMState, který se odtud ZKOPÍRUJE. Nezále¾í na tom, odkud
+jsou naèítané. Pokud je potøeba zapsat zmìnu konfigurace zpìt do tìchto
+souborù, zapí¹ou se do u¾ivatelských souborù.
+.TP
+.B ~/GNUstep/Library/WindowMaker/autostart
+Tento skript se automaticky vykoná pri startu Window Makera.
+.TP
+.B ~/GNUstep/Library/WindowMaker/exitscript
+Tento skript se automaticky vykoná bezprostøednì pøed ukonèením Window Makera.
+.B Poznámka:
+Kdy¾ potøebujete spustit z tohoto skriptu nìco, co vy¾aduje spu¹tìný X server,
+tak nepou¾ívejte na ukonèení Window Makera pøíkaz
+.I SHUTDOWN
+z hlavního menu. Jinak se mù¾e stát, ¾e X server se ukonèí døív ne¾ se vykoná
+tento skript.
+.TP
+.B ~/GNUstep/Library/WindowMaker/
+Soubor menu, jeho¾ název je uveden v souboru WMRootMenu, se hledá zde...
+.TP
+.B /etc/X11/WindowMaker/
+a zde, v tomto poøadí, pokud název není absolutní cesta.
+.TP
+.B ~/GNUstep/Library/WindowMaker/Pixmaps/
+Zde hledá Window Maker obrázky
+.TP
+.B ~/GNUstep/Library/WindowMaker/Backgrounds/
+Zde hledá Window Maker pozadí
+.TP
+.B ~/GNUstep/Library/WindowMaker/Styles/
+Zde hledá Window Maker soubory se styly (ne úplnì... vypadá to tak, ale
+i tak musíte zadat úplnou cestu. Je to jen vyhrazené místo, aby byly
+vìci pìknì uspoøádané)
+.TP
+.B ~/GNUstep/Library/WindowMaker/Themes/
+Zde hledá Window Maker soubory s tématy (viz. vý¹e)
+.TP
+.B /usr/share/WindowMaker/Pixmaps/
+Obrázky spoloèné pro celý systém se nacházejí zde...
+.TP
+.B /usr/share/WindowMaker/Pixmaps/
+a zde.
+.TP
+.B /usr/share/WindowMaker/Styles/
+Styly spoloèné pro celý systém se nacházejí zde
+.TP
+.B /usr/share/WindowMaker/Themes/
+A teï to zkuste sami... ;-)
+.SH PROMÌNNÉ PROSØEDÍ	
+.IP GNUSTEP_USER_ROOT
+specifikuje cestu k adresáøi Defaults. "Defaults/" je pøidán k této
+promìnné, èím¾ se urèí umístìní databází. Pokud promìnná není nastavená,
+ta její implicitní hodnota je "~/GNUstep"
+.IP GNUSTEP_LOCAL_ROOT
+specifikuje umístìní systémového \fBlokálního\fP GNUstep adresáøe (to
+je u¾iteèné v pøípadì, ¾e umístìní adresáøe spoleèného pro celý systém je
+ve skuteènosti spoleèné pro celou sí»). Kdy¾ je tato promìnná prázdna, pou¾ije
+se GNUSTEP_SYSTEM_ROOT.
+.IP GNUSTEP_SYSTEM_ROOT
+specifikuje umístìní systémového GNUstep adresáøe. Pokud je tato promìnná
+prázdna, tak její implicitní hodnota je /etc/GNUstep
+.SH PODÍVEJTE SE TAKÉ
+The Window Maker User Guide
+(U¾ivatelská pøíruèka Window Makera)
+.PP
+The Window Maker FAQ
+(Èasto kladené dotazy)
+.PP
+.BR X (1x),
+.BR wdwrite (1x),
+.BR wxcopy (1x),
+.BR geticonset (1x),
+.BR seticons (1x),
+.BR wmaker (1x),
+.BR wxpaste (1x),
+.BR getstyle (1x),
+.BR setstyle (1x),
+.BR wmsetbg (1x)
+.SH AUTOR
+Autoøi Window Makera jsou Alfredo K. Kojima <kojima@windowmaker.org>,
+Dan Pascu <dan@windowmaker.org> a mnoho dal¹ích lidí z celého svìta.
+.PP
+Tuto manuálovou stránku napsal Marcelo E. Magallon, <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/wmsetbg.1x wm/doc/cs/wmsetbg.1x
--- ../work/WindowMaker-0.91.0/doc/cs/wmsetbg.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/wmsetbg.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,67 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH wmsetbg 1x "Leden 1999"
+.SH JMÉNO
+wmsetbg \- nastaví pozadí hlavního okna v X11
+.SH SYNTAXE
+.B wmsetbg
+[-display] [--version] [--help] [{-b|--back-color} \fIbarva\fP]
+[{-t|--tile}|{-e|--center}|{-s|--scale}|{-a|--maxscale} \fIobrázek\fP]
+[{-d|--dither}|{-m|--match}] [-u|--update-wmaker]
+[{-D|--update-domain} \fIdoména\fP] [{-c|--colors} \fIcpc\fP]
+[{-p|--parse} \fItextura\fP] [{-w|--workspace} \fIpracovní plocha\fP]
+.SH POPIS
+.B wmsetbg
+naèítá daný
+.I obrázek
+(XPM, PNG, jpeg, Tiff, raw PPM) a vlo¾í ho do hlavního okna. Obrázek je mo¾né
+zvìt¹it, nebo ho opakovat aby vyplnil hlavní okno. Window Maker pou¾íva
+tento pøíkaz internì na nastavení pozadí pøi startu.
+.SH VOLBY
+.TP
+.B -a|--maxscale
+zvìt¹í daný \fIobrázek\fP pøi dodr¾ení pomìru stran
+.TP
+.B -e|--center
+vlo¾í \fIobrázek\fP do støedu okna
+.TP
+.B -t|--tile
+vytvoøí z \fIobrázku\fP dla¾dice
+.TP
+.B -s|--scale
+roztáhne daný \fIobrázek\fP (standartnì)
+.TP
+.B -d|--dither
+rezervuje barvy
+.TP
+.B -m|--match
+shodné barvy
+.TP
+.B -u|--update-wmaker
+zapí¹e zmìnu do databáze nastavení Window Makera
+.TP
+.B -D|--update-domain
+zapí¹e zmìnu do databáze \fIdomény\fP
+.TP
+.B -c|--colors
+pou¾íje urèitý poèet barev na kanál
+.TP
+.B -p|--parse
+parsuje danou \fItexturu\fP jako \fIproplist stylu textur\fP
+.TP
+.B -w|--workspace
+nastaví pozadí jen na dané \fIpracovní plo¹e\fP
+.TP
+.B \-\-help
+vypí¹e nápovìdu
+.TP
+.B \-\-version
+vypí¹e èíslo verze
+.SH PODÍVEJTE SE TAKÉ
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+wmsetbg napsal Dan Pascu <dan@windowmaker.org>
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>.
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/wxcopy.1x wm/doc/cs/wxcopy.1x
--- ../work/WindowMaker-0.91.0/doc/cs/wxcopy.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/wxcopy.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,45 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH wxcopy 1x "Záøí 1998"
+.SH JMÉNO
+wxcopy \- kopíruje standartní vstup do vyrovnávací pamìti
+.SH SYNOPSIS
+.B wxcopy
+[volby]
+[soubor]
+.SH POPIS
+.B wxcopy
+kopíruje standartní vstup nebo
+.I soubor
+do vyrovnávací pamìti. Jakmile není dáná nìjaká vyrovnávací pamì», tak se
+data kopírují do vyrovnávací pamìti 0 a ostaní vyrovnávací pamìti rotují,
+jestli¾e ov¹em existují. Pokud je dáná vyrovnávací pamì», tak se data
+kopírují do ní a nevykoná se ¾ádné rotování.
+.SH VOLBY
+.TP
+.B \-cutbuffer èíslo
+Specifikuje èíslo vyrovnávací pamìti, do které se budou kopírovat data.
+.TP
+.B \-display displej
+Data se budou kopírovat do vyrovnávací pamìti daného displeje/obrazovky.
+.TP
+.B \-nolimit
+Vypne normální limit velikosti dat 64kb, èím¾ se umo¾ní zvìt¹ování vyrovnávací
+pamìti podla potøeby.
+.TP
+.B \-clearselection
+Vyprázdní vlastníka PRIMARY selekce. V praxi to znamená, ¾e kdy¾ se pokusíte
+vlo¾it data prostøedním tlaèítkem (napøíklad), tak vlo¾í se data z vyrovnávací 
+pamìti 0, namísto pøípadného spu¹tìní selelekce my¹i.
+.PP
+.SH PODÍVEJTE SE TAKÉ
+.BR wxpaste (1x),
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>.
+.PP
+Kompatibilitu s binárními daty a \-nolimit implementoval Luke Kendall
+<luke@research.canon.com.au>.
diff -Naur ../work/WindowMaker-0.91.0/doc/cs/wxpaste.1x wm/doc/cs/wxpaste.1x
--- ../work/WindowMaker-0.91.0/doc/cs/wxpaste.1x	1970-01-01 03:00:00.000000000 +0300
+++ wm/doc/cs/wxpaste.1x	2002-02-18 16:50:30.000000000 +0300
@@ -0,0 +1,40 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.TH wxpaste 1x "Bøezen 1998"
+.SH JMÉNO
+wxpaste \- zapí¹e vyrovnávací pamì» na standardní výstup
+.SH SYNTAXE
+.B wxpaste
+[volby]
+.SH POPIS
+.B wxpaste
+vypí¹e obsah dané vyrovnávací pamìti na standardní výstup. Jakmile není
+zadána ¾ádná vyrovnávací pamì», tak se pou¾ije vyrovnávací pamì» 0.
+.PP
+.SH VOLBY
+.TP
+.B \-cutbuffer èíslo
+Data budou vlo¾ena z dané vyrovnávací pamìti namísto standardní 0.
+.TP
+.B \-display displej
+Data se budou kopírovat z vyrovnávací pamìti daného displeje/obrazovky.
+.TP
+.B \-selection [selekcia]
+Data budou kopírované z dané selekce. Jakmile se výbìr ze selekce nepodaøí,
+tak se pou¾ije vyrovnávací pamì». Implicitní hodnota pro selekci je PRIMARY.
+.PP
+.SH CHYBY
+\-selection musí být poslední volba. Syntaxe mù¾e být upravená, ale
+brání tomu ¹patná kompatibilita.
+
+Typy selekcí INCR a MULTIPLE nejsou podporované. Ve skuteènosti je
+podporovaný jen jednoduchý text, co¾ by mìlo staèit pro vìt¹inu u¾ivatelù
+takovéto jednoduché utilitky.
+.SH PODÍVEJTE SE TAKÉ
+.BR wxcopy (1x),
+.BR wmaker (1x)
+.SH AUTOR
+Autorem Window Makera je Alfredo K. Kojima <kojima@windowmaker.org>.
+.PP
+Tuto manuálovou stránku napsal Marcelo Magallon <mmagallo@debian.org>.
+.PP
+Do èe¹tiny pøelo¾il Jiøí Hnídek <jiri.hnidek@vslib.cz>.
diff -Naur ../work/WindowMaker-0.91.0/NEWS wm/NEWS
--- ../work/WindowMaker-0.91.0/NEWS	2004-10-26 08:09:57.000000000 +0400
+++ wm/NEWS	2004-11-04 12:10:09.000000000 +0300
@@ -2,6 +2,27 @@
 NEWS for veteran Window Maker users
 -----------------------------------
 
+--- 0.92.0
+
+GNUstep Installation Directory
+------------------------------
+
+WPrefs is now installed in /usr/local/bin and /usr/local/share by default.
+If you use GNUstep and want it to install in /usr/GNUstep/Applications,
+you may specify --with-gnustepdir=/usr/GNUstep
+If the GNUSTEP_LOCAL_ROOT environment variable is defined when configure is
+executed, it will be used (and you don't need to use --with-gnustepdir)
+
+
+--- 0.91.1
+
+To disable the panel shown during Alt-tabbing, you may put the following in
+~/GNUstep/Defaults/WindowMaker
+
+SwitchPanelImages= None;
+
+
+
 --- 0.91.0
 
 Alt-Tab Window Switching
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/bilinear.c wm/plugins/libwmfun/bilinear.c
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/bilinear.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/bilinear.c	2000-12-03 21:58:41.000000000 +0300
@@ -0,0 +1,85 @@
+/*
+ *  libwmfun - WindowMaker texture function library
+ *  Copyright (C) 1999 Tobias Gloth
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, 
+ *  USA.
+ */
+
+/*
+ * $Id: bilinear.c,v 1.1 2000/12/03 18:58:41 id Exp $
+ *
+ * $Log: bilinear.c,v $
+ * Revision 1.1  2000/12/03 18:58:41  id
+ * initiate plugins branch
+ *
+ * Revision 1.1.1.1  1999/02/21 17:16:47  gloth
+ * initial revision
+ *
+ */
+
+#include "generic.h"
+
+RImage *bilinear (int argc, char **argv, int width, int height,
+	int relief) {
+
+	int color[4][3];
+	RImage *image;
+	unsigned char *cptr;
+	int i, j, k;
+
+	argc--; argv++;
+
+	if (!start_image ("bilinear", argc, 4, 5, width, height, &image)) {
+		return (RImage *)0;
+	}
+
+	for (i=0; i<4; i++) {
+		if (!parse_color (argv[i], color[i])) {
+			error ("can't parse color: \"%s\"\n", argv[i]);
+			return 0;
+		}
+	}
+
+	cptr = image->data;
+    for (i=0; i<height; i++) {
+		int b = 0xff * i / height;
+		int t = 0xff - b;
+
+       	for (j=0; j<width; j++) {
+			int r = 0xff * j / width;
+			int l = 0xff - r;
+			int f[4];
+
+			f[0] = (l*t) >> 8;
+			f[1] = (r*t) >> 8;
+			f[2] = (l*b) >> 8;
+			f[3] = (r*b) >> 8;
+
+			for (k=0; k<3; k++) {
+				*cptr++ =
+					( f[0] * color[0][k] +
+					  f[1] * color[1][k] +
+					  f[2] * color[2][k] +
+					  f[3] * color[3][k] ) >> 8;
+			}
+
+			if (RRGBAFormat==image->format)
+				cptr++;
+		}
+	}
+	return image;
+}
+
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/fade.c wm/plugins/libwmfun/fade.c
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/fade.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/fade.c	2001-04-22 06:15:23.000000000 +0400
@@ -0,0 +1,128 @@
+/*
+ *  libwmfun - WindowMaker texture function library
+ *  Copyright (C) 1999 Tobias Gloth
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, 
+ *  USA.
+ */
+
+#include "getopt.h"
+#include <math.h>
+#include <stdlib.h>
+#include <time.h>
+
+#include "generic.h"
+
+RImage *fade (int argc, char **argv, int width, int height, int relief) {
+
+	int from[3] = { 0x00, 0x00, 0x00 };
+	int to[3] = { 0xff, 0xff, 0xff };
+	int *this, *last;
+	RImage *image;
+	unsigned char *cptr;
+	int i, j;
+	double factor, delta;
+
+	int c, done, option_index = 0;
+
+	optind = 1;
+	for (done=0; !done; ) {
+		static struct option long_options[] = {
+			{"from", 1, 0, 'f'},
+			{"to", 1, 0, 't'},
+			{0, 0, 0, 0}
+		};
+
+		c = getopt_long (argc, argv, "f:t:",
+			long_options, &option_index);
+		if (c == -1) {
+			break;
+		}
+
+		switch (c) {
+		case 'f':
+			if (!parse_color (optarg, from)) {
+				error ("invalid color: %s\n", optarg);
+				return 0;
+			}
+			break;
+		case 't':
+			if (!parse_color (optarg, to)) {
+				error ("invalid color: %s\n", optarg);
+				return 0;
+			}
+			break;
+		default:
+			done = 1;
+			break;
+		}
+	}
+
+	argc -= optind;
+	argv += optind;
+
+	if (!start_image ("fade", argc, 0, 1, width, height, &image)) {
+		return (RImage *)0;
+	}
+
+	this = (int *) malloc (width * sizeof (int));
+	last = (int *) malloc (width * sizeof (int));
+	if (!this || !last) {
+		RReleaseImage (image);
+		free (this);
+		free (last);
+		return (RImage *)0;
+	}
+
+	for (i=0; i<width; i++) {
+		this[i] = 255;
+	}
+
+	factor = pow (0.2, 1.0 / height);
+	delta = (factor < 0.5) ? 2.0 * factor : 2.0 * (1.0 - factor);
+
+	srand (time (0));
+
+	cptr = image->data;
+	for (j=0; j<height; j++) {
+		memcpy (last, this, width * sizeof (int));
+		for (i=0; i<width; i++) {
+			int output[3];
+			int k = i + random_int (3) - 1;
+			double f = factor + random_double (delta) - delta/2.0;
+
+			if (k < 0) {
+				k = 0;
+			}
+			if (k >= width) {
+				k = width - 1;
+			}
+
+			this[i] = (int) (f * last[k]);
+			interpolate_color (output, from, to, this[i]);
+			*cptr++ = output[0];
+			*cptr++ = output[1];
+			*cptr++ = output[2];
+			if (RRGBAFormat==image->format)
+				cptr++;
+		}
+	}
+
+	free (this);
+	free (last);
+
+	return image;
+}
+
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/generic.c wm/plugins/libwmfun/generic.c
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/generic.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/generic.c	2000-12-03 21:58:41.000000000 +0300
@@ -0,0 +1,116 @@
+/*
+ *  libwmfun - WindowMaker texture function library
+ *  Copyright (C) 1999 Tobias Gloth
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, 
+ *  USA.
+ */
+
+/*
+ * $Id: generic.c,v 1.1 2000/12/03 18:58:41 id Exp $
+ *
+ * $Log: generic.c,v $
+ * Revision 1.1  2000/12/03 18:58:41  id
+ * initiate plugins branch
+ *
+ * Revision 1.1.1.1  1999/02/21 17:16:47  gloth
+ * initial revision
+ *
+ */
+
+#include <stdarg.h>
+#include <stdio.h>
+#include <stdlib.h>
+
+#include "generic.h"
+
+static Display *dpy = 0;
+static Colormap cmap;
+
+void initWindowMaker (Display *d, Colormap c) {
+	if (!d) {
+		return;
+	}
+	dpy = d;
+	cmap = c;
+}
+
+void error (const char *format, ...) {
+	va_list args;
+	va_start (args, format);
+	vfprintf (stderr, format, args);
+	va_end (args);
+}
+
+int parse_color (const char *string, int *result) {
+	XColor color;
+
+	if (!XParseColor (dpy, cmap, string, &color)) {
+		return 0;
+	}
+	result[0] = color.red >> 8;
+	result[1] = color.green >> 8;
+	result[2] = color.blue >> 8;
+
+	return 1;
+}
+
+int parse_xcolor (const char *string, XColor *xcolor) {
+	if (!XParseColor (dpy, cmap, string, xcolor)) {
+        return 0;
+	}
+    if (!XAllocColor (dpy, cmap, xcolor)) {
+        return 0;
+    }
+
+	return 1;
+}
+
+void interpolate_color (int *t, const int *s0, const int *s1, int mix) {
+	t[0] = (mix * s0[0] + (255 - mix) * s1[0]) >> 8;
+	t[1] = (mix * s0[1] + (255 - mix) * s1[1]) >> 8;
+	t[2] = (mix * s0[2] + (255 - mix) * s1[2]) >> 8;
+}
+
+int random_int (int range) {
+	return rand() / (RAND_MAX / range + 1);
+}
+
+double random_double (double range) {
+	return ((double)rand()) / (((double)RAND_MAX) / range);
+}
+
+int start_image (const char *name,
+	int argc, int argc_min, int argc_max,
+	int width, int height, RImage **image) {
+
+	if (!dpy) {
+		error ("%s: library not initialized\n", name);
+		return 0;
+	}
+
+	if ((argc < argc_min) || (argc >= argc_max)) {
+		error ("%s: invalid number of parameters: \n", name, argc);
+		return 0;
+	}
+
+	*image = RCreateImage (width, height, 0);
+	if (!*image) {
+		error ("%s: can't create image\n", name);
+		return 0;
+	}
+	return 1;
+}
+
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/generic.h wm/plugins/libwmfun/generic.h
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/generic.h	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/generic.h	2001-01-07 05:59:11.000000000 +0300
@@ -0,0 +1,66 @@
+/*
+ *  libwmfun - WindowMaker texture function library
+ *  Copyright (C) 1999 Tobias Gloth
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, 
+ *  USA.
+ */
+
+/*
+ * $Id: generic.h,v 1.4 2001/01/07 02:59:11 id Exp $
+ *
+ * $Log: generic.h,v $
+ * Revision 1.4  2001/01/07 02:59:11  id
+ * remove stuffs
+ *
+ * Revision 1.3  2000/12/11 03:10:26  id
+ * changes related to plugin system & drawstring
+ *
+ * Revision 1.2  2000/12/03 22:18:20  id
+ * initiate
+ *
+ * Revision 1.1  2000/12/03 18:58:41  id
+ * initiate plugins branch
+ *
+ * Revision 1.1.1.1  1999/02/21 17:16:47  gloth
+ * initial revision
+ *
+ */
+
+#ifndef _GENERIC_H
+#define _GENERIC_H
+
+#include <X11/Xlib.h>
+
+#include <wraster.h>
+
+typedef struct _WPluginData {
+        int size;
+            void **array;
+} WPluginData;
+
+extern void initWindowMaker (Display *d, Colormap c);
+extern int start_image (const char *name, int argc, int argc_min, int argc_max,
+	int width, int height, RImage **image);
+extern void error (const char *format, ...);
+
+extern int parse_color (const char *string, int *result);
+extern void interpolate_color (int *t, const int *s0, const int *s1, int mix);
+
+extern int random_int (int range);
+extern double random_double (double range);
+
+
+#endif
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/getopt1.c wm/plugins/libwmfun/getopt1.c
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/getopt1.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/getopt1.c	2001-01-07 05:59:11.000000000 +0300
@@ -0,0 +1,173 @@
+/* getopt_long and getopt_long_only entry points for GNU getopt.
+   Copyright (C) 1987, 88, 89, 90, 91, 92, 1993
+	Free Software Foundation, Inc.
+
+   This program is free software; you can redistribute it and/or modify it
+   under the terms of the GNU General Public License as published by the
+   Free Software Foundation; either version 2, or (at your option) any
+   later version.
+
+   This program is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.  */
+
+
+#include "getopt.h"
+
+#ifndef __STDC__
+/* This is a separate conditional since some stdc systems
+   reject `defined (const)'.  */
+#ifndef const
+#define const
+#endif
+#endif
+
+#include <stdio.h>
+
+/* Comment out all this code if we are using the GNU C Library, and are not
+   actually compiling the library itself.  This code is part of the GNU C
+   Library, but also included in many other GNU distributions.  Compiling
+   and linking in this code is a waste when using the GNU C library
+   (especially if it is a shared library).  Rather than having every GNU
+   program understand `configure --with-gnu-libc' and omit the object files,
+   it is simpler to just do this in the source for each such file.  */
+
+#if defined (_LIBC) || !defined (__GNU_LIBRARY__)
+
+
+/* This needs to come after some library #include
+   to get __GNU_LIBRARY__ defined.  */
+#ifdef __GNU_LIBRARY__
+#include <stdlib.h>
+#else
+char *getenv ();
+#endif
+
+#ifndef	NULL
+#define NULL 0
+#endif
+
+int
+getopt_long (argc, argv, options, long_options, opt_index)
+     int argc;
+     char *const *argv;
+     const char *options;
+     const struct option *long_options;
+     int *opt_index;
+{
+  return _getopt_internal (argc, argv, options, long_options, opt_index, 0);
+}
+
+/* Like getopt_long, but '-' as well as '--' can indicate a long option.
+   If an option that starts with '-' (not '--') doesn't match a long option,
+   but does match a short option, it is parsed as a short option
+   instead.  */
+
+int
+getopt_long_only (argc, argv, options, long_options, opt_index)
+     int argc;
+     char *const *argv;
+     const char *options;
+     const struct option *long_options;
+     int *opt_index;
+{
+  return _getopt_internal (argc, argv, options, long_options, opt_index, 1);
+}
+
+
+#endif	/* _LIBC or not __GNU_LIBRARY__.  */
+
+#ifdef TEST
+
+#include <stdio.h>
+
+int
+main (argc, argv)
+     int argc;
+     char **argv;
+{
+  int c;
+  int digit_optind = 0;
+
+  while (1)
+    {
+      int this_option_optind = optind ? optind : 1;
+      int option_index = 0;
+      static struct option long_options[] =
+      {
+	{"add", 1, 0, 0},
+	{"append", 0, 0, 0},
+	{"delete", 1, 0, 0},
+	{"verbose", 0, 0, 0},
+	{"create", 0, 0, 0},
+	{"file", 1, 0, 0},
+	{0, 0, 0, 0}
+      };
+
+      c = getopt_long (argc, argv, "abc:d:0123456789",
+		       long_options, &option_index);
+      if (c == EOF)
+	break;
+
+      switch (c)
+	{
+	case 0:
+	  printf ("option %s", long_options[option_index].name);
+	  if (optarg)
+	    printf (" with arg %s", optarg);
+	  printf ("\n");
+	  break;
+
+	case '0':
+	case '1':
+	case '2':
+	case '3':
+	case '4':
+	case '5':
+	case '6':
+	case '7':
+	case '8':
+	case '9':
+	  if (digit_optind != 0 && digit_optind != this_option_optind)
+	    printf ("digits occur in two different argv-elements.\n");
+	  digit_optind = this_option_optind;
+	  printf ("option %c\n", c);
+	  break;
+
+	case 'a':
+	  printf ("option a\n");
+	  break;
+
+	case 'b':
+	  printf ("option b\n");
+	  break;
+
+	case 'c':
+	  printf ("option c with value `%s'\n", optarg);
+	  break;
+
+	case 'd':
+	  printf ("option d with value `%s'\n", optarg);
+	  break;
+
+	case '?':
+	  break;
+
+	default:
+	  printf ("?? getopt returned character code 0%o ??\n", c);
+	}
+    }
+
+  if (optind < argc)
+    {
+      printf ("non-option ARGV-elements: ");
+      while (optind < argc)
+	printf ("%s ", argv[optind++]);
+      printf ("\n");
+    }
+
+  exit (0);
+}
+
+#endif /* TEST */
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/getopt.c wm/plugins/libwmfun/getopt.c
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/getopt.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/getopt.c	2001-01-07 05:59:11.000000000 +0300
@@ -0,0 +1,744 @@
+/* Getopt for GNU.
+   NOTE: getopt is now part of the C library, so if you don't know what
+   "Keep this file name-space clean" means, talk to roland@gnu.ai.mit.edu
+   before changing it!
+
+   Copyright (C) 1987, 88, 89, 90, 91, 92, 93, 94
+   	Free Software Foundation, Inc.
+
+   This program is free software; you can redistribute it and/or modify it
+   under the terms of the GNU General Public License as published by the
+   Free Software Foundation; either version 2, or (at your option) any
+   later version.
+
+   This program is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.  */
+
+/* This tells Alpha OSF/1 not to define a getopt prototype in <stdio.h>.
+   Ditto for AIX 3.2 and <stdlib.h>.  */
+#ifndef _NO_PROTO
+#define _NO_PROTO
+#endif
+
+#ifndef __STDC__
+/* This is a separate conditional since some stdc systems
+   reject `defined (const)'.  */
+#ifndef const
+#define const
+#endif
+#endif
+
+#include <stdio.h>
+
+#ifdef HAVE_STRING_H
+#include <string.h>
+#endif
+
+/* Comment out all this code if we are using the GNU C Library, and are not
+   actually compiling the library itself.  This code is part of the GNU C
+   Library, but also included in many other GNU distributions.  Compiling
+   and linking in this code is a waste when using the GNU C library
+   (especially if it is a shared library).  Rather than having every GNU
+   program understand `configure --with-gnu-libc' and omit the object files,
+   it is simpler to just do this in the source for each such file.  */
+
+#if defined (_LIBC) || !defined (__GNU_LIBRARY__)
+
+
+/* This needs to come after some library #include
+   to get __GNU_LIBRARY__ defined.  */
+#ifdef	__GNU_LIBRARY__
+/* Don't include stdlib.h for non-GNU C libraries because some of them
+   contain conflicting prototypes for getopt.  */
+#include <stdlib.h>
+#endif	/* GNU C library.  */
+
+/* This version of `getopt' appears to the caller like standard Unix `getopt'
+   but it behaves differently for the user, since it allows the user
+   to intersperse the options with the other arguments.
+
+   As `getopt' works, it permutes the elements of ARGV so that,
+   when it is done, all the options precede everything else.  Thus
+   all application programs are extended to handle flexible argument order.
+
+   Setting the environment variable POSIXLY_CORRECT disables permutation.
+   Then the behavior is completely standard.
+
+   GNU application programs can use a third alternative mode in which
+   they can distinguish the relative order of options and other arguments.  */
+
+#include "getopt.h"
+
+/* For communication from `getopt' to the caller.
+   When `getopt' finds an option that takes an argument,
+   the argument value is returned here.
+   Also, when `ordering' is RETURN_IN_ORDER,
+   each non-option ARGV-element is returned here.  */
+
+char *optarg = NULL;
+
+/* Index in ARGV of the next element to be scanned.
+   This is used for communication to and from the caller
+   and for communication between successive calls to `getopt'.
+
+   On entry to `getopt', zero means this is the first call; initialize.
+
+   When `getopt' returns EOF, this is the index of the first of the
+   non-option elements that the caller should itself scan.
+
+   Otherwise, `optind' communicates from one call to the next
+   how much of ARGV has been scanned so far.  */
+
+/* XXX 1003.2 says this must be 1 before any call.  */
+int optind = 0;
+
+/* The next char to be scanned in the option-element
+   in which the last option character we returned was found.
+   This allows us to pick up the scan where we left off.
+
+   If this is zero, or a null string, it means resume the scan
+   by advancing to the next ARGV-element.  */
+
+static char *nextchar;
+
+/* Callers store zero here to inhibit the error message
+   for unrecognized options.  */
+
+int opterr = 1;
+
+/* Set to an option character which was unrecognized.
+   This must be initialized on some systems to avoid linking in the
+   system's own getopt implementation.  */
+
+int optopt = '?';
+
+/* Describe how to deal with options that follow non-option ARGV-elements.
+
+   If the caller did not specify anything,
+   the default is REQUIRE_ORDER if the environment variable
+   POSIXLY_CORRECT is defined, PERMUTE otherwise.
+
+   REQUIRE_ORDER means don't recognize them as options;
+   stop option processing when the first non-option is seen.
+   This is what Unix does.
+   This mode of operation is selected by either setting the environment
+   variable POSIXLY_CORRECT, or using `+' as the first character
+   of the list of option characters.
+
+   PERMUTE is the default.  We permute the contents of ARGV as we scan,
+   so that eventually all the non-options are at the end.  This allows options
+   to be given in any order, even with programs that were not written to
+   expect this.
+
+   RETURN_IN_ORDER is an option available to programs that were written
+   to expect options and other ARGV-elements in any order and that care about
+   the ordering of the two.  We describe each non-option ARGV-element
+   as if it were the argument of an option with character code 1.
+   Using `-' as the first character of the list of option characters
+   selects this mode of operation.
+
+   The special argument `--' forces an end of option-scanning regardless
+   of the value of `ordering'.  In the case of RETURN_IN_ORDER, only
+   `--' can cause `getopt' to return EOF with `optind' != ARGC.  */
+
+static enum
+{
+  REQUIRE_ORDER, PERMUTE, RETURN_IN_ORDER
+} ordering;
+
+/* Value of POSIXLY_CORRECT environment variable.  */
+static char *posixly_correct;
+
+#ifdef	__GNU_LIBRARY__
+/* We want to avoid inclusion of string.h with non-GNU libraries
+   because there are many ways it can cause trouble.
+   On some systems, it contains special magic macros that don't work
+   in GCC.  */
+#include <string.h>
+#define	my_index	strchr
+#else
+
+/* Avoid depending on library functions or files
+   whose names are inconsistent.  */
+
+char *getenv ();
+
+static char *
+my_index (str, chr)
+     const char *str;
+     int chr;
+{
+  while (*str)
+    {
+      if (*str == chr)
+	return (char *) str;
+      str++;
+    }
+  return 0;
+}
+
+/* If using GCC, we can safely declare strlen this way.
+   If not using GCC, it is ok not to declare it.  */
+#ifdef __GNUC__
+/* Note that Motorola Delta 68k R3V7 comes with GCC but not stddef.h.
+   That was relevant to code that was here before.  */
+#ifndef __STDC__
+/* gcc with -traditional declares the built-in strlen to return int,
+   and has done so at least since version 2.4.5. -- rms.  */
+extern int strlen (const char *);
+#endif /* not __STDC__ */
+#endif /* __GNUC__ */
+
+#endif /* not __GNU_LIBRARY__ */
+
+/* Handle permutation of arguments.  */
+
+/* Describe the part of ARGV that contains non-options that have
+   been skipped.  `first_nonopt' is the index in ARGV of the first of them;
+   `last_nonopt' is the index after the last of them.  */
+
+static int first_nonopt;
+static int last_nonopt;
+
+/* Exchange two adjacent subsequences of ARGV.
+   One subsequence is elements [first_nonopt,last_nonopt)
+   which contains all the non-options that have been skipped so far.
+   The other is elements [last_nonopt,optind), which contains all
+   the options processed since those non-options were skipped.
+
+   `first_nonopt' and `last_nonopt' are relocated so that they describe
+   the new indices of the non-options in ARGV after they are moved.  */
+
+static void
+exchange (argv)
+     char **argv;
+{
+  int bottom = first_nonopt;
+  int middle = last_nonopt;
+  int top = optind;
+  char *tem;
+
+  /* Exchange the shorter segment with the far end of the longer segment.
+     That puts the shorter segment into the right place.
+     It leaves the longer segment in the right place overall,
+     but it consists of two parts that need to be swapped next.  */
+
+  while (top > middle && middle > bottom)
+    {
+      if (top - middle > middle - bottom)
+	{
+	  /* Bottom segment is the short one.  */
+	  int len = middle - bottom;
+	  register int i;
+
+	  /* Swap it with the top part of the top segment.  */
+	  for (i = 0; i < len; i++)
+	    {
+	      tem = argv[bottom + i];
+	      argv[bottom + i] = argv[top - (middle - bottom) + i];
+	      argv[top - (middle - bottom) + i] = tem;
+	    }
+	  /* Exclude the moved bottom segment from further swapping.  */
+	  top -= len;
+	}
+      else
+	{
+	  /* Top segment is the short one.  */
+	  int len = top - middle;
+	  register int i;
+
+	  /* Swap it with the bottom part of the bottom segment.  */
+	  for (i = 0; i < len; i++)
+	    {
+	      tem = argv[bottom + i];
+	      argv[bottom + i] = argv[middle + i];
+	      argv[middle + i] = tem;
+	    }
+	  /* Exclude the moved top segment from further swapping.  */
+	  bottom += len;
+	}
+    }
+
+  /* Update records for the slots the non-options now occupy.  */
+
+  first_nonopt += (optind - last_nonopt);
+  last_nonopt = optind;
+}
+
+/* Initialize the internal data when the first call is made.  */
+
+static const char *
+_getopt_initialize (optstring)
+     const char *optstring;
+{
+  /* Start processing options with ARGV-element 1 (since ARGV-element 0
+     is the program name); the sequence of previously skipped
+     non-option ARGV-elements is empty.  */
+
+  first_nonopt = last_nonopt = optind = 1;
+
+  nextchar = NULL;
+
+  posixly_correct = getenv ("POSIXLY_CORRECT");
+
+  /* Determine how to handle the ordering of options and nonoptions.  */
+
+  if (optstring[0] == '-')
+    {
+      ordering = RETURN_IN_ORDER;
+      ++optstring;
+    }
+  else if (optstring[0] == '+')
+    {
+      ordering = REQUIRE_ORDER;
+      ++optstring;
+    }
+  else if (posixly_correct != NULL)
+    ordering = REQUIRE_ORDER;
+  else
+    ordering = PERMUTE;
+
+  return optstring;
+}
+
+/* Scan elements of ARGV (whose length is ARGC) for option characters
+   given in OPTSTRING.
+
+   If an element of ARGV starts with '-', and is not exactly "-" or "--",
+   then it is an option element.  The characters of this element
+   (aside from the initial '-') are option characters.  If `getopt'
+   is called repeatedly, it returns successively each of the option characters
+   from each of the option elements.
+
+   If `getopt' finds another option character, it returns that character,
+   updating `optind' and `nextchar' so that the next call to `getopt' can
+   resume the scan with the following option character or ARGV-element.
+
+   If there are no more option characters, `getopt' returns `EOF'.
+   Then `optind' is the index in ARGV of the first ARGV-element
+   that is not an option.  (The ARGV-elements have been permuted
+   so that those that are not options now come last.)
+
+   OPTSTRING is a string containing the legitimate option characters.
+   If an option character is seen that is not listed in OPTSTRING,
+   return '?' after printing an error message.  If you set `opterr' to
+   zero, the error message is suppressed but we still return '?'.
+
+   If a char in OPTSTRING is followed by a colon, that means it wants an arg,
+   so the following text in the same ARGV-element, or the text of the following
+   ARGV-element, is returned in `optarg'.  Two colons mean an option that
+   wants an optional arg; if there is text in the current ARGV-element,
+   it is returned in `optarg', otherwise `optarg' is set to zero.
+
+   If OPTSTRING starts with `-' or `+', it requests different methods of
+   handling the non-option ARGV-elements.
+   See the comments about RETURN_IN_ORDER and REQUIRE_ORDER, above.
+
+   Long-named options begin with `--' instead of `-'.
+   Their names may be abbreviated as long as the abbreviation is unique
+   or is an exact match for some defined option.  If they have an
+   argument, it follows the option name in the same ARGV-element, separated
+   from the option name by a `=', or else the in next ARGV-element.
+   When `getopt' finds a long-named option, it returns 0 if that option's
+   `flag' field is nonzero, the value of the option's `val' field
+   if the `flag' field is zero.
+
+   The elements of ARGV aren't really const, because we permute them.
+   But we pretend they're const in the prototype to be compatible
+   with other systems.
+
+   LONGOPTS is a vector of `struct option' terminated by an
+   element containing a name which is zero.
+
+   LONGIND returns the index in LONGOPT of the long-named option found.
+   It is only valid when a long-named option has been found by the most
+   recent call.
+
+   If LONG_ONLY is nonzero, '-' as well as '--' can introduce
+   long-named options.  */
+
+int
+_getopt_internal (argc, argv, optstring, longopts, longind, long_only)
+     int argc;
+     char *const *argv;
+     const char *optstring;
+     const struct option *longopts;
+     int *longind;
+     int long_only;
+{
+  optarg = NULL;
+
+  if (optind == 0)
+    optstring = _getopt_initialize (optstring);
+
+  if (nextchar == NULL || *nextchar == '\0')
+    {
+      /* Advance to the next ARGV-element.  */
+
+      if (ordering == PERMUTE)
+	{
+	  /* If we have just processed some options following some non-options,
+	     exchange them so that the options come first.  */
+
+	  if (first_nonopt != last_nonopt && last_nonopt != optind)
+	    exchange ((char **) argv);
+	  else if (last_nonopt != optind)
+	    first_nonopt = optind;
+
+	  /* Skip any additional non-options
+	     and extend the range of non-options previously skipped.  */
+
+	  while (optind < argc
+		 && (argv[optind][0] != '-' || argv[optind][1] == '\0'))
+	    optind++;
+	  last_nonopt = optind;
+	}
+
+      /* The special ARGV-element `--' means premature end of options.
+	 Skip it like a null option,
+	 then exchange with previous non-options as if it were an option,
+	 then skip everything else like a non-option.  */
+
+      if (optind != argc && !strcmp (argv[optind], "--"))
+	{
+	  optind++;
+
+	  if (first_nonopt != last_nonopt && last_nonopt != optind)
+	    exchange ((char **) argv);
+	  else if (first_nonopt == last_nonopt)
+	    first_nonopt = optind;
+	  last_nonopt = argc;
+
+	  optind = argc;
+	}
+
+      /* If we have done all the ARGV-elements, stop the scan
+	 and back over any non-options that we skipped and permuted.  */
+
+      if (optind == argc)
+	{
+	  /* Set the next-arg-index to point at the non-options
+	     that we previously skipped, so the caller will digest them.  */
+	  if (first_nonopt != last_nonopt)
+	    optind = first_nonopt;
+	  return EOF;
+	}
+
+      /* If we have come to a non-option and did not permute it,
+	 either stop the scan or describe it to the caller and pass it by.  */
+
+      if ((argv[optind][0] != '-' || argv[optind][1] == '\0'))
+	{
+	  if (ordering == REQUIRE_ORDER)
+	    return EOF;
+	  optarg = argv[optind++];
+	  return 1;
+	}
+
+      /* We have found another option-ARGV-element.
+	 Skip the initial punctuation.  */
+
+      nextchar = (argv[optind] + 1
+		  + (longopts != NULL && argv[optind][1] == '-'));
+    }
+
+  /* Decode the current option-ARGV-element.  */
+
+  /* Check whether the ARGV-element is a long option.
+
+     If long_only and the ARGV-element has the form "-f", where f is
+     a valid short option, don't consider it an abbreviated form of
+     a long option that starts with f.  Otherwise there would be no
+     way to give the -f short option.
+
+     On the other hand, if there's a long option "fubar" and
+     the ARGV-element is "-fu", do consider that an abbreviation of
+     the long option, just like "--fu", and not "-f" with arg "u".
+
+     This distinction seems to be the most useful approach.  */
+
+  if (longopts != NULL
+      && (argv[optind][1] == '-'
+	  || (long_only && (argv[optind][2] || !my_index (optstring, argv[optind][1])))))
+    {
+      char *nameend;
+      const struct option *p;
+      const struct option *pfound = NULL;
+      int exact = 0;
+      int ambig = 0;
+      int indfound;
+      int option_index;
+
+      for (nameend = nextchar; *nameend && *nameend != '='; nameend++)
+	/* Do nothing.  */ ;
+
+      /* Test all long options for either exact match
+	 or abbreviated matches.  */
+      for (p = longopts, option_index = 0; p->name; p++, option_index++)
+	if (!strncmp (p->name, nextchar, nameend - nextchar))
+	  {
+	    if (nameend - nextchar == (int) strlen (p->name))
+	      {
+		/* Exact match found.  */
+		pfound = p;
+		indfound = option_index;
+		exact = 1;
+		break;
+	      }
+	    else if (pfound == NULL)
+	      {
+		/* First nonexact match found.  */
+		pfound = p;
+		indfound = option_index;
+	      }
+	    else
+	      /* Second or later nonexact match found.  */
+	      ambig = 1;
+	  }
+
+      if (ambig && !exact)
+	{
+	  if (opterr)
+	    fprintf (stderr, "%s: option `%s' is ambiguous\n",
+		     argv[0], argv[optind]);
+	  nextchar += strlen (nextchar);
+	  optind++;
+	  return '?';
+	}
+
+      if (pfound != NULL)
+	{
+	  option_index = indfound;
+	  optind++;
+	  if (*nameend)
+	    {
+	      /* Don't test has_arg with >, because some C compilers don't
+		 allow it to be used on enums.  */
+	      if (pfound->has_arg)
+		optarg = nameend + 1;
+	      else
+		{
+		  if (opterr)
+		    {
+		      if (argv[optind - 1][1] == '-')
+			/* --option */
+			fprintf (stderr,
+				 "%s: option `--%s' doesn't allow an argument\n",
+				 argv[0], pfound->name);
+		      else
+			/* +option or -option */
+			fprintf (stderr,
+			     "%s: option `%c%s' doesn't allow an argument\n",
+			     argv[0], argv[optind - 1][0], pfound->name);
+		    }
+		  nextchar += strlen (nextchar);
+		  return '?';
+		}
+	    }
+	  else if (pfound->has_arg == 1)
+	    {
+	      if (optind < argc)
+		optarg = argv[optind++];
+	      else
+		{
+		  if (opterr)
+		    fprintf (stderr, "%s: option `%s' requires an argument\n",
+			     argv[0], argv[optind - 1]);
+		  nextchar += strlen (nextchar);
+		  return optstring[0] == ':' ? ':' : '?';
+		}
+	    }
+	  nextchar += strlen (nextchar);
+	  if (longind != NULL)
+	    *longind = option_index;
+	  if (pfound->flag)
+	    {
+	      *(pfound->flag) = pfound->val;
+	      return 0;
+	    }
+	  return pfound->val;
+	}
+
+      /* Can't find it as a long option.  If this is not getopt_long_only,
+	 or the option starts with '--' or is not a valid short
+	 option, then it's an error.
+	 Otherwise interpret it as a short option.  */
+      if (!long_only || argv[optind][1] == '-'
+	  || my_index (optstring, *nextchar) == NULL)
+	{
+	  if (opterr)
+	    {
+	      if (argv[optind][1] == '-')
+		/* --option */
+		fprintf (stderr, "%s: unrecognized option `--%s'\n",
+			 argv[0], nextchar);
+	      else
+		/* +option or -option */
+		fprintf (stderr, "%s: unrecognized option `%c%s'\n",
+			 argv[0], argv[optind][0], nextchar);
+	    }
+	  nextchar = (char *) "";
+	  optind++;
+	  return '?';
+	}
+    }
+
+  /* Look at and handle the next short option-character.  */
+
+  {
+    char c = *nextchar++;
+    char *temp = my_index (optstring, c);
+
+    /* Increment `optind' when we start to process its last character.  */
+    if (*nextchar == '\0')
+      ++optind;
+
+    if (temp == NULL || c == ':')
+      {
+	if (opterr)
+	  {
+	    if (posixly_correct)
+	      /* 1003.2 specifies the format of this message.  */
+	      fprintf (stderr, "%s: illegal option -- %c\n", argv[0], c);
+	    else
+	      fprintf (stderr, "%s: invalid option -- %c\n", argv[0], c);
+	  }
+	optopt = c;
+	return '?';
+      }
+    if (temp[1] == ':')
+      {
+	if (temp[2] == ':')
+	  {
+	    /* This is an option that accepts an argument optionally.  */
+	    if (*nextchar != '\0')
+	      {
+		optarg = nextchar;
+		optind++;
+	      }
+	    else
+	      optarg = NULL;
+	    nextchar = NULL;
+	  }
+	else
+	  {
+	    /* This is an option that requires an argument.  */
+	    if (*nextchar != '\0')
+	      {
+		optarg = nextchar;
+		/* If we end this ARGV-element by taking the rest as an arg,
+		   we must advance to the next element now.  */
+		optind++;
+	      }
+	    else if (optind == argc)
+	      {
+		if (opterr)
+		  {
+		    /* 1003.2 specifies the format of this message.  */
+		    fprintf (stderr, "%s: option requires an argument -- %c\n",
+			     argv[0], c);
+		  }
+		optopt = c;
+		if (optstring[0] == ':')
+		  c = ':';
+		else
+		  c = '?';
+	      }
+	    else
+	      /* We already incremented `optind' once;
+		 increment it again when taking next ARGV-elt as argument.  */
+	      optarg = argv[optind++];
+	    nextchar = NULL;
+	  }
+      }
+    return c;
+  }
+}
+
+int
+getopt (argc, argv, optstring)
+     int argc;
+     char *const *argv;
+     const char *optstring;
+{
+  return _getopt_internal (argc, argv, optstring,
+			   (const struct option *) 0,
+			   (int *) 0,
+			   0);
+}
+
+#endif	/* _LIBC or not __GNU_LIBRARY__.  */
+
+#ifdef TEST
+
+/* Compile with -DTEST to make an executable for use in testing
+   the above definition of `getopt'.  */
+
+int
+main (argc, argv)
+     int argc;
+     char **argv;
+{
+  int c;
+  int digit_optind = 0;
+
+  while (1)
+    {
+      int this_option_optind = optind ? optind : 1;
+
+      c = getopt (argc, argv, "abc:d:0123456789");
+      if (c == EOF)
+	break;
+
+      switch (c)
+	{
+	case '0':
+	case '1':
+	case '2':
+	case '3':
+	case '4':
+	case '5':
+	case '6':
+	case '7':
+	case '8':
+	case '9':
+	  if (digit_optind != 0 && digit_optind != this_option_optind)
+	    printf ("digits occur in two different argv-elements.\n");
+	  digit_optind = this_option_optind;
+	  printf ("option %c\n", c);
+	  break;
+
+	case 'a':
+	  printf ("option a\n");
+	  break;
+
+	case 'b':
+	  printf ("option b\n");
+	  break;
+
+	case 'c':
+	  printf ("option c with value `%s'\n", optarg);
+	  break;
+
+	case '?':
+	  break;
+
+	default:
+	  printf ("?? getopt returned character code 0%o ??\n", c);
+	}
+    }
+
+  if (optind < argc)
+    {
+      printf ("non-option ARGV-elements: ");
+      while (optind < argc)
+	printf ("%s ", argv[optind++]);
+      printf ("\n");
+    }
+
+  exit (0);
+}
+
+#endif /* TEST */
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/getopt.h wm/plugins/libwmfun/getopt.h
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/getopt.h	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/getopt.h	2000-12-03 21:58:41.000000000 +0300
@@ -0,0 +1,125 @@
+/* Declarations for getopt.
+   Copyright (C) 1989, 1990, 1991, 1992, 1993 Free Software Foundation, Inc.
+
+   This program is free software; you can redistribute it and/or modify it
+   under the terms of the GNU General Public License as published by the
+   Free Software Foundation; either version 2, or (at your option) any
+   later version.
+
+   This program is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.  */
+
+#ifndef _GETOPT_H
+#define _GETOPT_H 1
+
+#ifdef	__cplusplus
+extern "C" {
+#endif
+
+/* For communication from `getopt' to the caller.
+   When `getopt' finds an option that takes an argument,
+   the argument value is returned here.
+   Also, when `ordering' is RETURN_IN_ORDER,
+   each non-option ARGV-element is returned here.  */
+
+extern char *optarg;
+
+/* Index in ARGV of the next element to be scanned.
+   This is used for communication to and from the caller
+   and for communication between successive calls to `getopt'.
+
+   On entry to `getopt', zero means this is the first call; initialize.
+
+   When `getopt' returns EOF, this is the index of the first of the
+   non-option elements that the caller should itself scan.
+
+   Otherwise, `optind' communicates from one call to the next
+   how much of ARGV has been scanned so far.  */
+
+extern int optind;
+
+/* Callers store zero here to inhibit the error message `getopt' prints
+   for unrecognized options.  */
+
+extern int opterr;
+
+/* Set to an option character which was unrecognized.  */
+
+extern int optopt;
+
+/* Describe the long-named options requested by the application.
+   The LONG_OPTIONS argument to getopt_long or getopt_long_only is a vector
+   of `struct option' terminated by an element containing a name which is
+   zero.
+
+   The field `has_arg' is:
+   no_argument		(or 0) if the option does not take an argument,
+   required_argument	(or 1) if the option requires an argument,
+   optional_argument 	(or 2) if the option takes an optional argument.
+
+   If the field `flag' is not NULL, it points to a variable that is set
+   to the value given in the field `val' when the option is found, but
+   left unchanged if the option is not found.
+
+   To have a long-named option do something other than set an `int' to
+   a compiled-in constant, such as set a value from `optarg', set the
+   option's `flag' field to zero and its `val' field to a nonzero
+   value (the equivalent single-letter option character, if there is
+   one).  For long options that have a zero `flag' field, `getopt'
+   returns the contents of the `val' field.  */
+
+struct option
+{
+#if	__STDC__
+  const char *name;
+#else
+  char *name;
+#endif
+  /* has_arg can't be an enum because some compilers complain about
+     type mismatches in all the code that assumes it is an int.  */
+  int has_arg;
+  int *flag;
+  int val;
+};
+
+/* Names for the values of the `has_arg' field of `struct option'.  */
+
+#define	no_argument		0
+#define required_argument	1
+#define optional_argument	2
+
+#if __STDC__
+#if defined(__GNU_LIBRARY__)
+/* Many other libraries have conflicting prototypes for getopt, with
+   differences in the consts, in stdlib.h.  To avoid compilation
+   errors, only prototype getopt for the GNU C library.  */
+extern int getopt (int argc, char *const *argv, const char *shortopts);
+#else /* not __GNU_LIBRARY__ */
+extern int getopt ();
+#endif /* not __GNU_LIBRARY__ */
+extern int getopt_long (int argc, char *const *argv, const char *shortopts,
+		        const struct option *longopts, int *longind);
+extern int getopt_long_only (int argc, char *const *argv,
+			     const char *shortopts,
+		             const struct option *longopts, int *longind);
+
+/* Internal only.  Users should not call this directly.  */
+extern int _getopt_internal (int argc, char *const *argv,
+			     const char *shortopts,
+		             const struct option *longopts, int *longind,
+			     int long_only);
+#else /* not __STDC__ */
+extern int getopt ();
+extern int getopt_long ();
+extern int getopt_long_only ();
+
+extern int _getopt_internal ();
+#endif /* not __STDC__ */
+
+#ifdef	__cplusplus
+}
+#endif
+
+#endif /* _GETOPT_H */
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/Makefile wm/plugins/libwmfun/Makefile
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/Makefile	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/Makefile	2001-07-27 00:15:10.000000000 +0400
@@ -0,0 +1,340 @@
+# Generated automatically from Makefile.in by configure.
+# Makefile.in generated automatically by automake 1.4 from Makefile.am
+
+# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+
+SHELL = /bin/sh
+
+srcdir = .
+top_srcdir = ..
+prefix = /usr/local
+exec_prefix = ${prefix}
+
+bindir = ${exec_prefix}/bin
+sbindir = ${exec_prefix}/sbin
+libexecdir = ${exec_prefix}/libexec
+datadir = ${prefix}/share
+sysconfdir = ${prefix}/etc
+sharedstatedir = ${prefix}/com
+localstatedir = ${prefix}/var
+libdir = ${exec_prefix}/lib
+infodir = ${prefix}/info
+mandir = ${prefix}/man
+includedir = ${prefix}/include
+oldincludedir = /usr/include
+
+DESTDIR =
+
+pkgdatadir = $(datadir)/libwmfun
+pkglibdir = $(libdir)/libwmfun
+pkgincludedir = $(includedir)/libwmfun
+
+top_builddir = ..
+
+ACLOCAL = aclocal
+AUTOCONF = autoconf
+AUTOMAKE = automake
+AUTOHEADER = autoheader
+
+INSTALL = /usr/bin/ginstall -c
+INSTALL_PROGRAM = ${INSTALL} $(AM_INSTALL_PROGRAM_FLAGS)
+INSTALL_DATA = ${INSTALL} -m 644
+INSTALL_SCRIPT = ${INSTALL_PROGRAM}
+transform = s,x,x,
+
+NORMAL_INSTALL = :
+PRE_INSTALL = :
+POST_INSTALL = :
+NORMAL_UNINSTALL = :
+PRE_UNINSTALL = :
+POST_UNINSTALL = :
+host_alias = i686-pc-linux
+host_triplet = i686-pc-linux-gnu
+AS = @AS@
+CC = gcc
+DLLTOOL = @DLLTOOL@
+LIBTOOL = $(SHELL) $(top_builddir)/libtool
+LN_S = ln -s
+MAKEINFO = makeinfo
+OBJDUMP = @OBJDUMP@
+PACKAGE = libwmfun
+RANLIB = ranlib
+VERSION = 0.0.4
+
+lib_LTLIBRARIES = libwmfun.la
+
+libwmfun_la_LDFLAGS = -version-info 1:0:1
+
+libwmfun_la_SOURCES = bilinear.c 		fade.c 		generic.c 		generic.h 		getopt.c 		getopt.h 		getopt1.c 		wave.c
+
+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = config.h
+CONFIG_CLEAN_FILES = 
+LTLIBRARIES =  $(lib_LTLIBRARIES)
+
+
+DEFS = -DHAVE_CONFIG_H -I. -I$(srcdir) -I.
+CPPFLAGS = 
+LDFLAGS = 
+LIBS = 
+libwmfun_la_LIBADD = 
+libwmfun_la_OBJECTS =  bilinear.lo fade.lo generic.lo getopt.lo \
+getopt1.lo wave.lo
+CFLAGS = -g -O2
+COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+CCLD = $(CC)
+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@
+DIST_COMMON =  ./stamp-h.in Makefile.am Makefile.in config.h.in
+
+
+DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
+
+TAR = tar
+GZIP_ENV = --best
+SOURCES = $(libwmfun_la_SOURCES)
+OBJECTS = $(libwmfun_la_OBJECTS)
+
+all: all-redirect
+.SUFFIXES:
+.SUFFIXES: .S .c .lo .o .s
+$(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps libwmfun/Makefile
+
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+	cd $(top_builddir) \
+	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
+
+
+config.h: stamp-h
+	@if test ! -f $@; then \
+		rm -f stamp-h; \
+		$(MAKE) stamp-h; \
+	else :; fi
+stamp-h: $(srcdir)/config.h.in $(top_builddir)/config.status
+	cd $(top_builddir) \
+	  && CONFIG_FILES= CONFIG_HEADERS=libwmfun/config.h \
+	     $(SHELL) ./config.status
+	@echo timestamp > stamp-h 2> /dev/null
+$(srcdir)/config.h.in: $(srcdir)/stamp-h.in
+	@if test ! -f $@; then \
+		rm -f $(srcdir)/stamp-h.in; \
+		$(MAKE) $(srcdir)/stamp-h.in; \
+	else :; fi
+$(srcdir)/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) 
+	cd $(top_srcdir) && $(AUTOHEADER)
+	@echo timestamp > $(srcdir)/stamp-h.in 2> /dev/null
+
+mostlyclean-hdr:
+
+clean-hdr:
+
+distclean-hdr:
+	-rm -f config.h
+
+maintainer-clean-hdr:
+
+mostlyclean-libLTLIBRARIES:
+
+clean-libLTLIBRARIES:
+	-test -z "$(lib_LTLIBRARIES)" || rm -f $(lib_LTLIBRARIES)
+
+distclean-libLTLIBRARIES:
+
+maintainer-clean-libLTLIBRARIES:
+
+install-libLTLIBRARIES: $(lib_LTLIBRARIES)
+	@$(NORMAL_INSTALL)
+	$(mkinstalldirs) $(DESTDIR)$(libdir)
+	@list='$(lib_LTLIBRARIES)'; for p in $$list; do \
+	  if test -f $$p; then \
+	    echo "$(LIBTOOL)  --mode=install $(INSTALL) $$p $(DESTDIR)$(libdir)/$$p"; \
+	    $(LIBTOOL)  --mode=install $(INSTALL) $$p $(DESTDIR)$(libdir)/$$p; \
+	  else :; fi; \
+	done
+
+uninstall-libLTLIBRARIES:
+	@$(NORMAL_UNINSTALL)
+	list='$(lib_LTLIBRARIES)'; for p in $$list; do \
+	  $(LIBTOOL)  --mode=uninstall rm -f $(DESTDIR)$(libdir)/$$p; \
+	done
+
+.c.o:
+	$(COMPILE) -c $<
+
+.s.o:
+	$(COMPILE) -c $<
+
+.S.o:
+	$(COMPILE) -c $<
+
+mostlyclean-compile:
+	-rm -f *.o core *.core
+
+clean-compile:
+
+distclean-compile:
+	-rm -f *.tab.c
+
+maintainer-clean-compile:
+
+.c.lo:
+	$(LIBTOOL) --mode=compile $(COMPILE) -c $<
+
+.s.lo:
+	$(LIBTOOL) --mode=compile $(COMPILE) -c $<
+
+.S.lo:
+	$(LIBTOOL) --mode=compile $(COMPILE) -c $<
+
+mostlyclean-libtool:
+	-rm -f *.lo
+
+clean-libtool:
+	-rm -rf .libs _libs
+
+distclean-libtool:
+
+maintainer-clean-libtool:
+
+libwmfun.la: $(libwmfun_la_OBJECTS) $(libwmfun_la_DEPENDENCIES)
+	$(LINK) -rpath $(libdir) $(libwmfun_la_LDFLAGS) $(libwmfun_la_OBJECTS) $(libwmfun_la_LIBADD) $(LIBS)
+
+tags: TAGS
+
+ID: $(HEADERS) $(SOURCES) $(LISP)
+	list='$(SOURCES) $(HEADERS)'; \
+	unique=`for i in $$list; do echo $$i; done | \
+	  awk '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	here=`pwd` && cd $(srcdir) \
+	  && mkid -f$$here/ID $$unique $(LISP)
+
+TAGS:  $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) $(LISP)
+	tags=; \
+	here=`pwd`; \
+	list='$(SOURCES) $(HEADERS)'; \
+	unique=`for i in $$list; do echo $$i; done | \
+	  awk '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	test -z "$(ETAGS_ARGS)config.h.in$$unique$(LISP)$$tags" \
+	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags config.h.in $$unique $(LISP) -o $$here/TAGS)
+
+mostlyclean-tags:
+
+clean-tags:
+
+distclean-tags:
+	-rm -f TAGS ID
+
+maintainer-clean-tags:
+
+distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
+
+subdir = libwmfun
+
+distdir: $(DISTFILES)
+	@for file in $(DISTFILES); do \
+	  d=$(srcdir); \
+	  if test -d $$d/$$file; then \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
+	    || cp -p $$d/$$file $(distdir)/$$file || :; \
+	  fi; \
+	done
+info-am:
+info: info-am
+dvi-am:
+dvi: dvi-am
+check-am: all-am
+check: check-am
+installcheck-am:
+installcheck: installcheck-am
+all-recursive-am: config.h
+	$(MAKE) $(AM_MAKEFLAGS) all-recursive
+
+install-exec-am: install-libLTLIBRARIES
+install-exec: install-exec-am
+
+install-data-am:
+install-data: install-data-am
+
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+install: install-am
+uninstall-am: uninstall-libLTLIBRARIES
+uninstall: uninstall-am
+all-am: Makefile $(LTLIBRARIES) config.h
+all-redirect: all-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
+installdirs:
+	$(mkinstalldirs)  $(DESTDIR)$(libdir)
+
+
+mostlyclean-generic:
+
+clean-generic:
+
+distclean-generic:
+	-rm -f Makefile $(CONFIG_CLEAN_FILES)
+	-rm -f config.cache config.log stamp-h stamp-h[0-9]*
+
+maintainer-clean-generic:
+mostlyclean-am:  mostlyclean-hdr mostlyclean-libLTLIBRARIES \
+		mostlyclean-compile mostlyclean-libtool \
+		mostlyclean-tags mostlyclean-generic
+
+mostlyclean: mostlyclean-am
+
+clean-am:  clean-hdr clean-libLTLIBRARIES clean-compile clean-libtool \
+		clean-tags clean-generic mostlyclean-am
+
+clean: clean-am
+
+distclean-am:  distclean-hdr distclean-libLTLIBRARIES distclean-compile \
+		distclean-libtool distclean-tags distclean-generic \
+		clean-am
+	-rm -f libtool
+
+distclean: distclean-am
+
+maintainer-clean-am:  maintainer-clean-hdr \
+		maintainer-clean-libLTLIBRARIES \
+		maintainer-clean-compile maintainer-clean-libtool \
+		maintainer-clean-tags maintainer-clean-generic \
+		distclean-am
+	@echo "This command is intended for maintainers to use;"
+	@echo "it deletes files that may require special tools to rebuild."
+
+maintainer-clean: maintainer-clean-am
+
+.PHONY: mostlyclean-hdr distclean-hdr clean-hdr maintainer-clean-hdr \
+mostlyclean-libLTLIBRARIES distclean-libLTLIBRARIES \
+clean-libLTLIBRARIES maintainer-clean-libLTLIBRARIES \
+uninstall-libLTLIBRARIES install-libLTLIBRARIES mostlyclean-compile \
+distclean-compile clean-compile maintainer-clean-compile \
+mostlyclean-libtool distclean-libtool clean-libtool \
+maintainer-clean-libtool tags mostlyclean-tags distclean-tags \
+clean-tags maintainer-clean-tags distdir info-am info dvi-am dvi check \
+check-am installcheck-am installcheck all-recursive-am install-exec-am \
+install-exec install-data-am install-data install-am install \
+uninstall-am uninstall all-redirect all-am all installdirs \
+mostlyclean-generic distclean-generic clean-generic \
+maintainer-clean-generic clean mostlyclean distclean maintainer-clean
+
+
+# Tell versions [3.59,3.63) of GNU make to not export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
diff -Naur ../work/WindowMaker-0.91.0/plugins/libwmfun/wave.c wm/plugins/libwmfun/wave.c
--- ../work/WindowMaker-0.91.0/plugins/libwmfun/wave.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/plugins/libwmfun/wave.c	2000-12-03 21:58:41.000000000 +0300
@@ -0,0 +1,134 @@
+/*
+ *  libwmfun - WindowMaker texture function library
+ *  Copyright (C) 1999 Tobias Gloth
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, 
+ *  USA.
+ */
+
+/*
+ * $Id: wave.c,v 1.1 2000/12/03 18:58:41 id Exp $
+ *
+ * $Log: wave.c,v $
+ * Revision 1.1  2000/12/03 18:58:41  id
+ * initiate plugins branch
+ *
+ * Revision 1.1.1.1  1999/02/21 17:16:47  gloth
+ * initial revision
+ *
+ */
+
+#include "getopt.h"
+#include <math.h>
+#include <stdlib.h>
+#include <time.h>
+#include "generic.h"
+
+RImage *waves (int argc, char **argv, int width, int height, int relief) {
+
+	int i, j, k, done, sine [256];
+	int from[3] = { 0x00, 0x00, 0x00 };
+	int to[3] = { 0xff, 0xff, 0xff };
+	int layers, range, dx[1000], dy[1000];
+	RImage *image;
+	unsigned char *cptr;
+
+	int option_index = 0;
+	int c;
+
+	optind = 1;
+	for (done=0; !done; ) {
+		static struct option long_options[] = {
+			{"from", 1, 0, 'f'},
+			{"to", 1, 0, 't'},
+			{0, 0, 0, 0}
+		};
+
+		c = getopt_long (argc, argv, "f:t:",
+			long_options, &option_index);
+		if (c == -1) {
+			break;
+		}
+
+		switch (c) {
+		case 'f':
+			if (!parse_color (optarg, from)) {
+				error ("invalid color: %s\n", optarg);
+				return 0;
+			}
+			break;
+		case 't':
+			if (!parse_color (optarg, to)) {
+				error ("invalid color: %s\n", optarg);
+				return 0;
+			}
+			break;
+		default:
+			done = 1;
+			break;
+		}
+	}
+
+	argc -= optind;
+	argv += optind;
+
+	if (!start_image ("waves", argc, 2, 3, width, height, &image)) {
+		return (RImage *)0;
+	}
+
+	layers = atoi (argv[0]);
+	range = atoi (argv[1]);
+
+	if (layers <= 0) {
+		layers = 1;
+	}
+	if (layers > 256) {
+		layers = 256;
+	}
+
+	if (range <= 0) {
+		range = 1;
+	}
+
+	for (i=0; i<256; i++) {
+		sine[i] = (int) (127.0 * sin (2.0 * M_PI * i / 256)) + 128;
+	}
+
+	srand (time (0));
+
+	for (i=0; i<layers; i++) {
+		dx[i] = random_int (range) - range / 2;
+		dy[i] = random_int (range) - range / 2;
+	}
+
+	cptr = image->data;
+	for (i=0; i<height; i++) {
+		for (j=0; j<width; j++) {
+			int output[3], value = 0;
+			for (k=0; k<layers; k++) {
+				value += sine[(j*dx[k]+i*dy[k]) & 255];
+			}
+			interpolate_color (output, from, to, value / layers);
+			*cptr++ = output[0];
+			*cptr++ = output[1];
+			*cptr++ = output[2];
+			if ( RRGBAFormat==image->format )
+				cptr++;
+		}
+	}
+
+	return image;
+}
+
diff -Naur ../work/WindowMaker-0.91.0/po/ja.po wm/po/ja.po
--- ../work/WindowMaker-0.91.0/po/ja.po	2004-10-26 07:52:38.000000000 +0400
+++ wm/po/ja.po	2004-10-27 10:00:10.000000000 +0400
@@ -6,38 +6,39 @@
 # modified by Takeo Hashimoto <hashimototakeo@mac.com>
 # collaborated with members in wmaker-jp-ML and Project Vine
 #
-# Last Update: version 0.65.1
+# Last Update: for version 0.91.0
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: WindowMaker 0.65.1\n"
-"POT-Creation-Date: 2001-09-08 12:31+0900\n"
-"PO-Revision-Date: 2001-09-14 02:40+0900\n"
+"Project-Id-Version: WindowMaker 0.90.0\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2004-10-26 21:50+0900\n"
+"PO-Revision-Date: 2004-10-26 22:00+0900\n"
 "Last-Translator: Takeo Hashimoto <hashimototakeo@mac.com>\n"
 "Language-Team: Japanese \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8-bit\n"
+"Content-Transfer-Encoding: 8bit\n"
 
-#: ../src/appicon.c:542 ../src/dialog.c:224 ../src/dock.c:3244
-#: ../src/dockedapp.c:212 ../src/main.c:256 ../src/rootmenu.c:1815
-#: ../src/winspector.c:388 ../src/winspector.c:405
+#: ../src/appicon.c:415 ../src/dialog.c:295 ../src/dock.c:3335
+#: ../src/dockedapp.c:231 ../src/main.c:271 ../src/rootmenu.c:1854
+#: ../src/winspector.c:394 ../src/winspector.c:411
 msgid "Error"
 msgstr "ã¨ã©ã¼"
 
-#: ../src/appicon.c:543
+#: ../src/appicon.c:416
 msgid "Could not open specified icon file"
-msgstr "æå®ãããã¢ã¤ã³ã³ãã¡ã¤ã«ãéãã¾ãã"
+msgstr "æå®ã®ã¢ã¤ã³ã³ãã¡ã¤ã«ãéãã¾ãã"
 
-#: ../src/appicon.c:544 ../src/dialog.c:121 ../src/dialog.c:224
-#: ../src/dialog.c:672 ../src/dialog.c:1735 ../src/dock.c:493
-#: ../src/dock.c:501 ../src/dock.c:525 ../src/dock.c:3245
-#: ../src/dockedapp.c:213 ../src/dockedapp.c:371 ../src/main.c:256
-#: ../src/rootmenu.c:1819 ../src/winspector.c:389 ../src/winspector.c:406
+#: ../src/appicon.c:417 ../src/dialog.c:192 ../src/dialog.c:295
+#: ../src/dialog.c:725 ../src/dialog.c:1796 ../src/dock.c:515
+#: ../src/dock.c:523 ../src/dock.c:547 ../src/dock.c:3336
+#: ../src/dockedapp.c:232 ../src/dockedapp.c:427 ../src/main.c:271
+#: ../src/rootmenu.c:1858 ../src/winspector.c:395 ../src/winspector.c:412
 msgid "OK"
 msgstr "äºè§£"
 
-#: ../src/appicon.c:571 ../src/dock.c:256
+#: ../src/appicon.c:445 ../src/dock.c:244
 msgid ""
 " will be forcibly closed.\n"
 "Any unsaved changes will be lost.\n"
@@ -45,339 +46,376 @@
 msgstr ""
 " ãå¼·å¶çµäºããã¾ã\n"
 "ä¿å­ããã¦ããªãå¤æ´ã¯å¨ã¦å¤±ããã¾ã\n"
-"çµäºããã¾ããï¼"
+"çµäºããã¾ããï¼ "
 
-#: ../src/appicon.c:577 ../src/dock.c:261 ../src/winmenu.c:128
+#: ../src/appicon.c:453 ../src/dock.c:263 ../src/winmenu.c:124
 msgid "Kill Application"
 msgstr "ã¢ããªã±ã¼ã·ã§ã³å¼·å¶çµäº"
 
-#: ../src/appicon.c:578 ../src/dock.c:262 ../src/winmenu.c:130
+#: ../src/appicon.c:454 ../src/dock.c:264 ../src/winmenu.c:126
 msgid "Yes"
 msgstr "ã¯ã"
 
-#: ../src/appicon.c:578 ../src/dock.c:262 ../src/winmenu.c:130
+#: ../src/appicon.c:454 ../src/dock.c:264 ../src/winmenu.c:126
 msgid "No"
 msgstr "ããã"
 
-#: ../src/appicon.c:596 ../src/dock.c:1139 ../src/dock.c:3410
+#: ../src/appicon.c:484 ../src/dock.c:1168 ../src/dock.c:3501
 msgid "Unhide Here"
 msgstr "ãã®ã¯ã¼ã¯ã¹ãã¼ã¹ã§åã«æ»ã"
 
-#: ../src/appicon.c:597 ../src/appicon.c:623 ../src/dock.c:1141
-#: ../src/dock.c:1143 ../src/dock.c:3422 ../src/winmenu.c:465
+#: ../src/appicon.c:485 ../src/appicon.c:510 ../src/dock.c:1170
+#: ../src/dock.c:1172 ../src/dock.c:3513 ../src/winmenu.c:461
 msgid "Hide"
 msgstr "é ã"
 
-#: ../src/appicon.c:598 ../src/appicon.c:629
-msgid "Collapse"
-msgstr "æãç³ã"
-
-#: ../src/appicon.c:599
+#: ../src/appicon.c:486
 msgid "Set Icon..."
 msgstr "ã¢ã¤ã³ã³è¨­å®..."
 
-#: ../src/appicon.c:600 ../src/dock.c:1147 ../src/rootmenu.c:223
-#: ../src/rootmenu.c:237 ../src/winmenu.c:512
+#: ../src/appicon.c:487 ../src/dock.c:1176 ../src/rootmenu.c:248
+#: ../src/rootmenu.c:264 ../src/winmenu.c:508
 msgid "Kill"
 msgstr "å¼·å¶çµäº"
 
-#: ../src/appicon.c:621 ../src/dock.c:3420
+#: ../src/appicon.c:508 ../src/dock.c:3511
 msgid "Unhide"
 msgstr "åã«æ»ã"
 
-#: ../src/appicon.c:627
-msgid "Uncollapse"
-msgstr "åºãã"
+#: ../src/application.c:405
+#, c-format
+msgid "recreating missing icon '%s'"
+msgstr "è¡æ¹ä¸æã¢ã¤ã³ã³ '%s' ã®åä½æ"
+
+#: ../src/defaults.c:933 ../src/defaults.c:1095
+#, c-format
+msgid "Domain %s (%s) of global defaults database is corrupted!"
+msgstr "ã°ã­ã¼ãã«æ¨æºãã¼ã¿ãã¼ã¹ã®ãã¡ã¤ã³%s (%s)ãããããã§ã!"
+
+#: ../src/defaults.c:938
+#, c-format
+msgid "could not load domain %s from global defaults database"
+msgstr "ã°ã­ã¼ãã«æ¨æºãã¼ã¿ãã¼ã¹ãããã¡ã¤ã³ %s ãã­ã¼ãã§ãã¾ãã"
 
-#: ../src/defaults.c:917 ../src/startup.c:890 ../src/startup.c:908
-#: ../src/startup.c:914
+#: ../src/defaults.c:990 ../src/defaults.c:1005
+#, c-format
+msgid "invalid global menu file %s"
+msgstr "ã°ã­ã¼ãã«ã¡ãã¥ã¼ãã¡ã¤ã« %s ãééã£ã¦ãã¾ã"
+
+#: ../src/defaults.c:1033 ../src/startup.c:762 ../src/startup.c:780
+#: ../src/startup.c:787
 #, c-format
 msgid "could not read domain \"%s\" from defaults database"
 msgstr "æ¨æºãã¼ã¿ãã¼ã¹ãããã¡ã¤ã³\"%s\"ãèª­ã¿è¾¼ããã¨ãã§ãã¾ãã"
 
-#: ../src/defaults.c:963 ../src/defaults.c:1088 ../src/defaults.c:1127
-#: ../src/defaults.c:1173
+#: ../src/defaults.c:1079 ../src/defaults.c:1184 ../src/defaults.c:1225
+#: ../src/defaults.c:1281
 #, c-format
 msgid "Domain %s (%s) of defaults database is corrupted!"
-msgstr "æ¨æºãã¼ã¿ãã¼ã¹ã®ãã¡ã¤ã³%s (%s)ãããããã§ã!"
+msgstr "æ¨æºãã¼ã¿ãã¼ã¹ã®ãã¡ã¤ã³ %s (%s)ãããããã§ã!"
 
-#: ../src/defaults.c:968 ../src/defaults.c:1109 ../src/defaults.c:1156
-#: ../src/defaults.c:1182
+#: ../src/defaults.c:1084 ../src/defaults.c:1204 ../src/defaults.c:1261
+#: ../src/defaults.c:1291
 #, c-format
 msgid "could not load domain %s from user defaults database"
-msgstr "ã¦ã¼ã¶æ¨æºãã¼ã¿ãã¼ã¹ãããã¡ã¤ã³%sãã­ã¼ãã§ãã¾ãã"
+msgstr "ã¦ã¼ã¶æ¨æºãã¼ã¿ãã¼ã¹ãããã¡ã¤ã³ %s ãã­ã¼ãã§ãã¾ãã"
 
-#: ../src/defaults.c:979 ../src/defaults.c:1073
+#: ../src/defaults.c:1114
 #, c-format
-msgid "Domain %s (%s) of global defaults database is corrupted!"
-msgstr "ã°ã­ã¼ãã«æ¨æºãã¼ã¿ãã¼ã¹ã®ãã¡ã¤ã³%s (%s)ãããããã§ã!"
+msgid "could not load domain %s from global defaults database (%s)"
+msgstr "ã°ã­ã¼ãã«æ¨æºãã¼ã¿ãã¼ã¹(%s)ãããã¡ã¤ã³ %s ãã­ã¼ãã§ãã¾ãã"
 
-#: ../src/defaults.c:998
+#: ../src/defaults.c:1251 ../src/screen.c:419
 #, c-format
-msgid "could not load domain %s from global defaults database (%s)"
-msgstr "ã°ã­ã¼ãã«æ¨æºãã¼ã¿ãã¼ã¹(%s)ãããã¡ã¤ã³%sãã­ã¼ãã§ãã¾ãã"
+msgid "could not load logo image for panels: %s"
+msgstr "ããã«ç¨ã®ã­ã´ç»å %s ãèª­ã¿è¾¼ãã¾ãã"
 
-#: ../src/defaults.c:1078
+#. --------------------------- Local -----------------------
+#: ../src/defaults.c:1500 ../src/defaults.c:1639 ../src/defaults.c:1765
+#: ../src/defaults.c:2243 ../src/defaults.c:2260 ../src/defaults.c:2305
+#: ../src/defaults.c:2352 ../src/defaults.c:2825 ../src/wdefaults.c:571
+#: ../src/wdefaults.c:604
 #, c-format
-msgid "could not load domain %s from global defaults database"
-msgstr "ã°ã­ã¼ãã«æ¨æºãã¼ã¿ãã¼ã¹ãããã¡ã¤ã³%sãã­ã¼ãã§ãã¾ãã"
+msgid "Wrong option format for key \"%s\". Should be %s."
+msgstr "\"%s\"ã«å¯¾ãããªãã·ã§ã³å½¢å¼ãéãã¾ã. %såã«ãã¦ä¸ãã"
 
-#: ../src/defaults.c:1146 ../src/screen.c:458
+#: ../src/defaults.c:1502 ../src/defaults.c:1583 ../src/defaults.c:1613
+#: ../src/defaults.c:1644 ../src/defaults.c:1657 ../src/defaults.c:1672
+#: ../src/defaults.c:1686 ../src/defaults.c:1770 ../src/defaults.c:1782
+#: ../src/defaults.c:2248 ../src/defaults.c:2265 ../src/defaults.c:2278
+#: ../src/defaults.c:2310 ../src/defaults.c:2326 ../src/defaults.c:2357
+#: ../src/defaults.c:2444 ../src/defaults.c:2830 ../src/defaults.c:2841
 #, c-format
-msgid "could not load logo image for panels: %s"
-msgstr "ããã«ç¨ã®ã­ã´ç»åãèª­ã¿è¾¼ãã¾ãã: %s"
+msgid "using default \"%s\" instead"
+msgstr "ä»£ããã«æ¨æºã®è¨­å®\"%s\"ãä½¿ãã¾ã"
 
-#: ../src/defaults.c:1424
+#: ../src/defaults.c:1533
 #, c-format
 msgid "wrong option value for key \"%s\". Should be one of %s"
-msgstr "ã­ã¼\"%s\"ã«å¯¾ãããªãã·ã§ã³å½¢å¼ãéãã¾ã. %såã«ãã¦ä¸ãã"
+msgstr "ã­ã¼\"%s\"ã«å¯¾ãããªãã·ã§ã³å½¢å¼ãéãã¾ã. %s ã®ã©ããã«ãã¦ä¸ãã"
 
-#: ../src/defaults.c:1469
+#: ../src/defaults.c:1578
 #, c-format
 msgid "can't convert \"%s\" to boolean for key \"%s\""
 msgstr "\"%s\"(\"%s\"ã®å¼æ°)ãbooleanåã¸å¤æã§ãã¾ãã"
 
-#: ../src/defaults.c:1474 ../src/defaults.c:1506 ../src/defaults.c:1538
-#: ../src/defaults.c:1551 ../src/defaults.c:1566 ../src/defaults.c:1580
-#: ../src/defaults.c:1650 ../src/defaults.c:1662 ../src/defaults.c:2129
-#: ../src/defaults.c:2146 ../src/defaults.c:2159 ../src/defaults.c:2191
-#: ../src/defaults.c:2207 ../src/defaults.c:2238 ../src/defaults.c:2325
-#: ../src/defaults.c:2713 ../src/defaults.c:2724
-#, c-format
-msgid "using default \"%s\" instead"
-msgstr "ä»£ããã«æ¨æºã®è¨­å®\"%s\"ãä½¿ãã¾ã"
-
-#: ../src/defaults.c:1503
+#: ../src/defaults.c:1610
 #, c-format
 msgid "can't convert \"%s\" to integer for key \"%s\""
 msgstr "\"%s\"(\"%s\"ã®å¼æ°)ãæ´æ°(integerå)ã¸å¤æã§ãã¾ãã"
 
-#: ../src/defaults.c:1533 ../src/defaults.c:1645 ../src/defaults.c:2124
-#: ../src/defaults.c:2141 ../src/defaults.c:2186 ../src/defaults.c:2233
-#: ../src/defaults.c:2708 ../src/wdefaults.c:570 ../src/wdefaults.c:606
-#, c-format
-msgid "Wrong option format for key \"%s\". Should be %s."
-msgstr "\"%s\"ã«å¯¾ãããªãã·ã§ã³å½¢å¼ãéãã¾ã. %såã«ãã¦ä¸ãã"
-
-#: ../src/defaults.c:1546
+#: ../src/defaults.c:1652
 #, c-format
 msgid "Incorrect number of elements in array for key \"%s\"."
 msgstr "\"%s\"ã«å¯¾ããè¦ç´ æ°ãæ­£ããããã¾ãã"
 
-#: ../src/defaults.c:1561
+#: ../src/defaults.c:1667
 #, c-format
 msgid "Wrong value for key \"%s\". Should be Coordinate."
 msgstr "\"%s\"ã«å¯¾ããæå®ãä¸æ­£ã§ã. Coordinateåã«ãã¦ãã ãã"
 
-#: ../src/defaults.c:1576
+#: ../src/defaults.c:1682
 #, c-format
 msgid "can't convert array to integers for \"%s\"."
 msgstr "\"%s\"ã«å¯¾ãã¦æ´æ°åã¸å¤æã§ãã¾ãã"
 
-#: ../src/defaults.c:1774 ../src/defaults.c:1806 ../src/defaults.c:1822
-#: ../src/defaults.c:1851 ../src/defaults.c:1874 ../src/defaults.c:1927
-#: ../src/defaults.c:1967 ../src/defaults.c:2005 ../src/defaults.c:2021
+#: ../src/defaults.c:1715
+#, fuzzy, c-format
+msgid "Wrong value for key \"%s\". Should be an array."
+msgstr "\"%s\"ã«å¯¾ããæå®ãä¸æ­£ã§ã. Coordinateåã«ãã¦ãã ãã"
+
+#: ../src/defaults.c:1893 ../src/defaults.c:1925 ../src/defaults.c:1941
+#: ../src/defaults.c:1970 ../src/defaults.c:1993 ../src/defaults.c:2046
+#: ../src/defaults.c:2086 ../src/defaults.c:2124 ../src/defaults.c:2140
 #, c-format
 msgid "\"%s\" is not a valid color name"
 msgstr "ã«ã©ã¼åã®æå®\"%s\"ãééã£ã¦ãã¾ã"
 
-#: ../src/defaults.c:1787 ../src/defaults.c:1839
+#: ../src/defaults.c:1906 ../src/defaults.c:1958
 msgid "bad number of arguments in gradient specification"
 msgstr "ã°ã©ãã¼ã·ã§ã³æå®ã®å¼æ°ã®æ°ãééã£ã¦ãã¾ã"
 
-#: ../src/defaults.c:1900
+#: ../src/defaults.c:2019
 msgid "too few arguments in multicolor gradient specification"
 msgstr "ãã«ãã«ã©ã¼ã®ã°ã©ãã¼ã·ã§ã³æå®ã®å¼æ°ãè¶³ãã¾ãã"
 
-#: ../src/defaults.c:1994
+#: ../src/defaults.c:2113
 msgid "bad number of arguments in textured gradient specification"
 msgstr "ã°ã©ãã¼ã·ã§ã³æå®ã®å¼æ°ã®æ°ãééã£ã¦ãã¾ã"
 
-#: ../src/defaults.c:2037
+#: ../src/defaults.c:2156
 #, c-format
 msgid "bad opacity value for tgradient texture \"%s\". Should be [0..255]"
 msgstr "ä¸éæåº¦ã«ã¯ %s ã¯æå®ã§ãã¾ãã. 0 ãã 255 ã§æå®ãã¦ãã ãã"
 
-#: ../src/defaults.c:2097
+#: ../src/defaults.c:2216
 #, c-format
 msgid "could not initialize library %s"
 msgstr "%s ã©ã¤ãã©ãªã®åæåãã§ãã¾ããã§ãã"
 
-#: ../src/defaults.c:2100
+#: ../src/defaults.c:2219
 #, c-format
 msgid "could not find function %s::%s"
 msgstr "%s::%s é¢æ°ãè¦ã¤ããã¾ããã§ãã"
 
-#: ../src/defaults.c:2107
+#: ../src/defaults.c:2226
 #, c-format
 msgid "invalid texture type %s"
 msgstr "ãã¯ã¹ãã£ã®ã¿ã¤ã %s ãä¸æ­£ã§ã"
 
-#: ../src/defaults.c:2154
+#: ../src/defaults.c:2273
 #, c-format
 msgid "Error in texture specification for key \"%s\""
 msgstr "`%s'ã«å¯¾ãããã¯ã¹ãã£ã®æå®ã¨ã©ã¼ã§ã"
 
-#: ../src/defaults.c:2203
+#: ../src/defaults.c:2322
 msgid "Wrong type for workspace background. Should be a texture type."
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹èæ¯ã®å½¢å¼ãéãã¾ã. Textureåã«ãã¦ãã ãã"
 
-#: ../src/defaults.c:2251
+#: ../src/defaults.c:2370
 #, c-format
 msgid "Wrong type for background of workspace %i. Should be a texture."
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ %i ã®èæ¯ã®å½¢å¼ãéãã¾ã. Textureåã«ãã¦ãã ãã"
 
-#: ../src/defaults.c:2293
+#: ../src/defaults.c:2412
 msgid "could not load any usable font!!!"
-msgstr "ä½¿ç¨ã§ãããã©ã³ããèª­ã¿è¾¼ãã¾ãã!!"
+msgstr "ä½¿ç¨ã§ãããã©ã³ããè¦å½ããã¾ãã!!!"
 
-#: ../src/defaults.c:2320
+#: ../src/defaults.c:2439
 #, c-format
 msgid "could not get color for key \"%s\""
 msgstr "\"%s\"ã«å¯¾ããã«ã©ã¼ãå¾ããã¾ãã"
 
-#: ../src/defaults.c:2378 ../src/rootmenu.c:491
+#: ../src/defaults.c:2497 ../src/rootmenu.c:531
 #, c-format
 msgid "%s:invalid key modifier \"%s\""
 msgstr "%s:ã­ã¼ã®æå®\"%s\"ãééã£ã¦ãã¾ã"
 
-#: ../src/defaults.c:2390
+#: ../src/defaults.c:2509
 #, c-format
 msgid "%s:invalid kbd shortcut specification \"%s\""
 msgstr "%s:ã·ã§ã¼ãã«ãã\"%s\"ã®ã­ã¼æå®ãééã£ã¦ãã¾ã"
 
-#: ../src/defaults.c:2397
+#: ../src/defaults.c:2516
 #, c-format
 msgid "%s:invalid key in shortcut \"%s\""
 msgstr "%s:ã·ã§ã¼ãã«ãã\"%s\"ã®ã­ã¼æå®ãééã£ã¦ãã¾ã"
 
-#: ../src/defaults.c:2422
+#: ../src/defaults.c:2541
 #, c-format
 msgid "%s: modifier key %s is not valid"
 msgstr "%s:ã­ã¼%sã®è¨­å®ãé©åã§ããã¾ãã"
 
-#: ../src/defaults.c:2454
+#: ../src/defaults.c:2573
 #, c-format
 msgid "could not load image in option %s: %s"
 msgstr "%s æå®ã§ç»åãèª­ã¿è¾¼ãã¾ãã: %s"
 
-#: ../src/defaults.c:2573
+#: ../src/defaults.c:2690
 #, c-format
 msgid "failed to open bitmap file \"%s\""
 msgstr "ãããããããã¡ã¤ã« \"%s\" ãéãã¾ãã"
 
-#: ../src/defaults.c:2576
+#: ../src/defaults.c:2693
 #, c-format
 msgid "\"%s\" is not a valid bitmap file"
 msgstr "\"%s\" ã¯æ­£ãããããããããã¡ã¤ã«ã§ã¯ããã¾ãã"
 
-#: ../src/defaults.c:2579
+#: ../src/defaults.c:2696
 #, c-format
 msgid "out of memory reading bitmap file \"%s\""
 msgstr "ãããããããã¡ã¤ã« \"%s\" ãèª­ãã§ããã¨ãã«ã¡ã¢ãªãä¸è¶³ãã¾ãã"
 
-#: ../src/defaults.c:2618 ../src/defaults.c:2651
+#: ../src/defaults.c:2735 ../src/defaults.c:2768
 msgid "bad number of arguments in cursor specification"
 msgstr "ã«ã¼ã½ã«æå®ã®å¼æ°ã®æ°ãééã£ã¦ãã¾ã"
 
-#: ../src/defaults.c:2634
+#: ../src/defaults.c:2751
 #, c-format
 msgid "unknown builtin cursor name \"%s\""
 msgstr "\"%s\" ã¨ããçµã¿è¾¼ã¿ã«ã¼ã½ã«ã¯ãããã¾ãã"
 
-#: ../src/defaults.c:2661 ../src/defaults.c:2673
+#: ../src/defaults.c:2778 ../src/defaults.c:2790
 #, c-format
 msgid "could not find cursor bitmap file \"%s\""
 msgstr "ã«ã¼ã½ã«ãããããã \"%s\" ãè¦ã¤ãããã¾ãã"
 
-#: ../src/defaults.c:2720
+#: ../src/defaults.c:2837
 #, c-format
 msgid "Error in cursor specification for key \"%s\""
 msgstr "\"%s\" ã«å¯¾ããã«ã¼ã½ã«ã®æå®ã¨ã©ã¼ã§ã"
 
-#: ../src/defaults.c:2807
+#: ../src/defaults.c:2922
 msgid "could not render texture for icon background"
 msgstr "ã¢ã¤ã³ã³èæ¯ã®ãã¯ã¹ãã£ã®ã¬ã³ããªã³ã°ãã§ãã¾ããã§ãã"
 
-#: ../src/dialog.c:121 ../src/dialog.c:679 ../src/dock.c:525
-#: ../src/dockedapp.c:377 ../src/rootmenu.c:185 ../src/rootmenu.c:223
-#: ../src/rootmenu.c:237
+#: ../src/defaults.c:3542 ../src/defaults.c:3617
+#, fuzzy, c-format
+msgid "Invalid arguments for option \"%s\""
+msgstr "%s: ç¡å¹ãªå¼æ°ã§ã '%s'\n"
+
+#: ../src/defaults.c:3549 ../src/defaults.c:3624
+#, fuzzy, c-format
+msgid "Could not find image \"%s\" for option \"%s\""
+msgstr "%s æå®ã§ç»åãèª­ã¿è¾¼ãã¾ãã: %s"
+
+#: ../src/defaults.c:3555 ../src/defaults.c:3632
+#, fuzzy, c-format
+msgid "Could not load image \"%s\" for option \"%s\""
+msgstr "%s æå®ã§ç»åãèª­ã¿è¾¼ãã¾ãã: %s"
+
+#: ../src/defaults.c:3567
+msgid "Invalid split sizes for SwitchPanel back image."
+msgstr ""
+
+#: ../src/defaults.c:3640
+#, fuzzy, c-format
+msgid "Invalid number of arguments for option \"%s\""
+msgstr "ã«ã¼ã½ã«æå®ã®å¼æ°ã®æ°ãééã£ã¦ãã¾ã"
+
+#: ../src/dialog.c:147
+msgid "Save workspace state"
+msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã®ç¶æä¿å­"
+
+#: ../src/dialog.c:192 ../src/dialog.c:732 ../src/dock.c:547
+#: ../src/dockedapp.c:432 ../src/rootmenu.c:198 ../src/rootmenu.c:248
+#: ../src/rootmenu.c:264
 msgid "Cancel"
 msgstr "ã­ã£ã³ã»ã«"
 
-#: ../src/dialog.c:219
+#: ../src/dialog.c:290
 msgid "Could not open directory "
 msgstr "ãã£ã¬ã¯ããªãéãã¾ãã"
 
-#: ../src/dialog.c:274
+#: ../src/dialog.c:345
 msgid "Could not load image file "
 msgstr "ç»åãã¡ã¤ã«ãèª­ã¿è¾¼ãã¾ãã"
 
-#: ../src/dialog.c:606
+#: ../src/dialog.c:659
 msgid "Directories"
 msgstr "ãã£ã¬ã¯ããª"
 
-#: ../src/dialog.c:615
+#: ../src/dialog.c:668
 msgid "Icons"
 msgstr "ã¢ã¤ã³ã³"
 
-#: ../src/dialog.c:648
+#: ../src/dialog.c:701
 msgid "Preview"
 msgstr "ãã¬ãã¥ã¼"
 
-#: ../src/dialog.c:661
+#: ../src/dialog.c:714
 msgid "File Name:"
 msgstr "ãã¡ã¤ã«å:"
 
-#: ../src/dialog.c:685
+#: ../src/dialog.c:738
 msgid "Choose File"
 msgstr "ãã¡ã¤ã«é¸æ"
 
-#: ../src/dialog.c:703 ../src/dialog.c:705
+#: ../src/dialog.c:757 ../src/dialog.c:759
 msgid "Icon Chooser"
 msgstr "ã¢ã¤ã³ã³é¸æ"
 
-#: ../src/dialog.c:1162 ../src/dialog.c:1272
+#: ../src/dialog.c:1196 ../src/dialog.c:1304
 #, c-format
 msgid "Version %s"
 msgstr "ãã¼ã¸ã§ã³ %s"
 
-#: ../src/dialog.c:1269
+#: ../src/dialog.c:1302
 msgid "Window Manager for X"
-msgstr "X ã¦ã£ã³ãã¦ããã¼ã¸ã£"
+msgstr "Window Manager for X"
 
-#: ../src/dialog.c:1292
-#, fuzzy, c-format
+#: ../src/dialog.c:1325
+#, c-format
 msgid "Using visual 0x%x: %s %ibpp "
-msgstr "Using visual 0x%x: %s %ibpp "
+msgstr "Using visual 0x%x: %s %ibpp"
 
-#: ../src/dialog.c:1300
+#: ../src/dialog.c:1333
 msgid "(32 thousand colors)\n"
 msgstr "(3 ä¸ 2 åè²)\n"
 
-#: ../src/dialog.c:1303
+#: ../src/dialog.c:1336
 msgid "(64 thousand colors)\n"
 msgstr "(6 ä¸ 4 åè²)\n"
 
-#: ../src/dialog.c:1307
+#: ../src/dialog.c:1340
 msgid "(16 million colors)\n"
 msgstr "(1,600 ä¸è²)\n"
 
-#: ../src/dialog.c:1310
+#: ../src/dialog.c:1343
 #, c-format
 msgid "(%d colors)\n"
 msgstr "(%d è²)\n"
 
-#: ../src/dialog.c:1320
+#: ../src/dialog.c:1353
 #, c-format
 msgid "Total allocated memory: %i kB. Total memory in use: %i kB.\n"
 msgstr "å²å½ã¡ã¢ãª: %i kB. ä½¿ç¨ä¸­ã¡ã¢ãª: %i kB.\n"
 
-#: ../src/dialog.c:1327
+#: ../src/dialog.c:1360
 msgid "Supported image formats: "
 msgstr "å¯¾å¿ç»åå½¢å¼: "
 
-#: ../src/dialog.c:1334
+#: ../src/dialog.c:1367
 msgid ""
 "\n"
 "Additional support for: "
@@ -385,11 +423,11 @@
 "\n"
 "æ¡å¼µå¯¾å¿: "
 
-#: ../src/dialog.c:1357
+#: ../src/dialog.c:1384
 msgid " and "
 msgstr ", ãã¨, "
 
-#: ../src/dialog.c:1367
+#: ../src/dialog.c:1394
 msgid ""
 "\n"
 "Sound disabled"
@@ -397,7 +435,7 @@
 "\n"
 "ãµã¦ã³ãç¡å¹"
 
-#: ../src/dialog.c:1369
+#: ../src/dialog.c:1396
 msgid ""
 "\n"
 "Sound enabled"
@@ -405,47 +443,65 @@
 "\n"
 "ãµã¦ã³ãæå¹"
 
-#: ../src/dialog.c:1393
+#: ../src/dialog.c:1401
+msgid ", VirtualDesktop enabled"
+msgstr ", ä»®æ³ãã¹ã¯ãããæå¹"
+
+#: ../src/dialog.c:1403
+msgid ", VirtualDesktop disabled"
+msgstr ", ä»®æ³ãã¹ã¯ãããç¡å¹"
+
+#: ../src/dialog.c:1407
+msgid "\n"
+msgstr "\n"
+
+#: ../src/dialog.c:1409
+msgid "Solaris "
+msgstr "Solaris "
+
+#: ../src/dialog.c:1411
+msgid "Xinerama: "
+msgstr "Xinerama: "
+
+#: ../src/dialog.c:1445
 msgid "Info"
 msgstr " æå ± "
 
-#: ../src/dialog.c:1416
-msgid "Merry X'mas!"
+#: ../src/dialog.c:1469
+msgid "Merry Christmas!"
 msgstr "ã¡ãªã¼ã¯ãªã¹ãã¹!"
 
-#: ../src/dialog.c:1486
+#: ../src/dialog.c:1539
 msgid ""
 "    Window Maker is free software; you can redistribute it and/or\n"
 "modify it under the terms of the GNU General Public License as\n"
 "published by the Free Software Foundation; either version 2 of the\n"
 "License, or (at your option) any later version.\n"
 "\n"
-"\n"
 "    Window Maker is distributed in the hope that it will be useful,\n"
 "but WITHOUT ANY WARRANTY; without even the implied warranty\n"
 "of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n"
 "See the GNU General Public License for more details.\n"
 "\n"
-"\n"
 "    You should have received a copy of the GNU General Public\n"
 "License along with this program; if not, write to the Free Software\n"
 "Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n"
 "02111-1307, USA."
 msgstr ""
 
-#: ../src/dialog.c:1507
+#: ../src/dialog.c:1563
 msgid "Legal"
 msgstr ""
 
-#: ../src/dialog.c:1658 ../src/startup.c:388
+#: ../src/dialog.c:1719
 msgid "cannot open connection for crashing dialog panel. Aborting."
 msgstr "ãã¤ã¢ã­ã°ãå£ãã¦æ¥ç¶ã§ãã¾ãã. ä¸­æ­¢ãã¾ã"
 
-#: ../src/dialog.c:1684
+#: ../src/dialog.c:1745
 msgid "Fatal error"
 msgstr "è´å½çãªã¨ã©ã¼"
 
-#: ../src/dialog.c:1695
+#: ../src/dialog.c:1756
 #, c-format
 msgid ""
 "Window Maker received signal %i\n"
@@ -454,40 +510,40 @@
 "Window Maker ã¯ ã·ã°ãã« %i ãåãã¾ãã\n"
 "(%s)."
 
-#: ../src/dialog.c:1698
+#: ../src/dialog.c:1759
 #, c-format
 msgid "Window Maker received signal %i."
 msgstr "Window Maker ã¯ã·ã°ãã« %i ãåãã¾ãã"
 
-#: ../src/dialog.c:1707
+#: ../src/dialog.c:1768
 msgid ""
 " This fatal error occured probably due to a bug. Please fill the included "
 "BUGFORM and report it to bugs@windowmaker.org."
 msgstr ""
-"ãã®è´å½çãªã¨ã©ã¼ã¯ãã°ã«ãããã®ããããã¾ãã. ãã°ãã©ã¼ã ã«ãããã£ã¦ "
+"ãã®è´å½çãªã¨ã©ã¼ã¯ãã°ã«ãããã®ããããã¾ãã. åæ¢±ã®ãã°ãã©ã¼ã ãä½¿ã£ã¦ "
 "bugs@windowmaker.org å®ã¦ã«ã¬ãã¼ããã¦ä¸ãã"
 
-#: ../src/dialog.c:1716
+#: ../src/dialog.c:1777
 msgid "What do you want to do now?"
-msgstr "ä», ã©ããã¾ãã?"
+msgstr "ãã¦, ã©ããã¾ãã?"
 
-#: ../src/dialog.c:1722
+#: ../src/dialog.c:1783
 msgid "Select action"
 msgstr "é¸ãã§ãã ãã"
 
-#: ../src/dialog.c:1723
+#: ../src/dialog.c:1784
 msgid "Abort and leave a core file"
 msgstr "ä¸­æ­¢ãã¦ core ãã¡ã¤ã«ãæ®ã"
 
-#: ../src/dialog.c:1724
+#: ../src/dialog.c:1785
 msgid "Restart Window Maker"
 msgstr "Window Maker ãåèµ·åãã"
 
-#: ../src/dialog.c:1725
+#: ../src/dialog.c:1786
 msgid "Start alternate window manager"
 msgstr "ãããã®ã¦ã£ã³ãã¦ããã¼ã¸ã£ãèµ·åãã"
 
-#: ../src/dialog.c:1903
+#: ../src/dialog.c:1964
 msgid ""
 "Window Maker is part of the GNUstep project.\n"
 "The GNUstep project aims to create a free\n"
@@ -500,480 +556,508 @@
 "GNUstep, please visit: www.gnustep.org"
 msgstr ""
 
-#: ../src/dialog.c:1923
+#: ../src/dialog.c:1987
 msgid "About GNUstep"
 msgstr ""
 
-#: ../src/dock.c:213
+#: ../src/dock.c:193
 #, c-format
 msgid "Type the name for workspace %i:"
-msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹%iã®ååãå¥åãã¦ä¸ãã:"
+msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹%iã®ååãå¥åãã¦ä¸ãã: "
 
-#: ../src/dock.c:214 ../src/dock.c:1103 ../src/dock.c:1106 ../src/dock.c:3328
+#: ../src/dock.c:194 ../src/dock.c:1132 ../src/dock.c:1135 ../src/dock.c:3419
 msgid "Rename Workspace"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹åã®å¤æ´"
 
-#: ../src/dock.c:487 ../src/dock.c:495
+#: ../src/dock.c:509 ../src/dock.c:517
 msgid "Warning"
 msgstr "è­¦å"
 
-#: ../src/dock.c:488
+#: ../src/dock.c:510
 msgid ""
 "Some icons cannot be made omnipresent. Please make sure that no other icon "
 "is docked in the same positions on the other workspaces and the Clip is not "
 "full in some workspace."
 msgstr ""
-"ããã¤ãã®ã¢ã¤ã³ã³ããã©ãã§ãè¡¨ç¤ºãã«ã§ãã¾ãã. "
-"ä»ã®ã¢ã¤ã³ã³ãéãã¯ã¼ã¯ã¹ãã¼ã¹ã§åãå ´æã«ããã¯ããã¦ããªããã¨ã¨, "
-"ã¯ãªããã«ã¯ã¼ã¯ã¹ãã¼ã¹ãåãã¤ãããã¦ããªããã¨ãç¢ºèªãã¦ãã ãã"
+"ããã¤ãã®ã¢ã¤ã³ã³ããã©ãã§ãè¡¨ç¤ºãã«ã§ãã¾ãã. ä»ã®ã¢ã¤ã³ã³ãéãã¯ã¼ã¯ã¹"
+"ãã¼ã¹ã§åãå ´æã«ããã¯ããã¦ããªããã¨ã¨, ã¯ãªããã«ã¯ã¼ã¯ã¹ãã¼ã¹ãåãã¤"
+"ãããã¦ããªããã¨ãç¢ºèªãã¦ãã ãã"
 
-#: ../src/dock.c:496
+#: ../src/dock.c:518
 msgid ""
 "Icon cannot be made omnipresent. Please make sure that no other icon is "
 "docked in the same position on the other workspaces and the Clip is not full "
 "in some workspace."
 msgstr ""
-"ã¢ã¤ã³ã³ããã©ãã§ãè¡¨ç¤ºãã«ã§ãã¾ãã. "
-"ä»ã®ã¢ã¤ã³ã³ãéãã¯ã¼ã¯ã¹ãã¼ã¹ã§åãå ´æã«ããã¯ããã¦ããªããã¨ã¨, "
-"ã¯ãªããã«ã¯ã¼ã¯ã¹ãã¼ã¹ãåãã¤ãããã¦ããªããã¨ãç¢ºèªãã¦ãã ãã"
+"ã¢ã¤ã³ã³ããã©ãã§ãè¡¨ç¤ºãã«ã§ãã¾ãã. ä»ã®ã¢ã¤ã³ã³ãéãã¯ã¼ã¯ã¹ãã¼ã¹ã§å"
+"ãå ´æã«ããã¯ããã¦ããªããã¨ã¨, ã¯ãªããã«ã¯ã¼ã¯ã¹ãã¼ã¹ãåãã¤ãããã¦ã"
+"ãªããã¨ãç¢ºèªãã¦ãã ãã"
 
-#: ../src/dock.c:523
+#: ../src/dock.c:545
 msgid "Workspace Clip"
-msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã¯ãªãã"
+msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ ã¯ãªãã"
 
-#: ../src/dock.c:524
+#: ../src/dock.c:546
 msgid "All selected icons will be removed!"
-msgstr "é¸æãããã¢ã¤ã³ã³å¨ã¦ãåé¤ããã¾ã"
+msgstr "é¸æãããã¢ã¤ã³ã³å¨ã¦ãåé¤ããã¾ã!"
 
-#: ../src/dock.c:575 ../src/dock.c:1118 ../src/dock.c:1120 ../src/dock.c:3364
+#: ../src/dock.c:598 ../src/dock.c:1147 ../src/dock.c:1149 ../src/dock.c:3455
 msgid "Keep Icon"
 msgstr "ã¢ã¤ã³ã³ãä¿æãã"
 
-#: ../src/dock.c:576 ../src/dock.c:2083 ../src/dock.c:2218
+#: ../src/dock.c:599 ../src/dock.c:2139 ../src/dock.c:2276
 msgid "Type the command used to launch the application"
 msgstr ""
 "ãã®ã¢ããªã±ã¼ã·ã§ã³ãèµ·åããããã®\n"
 "ã³ãã³ããå¥åãã¦ãã ãã"
 
-#: ../src/dock.c:927
+#: ../src/dock.c:954
 #, c-format
 msgid "could not launch application %s\n"
 msgstr "ã¢ããªã±ã¼ã·ã§ã³%sãèµ·åã§ãã¾ãã\n"
 
-#: ../src/dock.c:982
+#: ../src/dock.c:1010
 msgid "could not create workspace submenu for Clip menu"
 msgstr "ã¯ãªããã¡ãã¥ã¼ã®ã¯ã¼ã¯ã¹ãã¼ã¹ãµãã¡ãã¥ã¼ãä½æã§ãã¾ãã"
 
-#: ../src/dock.c:1040
+#: ../src/dock.c:1069
 msgid "could not create options submenu for Clip menu"
 msgstr "ã¯ãªããã¡ãã¥ã¼ã®ãªãã·ã§ã³ãµãã¡ãã¥ã¼ãä½æã§ãã¾ãã"
 
-#: ../src/dock.c:1044 ../src/dock.c:1092
+#: ../src/dock.c:1073 ../src/dock.c:1121
 msgid "Keep on Top"
 msgstr "å¸¸ã«ä¸çªä¸ã«è¡¨ç¤º"
 
-#: ../src/dock.c:1050
+#: ../src/dock.c:1079
 msgid "Collapsed"
 msgstr "æãç³ã"
 
-#: ../src/dock.c:1056
+#: ../src/dock.c:1085
 msgid "Autocollapse"
 msgstr "èªåçã«æãç³ã"
 
-#: ../src/dock.c:1062
+#: ../src/dock.c:1091
 msgid "Autoraise"
 msgstr "èªåçã«åé¢ã«è¡¨ç¤º"
 
-#: ../src/dock.c:1068
+#: ../src/dock.c:1097
 msgid "Autoattract Icons"
 msgstr "ã¢ã¤ã³ã³ãèªåçã«å¼ãå¯ãã"
 
-#: ../src/dock.c:1098
+#: ../src/dock.c:1127
 msgid "Clip Options"
 msgstr "ã¯ãªãããªãã·ã§ã³"
 
-#: ../src/dock.c:1108
+#: ../src/dock.c:1137
 msgid "Selected"
 msgstr "é¸æ"
 
-#: ../src/dock.c:1113 ../src/dock.c:1116 ../src/dock.c:3355
+#: ../src/dock.c:1142 ../src/dock.c:1145 ../src/dock.c:3446
 msgid "Select All Icons"
 msgstr "å¨ã¦ã®ã¢ã¤ã³ã³ã®é¸æ"
 
-#: ../src/dock.c:1122 ../src/dock.c:1124 ../src/dock.c:3372
+#: ../src/dock.c:1151 ../src/dock.c:1153 ../src/dock.c:3463
 msgid "Move Icon To"
 msgstr "ã¢ã¤ã³ã³ãç§»å"
 
-#: ../src/dock.c:1129 ../src/dock.c:1132 ../src/dock.c:3383
+#: ../src/dock.c:1158 ../src/dock.c:1161 ../src/dock.c:3474
 msgid "Remove Icon"
-msgstr "ã¢ã¤ã³ã³ã®åé¤"
+msgstr "ã¢ã¤ã³ã³ãåé¤"
 
-#: ../src/dock.c:1134
+#: ../src/dock.c:1163
 msgid "Attract Icons"
 msgstr "ã¢ã¤ã³ã³ãå¼ãå¯ãã"
 
-#: ../src/dock.c:1137
+#: ../src/dock.c:1166
 msgid "Launch"
 msgstr "èµ·å"
 
-#: ../src/dock.c:1145
+#: ../src/dock.c:1174
 msgid "Settings..."
 msgstr "è¨­å®..."
 
-#: ../src/dock.c:1504 ../src/dock.c:1607
+#: ../src/dock.c:1538 ../src/dock.c:1645
 #, c-format
 msgid "bad value in docked icon state info %s"
 msgstr "ç»é²ãããã¢ã¤ã³ã³ã®æå ±%sã«ä¸æ­£ãªåå®¹ãããã¾ã"
 
-#: ../src/dock.c:1615
+#: ../src/dock.c:1653
 #, c-format
 msgid "bad value in docked icon position %i,%i"
 msgstr "ç»é²ãããã¢ã¤ã³ã³ã®ä½ç½®(%i, %i)ã¯ä¸æ­£ãªå¤ã§ã"
 
-#: ../src/dock.c:1867
+#: ../src/dock.c:1673
+#, c-format
+msgid "bad value in dock state info:%s"
+msgstr ""
+
+#: ../src/dock.c:1923
 msgid "there are too many icons stored in dock. Ignoring what doesn't fit"
 msgstr "ç»é²ãããã¢ã¤ã³ã³ãå¤ããã¾ã. åå®¹ã®ä¸é¨ã¯ç¡å¹ã«ãªãã¾ã"
 
 #. icon->forced_dock = 1;
-#: ../src/dock.c:2082 ../src/dock.c:2217
+#: ../src/dock.c:2138 ../src/dock.c:2275
 msgid "Dock Icon"
 msgstr "ããã¯ç»é²ã¢ã¤ã³ã³"
 
-#: ../src/dock.c:3237 ../src/dock.c:3241
+#: ../src/dock.c:3333
 #, c-format
 msgid "Could not execute command \"%s\""
 msgstr "ã³ãã³ã\"%s\"ãå®è¡ã§ãã¾ãã"
 
-#: ../src/dock.c:3334
+#: ../src/dock.c:3425
 msgid "Toggle Omnipresent"
 msgstr "ã©ã®ã¯ã¼ã¯ã¹ãã¼ã¹ã§ãè¡¨ç¤º"
 
-#: ../src/dock.c:3339 ../src/winmenu.c:417 ../src/winspector.c:1395
+#: ../src/dock.c:3430 ../src/winmenu.c:414 ../src/winspector.c:1383
 msgid "Omnipresent"
 msgstr "ã©ã®ã¯ã¼ã¯ã¹ãã¼ã¹ã§ãè¡¨ç¤º"
 
-#: ../src/dock.c:3353
+#: ../src/dock.c:3444
 msgid "Unselect All Icons"
 msgstr "å¨ã¦ã®ã¢ã¤ã³ã³ã®é¸æè§£é¤"
 
-#: ../src/dock.c:3362
+#: ../src/dock.c:3453
 msgid "Keep Icons"
 msgstr "ã¢ã¤ã³ã³ãä¿æãã"
 
-#: ../src/dock.c:3370
+#: ../src/dock.c:3461
 msgid "Move Icons To"
 msgstr "ã¢ã¤ã³ã³ãç§»å"
 
-#: ../src/dock.c:3381
+#: ../src/dock.c:3472
 msgid "Remove Icons"
-msgstr "ã¢ã¤ã³ã³ã®åé¤"
+msgstr "ã¢ã¤ã³ã³ãåé¤"
 
-#: ../src/dock.c:3412
+#: ../src/dock.c:3503
 msgid "Bring Here"
 msgstr "æã£ã¦ãã"
 
-#: ../src/dockedapp.c:131
+#: ../src/dockedapp.c:150
 #, c-format
 msgid "could not find icon %s, used in a docked application"
-msgstr "ç»é²ãããã¢ããªã±ã¼ã·ã§ã³ã§ä½¿ããã¦ããã¢ã¤ã³ã³%sãè¦ã¤ããã¾ãã"
+msgstr "ç»é²ãããããã¯ã¢ããªã§ä½¿ããã¦ããã¢ã¤ã³ã³ %s ãè¦ã¤ããã¾ãã"
 
-#: ../src/dockedapp.c:211
+#: ../src/dockedapp.c:230
 #, c-format
 msgid "Could not open specified icon file: %s"
-msgstr "æå®ã®ã¢ã¤ã³ã³ãã¡ã¤ã«ãéãã¾ãã:%s"
+msgstr "æå®ã®ã¢ã¤ã³ã³ãã¡ã¤ã«ãéãã¾ãã: %s"
 
-#: ../src/dockedapp.c:213
+#: ../src/dockedapp.c:232
 msgid "Ignore"
 msgstr "ç¡è¦"
 
-#: ../src/dockedapp.c:306
+#: ../src/dockedapp.c:334
 msgid "Start when Window Maker is started"
 msgstr "Window Maker èµ·åæã«ä¸ç·ã«èµ·å"
 
-#: ../src/dockedapp.c:313
+#: ../src/dockedapp.c:341
 msgid "Lock (prevent accidental removal)"
 msgstr "ã­ãã¯ãã (ä¸æ®ã®ç»é²è§£é¤ãäºé²)"
 
-#: ../src/dockedapp.c:319
+#: ../src/dockedapp.c:345
 msgid "Application path and arguments"
 msgstr "ã¢ããªã±ã¼ã·ã§ã³ã®ãã¹ã¨å¼æ°"
 
-#: ../src/dockedapp.c:330
+#: ../src/dockedapp.c:358
+msgid "Command for middle-click launch"
+msgstr "ä¸­ãã¿ã³ã¯ãªãã¯ã§èµ·åãããã³ãã³ã"
+
+#: ../src/dockedapp.c:372
+#, c-format
+msgid "%s will be replaced with current selection"
+msgstr "%s ã¯ ã»ã¬ã¯ã·ã§ã³ã«ç½®ãæãããã¾ã"
+
+#: ../src/dockedapp.c:377
 msgid "Command for files dropped with DND"
-msgstr "DNDã«ãããã¡ã¤ã«ãã­ããæã®ã³ãã³ã"
+msgstr "DND ã§è½ã¨ããããã¡ã¤ã«ç¨ã®ã³ãã³ã"
 
-#: ../src/dockedapp.c:342
+#: ../src/dockedapp.c:391
 #, c-format
 msgid "%d will be replaced with the file name"
-msgstr "%dã¯ãã®ãã¡ã¤ã«åã«ç½®ãæãããã¾ã"
+msgstr "%d ã¯ ãã¡ã¤ã«åã«ç½®ãæãããã¾ã"
 
-#: ../src/dockedapp.c:346
+#: ../src/dockedapp.c:395
 msgid "DND support was not compiled in"
 msgstr "DNDå¯¾å¿ã§ã³ã³ãã¤ã«ããã¦ãã¾ãã"
 
-#: ../src/dockedapp.c:352
+#: ../src/dockedapp.c:400
 msgid "Icon Image"
 msgstr "ã¢ã¤ã³ã³ç»å"
 
-#: ../src/dockedapp.c:364 ../src/winspector.c:1533
+#: ../src/dockedapp.c:414 ../src/winspector.c:1521
 msgid "Browse..."
 msgstr "åç§..."
 
-#: ../src/dockedapp.c:409
+#: ../src/dockedapp.c:475
 msgid "Docked Application Settings"
 msgstr "ããã¯ã®ç»é²ã¢ããªã±ã¼ã·ã§ã³è¨­å®"
 
-#: ../src/framewin.c:649 ../src/framewin.c:744 ../src/menu.c:456
+#: ../src/framewin.c:647 ../src/framewin.c:742 ../src/menu.c:463
 #: ../src/texture.c:594
 #, c-format
 msgid "could not render texture: %s"
 msgstr "ãã¯ã¹ãã£ãã¬ã³ããªã³ã°ã§ãã¾ãã: %s"
 
-#: ../src/framewin.c:672 ../src/framewin.c:683 ../src/framewin.c:699
-#: ../src/framewin.c:710 ../src/framewin.c:717 ../src/framewin.c:724
-#: ../src/icon.c:350 ../src/menu.c:485
+#: ../src/framewin.c:670 ../src/framewin.c:681 ../src/framewin.c:697
+#: ../src/framewin.c:708 ../src/framewin.c:715 ../src/framewin.c:722
+#: ../src/icon.c:360 ../src/menu.c:492
 #, c-format
 msgid "error rendering image:%s"
-msgstr "ç»åã®ã¬ã³ããªã³ã°ã¨ã©ã¼:%s"
+msgstr "ç»åã®ã¬ã³ããªã³ã°ã¨ã©ã¼: %s"
 
-#: ../src/framewin.c:777
+#: ../src/framewin.c:775
 #, c-format
 msgid "error rendering image: %s"
 msgstr "ç»åã®ã¬ã³ããªã³ã°ã¨ã©ã¼: %s"
 
-#: ../src/icon.c:229 ../src/wdefaults.c:440
+#: ../src/icon.c:239 ../src/wdefaults.c:443
 #, c-format
 msgid "error loading image file \"%s\""
 msgstr "ç»åãã¡ã¤ã«\"%s\"ã®ã­ã¼ãã¨ã©ã¼"
 
-#: ../src/icon.c:491 ../src/icon.c:500
+#: ../src/icon.c:503 ../src/icon.c:512
 #, c-format
 msgid "could not create directory %s"
 msgstr "ãã£ã¬ã¯ããª%sãä½æã§ãã¾ãã"
 
-#: ../src/icon.c:767
+#: ../src/icon.c:782
 #, c-format
 msgid "could not find default icon \"%s\""
 msgstr "æ¨æºã¢ã¤ã³ã³\"%s\"ãè¦ã¤ããã¾ãã"
 
-#: ../src/icon.c:773
+#: ../src/icon.c:788
 #, c-format
 msgid "could not load default icon \"%s\":%s"
-msgstr "æ¨æºã¢ã¤ã³ã³\"%s\"ãã­ã¼ãã§ãã¾ãã: %s"
+msgstr "æ¨æºã¢ã¤ã³ã³\"%s\"ãã­ã¼ãã§ãã¾ãã:%s"
 
-#: ../src/main.c:205
+#: ../src/main.c:220
 msgid "failed to restart Window Maker."
 msgstr "Window Maker ã®åèµ·åã«å¤±æãã¾ãã"
 
-#: ../src/main.c:208
+#: ../src/main.c:223
 #, c-format
 msgid "could not exec %s"
 msgstr "%s ãå®è¡ã§ãã¾ãã"
 
-#: ../src/main.c:254
+#: ../src/main.c:269
 msgid "Could not execute command: "
 msgstr "ã³ãã³ããå®è¡ã§ãã¾ãã: "
 
-#: ../src/main.c:411
+#: ../src/main.c:426
 #, c-format
 msgid "%s aborted.\n"
 msgstr "%sã¯ä¸­æ­ãã¾ãã\n"
 
-#: ../src/main.c:422
+#: ../src/main.c:437
 #, c-format
 msgid "Usage: %s [options]\n"
-msgstr "ä½¿ç¨æ³: %s [-ãªãã·ã§ã³]\n"
+msgstr "ä½¿ç¨æ³: %s [ãªãã·ã§ã³]\n"
 
-#: ../src/main.c:423
+#: ../src/main.c:438
 msgid "The Window Maker window manager for the X window system"
 msgstr "Window Maker -- X ã¦ã£ã³ãã¦ã·ã¹ãã ã®ããã®ã¦ã£ã³ãã¦ããã¼ã¸ã£"
 
-#: ../src/main.c:425
+#: ../src/main.c:440
 msgid " -display host:dpy\tdisplay to use"
-msgstr " -display ãã¹ã:IDçªå·\tãã£ã¹ãã¬ã¤ã®æå®"
+msgstr "-display ãã¹ã:IDçªå·\tãã£ã¹ãã¬ã¤ã®æå®"
 
-#: ../src/main.c:427
+#: ../src/main.c:442
 msgid " --no-cpp \t\tdisable preprocessing of configuration files"
 msgstr " --no-cpp \t\tè¨­å®ãã¡ã¤ã«ãããªãã­ã»ããµã«ãããªã"
 
-#: ../src/main.c:429
+#: ../src/main.c:444
 msgid " --no-dock\t\tdo not open the application Dock"
 msgstr " --no-dock\t\tã¢ããªã±ã¼ã·ã§ã³ã»ããã¯ãéããªã"
 
-#: ../src/main.c:430
+#: ../src/main.c:445
 msgid " --no-clip\t\tdo not open the workspace Clip"
 msgstr " --no-clip\t\tã¢ããªã±ã¼ã·ã§ã³ã»ã¯ãªãã(Clip)ãéããªã"
 
-#: ../src/main.c:431
+#: ../src/main.c:446
 msgid " --no-autolaunch\tdo not autolaunch applications"
 msgstr " --no-autolaunch\tã¢ããªã±ã¼ã·ã§ã³ã®èªåèµ·åãè¡ããªã"
 
-#: ../src/main.c:432
+#: ../src/main.c:447
 msgid " --dont-restore\t\tdo not restore saved session"
 msgstr " --dont-restore\t\tä¿å­ããã»ãã·ã§ã³ãå¾©åããªã"
 
-#: ../src/main.c:434
+#: ../src/main.c:449
 msgid " --locale locale\tlocale to use"
 msgstr " --locale locale\tä½¿ç¨ããlocaleã®æå®"
 
-#: ../src/main.c:436
+#: ../src/main.c:451
 msgid ""
 " --create-stdcmap\tcreate the standard colormap hint in PseudoColor visuals"
 msgstr " --create-stdcmap\tæ¬ä¼¼è²è§£ååº¦ã«æ¨æºã«ã©ã¼ããããã³ããä½æãã"
 
-#: ../src/main.c:437
+#: ../src/main.c:452
 msgid " --visual-id visualid\tvisual id of visual to use"
 msgstr " --visual-id ãã¸ã¥ã¢ã«ID\tãã¸ã¥ã¢ã«IDã®æå®"
 
-#: ../src/main.c:438
+#: ../src/main.c:453
 msgid " --static\t\tdo not update or save configurations"
 msgstr " --static\t\tã¹ã¿ãã£ãã¯ã¢ã¼ãã§èµ·å(è¨­å®ãä¿å­ï¼æ´æ°ããªã)"
 
-#: ../src/main.c:439
+#: ../src/main.c:454
 msgid " --no-polling\t\tdo not periodically check for configuration updates"
 msgstr " --no-polling\t\tå¨æçã«è¨­å®ãã¡ã¤ã«ã®æ´æ°ããã§ãã¯ããªã"
 
-#: ../src/main.c:441
+#: ../src/main.c:456
 msgid " --synchronous\t\tturn on synchronous display mode"
 msgstr " --synchronous\t\tç»é¢ã®åæã¢ã¼ãã on ã«ãã"
 
-#: ../src/main.c:443
+#: ../src/main.c:458
 msgid " --version\t\tprint version and exit"
 msgstr " --version\t\tãã¼ã¸ã§ã³ãè¡¨ç¤ºãã¦ããçµäºãã"
 
-#: ../src/main.c:444
+#: ../src/main.c:459
 msgid " --help\t\t\tshow this message"
 msgstr " --help\t\tãã®ã¡ãã»ã¼ã¸ãè¡¨ç¤º"
 
-#: ../src/main.c:456
+#: ../src/main.c:473
 #, c-format
 msgid ""
 "could not find user GNUstep directory (%s).\n"
 "Make sure you have installed Window Maker correctly and run wmaker.inst"
 msgstr ""
 "ã¦ã¼ã¶ã®GNUstepãã£ã¬ã¯ããª(%s)ãè¦ã¤ããã¾ãã\n"
-"Window Makerãæ­£ããã¤ã³ã¹ãã¼ã«ããã¦ãããã¨ãç¢ºèªãã¦, "
-"wmaker.instãå®è¡ãã¦ãã ãã"
+"Window Makerãæ­£ããã¤ã³ã¹ãã¼ã«ããã¦ãããã¨ãç¢ºèªãã¦, wmaker.instãå®è¡ã"
+"ã¦ãã ãã"
+
+#: ../src/main.c:478
+#, c-format
+msgid "could not find user GNUstep directory (%s)."
+msgstr "ã¦ã¼ã¶ã®GNUstepãã£ã¬ã¯ããª(%s)ãè¦ã¤ããã¾ãã"
+
+#: ../src/main.c:481
+msgid ""
+"There was an error while creating GNUstep directory, please make sure you "
+"have installed Window Maker correctly and run wmaker.inst"
+msgstr ""
+"ã¦ã¼ã¶ã®GNUstepãã£ã¬ã¯ããªã®ä½æã«å¤±æãã¾ãã,\n"
+"Window Makerãæ­£ããã¤ã³ã¹ãã¼ã«ããã¦ãããã¨ãç¢ºèªãã¦, wmaker.instãå®è¡ã"
+"ã¦ãã ãã"
+
+#: ../src/main.c:484
+#, c-format
+msgid "%s directory created with default configuration."
+msgstr "ããã©ã«ãè¨­å®ã§ %s ãã£ã¬ã¯ããªãä½æããã¾ãã"
 
-#: ../src/main.c:477 ../src/main.c:482
+#: ../src/main.c:506 ../src/main.c:511
 #, c-format
 msgid "%s:could not execute initialization script"
 msgstr "%s:åæåã¹ã¯ãªãããå®è¡ã§ãã¾ãã"
 
-#: ../src/main.c:502 ../src/main.c:507
+#: ../src/main.c:533 ../src/main.c:538
 #, c-format
 msgid "%s:could not execute exit script"
 msgstr "%s:çµäºã¹ã¯ãªãããå®è¡ã§ãã¾ãã"
 
-#: ../src/main.c:623 ../src/main.c:631 ../src/main.c:639 ../src/main.c:659
+#: ../src/main.c:622 ../src/main.c:722 ../src/main.c:730 ../src/main.c:738
+#: ../src/main.c:758
 #, c-format
 msgid "too few arguments for %s"
 msgstr "%sã«å¯¾ããå¼æ°ãè¶³ãã¾ãã"
 
-#: ../src/main.c:643
+#: ../src/main.c:742
 #, c-format
 msgid "bad value for visualid: \"%s\""
 msgstr "ãã¸ã¥ã¢ã«IDã®å¤ãä¸æ­£ã§ã: \"%s\""
 
-#: ../src/main.c:667
+#: ../src/main.c:766
 #, c-format
 msgid "%s: invalid argument '%s'\n"
 msgstr "%s: ç¡å¹ãªå¼æ°ã§ã '%s'\n"
 
-#: ../src/main.c:668
+#: ../src/main.c:767
 #, c-format
 msgid "Try '%s --help' for more information\n"
 msgstr "è¿½å æå ±ã®ããã« '%s --help' ãè©¦ãã¦ã¿ã¦ãã ãã\n"
 
-#: ../src/main.c:699
+#: ../src/main.c:802
 msgid "X server does not support locale"
 msgstr "Xãµã¼ããã­ã±ã¼ã«æ©è½ããµãã¼ããã¦ãã¾ãã"
 
-#: ../src/main.c:703
+#: ../src/main.c:806
 msgid "cannot set locale modifiers"
 msgstr "ã­ã±ã¼ã«ãè¨­å®ã§ãã¾ãã"
 
-#: ../src/main.c:719
+#: ../src/main.c:822
 #, c-format
 msgid "could not open display \"%s\""
 msgstr "ãã£ã¹ãã¬ã¤`%s'ãéãã¾ãã"
 
-#: ../src/menu.c:1255
+#: ../src/menu.c:1273
 msgid "could not grab keyboard"
 msgstr "ã­ã¼ãã¼ããç¢ºä¿ã§ãã¾ãã"
 
-#: ../src/misc.c:71
+#: ../src/menu.c:2612
+#, c-format
+msgid "bad value in menus state info:%s"
+msgstr "ã¡ãã¥ã¼ã®æå ± %s ã«ä¸æ­£ãªåå®¹ãããã¾ã"
+
+#: ../src/misc.c:65
 #, c-format
 msgid "could not define value for %s for cpp"
 msgstr "cppã® %sã®å¤ãå®ç¾©ã§ãã¾ãã"
 
-#: ../src/misc.c:101
+#: ../src/misc.c:95
 #, c-format
 msgid "could not get password entry for UID %i"
 msgstr "ã¦ã¼ã¶ID %i ã®ãã¹ã¯ã¼ãã¨ã³ããªãå¾ããã¾ãã"
 
-#: ../src/misc.c:126
+#: ../src/misc.c:120
 #, c-format
 msgid "your machine is misconfigured. HOSTNAME is set to %s"
 msgstr "ããªãã®ãã·ã³ã®è¨­å®ãããããã§ã. HOSTNAME ã %s ã«è¨­å®ããã¦ãã¾ã"
 
-#: ../src/misc.c:132
+#: ../src/misc.c:126
 #, c-format
 msgid "your machine is misconfigured. HOST is set to %s"
 msgstr "ããªãã®ãã·ã³ã®è¨­å®ãããããã§ã. HOST ã %s ã«è¨­å®ããã¦ãã¾ã"
 
-#: ../src/misc.c:626
+#: ../src/misc.c:621
 msgid "Program Arguments"
 msgstr "ãã­ã°ã©ã å¼æ°"
 
-#: ../src/misc.c:627
+#: ../src/misc.c:622
 msgid "Enter command arguments:"
-msgstr "ã³ãã³ãã©ã¤ã³å¼æ°ãå¥åãã¦ãã ãã"
-
-#: ../src/misc.c:720
-msgid "unable to get dropped data from DND drop"
-msgstr "DNDãã­ãããããã­ããæå ±ãå¾ããã¾ãã"
+msgstr "ã³ãã³ãã©ã¤ã³å¼æ°ãå¥åãã¦ãã ãã:"
 
-#: ../src/misc.c:728
-msgid "error getting dropped data from DND drop"
-msgstr "DNDãã­ããããã®ãã­ããæå ±åå¾ã«å¤±æãã¾ãã"
-
-#: ../src/misc.c:734
-msgid "out of memory while getting data from DND drop"
-msgstr "DNDãã­ãããããã­ããæå ±ãå¾ãã¨ãã«ã¡ã¢ãªãä¸è¶³ãã¾ãã"
-
-#: ../src/misc.c:779 ../src/misc.c:919
+#: ../src/misc.c:736 ../src/misc.c:874
 #, c-format
 msgid "out of memory during expansion of \"%s\""
 msgstr "\"%s\"ã®å±éä¸­ã«ã¡ã¢ãªãä¸è¶³ãã¾ãã"
 
-#: ../src/misc.c:833
+#: ../src/misc.c:790
 msgid "out of memory during expansion of \"%w\""
 msgstr "\"%w\"ã®å±éä¸­ã«ã¡ã¢ãªãä¸è¶³ãã¾ãã"
 
-#: ../src/misc.c:851
+#: ../src/misc.c:808
 msgid "out of memory during expansion of \"%W\""
 msgstr "\"%W\"ã®å±éä¸­ã«ã¡ã¢ãªãä¸è¶³ãã¾ãã"
 
-#: ../src/misc.c:867
+#: ../src/misc.c:824
+#, c-format
 msgid "out of memory during expansion of \"%a\""
 msgstr "\"%a\"ã®å±éä¸­ã«ã¡ã¢ãªãä¸è¶³ãã¾ãã"
 
-#: ../src/misc.c:898
+#: ../src/misc.c:853
 #, c-format
 msgid "out of memory during expansion of \"%d\""
 msgstr "\"%d\"ã®å±éä¸­ã«ã¡ã¢ãªãä¸è¶³ãã¾ãã"
 
-#: ../src/misc.c:912
+#: ../src/misc.c:867
 msgid "selection not available"
-msgstr ""
+msgstr "ã»ã¬ã¯ã·ã§ã³ãå©ç¨ä¸è½"
 
-#: ../src/misc.c:985 ../src/misc.c:991
+#: ../src/misc.c:911 ../src/misc.c:917
 #, c-format
 msgid "bad window name value in %s state info"
 msgstr "%sã¹ãã¼ãæå ±ä¸­ã«ä¸æ­£ãªã¦ã£ã³ãã¦åãããã¾ã"
 
-#: ../src/misc.c:1248
+#: ../src/misc.c:1156
 msgid "could not send message to background image helper"
 msgstr "èæ¯ã¤ã¡ã¼ã¸ãã«ãã¼ã«ã¡ãã»ã¼ã¸ãéä¿¡ã§ãã¾ãã"
 
@@ -982,67 +1066,6 @@
 msgid "could not load mask bitmap file \"%s\". Won't use mask"
 msgstr "ãã¹ã¯ãããããããã¡ã¤ã«\"%s\"ãèª­ã¿è¾¼ãã¾ãã. ãã¹ã¯ãä½¿ãã¾ãã"
 
-#: ../src/proplist.c:180
-msgid "unterminated string"
-msgstr "æå­åã®çµç«¯ãããã¾ãã"
-
-#: ../src/proplist.c:247
-msgid "unterminated array"
-msgstr "éåã®çµç«¯ãããã¾ãã"
-
-#: ../src/proplist.c:256
-msgid "missing , in array or unterminated array"
-msgstr "éåä¸­ã§ `,'ãè¶³ãã¾ãã"
-
-#: ../src/proplist.c:267
-msgid "could not get array element"
-msgstr "éåè¦ç´ ãå¾ããã¨ãã§ãã¾ãã"
-
-#: ../src/proplist.c:297
-msgid "unterminated dictionary"
-msgstr "è¾æ¸ã®çµç«¯ãããã¾ãã"
-
-#: ../src/proplist.c:315
-msgid "missing dictionary key"
-msgstr "è¾æ¸ã­ã¼ãããã¾ãã"
-
-#: ../src/proplist.c:317
-msgid "missing dictionary entry key or unterminated dictionary"
-msgstr "è¾æ¸ã­ã¼ããªãã, è¾æ¸ã®çµç«¯ãããã¾ãã"
-
-#: ../src/proplist.c:323
-msgid "error parsing dictionary key"
-msgstr "è¾æ¸ã­ã¼ã®è§£èª­ä¸­ã«ã¨ã©ã¼ãçºçãã¾ãã"
-
-#: ../src/proplist.c:332
-msgid "missing = in dictionary entry"
-msgstr "è¾æ¸ã¨ã³ããªã« `='ãããã¾ãã"
-
-#: ../src/proplist.c:351
-msgid "missing ; in dictionary entry"
-msgstr "è¾æ¸ã¨ã³ããªã« `;'ãè¶³ãã¾ãã"
-
-#: ../src/proplist.c:432
-msgid ""
-"was expecting a string, dictionary, data or array. If it's a string, try "
-"enclosing it with \"."
-msgstr ""
-"ã«ã¯, æå­å, è¾æ¸, ãã¼ã¿ãããã¯éåãç¶ãã¦ãã ãã. æå­åã®å ´å, \" "
-"ã§ããããã¨ãè©¦ãã¦ä¸ãã. "
-
-#: ../src/proplist.c:434
-msgid "Comments are not allowed inside WindowMaker owned domain files."
-msgstr "WindowMakerèªèº«ã®åé¨ãã¡ã¤ã³ãã¡ã¤ã«ä¸­ã§ã¯ã³ã¡ã³ãã¯æ¸ãã¾ãã"
-
-#: ../src/proplist.c:453
-#, c-format
-msgid "could not open domain file %s"
-msgstr "ãã¡ã¤ã³ãã¡ã¤ã«%sãéãã¾ãã"
-
-#: ../src/proplist.c:466
-msgid "extra data after end of file"
-msgstr "ãã¡ã¤ã«çµç«¯ã«ä½åãªãã¼ã¿ãããã¾ã"
-
 #: ../src/resources.c:44
 #, c-format
 msgid "could not parse color \"%s\""
@@ -1053,19 +1076,19 @@
 msgid "could not allocate color \"%s\""
 msgstr "ã«ã©ã¼\"%s\"ãäºç´ã§ãã¾ãã"
 
-#: ../src/rootmenu.c:183 ../src/rootmenu.c:185
+#: ../src/rootmenu.c:196 ../src/rootmenu.c:198
 msgid "Exit"
 msgstr "çµäº"
 
-#: ../src/rootmenu.c:184
+#: ../src/rootmenu.c:197
 msgid "Exit window manager?"
 msgstr "ã¦ã£ã³ãã¦ããã¼ã¸ã£ãçµäºãã¾ãã?"
 
-#: ../src/rootmenu.c:220
+#: ../src/rootmenu.c:245
 msgid "Close X session"
 msgstr "Xã»ãã·ã§ã³ã®çµäº"
 
-#: ../src/rootmenu.c:221
+#: ../src/rootmenu.c:246
 msgid ""
 "Close Window System session?\n"
 "Kill might close applications with unsaved data."
@@ -1077,15 +1100,15 @@
 #. entry = wMenuAddCallback(menu, _("Select Shortcut"), NULL, NULL);
 #. wMenuEntrySetCascade(menu, entry, makeMakeShortcutMenu(scr));
 #.
-#: ../src/rootmenu.c:223 ../src/winmenu.c:505
+#: ../src/rootmenu.c:248 ../src/winmenu.c:501
 msgid "Close"
 msgstr "éãã"
 
-#: ../src/rootmenu.c:234
+#: ../src/rootmenu.c:261
 msgid "Kill X session"
 msgstr "Xã»ãã·ã§ã³ã®çµäº"
 
-#: ../src/rootmenu.c:235
+#: ../src/rootmenu.c:262
 msgid ""
 "Kill Window System session?\n"
 "(all applications will be closed)"
@@ -1093,202 +1116,202 @@
 "ã¦ã£ã³ãã¦ã·ã¹ãã ã®ã»ãã·ã§ã³ãçµäºãã¾ãã?\n"
 "(å¨ã¦ã®ã¢ããªã±ã¼ã·ã§ã³ãéãããã¾ã)"
 
-#: ../src/rootmenu.c:504
+#: ../src/rootmenu.c:544
 #, c-format
 msgid "%s:invalid kbd shortcut specification \"%s\" for entry %s"
 msgstr "%s:ã­ã¼ãã¼ãã·ã§ã¼ãã«ããã®è¨­å®\"%s\"ãééã£ã¦ãã¾ã(%s)"
 
-#: ../src/rootmenu.c:512
+#: ../src/rootmenu.c:552
 #, c-format
 msgid "%s:invalid key in shortcut \"%s\" for entry %s"
 msgstr "%s:ã­ã¼ãã¼ãã·ã§ã¼ãã«ãã\"%s\"ãééã£ã¦ãã¾ã(%s)"
 
-#: ../src/rootmenu.c:565
+#: ../src/rootmenu.c:605
 #, c-format
 msgid "%s: unmatched '\"' in menu file"
 msgstr "%s: ã¡ãã¥ã¼ãã¡ã¤ã«ä¸­, '\"'ãå¯¾å¿ãã¦ãã¾ãã"
 
-#: ../src/rootmenu.c:615
+#: ../src/rootmenu.c:655
 #, c-format
 msgid "%s: missing command"
 msgstr "%s: ã³ãã³ãã®æå®ãããã¾ãã"
 
-#: ../src/rootmenu.c:647
+#: ../src/rootmenu.c:687
 #, c-format
 msgid "invalid OPEN_MENU specification: %s"
 msgstr "OPEN_MENUã®æå®ãä¸é©åã§ã: %s"
 
-#: ../src/rootmenu.c:695
+#: ../src/rootmenu.c:738
 #, c-format
 msgid "%s:could not stat menu"
 msgstr "%s:ã¡ãã¥ã¼ãstatã§ãã¾ãã"
 
-#: ../src/rootmenu.c:703
+#: ../src/rootmenu.c:746
 #, c-format
 msgid "%s:could not stat menu:%s"
 msgstr "%s:ã¡ãã¥ã¼ãstatã§ãã¾ãã: %s"
 
-#: ../src/rootmenu.c:721
+#: ../src/rootmenu.c:764
 #, c-format
 msgid "too many parameters in OPEN_MENU: %s"
 msgstr "OPEN_MENUã®ãã©ã¡ã¼ã¿ãå¤ããã¾ã: %s"
 
-#: ../src/rootmenu.c:765
+#: ../src/rootmenu.c:808
 msgid ""
 "There are more than one WORKSPACE_MENU commands in the applications menu. "
 "Only one is allowed."
 msgstr ""
-"ã¢ããªã±ã¼ã·ã§ã³ã¡ãã¥ã¼ä¸­, WORKSPACE_MENUã³ãã³ããè¤æ°å­å¨ãã¾ã. "
-"ä¸ã¤ã®ã¿å¯è½ã§ã"
+"ã¢ããªã±ã¼ã·ã§ã³ã¡ãã¥ã¼ä¸­, WORKSPACE_MENUã³ãã³ããè¤æ°å­å¨ãã¾ã. ä¸ã¤ã®ã¿"
+"å¯è½ã§ã"
 
-#: ../src/rootmenu.c:799
+#: ../src/rootmenu.c:842
 msgid ""
 "There are more than one WINDOWS_MENU commands in the applications menu. Only "
 "one is allowed."
 msgstr ""
-"ã¢ããªã±ã¼ã·ã§ã³ã¡ãã¥ã¼ä¸­, WINDOWS_MENUã³ãã³ããè¤æ°å­å¨ãã¾ã. "
-"ä¸ã¤ã®ã¿å¯è½ã§ã"
+"ã¢ããªã±ã¼ã·ã§ã³ã¡ãã¥ã¼ä¸­, WINDOWS_MENUã³ãã³ããè¤æ°å­å¨ãã¾ã. ä¸ã¤ã®ã¿å¯"
+"è½ã§ã"
 
-#: ../src/rootmenu.c:804
+#: ../src/rootmenu.c:847
 msgid "Window List"
 msgstr "ã¦ã£ã³ãã¦ä¸è¦§"
 
-#: ../src/rootmenu.c:833 ../src/rootmenu.c:851 ../src/rootmenu.c:861
+#: ../src/rootmenu.c:876 ../src/rootmenu.c:894 ../src/rootmenu.c:904
 #, c-format
 msgid "%s:missing parameter for menu command \"%s\""
 msgstr "%s:ã¡ãã¥ã¼ã³ãã³ã\"%s\"ã«å¯¾ãããã©ã¡ã¼ã¿ãããã¾ãã"
 
-#: ../src/rootmenu.c:929
+#: ../src/rootmenu.c:972
 #, c-format
 msgid "%s:unknown command \"%s\" in menu config."
 msgstr "%s:ã¡ãã¥ã¼è¨­å®ä¸­, ä¸æ­£ãªã³ãã³ã\"%s\"ãããã¾ã"
 
-#: ../src/rootmenu.c:937
+#: ../src/rootmenu.c:980
 #, c-format
 msgid "%s:can't add shortcut for entry \"%s\""
 msgstr "%s:ã¨ã³ããª\"%s\"ã®ã·ã§ã¼ãã«ãããç»é²ã§ãã¾ãã"
 
-#: ../src/rootmenu.c:1074
+#: ../src/rootmenu.c:1117
 #, c-format
 msgid "%s:maximal line size exceeded in menu config: %s"
 msgstr "%s:ã¡ãã¥ã¼è¨­å®ã®æå¤§è¡æ°ãè¶ãã¾ãã: %s"
 
-#: ../src/rootmenu.c:1096 ../src/rootmenu.c:1189 ../src/rootmenu.c:1291
+#: ../src/rootmenu.c:1139 ../src/rootmenu.c:1232 ../src/rootmenu.c:1336
 #, c-format
 msgid "%s:missing command in menu config: %s"
-msgstr "%s:ã¡ãã¥ã¼è¨­å®ã«, ã³ãã³ããããã¾ãã: %s"
+msgstr "%s:ã¡ãã¥ã¼è¨­å®ã«ã³ãã³ãã®æå®ãããã¾ãã: %s"
 
-#: ../src/rootmenu.c:1126
+#: ../src/rootmenu.c:1169
 #, c-format
 msgid "%s:syntax error in menu file:END declaration missing"
 msgstr "%s:ã¡ãã¥ã¼ãã¡ã¤ã«ã«ææ³ã¨ã©ã¼ãããã¾ã: END ã®è¨è¿°ãè¶³ãã¾ãã"
 
-#: ../src/rootmenu.c:1155 ../src/rootmenu.c:1255
+#: ../src/rootmenu.c:1198 ../src/rootmenu.c:1300
 msgid "could not make arguments for menu file preprocessor"
 msgstr "ã¡ãã¥ã¼ãã¡ã¤ã«ã»ããªãã­ã»ããµã¸ã®å¼æ°ãä½æã§ãã¾ãã"
 
-#: ../src/rootmenu.c:1162 ../src/rootmenu.c:1263
+#: ../src/rootmenu.c:1205 ../src/rootmenu.c:1308
 #, c-format
 msgid "%s:could not open/preprocess menu file"
 msgstr "%s:ã¡ãã¥ã¼ãã¡ã¤ã«ã®ãªã¼ãã³ï¼ããªãã­ã»ã¹ãã§ãã¾ãã"
 
-#: ../src/rootmenu.c:1174 ../src/rootmenu.c:1276
+#: ../src/rootmenu.c:1217 ../src/rootmenu.c:1321
 #, c-format
 msgid "%s:could not open menu file"
 msgstr "%s:ã¡ãã¥ã¼ãã¡ã¤ã«ãéãã¾ãã"
 
-#: ../src/rootmenu.c:1201
+#: ../src/rootmenu.c:1244
 #, c-format
 msgid "%s:invalid menu file. MENU command is missing"
 msgstr "%s: ã¡ãã¥ã¼ãã¡ã¤ã«ãä¸é©å½ã§ã. MENUã³ãã³ããå­å¨ãã¾ãã"
 
-#: ../src/rootmenu.c:1210
+#: ../src/rootmenu.c:1253
 msgid "error reading preprocessed menu data"
 msgstr "ããªãã­ã»ã¹ãããã¡ãã¥ã¼ãã¼ã¿ã®èª­ã¿è¾¼ã¿ã«ã¨ã©ã¼ãèµ·ãã¾ãã"
 
-#: ../src/rootmenu.c:1303
+#: ../src/rootmenu.c:1348
 #, c-format
 msgid "%s:no title given for the root menu"
 msgstr "%s:ã«ã¼ãã¡ãã¥ã¼ã®ã¿ã¤ãã«ãããã¾ãã"
 
-#: ../src/rootmenu.c:1394 ../src/rootmenu.c:1467 ../src/rootmenu.c:1508
+#: ../src/rootmenu.c:1439 ../src/rootmenu.c:1512 ../src/rootmenu.c:1553
 #, c-format
 msgid "out of memory while constructing directory menu %s"
-msgstr "ãã£ã¬ã¯ããªã¡ãã¥ã¼%sã®ä½æããã®ã¡ã¢ãªãä¸è¶³ãã¦ã¾ã"
+msgstr "ãã£ã¬ã¯ããªã¡ãã¥ã¼%sã®ä½æã®ããã®ã¡ã¢ãªãä¸è¶³ãã¦ãã¾ã"
 
-#: ../src/rootmenu.c:1404
+#: ../src/rootmenu.c:1449
 #, c-format
 msgid "%s:could not stat file \"%s\" in menu directory"
 msgstr "%s:ã¡ãã¥ã¼ãã£ã¬ã¯ããªã®ãã¡ã¤ã«\"%s\"ãstatã§ãã¾ãã"
 
-#: ../src/rootmenu.c:1562
+#: ../src/rootmenu.c:1607
 msgid "Commands"
 msgstr "ã³ãã³ã"
 
-#: ../src/rootmenu.c:1565
+#: ../src/rootmenu.c:1610
 msgid "Restart"
 msgstr "åèµ·å"
 
-#: ../src/rootmenu.c:1566
+#: ../src/rootmenu.c:1611
 msgid "Exit..."
 msgstr "çµäº..."
 
-#: ../src/rootmenu.c:1611
+#: ../src/rootmenu.c:1656
 #, c-format
 msgid "could not find menu file \"%s\" referenced in WMRootMenu"
 msgstr "WMRootMenuã§åç§ãã¦ããã¡ãã¥ã¼\"%s\"ãè¦ã¤ãããã¾ãã"
 
-#: ../src/rootmenu.c:1618
+#: ../src/rootmenu.c:1663
 #, c-format
 msgid "could not access menu \"%s\" referenced in WMRootMenu"
 msgstr "WMRootMenuã§åç§ãã¦ããã¡ãã¥ã¼\"%s\"ã¸ã¢ã¯ã»ã¹ã§ãã¾ãã"
 
-#: ../src/rootmenu.c:1629
+#: ../src/rootmenu.c:1674
 #, c-format
 msgid ""
 "using default menu file \"%s\" as the menu referenced in WMRootMenu could "
 "not be found "
 msgstr ""
-"WMRootMenuã§åç§ãã¦ããã¡ãã¥ã¼è¦ã¤ãããªãã®ã§, "
-"ããã©ã«ãã®ã¡ãã¥ã¼ãã¡ã¤ã« \"%s\" ãç¨ãã¾ã"
+"WMRootMenuã§åç§ãã¦ããã¡ãã¥ã¼è¦ã¤ãããªãã®ã§, ããã©ã«ãã®ã¡ãã¥ã¼ãã¡ã¤"
+"ã« \"%s\" ãç¨ãã¾ã"
 
-#: ../src/rootmenu.c:1652 ../src/rootmenu.c:1728
+#: ../src/rootmenu.c:1697 ../src/rootmenu.c:1773
 #, c-format
 msgid "%s:format error in root menu configuration \"%s\""
 msgstr "%s:ã«ã¼ãã¡ãã¥ã¼è¨­å®\"%s\"ã«ãã©ã¼ãããã¨ã©ã¼ãããã¾ã"
 
-#: ../src/rootmenu.c:1816
+#: ../src/rootmenu.c:1855
 msgid ""
 "The applications menu could not be loaded. Look at the console output for a "
 "detailed description of the errors."
 msgstr ""
-"ã¢ããªã±ã¼ã·ã§ã³ã¡ãã¥ã¼ãã­ã¼ãã§ãã¾ãã. "
-"ã¨ã©ã¼ã®è©³ç´°ã¯ã³ã³ã½ã¼ã«ã¸ã®åºåãåç§ãã¦ãã ãã"
+"ã¢ããªã±ã¼ã·ã§ã³ã¡ãã¥ã¼ãã­ã¼ãã§ãã¾ãã. ã¨ã©ã¼ã®è©³ç´°ã¯ã³ã³ã½ã¼ã«ã¸ã®åºå"
+"ãåç§ãã¦ãã ãã"
 
-#: ../src/screen.c:740
+#: ../src/screen.c:709
 #, c-format
 msgid "could not initialize graphics library context: %s"
 msgstr "ã°ã©ãã£ãã¯ã©ã¤ãã©ãªã³ã³ãã­ã¹ããåæåã§ãã¾ãã: %s"
 
-#: ../src/screen.c:771
-msgid "could not do initialization of WINGs widget set"
+#: ../src/screen.c:737
+msgid "could not initialize WINGs widget set"
 msgstr "WINGsã¦ã£ã¸ã§ããã»ããã®åæåãã§ãã¾ãã"
 
-#: ../src/screen.c:1135
+#: ../src/screen.c:1144
 #, c-format
 msgid "could not save session state in %s"
 msgstr "%sã®ã»ãã·ã§ã³ãä¿å­ã§ãã¾ããã§ãã"
 
-#: ../src/session.c:183 ../src/wdefaults.c:588 ../src/winspector.c:453
+#: ../src/session.c:183 ../src/wdefaults.c:589 ../src/winspector.c:459
 #, c-format
 msgid "can't convert \"%s\" to boolean"
 msgstr "\"%s\"ã booleanåã«å¤æã§ãã¾ãã"
 
-#: ../src/session.c:1021
+#: ../src/session.c:1018
 msgid "out of memory while saving session state"
 msgstr "ã»ãã·ã§ã³ã®ç¶æãä¿å­ãã¦ããéä¸­ã«ã¡ã¢ãªãè¶³ããªããªãã¾ãã"
 
-#: ../src/session.c:1112
+#: ../src/session.c:1101
 msgid "end of memory while saving session state"
 msgstr "ã»ãã·ã§ã³ã®ç¶æãä¿å­ãã¦ããéä¸­ã«ã¡ã¢ãªããªããªãã¾ãã"
 
@@ -1298,109 +1321,43 @@
 #. * If the sm was the last client of session, then we'll die
 #. * anyway, otherwise we can continue doing our stuff.
 #.
-#: ../src/session.c:1250
+#: ../src/session.c:1239
 msgid "connection to the session manager was lost"
 msgstr "ã»ãã·ã§ã³ã»ããã¼ã¸ã£ã¨ã®æ¥ç¶ãå¤±ããã¾ãã"
 
-#: ../src/stacking.c:73
+#: ../src/stacking.c:81
 msgid "could not get window list!!"
 msgstr "ã¦ã£ã³ãã¦ä¸è¦§ãå¾ããã¾ãã!!"
 
-#: ../src/startup.c:202
+#: ../src/startup.c:195
 #, c-format
 msgid "internal X error: %s\n"
 msgstr "Xåé¨ã¨ã©ã¼: %s\n"
 
-#: ../src/startup.c:260
-#, c-format
-msgid "got signal %i (%s) - restarting\n"
-msgstr "ã·ã°ãã«%i(%s)ãåãã¾ãã -- åèµ·åãã¾ã\n"
-
-#: ../src/startup.c:262
-#, c-format
-msgid "got signal %i - restarting\n"
-msgstr "ã·ã°ãã«%iãåãã¾ãã -- åèµ·åãã¾ã\n"
-
-#: ../src/startup.c:272
-#, c-format
-msgid "got signal %i (%s) - rereading defaults\n"
-msgstr "ã·ã°ãã«%i(%s)ãåãã¾ãã -- ããã©ã«ããåèª­ã¿è¾¼ã¿ãã¾ã\n"
-
-#: ../src/startup.c:274
-#, c-format
-msgid "got signal %i - rereading defaults\n"
-msgstr "ã·ã°ãã«%iãåãã¾ãã -- ããã©ã«ããåèª­ã¿è¾¼ã¿ãã¾ã\n"
-
-#: ../src/startup.c:284
-#, c-format
-msgid "got signal %i (%s) - exiting...\n"
-msgstr "ã·ã°ãã«%i(%s)ãåãã¾ãã -- çµäºãã¾ã...\n"
-
-#: ../src/startup.c:286
-#, c-format
-msgid "got signal %i - exiting...\n"
-msgstr "ã·ã°ãã«%iãåãã¾ãã -- çµäºãã¾ã...\n"
-
-#: ../src/startup.c:322
-#, c-format
-msgid "got signal %i (%s)\n"
-msgstr "ã·ã°ãã«%i(%s)ãåãã¾ãã\n"
-
-#: ../src/startup.c:324
-#, c-format
-msgid "got signal %i\n"
-msgstr "ã·ã°ãã«%iãåãã¾ãã\n"
-
-#: ../src/startup.c:335
-msgid ""
-"crashed while trying to do some post-crash cleanup. Aborting immediatelly."
-msgstr "ã¯ã©ãã·ã¥å¾ã®æµåå¦çä¸­ã«ã¯ã©ãã·ã¥ãã¾ãã. ç´ã¡ã«ä¸­æ­ãã¾ã"
-
-#. we try to restart Window Maker
-#: ../src/startup.c:400
-msgid "trying to restart Window Maker..."
-msgstr "Window Maker ãåèµ·åãã¦ãã¾ã..."
-
-#: ../src/startup.c:405
-msgid "trying to start alternate window manager..."
-msgstr "ãããã®ã¦ã£ã³ãã¦ããã¼ã¸ã£ãèµ·åãã¦ãã¾ã..."
-
-#: ../src/startup.c:410
-msgid "failed to start alternate window manager. Aborting."
-msgstr "ãããã®ã¦ã£ã³ãã¦ããã¼ã¸ã£ãèµ·åã«å¤±æãã¾ãã. ä¸­æ­ãã¾ã."
-
-#: ../src/startup.c:412
-msgid ""
-"a fatal error has occured, probably due to a bug. Please fill the included "
-"BUGFORM and report it."
-msgstr ""
-"ãã°ã«ãããã®ã¨æãããè´å½çãªã¨ã©ã¼ãèµ·ãã¾ãã. "
-"ãã°ãã©ã¼ã ã«ãããã£ã¦ã¬ãã¼ããã¦ä¸ãã"
-
-#: ../src/startup.c:900
+#: ../src/startup.c:772
 #, c-format
 msgid "icon size is configured to %i, but it's too small. Using 16, instead\n"
 msgstr ""
 "è¨­å®ããã¦ããã¢ã¤ã³ã³ãµã¤ãº%iã¯å°ãããã¾ã. ãããã«ãµã¤ãº16ãç¨ãã¾ã\n"
 
-#: ../src/startup.c:928
+#: ../src/startup.c:801
 msgid "XKB is not supported. KbdModeLock is automatically disabled."
 msgstr "XKB ã¯ãµãã¼ãããã¦ãã¾ãã. KbdModeLock ã¯èªåçã«ç¡å¹ã«ãªãã¾ã"
 
-#: ../src/startup.c:947
+#: ../src/startup.c:820
 msgid "it seems that there is already a window manager running"
 msgstr "æ¢ã«ä»ã®ã¦ã£ã³ãã¦ããã¼ã¸ã£ãç«ã¡ä¸ãã£ã¦ããããã§ã"
 
-#: ../src/startup.c:953
+#: ../src/startup.c:826
 #, c-format
 msgid "could not manage screen %i"
 msgstr "ã¹ã¯ãªã¼ã³ %iãææ¡ã§ãã¾ãã"
 
-#: ../src/startup.c:1021
+#: ../src/startup.c:885
 msgid "could not manage any screen"
 msgstr "ææ¡ã§ããã¹ã¯ãªã¼ã³ãããã¾ãã"
 
-#: ../src/switchmenu.c:114
+#: ../src/switchmenu.c:145
 msgid "Windows"
 msgstr "ã¦ã£ã³ãã¦ä¸è¦§"
 
@@ -1432,20 +1389,20 @@
 msgid "could not allocate image buffer"
 msgstr "ç»åãããã¡ãäºç´ã§ãã¾ãã"
 
-#: ../src/wdefaults.c:434
+#: ../src/wdefaults.c:437
 #, c-format
 msgid "could not find icon file \"%s\""
 msgstr "ã¢ã¤ã³ã³ãã¡ã¤ã« \"%s\"ãè¦ã¤ããã¾ãã"
 
-#: ../src/window.c:2825 ../src/window.c:2960
+#: ../src/window.c:3052 ../src/window.c:3193
 msgid ""
 "the NumLock, ScrollLock or similar key seems to be turned on.\n"
 "Turn it off or some mouse actions and keyboard shortcuts will not work."
 msgstr ""
-"NumLock, ScrollLock ç­ã®ã­ã¼ãONã«ãªã£ã¦ã¾ã\n"
+"NumLock, ScrollLock ç­ã®ã­ã¼ãONã«ãªã£ã¦ã¾ãããã­.\n"
 "ãã¦ã¹æ©è½ãã­ã¼ãã¼ãã·ã§ã¼ãã«ãããæ­£å¸¸ã«å©ç¨ããã«ã¯OFFã«åæ¿ãã¦ä¸ãã"
 
-#: ../src/winmenu.c:129
+#: ../src/winmenu.c:125
 msgid ""
 "This will kill the application.\n"
 "Any unsaved changes will be lost.\n"
@@ -1455,19 +1412,19 @@
 "ä¿å­ããã¦ããªãå¤æ´ã¯å¨ã¦å¤±ããã¾ã\n"
 "çµäºããã¾ããï¼"
 
-#: ../src/winmenu.c:271 ../src/winmenu.c:280
+#: ../src/winmenu.c:268 ../src/winmenu.c:277
 msgid "Set Shortcut"
 msgstr "ã·ã§ã¼ãã«ããè¨­å®"
 
-#: ../src/winmenu.c:358 ../src/winmenu.c:403
+#: ../src/winmenu.c:355 ../src/winmenu.c:400
 msgid "could not create submenu for window menu"
 msgstr "ãµãã¡ãã¥ã¼ãä½ãã¾ãã"
 
-#: ../src/winmenu.c:407
+#: ../src/winmenu.c:404
 msgid "Keep on top"
 msgstr "å¸¸ã«ä¸çªä¸ã«è¡¨ç¤º"
 
-#: ../src/winmenu.c:412
+#: ../src/winmenu.c:409
 msgid "Keep at bottom"
 msgstr "å¸¸ã«ä¸çªä¸ã«è¡¨ç¤º"
 
@@ -1476,71 +1433,70 @@
 #. * entries, you must update the command #defines in the top of
 #. * this file.
 #.
-#: ../src/winmenu.c:440 ../src/winmenu.c:575
+#: ../src/winmenu.c:437 ../src/winmenu.c:571
 msgid "Maximize"
 msgstr "æå¤§å"
 
-#: ../src/winmenu.c:448 ../src/winmenu.c:561
+#: ../src/winmenu.c:445 ../src/winmenu.c:557
 msgid "Miniaturize"
 msgstr "æå°å"
 
-#: ../src/winmenu.c:457 ../src/winmenu.c:592
+#: ../src/winmenu.c:453 ../src/winmenu.c:588
 msgid "Shade"
 msgstr "ã·ã§ã¼ã"
 
-#: ../src/winmenu.c:473
+#: ../src/winmenu.c:469
 msgid "Resize/Move"
 msgstr "ãµã¤ãºå¤æ´/ç§»å"
 
-#: ../src/winmenu.c:481
+#: ../src/winmenu.c:477
 msgid "Select"
 msgstr "é¸æ"
 
-#: ../src/winmenu.c:489
+#: ../src/winmenu.c:485
 msgid "Move To"
 msgstr "ç§»å"
 
-#: ../src/winmenu.c:494
+#: ../src/winmenu.c:490
 msgid "Attributes..."
 msgstr "å±æ§..."
 
-#: ../src/winmenu.c:496
+#: ../src/winmenu.c:492
 msgid "Options"
 msgstr "ãªãã·ã§ã³"
 
-#: ../src/winmenu.c:556
+#: ../src/winmenu.c:552
 msgid "Deminiaturize"
 msgstr "æå°åè§£é¤"
 
-#: ../src/winmenu.c:570
+#: ../src/winmenu.c:566
 msgid "Unmaximize"
 msgstr "æå¤§åè§£é¤"
 
-#: ../src/winmenu.c:587
+#: ../src/winmenu.c:583
 msgid "Unshade"
 msgstr "ã·ã§ã¼ãè§£é¤"
 
-#: ../src/winspector.c:386
+#: ../src/winspector.c:392
 #, c-format
 msgid "Could not find icon \"%s\" specified for this window"
 msgstr "ãã®ã¦ã£ã³ãã¦ã¸æå®ãããã¢ã¤ã³ã³\"%s\"ãè¦ã¤ããã¾ãã"
 
-#: ../src/winspector.c:403
+#: ../src/winspector.c:409
 #, c-format
 msgid "Could not open specified icon \"%s\":%s"
 msgstr "æå®ãããã¢ã¤ã³ã³\"%s\"ãéãã¾ãã:%s"
 
-#: ../src/winspector.c:1141
+#: ../src/winspector.c:1129
 #, c-format
 msgid "Inspecting  %s.%s"
 msgstr "å±æ§ ( %s.%s )"
 
-# msgstr "èª¿æ» ( %s.%s )"
-#: ../src/winspector.c:1167
+#: ../src/winspector.c:1155
 msgid "Click in the window you wish to inspect."
 msgstr "èª¿æ»å¯¾è±¡ã®ã¦ã£ã³ãã¦ãã¯ãªãã¯ãã¦ãã ãã."
 
-#: ../src/winspector.c:1206
+#: ../src/winspector.c:1194
 msgid ""
 "The configuration will apply to all\n"
 "windows that have their WM_CLASS\n"
@@ -1551,55 +1507,55 @@
 "æå®ãããWM_CLASSãã­ããã£ã\n"
 "æã¤å¨ã¦ã®ã¦ã£ã³ãã¦ã«é©ç¨ããã¾ã"
 
-#: ../src/winspector.c:1235
+#: ../src/winspector.c:1223
 msgid "Save"
 msgstr "ä¿å­"
 
-#: ../src/winspector.c:1243
+#: ../src/winspector.c:1231
 msgid "Apply"
 msgstr "é©ç¨"
 
-#: ../src/winspector.c:1249
+#: ../src/winspector.c:1237
 msgid "Reload"
 msgstr "åèª­ã¿è¾¼ã¿"
 
-#: ../src/winspector.c:1258 ../src/winspector.c:1268
+#: ../src/winspector.c:1246 ../src/winspector.c:1256
 msgid "Window Specification"
 msgstr "ã¦ã£ã³ãã¦ã®æå®"
 
-#: ../src/winspector.c:1259
+#: ../src/winspector.c:1247
 msgid "Window Attributes"
 msgstr "ã¦ã£ã³ãã¦ã®å±æ§"
 
-#: ../src/winspector.c:1260
+#: ../src/winspector.c:1248
 msgid "Advanced Options"
-msgstr "ã¢ããã³ã¹ãã»ãªãã·ã§ã³"
+msgstr "ãã ããã®è¨­å®"
 
-#: ../src/winspector.c:1261
+#: ../src/winspector.c:1249
 msgid "Icon and Initial Workspace"
 msgstr "ã¢ã¤ã³ã³ã¨ã¯ã¼ã¯ã¹ãã¼ã¹"
 
-#: ../src/winspector.c:1262
+#: ../src/winspector.c:1250
 msgid "Application Specific"
 msgstr "ã¢ããªã±ã¼ã·ã§ã³åºæã®è¨­å®"
 
-#: ../src/winspector.c:1276
+#: ../src/winspector.c:1264
 msgid "Defaults for all windows"
 msgstr "å¨ã¦ã£ã³ãã¦ã®æ¨æº"
 
-#: ../src/winspector.c:1330
+#: ../src/winspector.c:1318
 msgid "Select window"
 msgstr "ã¦ã£ã³ãã¦ã®é¸æ"
 
-#: ../src/winspector.c:1344
+#: ../src/winspector.c:1332
 msgid "Attributes"
 msgstr "å±æ§"
 
-#: ../src/winspector.c:1355
+#: ../src/winspector.c:1343
 msgid "Disable titlebar"
 msgstr "ã¿ã¤ãã«ãã¼ãè¡¨ç¤ºããªã"
 
-#: ../src/winspector.c:1357
+#: ../src/winspector.c:1345
 msgid ""
 "Remove the titlebar of this window.\n"
 "To access the window commands menu of a window\n"
@@ -1609,88 +1565,88 @@
 msgstr ""
 "ãã®ã¦ã£ã³ãã¦ã®ã¿ã¤ãã«ãã¼ãè¡¨ç¤ºããªããã¾ã.\n"
 "ã¿ã¤ãã«ãã¼ã®ãªãã¦ã£ã³ãã¦ã®ã¡ãã¥ã¼ãè¡¨ç¤ºããã«ã¯, \n"
-"ã³ã³ãã­ã¼ã«ã­ã¼ ã¨ ã¨ã¹ã±ã¼ãã­ã¼ãåæã«æ¼ãã¾ã.\n"
-"(ã¾ãã¯, ããã«ç¸å½ããããªããè¨­å®ããã·ã§ã¼ãã«ããã­ã¼)"
+"ã³ã³ãã­ã¼ã«ã­ã¼ ã¨ ã¨ã¹ã±ã¼ãã­ã¼ãåæã«æ¼ãã¾ã\n"
+"(ã¾ãã¯, ããã«ç¸å½ããããªããè¨­å®ããã·ã§ã¼ãã«ããã­ã¼)."
 
-#: ../src/winspector.c:1364
+#: ../src/winspector.c:1352
 msgid "Disable resizebar"
 msgstr "ãªãµã¤ãºãã¼ãè¡¨ç¤ºããªã"
 
-#: ../src/winspector.c:1366
+#: ../src/winspector.c:1354
 msgid "Remove the resizebar of this window."
 msgstr "ãã®ã¦ã£ã³ãã¦ã®ãªãµã¤ãºãã¼ãè¡¨ç¤ºããªããã¾ã"
 
-#: ../src/winspector.c:1369
+#: ../src/winspector.c:1357
 msgid "Disable close button"
 msgstr "ã¯ã­ã¼ãºãã¿ã³ãè¡¨ç¤ºããªã"
 
-#: ../src/winspector.c:1371
+#: ../src/winspector.c:1359
 msgid "Remove the `close window' button of this window."
 msgstr "ãã®ã¦ã£ã³ãã¦ã®ã¯ã­ã¼ãºãã¿ã³ãè¡¨ç¤ºããªããã¾ã"
 
-#: ../src/winspector.c:1374
+#: ../src/winspector.c:1362
 msgid "Disable miniaturize button"
 msgstr "æå°åãã¿ã³ãè¡¨ç¤ºããªã"
 
-#: ../src/winspector.c:1376
+#: ../src/winspector.c:1364
 msgid "Remove the `miniaturize window' button of the window."
 msgstr "ã¦ã£ã³ãã¦ã®æå°åãã¿ã³ãè¡¨ç¤ºããªããã¾ã"
 
-#: ../src/winspector.c:1379
+#: ../src/winspector.c:1367
 msgid "Disable border"
-msgstr "ãã¼ãã¼ãè¡¨ç¤ºããªã"
+msgstr "å¢çç·ãè¡¨ç¤ºããªã"
 
-#: ../src/winspector.c:1381
+#: ../src/winspector.c:1369
 msgid "Remove the 1 pixel black border around the window."
 msgstr "ã¦ã£ã³ãã¦å¨å²ã® 1ãã¯ã»ã«ã®å¢çãè¡¨ç¤ºããªããã¾ã"
 
-#: ../src/winspector.c:1384
+#: ../src/winspector.c:1372
 msgid "Keep on top (floating)"
 msgstr "å¸¸ã«ä¸çªä¸ã«è¡¨ç¤º"
 
-#: ../src/winspector.c:1386
+#: ../src/winspector.c:1374
 msgid ""
 "Keep the window over other windows, not allowing\n"
 "them to cover it."
 msgstr "å¸¸ã«ä¸çªä¸ã«(æµ®ãã¦)è¡¨ç¤ºããã¾ã."
 
-#: ../src/winspector.c:1390
+#: ../src/winspector.c:1378
 msgid "Keep at bottom (sunken)"
 msgstr "å¸¸ã«ä¸çªä¸ã«è¡¨ç¤º"
 
-#: ../src/winspector.c:1392
+#: ../src/winspector.c:1380
 msgid "Keep the window under all other windows."
 msgstr "å¸¸ã«ä¸çªä¸ã«(æ²ãã§)è¡¨ç¤ºããã¾ã."
 
-#: ../src/winspector.c:1397
+#: ../src/winspector.c:1385
 msgid "Make window present in all workspaces."
 msgstr "å¨ã¦ã®ã¯ã¼ã¯ã¹ãã¼ã¹ã§è¡¨ç¤ºãã¾ã."
 
-#: ../src/winspector.c:1400
+#: ../src/winspector.c:1388
 msgid "Start miniaturized"
 msgstr "æå°åç¶æã§èµ·åãã"
 
-#: ../src/winspector.c:1402
+#: ../src/winspector.c:1390
 msgid ""
 "Make the window be automatically miniaturized when it's\n"
 "first shown."
 msgstr "æåã«èµ·åãããæã«èªåçã«æå°åããããã«ãã¾ã."
 
-#: ../src/winspector.c:1406
+#: ../src/winspector.c:1394
 msgid "Start maximized"
 msgstr "æå¤§åç¶æã§èµ·åãã"
 
-#: ../src/winspector.c:1408
+#: ../src/winspector.c:1396
 msgid ""
 "Make the window be automatically maximized when it's\n"
 "first shown."
 msgstr "æåã«èµ·åãããæã«èªåçã«æå¤§åããããã«ãã¾ã."
 
-#: ../src/winspector.c:1412
+#: ../src/winspector.c:1400
 msgid "Full screen maximization"
 msgstr "å¨ç»é¢æå¤§å"
 
-#: ../src/winspector.c:1414
+#: ../src/winspector.c:1402
 msgid ""
 "Make the window use the whole screen space when it's\n"
 "maximized. The titlebar and resizebar will be moved\n"
@@ -1699,15 +1655,15 @@
 "æå¤§åããæã«å¨ç»é¢ãä½¿ç¨ããããã«ãã¾ã. \n"
 "ã¿ã¤ãã«ãã¼ã¨ãªãµã¤ãºãã¼ã¯ç»é¢ã®å¤ã«ã¯ã¿åºãã¾ã."
 
-#: ../src/winspector.c:1431
+#: ../src/winspector.c:1419
 msgid "Advanced"
-msgstr "ã¢ããã³ã¹ã"
+msgstr "ä¸ç´è¨­å®"
 
-#: ../src/winspector.c:1448
+#: ../src/winspector.c:1436
 msgid "Do not bind keyboard shortcuts"
 msgstr "ã­ã¼ãã¼ãã¨é£åããªã"
 
-#: ../src/winspector.c:1450
+#: ../src/winspector.c:1438
 msgid ""
 "Do not bind keyboard shortcuts from Window Maker\n"
 "when this window is focused. This will allow the\n"
@@ -1719,11 +1675,11 @@
 "ããªãã®è¨­å®ããã·ã§ã¼ãã«ãããå½±é¿ããªãã®ã§, \n"
 "å¨ã¦ã®ã­ã¼æä½ãã¦ã£ã³ãã¦ã«ä¼ãããã¨ãã§ãã¾ã."
 
-#: ../src/winspector.c:1456
+#: ../src/winspector.c:1444
 msgid "Do not bind mouse clicks"
 msgstr "ãã¦ã¹ã¯ãªãã¯ã¨é£åããªã"
 
-#: ../src/winspector.c:1458
+#: ../src/winspector.c:1446
 msgid ""
 "Do not bind mouse actions, such as `Alt'+drag\n"
 "in the window (when alt is the modifier you haveconfigured)."
@@ -1731,19 +1687,19 @@
 "ã¦ã£ã³ãã¦åã§ã®ãã¦ã¹ã®åä½(Alt+ãã©ãã°ãªã©)\n"
 "ãå½±é¿ããªãããã«ãã¾ã."
 
-#: ../src/winspector.c:1463
+#: ../src/winspector.c:1451
 msgid "Do not show in the window list"
 msgstr "ã¦ã£ã³ãã¦ä¸è¦§ã«è¡¨ç¤ºããªã"
 
-#: ../src/winspector.c:1465
+#: ../src/winspector.c:1453
 msgid "Do not list the window in the window list menu."
-msgstr "ã¦ã£ã³ãã¦ä¸è¦§ã«ã¦ã£ã³ãã¦ãåè£è¡¨ç¤ºãã¾ãã"
+msgstr "ã¦ã£ã³ãã¦ä¸è¦§ã«ãã®ã¦ã£ã³ãã¦ãåè£è¡¨ç¤ºãã¾ãã"
 
-#: ../src/winspector.c:1468
+#: ../src/winspector.c:1456
 msgid "Do not let it take focus"
 msgstr "ãã©ã¼ã«ã¹ããªã"
 
-#: ../src/winspector.c:1470
+#: ../src/winspector.c:1458
 msgid ""
 "Do not let the window take keyboard focus when you\n"
 "click on it."
@@ -1751,11 +1707,11 @@
 "ã¦ã£ã³ãã¦ãã¯ãªãã¯ããæã«ãã­ã¼ãã¼ããã©ã¼ã«ã¹ã\n"
 "æ¸¡ããªãããã«ãã¾ã"
 
-#: ../src/winspector.c:1474
+#: ../src/winspector.c:1462
 msgid "Keep inside screen"
 msgstr "ã¹ã¯ãªã¼ã³ã®åå´ã«ä¿æãã"
 
-#: ../src/winspector.c:1476
+#: ../src/winspector.c:1464
 msgid ""
 "Do not allow the window to move itself completely\n"
 "outside the screen. For bug compatibility.\n"
@@ -1763,21 +1719,21 @@
 "ã¦ã£ã³ãã¦ãèªèº«ãå®å¨ã«ç»é¢ã®å¤ã«ç§»åããã¦ãã¾ããªãããã«ãã¾ã. \n"
 "(ãã°äºææ§ã®ãã)\n"
 
-#: ../src/winspector.c:1480
+#: ../src/winspector.c:1468
 msgid "Ignore 'Hide Others'"
 msgstr "'ä»ãé ã'ãç¡è¦ãã"
 
-#: ../src/winspector.c:1482
+#: ../src/winspector.c:1470
 msgid ""
 "Do not hide the window when issuing the\n"
 "`HideOthers' command."
 msgstr "'ä»ãé ã'ã³ãã³ããå®è¡ããã¦ãé ããªãããã«ãã¾ã"
 
-#: ../src/winspector.c:1486
+#: ../src/winspector.c:1474
 msgid "Ignore 'Save Session'"
 msgstr "'ã»ãã·ã§ã³ã®ä¿å­'ãç¡è¦ãã"
 
-#: ../src/winspector.c:1488
+#: ../src/winspector.c:1476
 msgid ""
 "Do not save the associated application in the\n"
 "session's state, so that it won't be restarted\n"
@@ -1788,68 +1744,68 @@
 "ããªãããã«ãã¾ã. æ¬¡ã« Window Maker ãèµ·åããæã«\n"
 "ãã®ã¢ããªã±ã¼ã·ã§ã³ãèªåçã«èµ·åããªãããã«ãªãã¾ã."
 
-#: ../src/winspector.c:1494
+#: ../src/winspector.c:1482
 msgid "Emulate application icon"
 msgstr "ã¢ããªã¢ã¤ã³ã³ã®ã¨ãã¥ã¬ã¼ã"
 
-#: ../src/winspector.c:1496
+#: ../src/winspector.c:1484
 msgid ""
 "Make this window act as an application that provides\n"
 "enough information to Window Maker for a dockable\n"
 "application icon to be created."
 msgstr ""
-"ãã®ã¦ã£ã³ãã¦ãããã¯å¯è½ãªã¢ããªã¢ã¤ã³ã³ãèªåã§åãã¦ãã\n"
-"ãã®ããã«æ¯ãèããã¾ã."
+"ãã®ã¦ã£ã³ãã¦ãããã¯å¯è½ãªã¢ããªã¢ã¤ã³ã³ã\n"
+"èªåã§åãã¦ãããã®ããã«æ¯ãèããã¾ã."
 
-#: ../src/winspector.c:1502
+#: ../src/winspector.c:1490
 msgid "Disable language button"
 msgstr "è¨èªã®åãæ¿ãã®ç¡å¹å"
 
-#: ../src/winspector.c:1504
+#: ../src/winspector.c:1492
 msgid "Remove the `toggle language' button of the window."
 msgstr "'è¨èªãåãæ¿ãã'ãã¿ã³ãè¡¨ç¤ºããªããã¾ã"
 
-#: ../src/winspector.c:1521
+#: ../src/winspector.c:1509
 msgid "Miniwindow Image"
 msgstr "ããã¦ã£ã³ãã¦ç»å"
 
-#: ../src/winspector.c:1548
+#: ../src/winspector.c:1536
 msgid "Icon filename:"
 msgstr "ã¢ã¤ã³ã³ãã¡ã¤ã«å:"
 
-#: ../src/winspector.c:1561
+#: ../src/winspector.c:1549
 msgid "Ignore client supplied icon"
-msgstr "ã¢ããªæå®ã®ã¢ã¤ã³ã³ãç¡è¦"
+msgstr "ã¢ããªèªåã®ã¢ã¤ã³ã³ãç¡è¦"
 
-#: ../src/winspector.c:1568
+#: ../src/winspector.c:1556
 msgid "Initial Workspace"
 msgstr "èµ·åæã®ã¯ã¼ã¯ã¹ãã¼ã¹"
 
-#: ../src/winspector.c:1570
+#: ../src/winspector.c:1558
 msgid "The workspace to place the window when it'sfirst shown."
 msgstr "ãã®ã¦ã£ã³ãã¦ãèµ·åæã«åºç¾ããã¯ã¼ã¯ã¹ãã¼ã¹."
 
-#: ../src/winspector.c:1576
+#: ../src/winspector.c:1564
 msgid "Nowhere in particular"
 msgstr "ç¹ã«æå®ããªã"
 
-#: ../src/winspector.c:1594
+#: ../src/winspector.c:1582
 msgid "Application Attributes"
 msgstr "ã¢ããªã±ã¼ã·ã§ã³å±æ§"
 
-#: ../src/winspector.c:1605
+#: ../src/winspector.c:1593
 msgid "Start hidden"
 msgstr "èµ·åæã«é ã"
 
-#: ../src/winspector.c:1607
+#: ../src/winspector.c:1595
 msgid "Automatically hide application when it's started."
 msgstr "ã¢ããªã±ã¼ã·ã§ã³ã®èµ·åæã«èªåçã«é ããããã«ãã"
 
-#: ../src/winspector.c:1610
+#: ../src/winspector.c:1598
 msgid "No application icon"
 msgstr "ã¢ããªã¢ã¤ã³ã³ãè¡¨ç¤ºããªã"
 
-#: ../src/winspector.c:1612
+#: ../src/winspector.c:1600
 msgid ""
 "Disable the application icon for the application.\n"
 "Note that you won't be able to dock it anymore,\n"
@@ -1860,38 +1816,35 @@
 "æ³¨æ: ããã¨, ããã¯ãã¯ãªãããã§ããªããªãã¾ã. \n"
 "ã¾ã, ãã§ã«ç»é²ããã¦ããããã¯ãæ­£ããåããªããªãã¾ã."
 
-#: ../src/winspector.c:1618
-msgid "Collapse application icons"
-msgstr "ã¢ããªã¢ã¤ã³ã³ãæãç³ã"
+#: ../src/winspector.c:1606
+msgid "Shared application icon"
+msgstr "ã¢ããªã¢ã¤ã³ã³ãå±æ"
 
-#: ../src/winspector.c:1620
+#: ../src/winspector.c:1608
 msgid ""
-"Collapse application icons from other instances\n"
-"of this application into one.\n"
+"Use a single shared application icon for all of\n"
+"the instances of this application.\n"
 msgstr ""
 "åãã¢ããªãè¤æ°èµ·åãã¦ããã¨ã,\n"
 "ã¢ããªã¢ã¤ã³ã³ãï¼ã¤ã«ã¾ã¨ãã¾ã.\n"
 
-#: ../src/workspace.c:110 ../src/workspace.c:111 ../src/workspace.c:897
+#: ../src/workspace.c:103 ../src/workspace.c:104 ../src/workspace.c:1302
 #, c-format
 msgid "Workspace %i"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ %i"
 
-#: ../src/workspace.c:954
+#: ../src/workspace.c:1352
 msgid "Workspaces"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã®è¨­å®"
 
-#: ../src/workspace.c:956
+#: ../src/workspace.c:1354
 msgid "could not create Workspace menu"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã¡ãã¥ã¼ãä½æã§ãã¾ãã"
 
-#: ../src/workspace.c:963
+#: ../src/workspace.c:1361
 msgid "New"
 msgstr "æ°ããã¯ã¼ã¯ã¹ãã¼ã¹ãä½æ"
 
-#: ../src/workspace.c:964
+#: ../src/workspace.c:1362
 msgid "Destroy Last"
 msgstr "æå¾ã®ã¯ã¼ã¯ã¹ãã¼ã¹ãåé¤"
-
-#~ msgid "Sound"
-#~ msgstr "ãµã¦ã³ã"
diff -Naur ../work/WindowMaker-0.91.0/po/Makefile.am wm/po/Makefile.am
--- ../work/WindowMaker-0.91.0/po/Makefile.am	2004-10-26 07:17:12.000000000 +0400
+++ wm/po/Makefile.am	2004-10-27 10:00:10.000000000 +0400
@@ -48,7 +48,7 @@
 
 WindowMaker.pot: $(POTFILES)
 	xgettext --default-domain=WindowMaker \
-	--add-comments --keyword=_ $(POTFILES)
+	--add-comments --keyword=_ --keyword=N_ $(POTFILES)
 	if cmp -s WindowMaker.po WindowMaker.pot; then \
 	    rm -f WindowMaker.po; \
 	else \
diff -Naur ../work/WindowMaker-0.91.0/README.es wm/README.es
--- ../work/WindowMaker-0.91.0/README.es	1970-01-01 03:00:00.000000000 +0300
+++ wm/README.es	2004-10-18 17:18:30.000000000 +0400
@@ -0,0 +1,345 @@
+
+
+
+		       		GNU Window Maker
+		       	       X11 Window Manager
+
+	  	   	   <http://windowmaker.org>
+		 	 <ftp://ftp.windowmaker.org>
+
+				     por
+
+		      	     Alfredo K. Kojima 
+
+			 	 Dan Pascu
+
+				    ]d
+
+
+			       Web/FTP Master
+
+			       Phillip Smith
+
+
+
+		¡Felicitaciones! Ha adquirido un dispositivo
+	excelentísimo que le proporcionará miles de años de uso sin
+	problemas, si no fuera porque indudablemente lo destruirá a
+	través de alguna maniobra estúpida típica de consumidor. Por
+	eso le pedimos por EL AMOR DE DIOS LEA ESTE MANUAL DEL
+	PROPIETARIO CUIDADOSAMENTE ANTES DE DESEMPAQUETAR EL
+	DISPOSITIVO. ¿YA LO DESEMPAQUETÓ, NO?  LO DESEMPAQUETÓ Y LO
+	ENCHUFÓ Y LO ENCENDIÓ Y TOQUETEÓ LAS PERILLAS, Y AHORA SU
+	CHICO, EL MISMO CHICO QUE UNA VEZ METIÓ UNA SALCHICHA EN SU
+	VIDEOCASETERA Y ACCIONÓ "AVANCE RÁPIDO", ESTE CHICO
+	TAMBIÉN ESTÁ TUOQUETEANDO LAS PERILLAS, ¿CIERTO? Y RECIÉN
+	AHORA ESTÁ COMENZANDO A LEER LAS INSTRUCCIONES, ¿¿¿CIERTO???
+	NOSOTROS PODRÍAMOS SIMPLEMENTE ROMPER ESTOS DISPOSITIVOS EN LA
+	FÁBRICA ANTES DE DESPACHARLOS, ¿SABE?
+				-- Dave	Barry, "¡Lea Esto Primero!"
+
+
+Descripción
+===========
+
+Window Maker es el gestor de ventanas GNU para el Sistema de Ventanas X. Fue
+diseñado para emular la apariencia y funcionalidad de parte del GUI de NEXTSTEP(mr).
+Procura ser relativamente rápido y pequeño, rico en características, fácil de configurar
+y usar, con una simple y elegante apariencia sacada desde NEXTSTEP(mr).
+
+Window Maker fue diseñado teniendo en mente la integración con GNUstep y por eso
+es el gestor de ventanas "oficial". Es también parte del proyecto GNU (www.gnu.org)
+. Lea mas sobre GNUstep más adelante en este archivo.
+
+
+Pistas (información dada por las aplicaciones para integrarse bien con el gestor de
+ventanas) para Motif(tm), OPEN LOOK(tm), KDE y GNOME también son soportados. 
+Entonces puede reemplazar cualquiera de los gestores de ventana para estos entornos
+con Window Maker manteniendo la mayoría, si no todo, de la funcionalidad del
+gestor de ventanas nativo.
+
+Window Maker antes se llamaba WindowMaker.
+
+Window Maker no tiene relación con Windowmaker, el software para
+hacer ventanas y puertas.
+
+
+Documentación
+=============
+
+Lea antes de preguntar.
+
+* Los archivos README distribuidos por todas partes del árbol de fuentes 
+contienen información relacionada al contenido en los directorios. 
+
+* INSTALL tiene instrucciones de instalación y algunos consejos cuando tenga
+algún problema. Significa que debería leerlo antes de la instalación.
+No fue escrito solo para ocupar espacio en el paquete...
+
+* FAQ: Preguntas Frecuentes. LEALO!!! FAQ.I18N es para
+preguntas relacionadas con la internacionalización.
+
+* NEWS: lista los cambios visibles por el usuario desde la versión anterior. 
+Léalo si está actualizando.
+
+* MIRRORS: algunos lugares alternativos donde puede obtener Window Maker, 
+incluyendo paquetes de Window Maker específicos para ciertas plataformas.
+
+* BUGFORM: uselo para enviar reportes de errores. Por favor uselo.
+
+* ChangeLog: ¿que cambió desde la versión anterior?
+
+* BUGS: lista de errores conocidos.
+
+*** Tutorial
+
+Hay un tutorial mantenido por Georges Tarbouriech en:
+
+http://www.linuxfocus.org/~georges.t/
+
+*** Guía del Usuario
+
+La Guía del Usuario de Window Maker puede ser bajada desde el ftp oficial
+o por sitios web.
+Puede también ser vista en formato HTML en:
+
+http://people.delphi.com/crc3419/WMUserGuide/index.htm
+
+La Guía del Usuario explica como usar Window Maker, los archivos de configuración 
+y opciones.
+
+*** man pages
+
+Tipee "man wmaker" en el prompt del shell para obtener ayuda general sobre Window Maker.
+
+
+Directorios y Archivos en el Árbol de Fuentes
+=============================================
+
+* Install es un script para configurar y compilar Window Maker de una forma
+fácil (no es que la forma normal sea difícil, pero...).
+
+* AUTORES: los créditos
+
+* TODO: planes para el futuro.
+
+* contrib/ tiene algunos parches aportados que no están soportados por Window Maker
+  porque entran en conflicto con la filosofía de diseño de los desarrolladores o por
+  alguna otra razón.
+
+* util/ tiene varios programas utilitarios.
+
+* WPrefs.app/ es el programa de configuración.
+
+* src/wconfig.h posee opciones de compilación que puede cambiar para 
+  seleccionar algunas opciones/caracteristicas y otras cosas.
+
+* WINGs/ biblioteca widget para imitación de NEXTSTEP.
+
+* wrlib/ biblioteca de procesamiento de imagen.
+
+* po/ posee catálogos de mensajes  que son las versiones traducidas de los mensajes
+mostrados por Window Maker.
+
+* docklib-x.x.tar.gz es una biblioteca para escribir dockapps.
+
+SOCORRO!!!
+==========
+
+Hay una lista de correo para discutir sobre Window Maker en
+wm-user@windowmaker.org. Para suscribirse, envie un mensaje que contenga:
+
+	subscribe
+en el tema del mensaje a wm-user-request@windowmaker.org
+
+Si tiene algun problema, pregunte aquí (después de leer los docs, por supuesto). Es
+más probable que las personas de la lista sepan contestar sus preguntas
+que nosotros. Para reportes de errores use el BUGFORM.
+
+Si tiene un problema con una versión precompilada de Window Maker 
+(rpm, deb etc), primero pregunte a la persona que hizo el paquete.
+
+NOTA IMPORTANTE: cuando pida ayuda (en la lista de correo o a los desarrolladores,
+directamente) *siempre* envie información sobre el sistema que está usando. Puede
+usar la sección de información del sistema al final del BUGFORM como una guía. 
+Otra cosa: por favor no envie correo HTML.
+
+También hay un canal de IRC #windowmaker en openprojects. Únase aquí, 
+conecte su cliente de irc a irc.openprojects.net, irc.linux.com o algún otro
+servidor de esa red.
+
+GNUstep
+=======
+
+GNUStep es un completo sistema de desarrollo orientado a objetos, basado en la 
+especificación OpenStep liberada por NeXT(tm) (ahora Apple(tm) y Sun(tm)). Ello
+proveerá todo lo que se necesita para producir aplicaciones multiplataforma, 
+orientadas a objetos, gráficas (y no gráficas); suministrando dentro de otras cosas,
+bibliotecas base del sistema, una estructura de alto nivel para aplicaciones GUI que
+usan un modelo de imagenes de tipo Display PostScript(tm) (DGS), objetos para acceso
+a bases de datos relacionales, objetos distribuidos y un entorno de desarrollo gráfico,
+con herramientas como un modelador de interfaces, un sistema para administración del 
+proyecto (central de proyecto) y otras herramientas.
+
+El sistema de desarrollo de GNUStep será usado para crear un entorno de usuario,
+con todo lo necesario para una completa interface gráfica de usuario, tal como 
+un visualizador de archivos, editores de texto y otras aplicaciones. Note que el
+entorno de usuario (o "entorno de escritorio") es solo un pequeña parte de todo
+el proyecto GNUStep y por lo tanto no "compite" con otros proyectos como KDE o GNOME,
+simplemente porque son cosas completamente diferentes.
+
+Para más información sobre el proyecto GNUStep, visite: http://www.gnustep.org y
+http://gnustep.current.nu
+
+
+Ejecutando multiples instancias de Window Maker
+===============================================
+
+No es una buena idea eejcutar más de una instancia de Window Maker desde
+el mismo usuario (ya que wmaker usará los mismos archivos de configuración)
+al mismo tiempo. Podría obtener un comportamiento inesperado cuando Window
+Maker actualiza sus archivos de configuración.
+
+Si de verdad desea hacer esto, intente ejecutar Window Maker con la opción
+de linea de comando --static ya que así no actualizará o cambiará ninguno de los
+archivos de configuración.
+
+Soporte para Sonido
+===================
+
+El sonido es soportado por los sistemas Linux y FreeBSD con el uso de 
+un módulo distribuido separadamente llamado WSoundServer. Hay también 
+una herramienta de configuracion gráfica para definir sus sonidos llamada
+WSoundPref.
+Puede bajar esto en:
+http://shadowmere.student.utwente.nl/
+
+Note que debe compilar Window Maker con el parámetro --enable-sound
+y definir la opción DisableSound a NO.
+
+
+Ajuste de Rendimiento.
+=====================
+Si quiere disminuir el uso de memoria por parte de Window Maker y mejorar el 
+rendimiento, manteniendo una linda apariencia y buena funcionalidad, siga los
+items de abajo:
+
+- use texturas sólidas para todo, principalmente barras de título y menúes.
+  Si quiere un escritorio de aspecto lindo, use el estilo Tradicional.
+- Apague NewStyle y Superfluous
+- No una muchos atajos al menú y mantenga solo los items esenciales en el menú.
+- Active DisableClip
+- edite wconfig.h y desactive el NUMLOCK_HACK y lo mismo con las características
+  que no use (tenga en mente que algunos de los #defines podrían no funcionar,
+  ya que ellos no están completamente soportados). Asegúrese de mantener siempre
+  Numlock y ScrollLock apagados.
+- Active DisableAnimations. Puede también #undefine ANIMATIONS en wconfig.h
+- quite las entradas por defecto IconPath y PixmapPath para contener solo las
+  rutas que en verdad tiene en su sistema.
+- no use imágenes grandes en el fondo raíz.
+- quite el soporte para los formatos de imagen que no use.
+- para reducir el uso de la memoria, desactive el caché de ícono, definiendo 
+  la variable de entorno RIMAGE_CACHE a 0. Si quiere aumentar el rendimiento 
+  a expensas del uso de la memoria, defina este valor a un valor igual al 
+  número de íconos distintos que use.
+
+Control del Mouse por Teclado
+=============================
+
+Muchas personas preguntan sobre agregar control por teclado al mouse, como
+en fvwm, pero Window Maker no tendrá tal característica. La extensión XKB 
+soporta simulación de mouse desde el teclado, de una manera mucho más poderosa
+que cualquier otra simulación hecha por un administrador de ventanas.
+
+Para activarlo, presione la combinación de teclas Control+Shift+NumLock o 
+Shift+NumLock. Debiera escuchar el beep del parlante. Para desactivarlo,
+haga lo mismo.
+
+Para controlar el mouse el teclado numérico se usa así:
+- 4 (flecha izquierda), 7 (Home), 8 (flecha arriba), 9 (PgUP), 6 (flecha derecha),
+  3 (PgDn), 2 (flecha abajo) y 1 (Fin) mueve el mouse a la correspondiente 
+  dirección;
+- sosteniendo una de las teclas de arriba y luego sosteniendo la tecla 5 moverá
+el puntero más rápido;
+- / seleccionará el primer botón del mouse (botón izquierdo);
+- * seleccionará el segundo botón del mouse (botón del medio);
+- - seleccionará el tercer botón del mouse (botón derecho);
+- 5 hará un click con el botón actualmente seleccionado del mouse;
+- + hará un doble click con el botón actualmente seleccionado;
+- 0 (Ins) cliqueará y mantendrá el botón seleccionado actualmente;
+- . (Del) liberará el botón seleccionado actualmente que fue anteriormente
+  cliqueado con la tecla 0 (Ins).
+
+Los valores anteriores de las teclas funcionarán en un servidor X XFree86 3.2
+(X11R6.1) pero su alcance puede variar.
+
+Como hacer un gdb backtrace
+===========================
+
+Backtraces pueden ayudarnos a arreglar errores que hicieron que Window Maker falle.
+Si encuentra un bug que hace fallar a Window Maker, por favor envie un backtrace con su
+reporte de error.
+
+Para hacer un backtrace útil, necesita un archivo core con información de depuración
+producida por Window Maker cuando falló. Debería haber sido instalado sin stripping también.
+
+Para compilar wmaker con información de depuración:
+
+./configure
+make CFLAGS=-g
+
+Si obtiene el cuadro de diálogo que le dice que wmaker falló y le 
+pregunta que hacer, respóndale "Abortar y dejar un archivo core"
+
+script
+cd src
+gdb .libs/wmaker path_to_the_core_file
+
+Luego, en el prompt gdb escriba "bt". Salga de gdb escribiendo "quit"
+y luego, en el prompt del shell, scriba "exit"
+
+El archivo llamado typescript contendrá el backtrace.
+
+Derechos de Autor y Descargo de Responsabilidad
+===============================================
+
+Window Maker está registrado por Alfredo K. Kojima y está licensiado por la 
+Licensia Pública General GNU. Lea el archivo COPYING para leer la licensia
+completa.
+
+Los íconos que son distribuidos con este programa y fueron hechos por Marco
+van Hylckama Vlieg, están licenciados por la Licencia Pública General GNU. 
+Lea el archivo COPYING para leer la licencia completa.
+
+Los íconos listados en COPYING.WTFPL y son distribuidos en este programa
+fueron hechos por Banlu Kemiyatorn (]d), están licenciados por la 
+"do What The Fuck you want to Public License". Lea el archivo COPYING.WTFPL
+para leer la licencia completa.
+
+NeXT, OpenStep y NEXTSTEP son marcas registradas de NeXT Computer, Inc.
+Todas las otras marcas registradas son propiedad de sus respectivos dueños.
+
+Los autores se reservan el derecho de hacer cambios en el software sin previo
+aviso.
+
+Autores
+=======
+
+Alfredo K. Kojima <kojima@windowmaker.org>
+Dan Pascu <dan@windowmaker.org>
+]d <id@windowmaker.org>
+
+Por favor no nos haga preguntas antes de leer la documentación (especialmente 
+la FAQ, este archivo y los archivos INSTALL) y sobre cosas "cool" que ve en
+las capturas de pantalla del escritorio de las personas.
+
+El archivo AUTHORS contiene una lista de las personas que han contribuido 
+con el proyecto. El nombre de las personas que han ayudado con localization 
+(traducción) se puede encontrar en po/README y Window Maker/README
+
+Si tiene algún comentario, arreglos y reportes de errores (complete BUGFORMs)
+y enviémelos a developers@windowmaker.org
+
+
+
+traducido por Efraín Maximiliano Palermo <max_drake2001@yahoo.com.ar>
diff -Naur ../work/WindowMaker-0.91.0/src/cycling.c wm/src/cycling.c
--- ../work/WindowMaker-0.91.0/src/cycling.c	2004-10-25 05:48:39.000000000 +0400
+++ wm/src/cycling.c	2004-10-27 10:00:10.000000000 +0400
@@ -50,12 +50,15 @@
     Window swwin= wSwitchPanelGetWindow(swpanel);
     
     if (wwin->flags.mapped) {
-        Window win[2];
+        if (swwin!=None) {
+            Window win[2];
     
-        win[0]= swwin;
-        win[1]= wwin->frame->core->window;
+            win[0]= swwin;
+            win[1]= wwin->frame->core->window;
     
-        XRestackWindows(dpy, win, 2);
+            XRestackWindows(dpy, win, 2);
+        } else
+            XRaiseWindow(dpy, wwin->frame->core->window);
     }
 }
 
@@ -204,7 +207,8 @@
                 }
             }
             break;
-            
+         
+        case LeaveNotify:
         case MotionNotify:
         case ButtonRelease:
             {
@@ -243,6 +247,9 @@
         XUngrabKeyboard(dpy, CurrentTime);
     }
 
+    if (swpanel)
+        wSwitchPanelDestroy(swpanel);
+
     if (newFocused) {
         wRaiseFrame(newFocused->frame->core);
         CommitStacking(scr);
@@ -251,11 +258,6 @@
         wSetFocusTo(scr, newFocused);
     }
 
-    if (!getenv("SWPDEBUG"))
-    {
-        if (swpanel)
-          wSwitchPanelDestroy(swpanel);
-    }
     scr->flags.doing_alt_tab = 0;
 
     if (somethingElse)
diff -Naur ../work/WindowMaker-0.91.0/src/defaults.c wm/src/defaults.c
--- ../work/WindowMaker-0.91.0/src/defaults.c	2004-10-26 05:13:50.000000000 +0400
+++ wm/src/defaults.c	2004-10-27 10:00:10.000000000 +0400
@@ -129,7 +129,7 @@
 #ifdef NEWSTUFF
 static int getRImage();
 #endif
-static int getPLArray();
+static int getPropList();
 
 /* value setting functions */
 static int setJustify();
@@ -407,9 +407,6 @@
     {"RaiseDelay",	"0",			NULL,
     &wPreferences.raise_delay,	getInt,		NULL
     },
-    {"WindozeCycling",  "NO",			NULL,
-    &wPreferences.windows_cycling,getBool,	NULL
-    },
     {"CirculateRaise",	"NO",			NULL,
     &wPreferences.circ_raise, 	getBool, 	NULL
     },
@@ -663,7 +660,7 @@
     NULL,				getColor,	setIconTitleBack
     },
     {"SwitchPanelImages", "(\"swtile.png\")",    &wPreferences,
-    NULL,                               getPLArray,     setSwPOptions
+    NULL,                               getPropList,     setSwPOptions
     },
     /* keybindings */
 #ifndef LITE
@@ -1708,15 +1705,9 @@
 
 
 static int
-getPLArray(WScreen *scr, WDefaultEntry *entry, WMPropList *value, void *addr,
+getPropList(WScreen *scr, WDefaultEntry *entry, WMPropList *value, void *addr,
            void **ret)
 {
-    if (!WMIsPLArray(value)) {
-        wwarning(_("Wrong value for key \"%s\". Should be an array."),
-                 entry->key);
-        return False;
-    }
-
     WMRetainPropList(value);
 
     *ret= value;
@@ -3535,6 +3526,14 @@
     int cwidth, cheight;
     WPreferences *prefs= (WPreferences*)foo;
 
+    if (!WMIsPLArray(array) || WMGetPropListItemCount(array)==0) {
+        if (prefs->swtileImage) RReleaseImage(prefs->swtileImage);
+        prefs->swtileImage= NULL;
+ 
+        WMReleasePropList(array);
+        return 0;
+    }
+
     switch (WMGetPropListItemCount(array))
     {
     case 4:
diff -Naur ../work/WindowMaker-0.91.0/src/menu.c wm/src/menu.c
--- ../work/WindowMaker-0.91.0/src/menu.c	2004-10-25 02:36:29.000000000 +0400
+++ wm/src/menu.c	2004-11-04 12:10:11.000000000 +0300
@@ -1074,6 +1074,9 @@
                 break;
 
             case XK_Return:
+#ifdef XK_KP_Enter
+            case XK_KP_Enter:
+#endif
                 done = 2;
                 break;
 
diff -Naur ../work/WindowMaker-0.91.0/src/menureader.c wm/src/menureader.c
--- ../work/WindowMaker-0.91.0/src/menureader.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/src/menureader.c	2004-10-13 13:16:42.000000000 +0400
@@ -0,0 +1,463 @@
+/* menureader.c- root menu definition readers
+ *
+ *  Window Maker window manager
+ *
+ *  Copyright (c) 2000-2003 Alfredo K. Kojima
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,
+ *  USA.
+ */
+
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <sys/types.h>
+#include <unistd.h>
+
+#include "WindowMaker.h"
+
+#include "misc.h"
+
+#include "rootmenu.h"
+
+
+typedef struct PLMenuReaderData {
+    WRootMenuReader *reader;
+
+    WMPropList *pl;
+    int curIndex;
+
+    WMPropList **submenu;
+    int *curSubIndex;
+    int submenuDepth;
+
+} PLMenuReaderData;
+
+
+typedef struct TextMenuReaderData {
+    WRootMenuReader *reader;
+
+    FILE *file;
+
+} TextMenuReaderData;
+
+
+typedef struct PipeMenuReaderData {
+    WRootMenuReader *reader;
+
+} PipeMenuReaderData;
+
+
+typedef struct DirMenuReaderData {
+    WRootMenuReader *reader;
+
+    char **dirList;
+    int dirCount;
+
+} DirMenuReaderData;
+
+/*
+ typedef struct GNOMEMenuReaderData {
+ } GNOMEMenuReaderData;
+ */
+
+
+
+
+
+static WRootMenuData *pl_openMenu(WMPropList *pl);
+static Bool pl_hasMoreData(WRootMenuData *data);
+static Bool pl_nextCommand(WRootMenuData *data,
+                           char **title,
+                           char **command,
+                           char **parameter,
+                           char **shortcut);
+static void pl_closeMenuFile(WRootMenuData *data);
+
+
+
+static WRootMenuData *text_openMenuFile(char *path);
+static Bool text_hasMoreData(WRootMenuData *data);
+static Bool text_nextCommand(WRootMenuData *data,
+                             char **title,
+                             char **command,
+                             char **parameter,
+                             char **shortcut);
+static void text_closeMenuFile(WRootMenuData *data);
+
+
+static WRootMenuData *dir_openMenuFile(char *path);
+static Bool dir_hasMoreData(WRootMenuData *data);
+static Bool dir_nextCommand(WRootMenuData *data,
+                            char **title,
+                            char **command,
+                            char **parameter,
+                            char **shortcut);
+static void dir_closeMenuFile(WRootMenuData *data);
+
+
+
+
+
+
+static WRootMenuReader PLMenuReader = {
+    pl_hasMoreData,
+    pl_nextCommand,
+    pl_closeMenuFile
+};
+
+static WRootMenuReader TextMenuReader = {
+    text_hasMoreData,
+    text_nextCommand,
+    text_closeMenuFile
+};
+
+static WRootMenuReader DirMenuReaderData = {
+    dir_hasMoreData,
+    dir_nextCommand,
+    dir_closeMenuFile
+};
+
+/*
+ WRootMenuReader GNOMEMenuReaderData = {
+ };
+ */
+
+
+
+
+#define LINESIZE 1024
+
+static char linebuf[LINESIZE];
+
+
+
+/* ---------- proplist ---------- */
+
+
+static WRootMenuData*
+pl_openMenuFile(WMPropList *pl)
+{
+    PLRootMenuData *data = wmalloc(sizeof(PLRootMenuData));
+
+    data->reader = PLMenuReader;
+
+    data->pl = pl;
+    data->curIndex = 0;
+
+    data->submenu = NULL;
+    data->curSubIndex = NULL;
+    data->submenuDepth = 0;
+
+    return data;
+}
+
+
+static Bool
+pl_hasMoreData(WRootMenuData *data)
+{
+}
+
+
+static Bool
+pl_nextCommand(WRootMenuData *data, char **title, char **command,
+               char **parameter, char **shortcut)
+{
+}
+
+
+static void
+pl_closeMenuFile(WRootMenuData *data)
+{
+    if (data->submenu)
+        wfree(data->submenu);
+    if (data->curSubIndex)
+        wfree(data->curSubIndex);
+
+    WMReleasePropList(data->pl);
+
+    wfree(data);
+}
+
+
+/* ---------- text ---------- */
+
+
+static WRootMenuData*
+text_openMenuFile(char *path)
+{
+    TextMenuReaderData *data;
+
+    data = wmalloc(sizeof(TextMenuReaderData));
+    data->reader = TextMenuReader;
+
+    data->file = fopen(path, "rb");
+    if (!data->file) {
+
+        return NULL;
+    }
+}
+
+
+static Bool
+text_hasMoreData(WRootMenuData *data)
+{
+}
+
+
+static Bool
+text_nextCommand(WRootMenuData *data, char **title, char **command,
+                 char **parameter, char **shortcut)
+{
+}
+
+
+static void
+text_closeMenuFile(WRootMenuData *data)
+{
+}
+
+
+/* ---------- directory ---------- */
+
+
+static WRootMenuData*
+dir_openMenuFile(char *paths, time_t *timestamp)
+{
+    DirMenuReaderData *data;
+    char **dirs;
+    int dirN;
+    time_t checksum = 0;
+    int i, c;
+
+    /* timestamp for directory is a "checksum" of the directory times */
+
+    wtokensplit(paths, &dirs, &dirN);
+
+    if (dirN == 0) {
+        return NULL;
+    }
+
+    for (c = 0, i = 0; i < dirN; i++) {
+        char *tmp;
+
+        if (strcmp(dirs[i], "-noext")==0) {
+            i++;
+            continue;
+        }
+
+        tmp = wexpandpath(dirs[i]);
+        wfree(dirs[i]);
+        dirs[i] = tmp;
+
+        if (stat(dirs[i], &stat_buf)<0) {
+            wsyserror(_("%s:could not stat menu"), dirs[i]);
+            wfree(dirs[i]);
+            dirs[i] = NULL;
+        } else {
+            c++;
+            checksum += stat_buf.st_mtime;
+        }
+    }
+
+    if (*timestamp == checksum && *timestamp != 0) {
+        return NULL;
+    }
+
+    if (c == 0) {
+        for (i = 0; i < dirN; i++) {
+            if (dirs[i])
+                wfree(dirs[i]);
+        }
+        wfree(dirs);
+
+        return NULL;
+    }
+
+    data = wmalloc(sizeof(DirMenuReaderData));
+    data->reader = DirMenuReader;
+
+
+
+}
+
+
+static Bool
+dir_hasMoreData(WRootMenuData *data)
+{
+}
+
+static Bool
+dir_nextCommand(WRootMenuData *data, char **title, char **command,
+                char **parameter, char **shortcut)
+{
+}
+
+static void
+dir_closeMenuFile(WRootMenuData *data)
+{
+}
+
+
+WRootMenuData*
+OpenMenu(char *path, time_t *menuTime)
+{
+    proplist pl;
+    struct stat stat_buf;
+    WRootMenuData *data;
+
+    /* check whether it's a piped menu */
+    if (*path == '|') {
+        /* piped menus have the following semantics for menuTime:
+         * if it's 0, then it wasnt loaded yet
+         * if it's 1, it was already loaded, so do not reload
+         *	(would be too slow)
+         * now, menuTime will only be set to 1 if the pipe command is
+         *	specified as ||command instead of |command
+         * in other words ||command means force the submenu to always refresh
+         */
+        if (*menuTime == 0) {
+            data = pipe_openMenu(path);
+        }
+        if (path[1] != '|') {
+            *menuTime = 1;
+        }
+        return data;
+    }
+
+    if (stat(path, &stat_buf) < 0) {
+        wsyserror(_("could not stat() menu file '%s'"));
+        return NULL;
+    }
+
+    /* check whether it's a directory */
+    if (S_ISDIR(stat_buf.st_mode)) {
+        return dir_openMenuFile(path, menuTime);
+    }
+
+
+    if (*menuTime >= stat_buf.st_mtime && *menuTime != 0) {
+        /* no changes in the menu file */
+        return NULL;
+    }
+
+    /* then check whether it's a proplist menu */
+    pl = WMReadPropListFromFile(path);
+    if (pl && WMIsPLArray(pl)) {
+        *menuTime = stat_buf.st_mtime;
+        return pl_openMenu(pl);
+    }
+
+    *menuTime = stat_buf.st_mtime;
+    /* assume its a plain text menu */
+    return text_openMenuFile(path);
+}
+
+
+WRootMenuData*
+ReopenRootMenu(time_t *checkTime, char **menuPath, time_t *menuTimestamp)
+{
+    proplist pl;
+    struct stat stat_buf;
+    char *path;
+
+
+    if (stat(path, &stat_buf) < 0) {
+        wsyserror(_("could not stat() menu file '%s'"));
+        return NULL;
+    }
+
+    if (*menuTime >= stat_buf.st_mtime && *checkTime != 0) {
+        /* no changes in WMRootMenu, see if the contents changed */
+        if (*menuPath != NULL) {
+            return OpenMenu(*menuPath, menuTimestamp);
+        } else {
+            return NULL;
+        }
+    }
+
+    *checkTime = stat_buf.st_mtime;
+
+    pl = WMReadPropListFromFile(path);
+    if (!pl) {
+        wwarning(_("could not load domain %s from user defaults database"),
+                 "WMRootMenu");
+        return NULL;
+    }
+
+    if (WMIsPLString(pl)) {
+        char *tmp;
+        char *path;
+        Bool menu_is_default = False;
+
+        tmp = wexpandpath(WMGetFromPLString(pl));
+
+        path = getLocalizedMenuFile(tmp);
+
+        if (!path) {
+            path = wfindfile(DEF_CONFIG_PATHS, tmp);
+        }
+
+        if (!path) {
+            wwarning(_("could not find menu file '%s' referenced in WMRootMenu"),
+                     tmp);
+            path = wfindfile(DEF_CONFIG_PATHS, DEF_MENU_FILE);
+            menu_is_default = True;
+        }
+
+        if (!path) {
+            wwarning(_("could not find any usable menu files. Please check '%s'"),
+                     tmp);
+            wfree(tmp);
+            return NULL;
+        }
+
+        wfree(tmp);
+
+        if (*menuPath) {
+            if (strcmp(*menuPath, path) != 0) {
+                *menuTimestamp = 0;
+                wfree(*menuPath);
+                *menuPath = path;
+
+                if (menu_is_default) {
+                    wwarning(_("using default menu file \"%s\" as the menu referenced in WMRootMenu could not be found "),
+                             path);
+                }
+            } else {
+                /* the menu path didn't change, but the
+                 * pointed file might have changed, so we don't return
+                 */
+            }
+        } else {
+            *menuPath = path;
+        }
+
+        return OpenMenu(*menuPath, menuTimestamp);
+    } else if (WMIsPLArray(pl)) {
+
+        *menuTimestamp = stat_buf.st_mtime;
+
+        return pl_openMenu(pl);
+    } else {
+        wwarning(_("invalid content in menu file '%s'.\nIt should either be a property list menu or the path to the file, enclosed in \"."),
+                 path);
+        return NULL;
+    }
+}
+
+
+
diff -Naur ../work/WindowMaker-0.91.0/src/misc.c wm/src/misc.c
--- ../work/WindowMaker-0.91.0/src/misc.c	2004-10-25 05:48:39.000000000 +0400
+++ wm/src/misc.c	2004-11-12 14:36:39.000000000 +0300
@@ -1215,10 +1215,12 @@
 }
 
 
+#define MAX_CMD_SIZE 4096
+
 Bool
 GetCommandForPid(int pid, char ***argv, int *argc)
 {
-    char buf[1024];
+    static char buf[MAX_CMD_SIZE];
     FILE *fPtr;
     int count, i, j;
     Bool ok= False;
@@ -1226,9 +1228,9 @@
     sprintf(buf, "/proc/%d/cmdline", pid);
     fPtr = fopen(buf, "r");
     if (fPtr) {
-        count = read(fileno(fPtr), buf, 1024);
+        count = read(fileno(fPtr), buf, MAX_CMD_SIZE);
         if (count > 0) {
-            buf[count] = 0;
+            buf[count-1] = 0;
             for (i=0, *argc=0; i<count; i++) {
                 if (buf[i] == 0) {
                     (*argc)++;
@@ -1246,6 +1248,9 @@
                     if (i < count-1) {
                         (*argv)[j++] = &buf[i+1];
                     }
+                    if (j == *argc) {
+                        break;
+                    }
                 }
                 ok= True;
             }
diff -Naur ../work/WindowMaker-0.91.0/src/rootmenu.h wm/src/rootmenu.h
--- ../work/WindowMaker-0.91.0/src/rootmenu.h	1970-01-01 03:00:00.000000000 +0300
+++ wm/src/rootmenu.h	2004-10-13 13:16:42.000000000 +0400
@@ -0,0 +1,42 @@
+/* rootmenu.h- user defined menu
+ *
+ *  Window Maker window manager
+ *
+ *  Copyright (c) 2000-2003 Alfredo K. Kojima
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,
+ *  USA.
+ */
+
+
+#include "WindowMaker.h"
+
+
+typedef void *WRootMenuData;
+
+
+typedef struct _WRootMenuReader {
+    Bool (*checkMenuChange)(char *path, time_t lastAccessTime);
+
+    WRootMenuData (*openMenuFile)(char *path);
+    Bool (*hasMoreData)(WRootMenuData *data);
+    Bool (*nextCommand)(WRootMenuData *data,
+                        char **title,
+                        char **command,
+                        char **parameter,
+                        char **shortcut);
+    void (*closeMenuFile)(WRootMenuData *data);
+} WRootMenuReader;
+
diff -Naur ../work/WindowMaker-0.91.0/src/stamp-h.in wm/src/stamp-h.in
--- ../work/WindowMaker-0.91.0/src/stamp-h.in	2004-10-26 08:16:06.000000000 +0400
+++ wm/src/stamp-h.in	1970-01-01 03:00:00.000000000 +0300
@@ -1 +0,0 @@
-timestamp
diff -Naur ../work/WindowMaker-0.91.0/src/switchpanel.c wm/src/switchpanel.c
--- ../work/WindowMaker-0.91.0/src/switchpanel.c	2004-10-26 05:13:50.000000000 +0400
+++ wm/src/switchpanel.c	2004-11-04 12:10:12.000000000 +0300
@@ -25,12 +25,6 @@
 #include <string.h>
 #include <sys/time.h>
 
-#ifdef SHAPE
-#include <X11/extensions/shape.h>
-
-extern Bool wShapeSupported;
-#endif
-
 #include "WindowMaker.h"
 #include "screen.h"
 #include "wcore.h"
@@ -41,6 +35,13 @@
 #include "funcs.h"
 #include "xinerama.h"
 
+#ifdef SHAPE
+#include <X11/extensions/shape.h>
+
+extern Bool wShapeSupported;
+#endif
+
+
 struct SwitchPanel {
     WScreen *scr;
     WMWindow *win;
@@ -95,10 +96,10 @@
 }
 
 
-static void changeImage(WSwitchPanel *panel, int index, int selected)
+static void changeImage(WSwitchPanel *panel, int idecks, int selected)
 {
-    WMFrame *icon = WMGetFromArray(panel->icons, index);
-    RImage *image= WMGetFromArray(panel->images, index);
+    WMFrame *icon = WMGetFromArray(panel->icons, idecks);
+    RImage *image= WMGetFromArray(panel->images, idecks);
 
     if (!panel->bg && !panel->tile) {
         if (!selected)
@@ -112,7 +113,7 @@
         WMPoint pos;
         Pixmap p;
 
-        if (canReceiveFocus(WMGetFromArray(panel->windows, index)) < 0)
+        if (canReceiveFocus(WMGetFromArray(panel->windows, idecks)) < 0)
           opaq= 50;
 
         pos= WMGetViewPosition(WMWidgetView(icon));
@@ -354,43 +355,51 @@
 
 
 static void
-drawTitle(WSwitchPanel *panel, int index, char *title)
+drawTitle(WSwitchPanel *panel, int idecks, char *title)
 {
     char *ntitle;
     int width= WMWidgetWidth(panel->win);
     int x;
 
-    ntitle= ShrinkString(panel->font, title, width-2*BORDER_SPACE);
+    if (title)
+        ntitle= ShrinkString(panel->font, title, width-2*BORDER_SPACE);
+    else
+        ntitle= NULL;
 
     if (panel->bg) {
-        if (strcmp(ntitle, title)!=0)
-          x= BORDER_SPACE;
-        else
-        {
-            int w= WMWidthOfString(panel->font, ntitle, strlen(ntitle));
-            
-            x= BORDER_SPACE+(index-panel->firstVisible)*ICON_TILE_SIZE + ICON_TILE_SIZE/2 - w/2;
-            if (x < BORDER_SPACE)
+        if (ntitle) {
+            if (strcmp(ntitle, title)!=0)
               x= BORDER_SPACE;
-            else if (x + w > width-BORDER_SPACE)
-              x= width-BORDER_SPACE-w;
-        }
-        
+            else
+            {
+                int w= WMWidthOfString(panel->font, ntitle, strlen(ntitle));
+            
+                x= BORDER_SPACE+(idecks-panel->firstVisible)*ICON_TILE_SIZE + ICON_TILE_SIZE/2 - w/2;
+                if (x < BORDER_SPACE)
+                    x= BORDER_SPACE;
+                else if (x + w > width-BORDER_SPACE)
+                    x= width-BORDER_SPACE-w;
+            }
+        }       
         XClearWindow(dpy, WMWidgetXID(panel->win));
-        WMDrawString(panel->scr->wmscreen, 
-                     WMWidgetXID(panel->win),
-                     panel->white, panel->font,
-                     x, WMWidgetHeight(panel->win) - BORDER_SPACE - LABEL_HEIGHT + WMFontHeight(panel->font)/2,
-                     ntitle, strlen(ntitle));
+        if (ntitle)
+            WMDrawString(panel->scr->wmscreen, 
+                         WMWidgetXID(panel->win),
+                         panel->white, panel->font,
+                         x, WMWidgetHeight(panel->win) - BORDER_SPACE - LABEL_HEIGHT + WMFontHeight(panel->font)/2,
+                         ntitle, strlen(ntitle));
     } else {
-        WMSetLabelText(panel->label, ntitle);
+        if (ntitle)
+            WMSetLabelText(panel->label, ntitle);
     }
-    free(ntitle);
+    if (ntitle)
+        free(ntitle);
 }
 
 
 
-static WMArray *makeWindowListArray(WScreen *scr, WWindow *curwin, int workspace)
+static WMArray *makeWindowListArray(WScreen *scr, WWindow *curwin, int workspace,
+                                    int include_unmapped)
 {
     WMArray *windows= WMCreateArray(10);
     int fl;
@@ -399,7 +408,8 @@
     for (fl= 0; fl < 2; fl++) {
         for (wwin= curwin; wwin; wwin= wwin->prev) {
             if (((!fl && canReceiveFocus(wwin) > 0) || (fl && canReceiveFocus(wwin) < 0)) &&
-                (!WFLAGP(wwin, skip_window_list) || wwin->flags.internal_window)) {
+                (!WFLAGP(wwin, skip_window_list) || wwin->flags.internal_window) &&
+                (wwin->flags.mapped || include_unmapped)) {
                 WMAddToArray(windows, wwin);
             }
         }
@@ -410,7 +420,8 @@
         
         for (wwin= curwin; wwin && wwin != curwin; wwin= wwin->prev) {
             if (((!fl && canReceiveFocus(wwin) > 0) || (fl && canReceiveFocus(wwin) < 0)) &&
-                (!WFLAGP(wwin, skip_window_list) || wwin->flags.internal_window)) {
+                (!WFLAGP(wwin, skip_window_list) || wwin->flags.internal_window) &&
+                (wwin->flags.mapped || include_unmapped)) {
                 WMAddToArray(windows, wwin);
             }
         }
@@ -439,7 +450,8 @@
 
     panel->scr= scr;
 
-    panel->windows= makeWindowListArray(scr, curwin, workspace);
+    panel->windows= makeWindowListArray(scr, curwin, workspace,
+                                        wPreferences.swtileImage!=0);
     count= WMGetArrayItemCount(panel->windows);
     
     if (count == 0) {
@@ -458,6 +470,9 @@
     
     panel->visibleCount= iconsThatFitCount;
 
+    if (!wPreferences.swtileImage)
+        return panel;
+
     height= LABEL_HEIGHT + ICON_TILE_SIZE;
 
     panel->tileTmp= RCreateImage(ICON_TILE_SIZE, ICON_TILE_SIZE, 1);
@@ -672,12 +687,15 @@
 {
     WMFrame *icon;
     int i;
+    int focus= -1;
     
     if (!panel->win)
       return NULL;
 
-    if (event->type == MotionNotify) {
-        int focus= -1;
+ /*   if (event->type == LeaveNotify) {
+        if (event->xcrossing.window == WMWidgetXID(panel->win))
+            focus= 0;
+    } else*/ if (event->type == MotionNotify) {
 
         WM_ITERATE_ARRAY(panel->icons, icon, i) {
             if (WMWidgetXID(icon) == event->xmotion.window) {
@@ -685,23 +703,19 @@
                 break;
             }
         }
-
-        if (focus < 0)
-          focus= 0;
-        
-        if (focus >= 0 && panel->current != focus) {
-            WWindow *wwin;
+    }  
+    if (focus >= 0 && panel->current != focus) {
+        WWindow *wwin;
             
-            changeImage(panel, panel->current, 0);
-            changeImage(panel, focus, 1);
-            panel->current= focus;
+        changeImage(panel, panel->current, 0);
+        changeImage(panel, focus, 1);
+        panel->current= focus;
             
-            wwin= WMGetFromArray(panel->windows, focus);
+        wwin= WMGetFromArray(panel->windows, focus);
             
-            drawTitle(panel, panel->current, wwin->frame->title);
+        drawTitle(panel, panel->current, wwin->frame->title);
             
-            return wwin;
-        }
+        return wwin;
     }
 
     return NULL;
diff -Naur ../work/WindowMaker-0.91.0/src/wconfig.h wm/src/wconfig.h
--- ../work/WindowMaker-0.91.0/src/wconfig.h	2004-10-26 08:13:01.000000000 +0400
+++ wm/src/wconfig.h	1970-01-01 03:00:00.000000000 +0300
@@ -1,572 +0,0 @@
-/*
- * wconfig.h- default configuration and definitions + compile time options
- *
- *  WindowMaker window manager
- *
- *  Copyright (c) 1997-2003 Alfredo K. Kojima
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
- */
-
-#ifndef WMCONFIG_H_
-#define WMCONFIG_H_
-
-#include "config.h"
-
-/*** Change this file (wconfig.h) *after* you ran configure ***/
-
-/*
- *--------------------------------------------------------------------
- * 			Feature Selection
- *
- * 	Comment out the following #defines if you want to
- * disable a feature.
- * 	Also check the features you can enable through configure.
- *--------------------------------------------------------------------
- */
-
-
-/*
- * #undefine if you dont want texture plugin support or your system have
- * some sort of problem with them.
- */
-#define TEXTURE_PLUGIN
-
-#ifdef TEXTURE_PLUGIN
-#undef DRAWSTRING_PLUGIN
-#endif
-
-
-/* undefine ANIMATIONS if you don't want animations for iconification,
- * shading, icon arrangement etc. */
-#define ANIMATIONS
-
-
-/*
- * undefine USECPP if you don't want your config files to be preprocessed
- * by cpp
- */
-#define USECPP
-
-/* #define CPP_PATH /usr/bin/cpp */
-
-
-#define NETWM_HINTS
-
-/*
- * support for XDND drop in the Dock. Experimental
- */
-/*#define XDND*/
-
-/*
- * support for Motif window manager (mwm) window hints
- */
-#define MWM_HINTS
-
-
-/*
- * Undefine BALLOON_TEXT if you don't want balloons for showing extra
- * information, like window titles that are not fully visible.
- */
-#define BALLOON_TEXT
-
-/*
- * If balloons should be shaped or be simple rectangles.
- * The X server must support the shape extensions and it's support
- * must be enabled (default).
- */
-#define SHAPED_BALLOON
-
-
-/*
- * Turn on a hack to make mouse and keyboard actions work even if
- * the NumLock or ScrollLock modifiers are turned on. They might
- * inflict a performance/memory penalty.
- *
- * If you're an X expert (knows the implementation of XGrabKey() in X)
- * and knows that the penalty is small (or not), please tell me.
- */
-#define NUMLOCK_HACK
-
-
-
-/*
- * define OPTIMIZE_SHAPE if you want the shape setting code to be optimized
- * for applications that change their shape frequently (like xdaliclock
- * -shape), removing flickering. If wmaker and your display are on
- * different machines and the network connection is slow, it is not
- * recommended.
- */
-#undef OPTIMIZE_SHAPE
-
-/* define CONFIGURE_WINDOW_WHILE_MOVING if you want WindowMaker to send
- * the synthetic ConfigureNotify event to windows while moving at every
- * single movement. Default is to send a synthetic ConfigureNotify event
- * only at the end of window moving, which improves performance.
- */
-#undef CONFIGURE_WINDOW_WHILE_MOVING
-
-
-/*
- * disable/enable workspace indicator in the dock
- */
-#undef WS_INDICATOR
-
-
-/*
- * define HIDDENDOT if you want a dot to be shown in the application icon
- * of applications that are hidden.
- */
-#define HIDDENDOT
-
-
-/*
- * Ignores the PPosition hint from clients. This is needed for some
- * programs that have buggy implementations of such hint and place
- * themselves in strange locations.
- */
-#undef IGNORE_PPOSITION
-
-
-/*
- * Do not scale application icon and miniwindow icon images.
- */
-#undef DONT_SCALE_ICONS
-
-
-
-
-
-
-#define SILLYNESS
-
-
-
-
-
-/*
- *..........................................................................
- * The following options WILL NOT BE MADE RUN-TIME. Please do not request.
- * They will only add unneeded bloat.
- *..........................................................................
- */
-
-/*
- * define SHADOW_RESIZEBAR if you want a resizebar with shadows like in
- * AfterStep, instead of the default Openstep look.
- * NEXTSTEP 3.3 also does not have these shadows.
- */
-#undef SHADOW_RESIZEBAR
-
-/*
- * Define DEMATERIALIZE_ICON if you want the undocked icon animation
- * to be a progressive disaparison animation.
- * This will cause all application icons to be created with Save Under
- * enable.
- */
-#undef DEMATERIALIZE_ICON
-
-/*
- * Define ICON_KABOOM_EXTRA if you want extra fancy icon undocking
- * explosion animation.
- */
-#undef ICON_KABOOM_EXTRA
-
-/*
- * #define if you want the window creation animation when superfluous
- * is enabled. Only enable one of them.
- */
-#undef WINDOW_BIRTH_ZOOM
-
-#undef WINDOW_BIRTH_ZOOM2
-
-/*
- * whether arrow drawing in clip buttons should be gradiented
- */
-#undef GRADIENT_CLIP_ARROWS
-
-
-/*
- *--------------------------------------------------------------------
- * 			Default Configuration
- *
- * 	Some of the following options can be configured in
- * the preference files, but if for some reason, they can't
- * be used, these defaults will be.
- * 	There are also some options that can only be configured here,
- * at compile time.
- *--------------------------------------------------------------------
- */
-
-/* list of paths to look for the config files, searched in order
- * of appearance */
-#define DEF_CONFIG_PATHS \
-    "~/GNUstep/Library/WindowMaker:"PKGDATADIR
-
-#define DEF_MENU_FILE	"menu"
-
-/* name of the script to execute at startup */
-#define DEF_INIT_SCRIPT "autostart"
-
-#define DEF_EXIT_SCRIPT "exitscript"
-
-#define DEFAULTS_DIR "Defaults"
-
-#ifdef USE_TIFF
-#define DEF_BUTTON_IMAGES PKGDATADIR"/buttons.tiff"
-#else
-#define DEF_BUTTON_IMAGES PKGDATADIR"/buttons.xpm"
-#endif
-
-/* the file of the system wide submenu to be forced into the main menu */
-#define GLOBAL_PREAMBLE_MENU_FILE "GlobalMenu.pre"
-#define GLOBAL_EPILOGUE_MENU_FILE "GlobalMenu.post"
-
-
-/* pixmap path */
-#define DEF_PIXMAP_PATHS \
-    "(\"~/pixmaps\",\"~/GNUstep/Library/WindowMaker/Pixmaps\",\""PIXMAPDIR"\")"
-
-#ifdef USER_MENU
-#define GLOBAL_USER_MENU_PATH PKGDATADIR"/UserMenus"
-#define DEF_USER_MENU_PATHS \
-    "~/GNUstep/Library/WindowMaker/UserMenus:"GLOBAL_USER_MENU_PATH
-#endif
-
-/* icon path */
-#define DEF_ICON_PATHS \
-    "(\"~/pixmaps\",\"~/GNUstep/Library/Icons\",\"/usr/include/X11/pixmaps/\",\""PIXMAPDIR"\")"
-
-
-/* window title to use for untitled windows */
-#define DEF_WINDOW_TITLE "Untitled"
-
-/* default style */
-#define DEF_FRAME_COLOR   "white"
-
-
-#define DEF_TITLE_FONT "\"Trebuchet MS,Luxi Sans:bold:pixelsize=12\""
-#define DEF_MENU_TITLE_FONT "\"Trebuchet MS,Luxi Sans:bold:pixelsize=12\""
-#define DEF_MENU_ENTRY_FONT "\"Trebuchet MS,Luxi Sans:pixelsize=12\""
-#define DEF_ICON_TITLE_FONT "\"Arial,Luxi Sans:pixelsize=9\""
-#define DEF_CLIP_TITLE_FONT "\"Verdana:bold:pixelsize=10\""
-#define DEF_INFO_TEXT_FONT "\"Trebuchet MS,Luxi Sans:pixelsize=12\""
-
-#define DEF_WORKSPACE_NAME_FONT "\"Trebuchet MS,Luxi Sans:pixelsize=24\""
-
-
-#define DEF_FRAME_THICKNESS 1	       /* linewidth of the move/resize frame */
-
-#define DEF_WINDOW_TITLE_EXTEND_SPACE	"0"
-#define DEF_MENU_TITLE_EXTEND_SPACE	"0"
-#define DEF_MENU_TEXT_EXTEND_SPACE	"0"
-#define TITLEBAR_EXTEND_SPACE 4
-
-#define DEF_XPM_CLOSENESS	40000
-
-/* default position of application menus */
-#define DEF_APPMENU_X		10
-#define DEF_APPMENU_Y		10
-
-/* calculate window edge resistance from edge resistance */
-#define WIN_RESISTANCE(x)	(((x)*20)/30)
-
-/* Window level where icons reside */
-#define NORMAL_ICON_LEVEL WMNormalLevel
-
-/* do not divide main menu and submenu in different tiers,
- * opposed to OpenStep */
-#define SINGLE_MENULEVEL
-
-/* max. time to spend doing animations in seconds. If the animation
- * time exceeds this value, it is immediately finished. Usefull for
- * moments of high-load.
- */
-#define MAX_ANIMATION_TIME	1
-
-/* Zoom animation */
-#define MINIATURIZE_ANIMATION_FRAMES_Z   5
-#define MINIATURIZE_ANIMATION_STEPS_Z    12
-#define MINIATURIZE_ANIMATION_DELAY_Z    10000
-/* Twist animation */
-#define MINIATURIZE_ANIMATION_FRAMES_T   12
-#define MINIATURIZE_ANIMATION_STEPS_T    16
-#define MINIATURIZE_ANIMATION_DELAY_T    20000
-#define MINIATURIZE_ANIMATION_TWIST_T    0.5
-/* Flip animation */
-#define MINIATURIZE_ANIMATION_FRAMES_F   12
-#define MINIATURIZE_ANIMATION_STEPS_F    16
-#define MINIATURIZE_ANIMATION_DELAY_F    20000
-#define MINIATURIZE_ANIMATION_TWIST_F    0.5
-
-
-#define HIDE_ANIMATION_STEPS (MINIATURIZE_ANIMATION_STEPS*2/3)
-
-/* delay before balloon is shown (ms) */
-#define BALLOON_DELAY           1000
-
-/* delay for menu item selection hysteresis (ms) */
-#define MENU_SELECT_DELAY       200
-
-/* delay for jumpback of scrolled menus (ms) */
-#define MENU_JUMP_BACK_DELAY    400
-
-/* *** animation speed constants *** */
-
-/* icon slide */
-#define ICON_SLIDE_SLOWDOWN_UF	1
-#define ICON_SLIDE_DELAY_UF	0
-#define ICON_SLIDE_STEPS_UF	50
-
-#define ICON_SLIDE_SLOWDOWN_F	3
-#define ICON_SLIDE_DELAY_F	0
-#define ICON_SLIDE_STEPS_F	50
-
-#define ICON_SLIDE_SLOWDOWN_M	5
-#define ICON_SLIDE_DELAY_M	0
-#define ICON_SLIDE_STEPS_M	30
-
-#define ICON_SLIDE_SLOWDOWN_S	10
-#define ICON_SLIDE_DELAY_S	0
-#define ICON_SLIDE_STEPS_S	20
-
-#define ICON_SLIDE_SLOWDOWN_US	20
-#define ICON_SLIDE_DELAY_US	1
-#define ICON_SLIDE_STEPS_US	10
-
-/* menu scrolling */
-#define MENU_SCROLL_STEPS_UF	14
-#define MENU_SCROLL_DELAY_UF	1
-
-#define MENU_SCROLL_STEPS_F	10
-#define MENU_SCROLL_DELAY_F	5
-
-#define MENU_SCROLL_STEPS_M	6
-#define MENU_SCROLL_DELAY_M	5
-
-#define MENU_SCROLL_STEPS_S	4
-#define MENU_SCROLL_DELAY_S	6
-
-#define MENU_SCROLL_STEPS_US	1
-#define MENU_SCROLL_DELAY_US	8
-
-
-/* shade animation */
-#define SHADE_STEPS_UF		5
-#define SHADE_DELAY_UF		0
-
-#define SHADE_STEPS_F		10
-#define SHADE_DELAY_F		0
-
-#define SHADE_STEPS_M		15
-#define SHADE_DELAY_M		0
-
-#define SHADE_STEPS_S		30
-#define SHADE_DELAY_S		0
-
-#define SHADE_STEPS_US		40
-#define SHADE_DELAY_US		10
-
-
-/* workspace name on switch display */
-#define WORKSPACE_NAME_FADE_DELAY 30
-
-#ifdef VIRTUAL_DESKTOP
-/* workspace virtual edge speed */
-#define VIRTUALEDGE_SCROLL_VSTEP 30
-#define VIRTUALEDGE_SCROLL_HSTEP 30
-#endif
-
-#define WORKSPACE_NAME_DELAY	400
-
-/* window birth animation steps (DO NOT MAKE IT RUN-TIME) */
-#define WINDOW_BIRTH_STEPS	20
-
-/* number of steps for icon dematerialization. */
-#define DEMATERIALIZE_STEPS	16
-
-/* Delay when cycling colors of selected icons. */
-#define COLOR_CYCLE_DELAY	200
-
-/* size of the pieces in the undocked icon explosion */
-#define ICON_KABOOM_PIECE_SIZE 4
-
-
-/* Position increment for smart placement. >= 1  raise these values if it's
- * too slow for you */
-#define PLACETEST_HSTEP	8
-#define PLACETEST_VSTEP	8
-
-
-#define DOCK_EXTRA_SPACE	0
-
-/* Vicinity in which an icon can be attached to the clip */
-#define CLIP_ATTACH_VICINITY	1
-
-#define CLIP_BUTTON_SIZE  23
-
-
-/* The amount of space (in multiples of the icon size)
- * a docked icon must be dragged out to detach it */
-#define DOCK_DETTACH_THRESHOLD	3
-
-/* Delay (in ms) after which the clip will autocollapse when leaved */
-#define AUTO_COLLAPSE_DELAY     1000
-
-/* Delay (in ms) after which the clip will autoexpand when entered.
- * Set this to zero if you want instant expanding. */
-#define AUTO_EXPAND_DELAY       600
-
-/* Delay (in ms) after which the clip will be lowered when leaved */
-#define AUTO_LOWER_DELAY        1000
-
-/* Delay (in ms) after which the clip will be raised when entered.
- * Set this to zero if you want instant raise. */
-#define AUTO_RAISE_DELAY        600
-
-
-/* Max. number of icons the clip can have */
-#define CLIP_MAX_ICONS		32
-
-/* blink interval when invoking a menu item */
-#define MENU_BLINK_DELAY	60000
-#define MENU_BLINK_COUNT	2
-
-#define CURSOR_BLINK_RATE	300
-
-#define MOVE_THRESHOLD	5 /* how many pixels to move before dragging windows
-                           * and other objects */
-
-#define KEY_CONTROL_WINDOW_WEIGHT 1
-
-#define HRESIZE_THRESHOLD	3
-
-#define MAX_WORKSPACENAME_WIDTH	32
-#define MAX_WINDOWLIST_WIDTH	160     /* max width of window title in
-                                         * window list */
-
-#define DEFAULTS_CHECK_INTERVAL 2000	/* how often wmaker will check for
-                                         * changes in the config files */
-
-/* if your keyboard don't have arrow keys */
-#undef ARROWLESS_KBD
-
-
-/* don't put titles in miniwindows */
-#undef NO_MINIWINDOW_TITLES
-
-
-#define FRAME_BORDER_COLOR "black"
-
-
-/* for boxes with high mouse sampling rates (SGI) */
-#define DELAY_BETWEEN_MOUSE_SAMPLING  10
-
-
-/*
- *----------------------------------------------------------------------
- * You should not modify the following values, unless you know
- * what you're doing.
- *----------------------------------------------------------------------
- */
-
-
-/* number of window shortcuts */
-#define MAX_WINDOW_SHORTCUTS 10
-
-
-#define WM_PI 3.14159265358979323846
-
-#define FRAME_BORDER_WIDTH 1	       /* width of window border for frames */
-
-#define RESIZEBAR_HEIGHT 8	       /* height of the resizebar */
-#define RESIZEBAR_MIN_WIDTH 20	       /* min. width of handles-corner_width */
-#define RESIZEBAR_CORNER_WIDTH 28      /* width of the corner of resizebars */
-
-#define MENU_INDICATOR_SPACE	12
-
-/* minimum size for windows */
-#define MIN_WINDOW_SIZE	5
-
-#define MIN_TITLEFONT_HEIGHT(h)   ((h)>14 ? (h) : 14)
-
-#define ICON_WIDTH	64	       /* size of the icon window */
-#define ICON_HEIGHT	64
-#define ICON_BORDER_WIDTH 2
-
-#define MAX_ICON_WIDTH	60	       /* size of the icon pixmap */
-#define MAX_ICON_HEIGHT 48
-
-#define MAX_WORKSPACES  100
-
-#define MAX_MENU_TEXT_LENGTH 512
-
-#define MAX_RESTART_ARGS	16
-
-#define MAX_COMMAND_SIZE	1024
-
-#define MAX_DEAD_PROCESSES	128
-
-
-#define MAXLINE		1024
-
-
-#ifdef _MAX_PATH
-# define DEFAULT_PATH_MAX	_MAX_PATH
-#else
-# define DEFAULT_PATH_MAX	512
-#endif
-
-
-#define DEBUG0
-
-/* some rules */
-
-#ifndef SHAPE
-#undef SHAPED_BALLOON
-#endif
-
-#ifdef XKB_MODELOCK
-#define KEEP_XKB_LOCK_STATUS
-/* This is a hidden feature.
- * Choose just one of LANGUAGE_* hints.
- * Icon can be changed in def_pixmaps.h.
- * More icons are welcome.
- */
-#define XKB_BUTTON_HINT
-#undef LANGUAGE_TH
-#undef LANGUAGE_SK
-#endif
-
-#ifndef DEMATERIALIZE_ICON
-# define NORMAL_ICON_KABOOM
-#endif
-
-#if defined(HAVE_LIBINTL_H) && defined(I18N)
-# include <libintl.h>
-# define _(text) gettext(text)
-#else
-# define _(text) (text)
-#endif
-
-
-#if defined(__GNUC__) && !defined(__STRICT_ANSI__)
-# define INLINE inline
-#else
-# define INLINE
-#endif
-
-#endif /* WMCONFIG_H_ */
-
diff -Naur ../work/WindowMaker-0.91.0/src/wconfig.h.in wm/src/wconfig.h.in
--- ../work/WindowMaker-0.91.0/src/wconfig.h.in	2004-10-26 02:20:52.000000000 +0400
+++ wm/src/wconfig.h.in	2004-11-12 14:36:39.000000000 +0300
@@ -515,8 +515,6 @@
 
 #define MAX_RESTART_ARGS	16
 
-#define MAX_COMMAND_SIZE	1024
-
 #define MAX_DEAD_PROCESSES	128
 
 
diff -Naur ../work/WindowMaker-0.91.0/src/wmspec.c wm/src/wmspec.c
--- ../work/WindowMaker-0.91.0/src/wmspec.c	2004-10-24 23:36:15.000000000 +0400
+++ wm/src/wmspec.c	2004-11-04 12:10:12.000000000 +0300
@@ -383,17 +383,16 @@
 
     if (rc==Success && prop_return) {
         unsigned int *data = (unsigned int *)prop_return;
-        unsigned int pos = 0, len = 0;
-        unsigned int best_pos = 0, best_tmp = ~0;
-        extern WPreferences wPreferences;
+        unsigned int pos = 0, len = 0, best_pos = 0, best_tmp = ~0;
         unsigned int pref_size = wPreferences.icon_size;
         unsigned int pref_sq = pref_size*pref_size;
+        unsigned int tmp;
         char *src, *dst;
         RImage *new_rimage;
 
         do {
             len = data[pos+0]*data[pos+1];
-            unsigned int tmp = pref_sq-len;
+            tmp = pref_sq-len;
             if (tmp < best_tmp && tmp > 0) {
                 best_tmp = tmp;
                 best_pos = pos;
diff -Naur ../work/WindowMaker-0.91.0/util/wm-oldmenu2new wm/util/wm-oldmenu2new
--- ../work/WindowMaker-0.91.0/util/wm-oldmenu2new	1998-11-23 14:32:26.000000000 +0300
+++ wm/util/wm-oldmenu2new	2004-10-27 10:00:10.000000000 +0400
@@ -75,7 +75,9 @@
 # Expand macros if necessary.
 # Create a temp copy of the menu file to edit to turn into the new.
 #
-T=/tmp/wmmenu$$
+TD=$(/bin/mktemp -d /tmp/wmmenu.XXXXXX) || { echo "$0: can not create temporary file" >& 2; exit 1; }
+T=$TD/wmmenu$$
+
 echo "Converting $GLW/$OLD_MENU --> $GD/$NEW_MENU"
 cd $WLW || exit 1
 if [ ! -s "$OLD_MENU" ]
@@ -198,7 +200,8 @@
 	}
 ' > $WD/$NEW_MENU.new || exit 1
 
-rm $T
+rm -f $T
+rm -fr $TD
 
 #
 # Now install it.
diff -Naur ../work/WindowMaker-0.91.0/util/wmsetbg.c wm/util/wmsetbg.c
--- ../work/WindowMaker-0.91.0/util/wmsetbg.c	2004-10-23 07:19:08.000000000 +0400
+++ wm/util/wmsetbg.c	2004-10-27 10:00:10.000000000 +0400
@@ -557,6 +557,7 @@
         case 'C':
             {
                 Pixmap tpixmap = XCreatePixmap( dpy, root, scrWidth, scrHeight, DefaultDepth(dpy, scr));
+                XSetForeground(dpy, DefaultGC(dpy, scr), color.pixel);
                 XFillRectangle(dpy, tpixmap, DefaultGC(dpy, scr), 0, 0, scrWidth, scrHeight);
 
                 texture->pixmap = tpixmap;
diff -Naur ../work/WindowMaker-0.91.0/WindowMaker/Defaults/WindowMaker.in wm/WindowMaker/Defaults/WindowMaker.in
--- ../work/WindowMaker-0.91.0/WindowMaker/Defaults/WindowMaker.in	2004-10-25 05:54:08.000000000 +0400
+++ wm/WindowMaker/Defaults/WindowMaker.in	2004-10-27 10:00:10.000000000 +0400
@@ -1,6 +1,5 @@
 {
   SmoothWorkspaceBack = NO;
-  WindozeCycling = YES;
   PopupSwitchMenu = NO;
   MenuStyle = normal;
   DisableMiniwindows = NO;
diff -Naur ../work/WindowMaker-0.91.0/WindowMaker/Icons/Ear.png wm/WindowMaker/Icons/Ear.png
--- ../work/WindowMaker-0.91.0/WindowMaker/Icons/Ear.png	1970-01-01 03:00:00.000000000 +0300
+++ wm/WindowMaker/Icons/Ear.png	2002-01-26 18:52:22.000000000 +0300
@@ -0,0 +1,35 @@
+PNG
+
+   IHDR   @   @   ªiqÞ   bKGD ñ ¼ §áó­   	pHYs    ù¥   tIMEÒÿ{¬    IDATx»IeÉç÷;ÇÌîðw÷dR]ÝZ$@i¥}}íô!ºÑ+	6zÓÐ]%RCÉ$$1øøÆ{¯G»îÉâFð ÂÇgfÇÎùOW>ýàÅ¾|ó®Ë¥,ÌléTÁ»îâdÝ|üâ¹7ÄIÞ\]su·&xÖ¿xõ/.Î9Æ(ã¹Ýí¹Ùm¹ºÝp·?ÐxÏS`f´!°^ôüàÕ¼¹¹åv»#åÌÝî@Ûþ«þ3Ï¿üÝq «Í1FÌ åÌ¾Ì©RÌ8Y.øäÅ3öãh?ÎËOmÆ¼9óþp.N×íovû½r@d'òÏ]»X-úÕÉb¹~zq¶*9/rNíÝaðxûÞMÓ$M²l[DðªÈ4%öÓÀ0Fÿÿ f ªxçP ëv#SÊ¬ú\
+9Tq wJp¦iH)r"xX.6ØR,Ëf8xçvÞ»mNy§ªùá'ýÍ8«×ï¯Oû&S<Í%¯b.Qq÷ª¢KÆ;G<ªJIöÃH.å,Þ;%å ªBðDp*,¬Î9:ßÐuM´Á3NËÛ;Æ)¥sBr1_Ñ\ÛÃÀß¾r.äR,ÜWYQÜµM,fCÂ.rSº)ßÙÎü«ÿê×kNo÷GÀ	f="­.å¢*&I)Æ2¹DbJJAEyñÅRaÑ·ôMÃÙzÉùzÍÇ/ñÙGpqvB×Td.b£\2)¦)r·Ýñúý5_¿¿äv»ã÷oÞpy{Ëë5pªäRo÷¿ñï-»ÎrÉå8Å|âXJ9Ç©üý[ðÿïo¿XlÆ)uñfv&"K§ÚzU/HÊ&1%\l&6t1{(o§J×4¼|vÁ«gOyõâ)?{ÂóSÎNÖ®Oèºç*uÞ+N0x½"F.Æq»MÝ_¿~Ãßþüü§_þã8ýéí2¨=bJÉãhó"ïËù{SB|´^esî÷Ã°(ÅV"r¢Âªè
+¬K¥'¢Î9	ÁSAã(¥îþÃÎ,zÎÏNùÞÏùËWõ¤^sqvÊÉjÅjµ¤ëïp
+Nj¥­×Cµþ_çr2Ì äÂ8E>úð9}øüÿÝõ5ÿþg¿àû»ßoÙýaØüQ"Â`F£"Uå¸ZôÝqüÍf:ÚeßuSÊ}Ìi9MqeuAúÖ¹Ð4A÷2N1SàN&xÚ¶ádÑó¯¾ÃþãïóäÑ«~ÁùÙ	''§¬VkBÓ|À¤àÅa®Ã9GJ¶sä!ã£[£]t,VëóG¼øÎ»»=ñÉGüðüÿý?p³ÝÙc­¬ñÎjYô]|~þ(¼¾¼âvwJ)»\èn6ÛÖ9þ¿þëæÿñw_úÝ8 ÚÉÚ¶R:§ÚµmÖËÛír0V}÷^jÙ:}ËÉbÉ¿ûþýOyñøÓÕn±`½:auzBÓö8u"rIYF¤^çêxBQMm ó¨,8;Ç-V,W+<:çãOøþõÿlo.¯8]¼³ußÙÍn7û£ûüË¯-æZÖ 3O.Þ·M«NÅ5NýdÙ÷MðÓ4yõ!8uaÕ÷aG7Æ(*"}ßÓOñN¹8[óÁÅ/=åÇß}ÅÏrº^³>9eyrJ¿\¢.`ûrxO!2åL)Æ9Dñú¡ñ&4!á´8ºÕÒ\Ûâúÿ2þ{°ÿñßþ¯\ÞÝñúòÎr)ffzçoµÞ8QQ?ÄIwºL¼ªÆ¸àÁ;07ÆìDDÖËNV}wb&}Óp±^óòÙ~ôé+>~ñ§O²:9¡?9ÅùÝíIñãxà0&RLäb@ÅE
+ä!bÇb*ª¦ÁGPÏÙº£ÕÂ¢Ùá¤¡uäÚZ=eÍ_ÿà3û«ï}Äÿôþ#)gSRÌà ' Î9qNuIüÕí¦ÁéQrÎ`&mÓH×ñÎË³,úVNYô=90õ¢ãÕóÇ|ïÃç¼zñçOóèéSÚ~F¡l6ì{iäpI1áTqBÎã4QR¢þí?CMû8ïØìZÖÓ²âÑ©§¤L,-Xò¯þ¿á×oøÙç_0ÆDpNr)ó¬­ó­ÀJû*²1®s)'*²òÎ/à;U¦ir¢ªË®eßKPçä£OåG|"ß{ùB^<ÇOH¯pØI²=nds8È4F)9:LTLqhIDEDU÷â¼3Äû7]Lâå8sçDÚÅJEb¸X·âTåz³ç0ìÑ$§:-Úö Â¾ÛRvÞù£ÿñw?âoÞáTQU¡k+RÓDpVe×ñhµ"¥Ìqh~ðï¾|Ê?¾ Å(ã%G®·ûq¡"TñêXç="!XÉ¤)QRÀR¢¤LL<OÛ·Ûêm<ZÑD¥4¥ïðyâ_þð{ü/ûwÂ¢mQJ)3ºÌ8UhVð'«Æ[ú¶*>ïB åLqJ1G×Q±dË<9;áÃ'Ox´^óøÑ)}È¤É9r³Øí'Ì¢|ð! ª¨:ÄÕz¼#-q$-ß~`¥%Ûý7Wp² ÜxLO­ùô;Ïùùç¿ã0N¨
+à½cbwðWßýO)"§¼1Ì$8'«åBz¹Þo$åÂùéïô¡<>;åâìÕ"3Ùû!A ^hº÷L ¥H<DÒ13&Wê×±ºhÌ(µ]CDÉ©6
+8§4E1²*Á~úýOø·ÿîoÄ©¯*Ù²&Á;Y/z)ËO¾û±øÁ9ÙYKÊ4F(ÆbÑàUØ÷Ð÷Ù£s>ýÎ3?¾àé£+VÚ0rwÈP¯WÚ¾Á9OÎÜÉ1Ad©4À!
+æ+Qê&ÌTº2Á[Göû#MÓÍ­­B¿ÏðO_ò÷¿ú}ãiB`½XÐµA¸ÚlÙìïøO¿ø¯ÞÑ÷u^kßQ'È¤¬«EÏ¢k1uÄ\8Yz¾÷ò>~þ'g'ä"X6rN¢Bh"qÓ«'<÷Cú~lfs`Îa¹¶Üc[+¨p?I©°Ý8Y/©[ãÕq~ºæ¿üé¹Ý)ffÇÄë«kRÎ-üàå¼zö_r©ü;çz:¥î»÷E¨ÔwJ)GTÏóÙËïðôü<¥Tfsa,Vçvp¨s JN"6Eñ8¯Á¢B.`*åLuZñÄR(\ÀQðÎcVÃþÈbÑcbxï9Yt<:9áÍÍSÊtÞÓ5ï<~ÌÏ¹Ûx{}Ã¯¿~¦XÅ\Mã03Vmf¤QU}ÇËgOyòèï«l°$¦£¾¥dRäTpb´>Ðô'Ð7mÛ¢¢SJaJLc$'@ÉCÈÅQJF0rÕ ¨*Ó8°J!«EË?ûìSn7;~÷Í[b*¤räç¿ùíáXoþéÙ)o®nÈ¥vG'B6@+F«ÐÚÀªë8].ÞÍwÒPuÄXY
+yJd)V]ð¸¾ålÑ¼§	TP+ÐL×aäF:*I'"¶$©ïÉÌ(EñÞ!J*ä8rÁÑ7-ÏÏÎxúè_þþSd?LÄUÑRüÉ²çÝÍ-Ñ3ÈÔÝ]öÎ)}ß±^.xrvÂÅÙ}×¢:Ï(ÑJaÕáL(ÅH¹PJ¡×t'«­÷,[²æ:QÔ9¬bÆ7¦¥=$¦9nÁdbÊÂqLVzÌÜ¨+Ò:¢a6BlâÄöxä×_½æÝÍ*27Tþ¬ï~¾kI)á¤îÊÒ×¼²\ô´mÇ'¬8?]Ó5fKÕÃi=ÍT"©J¦Öq"Î¢ Z.f"µ¾	t]¥ÌfÜ,I)SÄÌªEÎâ§m<aEHÃ)Ó)v¿ôºxQ­là½Ã/ûq(¥VA+U=_Ò5ÏÏ8]­8Y.Y/{| Tn¯BBëç,1ÅH6Ã4s¢KíÞ)êiLT(©0UeB×ÂTÖõ.ã¤e­#É;¬r\àl Ï(YCÕ|5Ä{Jd+lGT·b B<!x)2N¼Ã9O
+Ù
+£*ý|ÊêÕ¶¬Kº¦EUh| iC5¬"9´2¹®éX-Xu
+"LSæxÙd2P¬ÎøG¥gT!OwìV'7¦«e
+Ñ^°c'!@æ ÌWÁ«TD¡`)127ZïN®m13ÎONÞáK)¨ëEOÛxÌußKAU9]­X-{ºÐÒuMíª¨÷3ZTðæ8Uu,ûõÅcbØ¶Ã7H"=)%vJÊÂðÍ7d×Ð®9wÑç{eàØ)q0FÒwTQ)Ø¬#: äß¾yK6£E×ðêéS¶ÇÛãaJ\ÞÞ¼Ç¯ú68bÈ¾ïÕÇçg4¡A½Î¸AR6Ôyï=4Mà'b,U\8ÆÄñ8°¶ÃTEÎÍ¶-®hÄã³2àSaÚ¸ÒÈ£ÎÀÂ¢I<N(Ñ&Vn=¢@.8W¡òtÝnä¯ð]þøîíáÈïß¼å8ÄiBàl½¬
+²ªÐJ![ÅÖ÷4mËó'ç,»ÁQKe*K	u¾²V3L¡Õ>L#ÅXÊ0²'Ç#ûCÄzOá d8Y·4!à4Sl6åtÍÒ	Hh]@u-UêI³\sæêî¿ÿü7üê¯Ùî°ìÚb¼½¾eÑµxïë8¢RR®²ïh»64¨s"w-!J)\(Îãê<AÈ8<Y ¨¶Æéxä0MlÇýa`È:ØíãD¶B×uw<iÎPçéÛqÜî'Î5âSGin5Ä47 E(óXËÃ¹Ùì9#1fÌê4ë)&V}ÏÙjÉqj\ö=ápÒwøà¹Þ¯¶mh'¾ièÚGê3*÷6É#®_¢-eJKb
+CLd#ãÀö0p8Äéãq"ãéÙÁò%ÌÒTWåºöYM´TÁqØd)gv§%Ï/q²\2N#ÇqBeDUùíë7°ZtøÇ''Ü
+ôMínöÎNOX­Bý(¡b1DA]©I!gJÛq8Ü2Lb¤ÆÆãoÞ_s»Û1L	cÕ÷qBJáôô,ã¸#O#Þ¯hT¡Q¶a:L,º^
+A×¤iS Õ+0>s|ýî=m0ÁÉb÷'g§ìGürÑS(GÊÜùC¬W+Ú¶AQ] uu¬¡N:/XªPX­¢±HáÅFZ×Ñ/Ì
+C¹Ý·,¤çòfË7×þðæ=ªÊÉzzOC\¥ÓnfC«§Õuà=MãPñLÇR*ÛF¾|{ÉÏ~ý;¾¾¼b³?Ð·«EÏé%ªÆ¯¾|ÍÝîÀ7×L)á»&0þ[q¡m«ddFå"ÐxOðuÙÃ¬Þçã!²he|(£#BFÁZg§NúÅé#~ôæß~ý~ñÕ{~e¯ÙG¦q`¸¾Û°
+Ú¼x|ÛÐôrâ¥pÒwté}O-"wD ¦ËÛ;¾øæ¯¯®HÅX´-ê=Ã4ñÍÕw»iÖ×îTï´ÂØ¦­~Ý²ïQQ6Ð6Íl9>*/Ýsv+º:LA=yL5¨¬Z}ÃjÑÑ,:¤dÖÏ/ø¬ót«CyssË{<%f¶Lz)°9à§¬]¢¸]3 nÄM9föÇË»Ww;¦9O0ÓÄ#%kåÍ^â£§Å{O×6 J~.{}3©¶Ô-f0_BFJÂ£øÆ´c±P:çhTÑ1CµìB|øøñßço.ùòÝ{Æ9!¢Ú\$¤L^Ï4
+*ÚH %¥	wLbÇ)q·ÛóËßÿ÷×wª«1ÅÈò?áúRßú®ÃZêHuXcÎÇR;gÔWÌ:vÌª^W%*ó$ç1ç:ÔW¬¥võV2êñ£^¢¢Bß8ýÀfw¯Ï$S44ô#8G¶ÅiJS¶ÓÄåfË»-ûqbÊÕ|9N±ÀhB¨ùg/ïBÃXË[àÞ,e^¬Çfx\OÞ«Î ¨Jb¦bH2S$e¤ñUÅIß¢´RTjå8^~È³³5f¦8ñXL>ZÖ©Ô®ñjXLàF¤9Å¦)Ò4<M#_¾»â¿ÿß}õãH3c)Vö§§ßxOLiõêà=ÎÕÈ
+bxÅ×Ý@D©Ê\mVæÅÛì`#ß	f,ÍÉ--îÁI9c³ â°^-¹¼ÝR2Å³3ÎZeuvBxüÜ¼£sómåqdJGr,Qxóþÿû7àï?ÿÝSÎä±¹¹·¡a? ÿTI%#êèÚCN4¾vûB+8P¡º8­Pk3EltVo¥p5¸DÎ ªú*Ædì[
+}ëÓÈúäW§8=Dóâ{XÊ`ÇÈÍNÉÃaâ÷o/ù/¾äòö\
+]ÛÐµÝ<1ibw8Öê-ßÖB>LÌ©Îp Åb´MSó7A@Õ=ÑC¦T£ÊÖÌð%Ïê®à¬ ÎÏÁ(Å(PdVxëÍ÷·r*/×|ðø}öGíþÅ`ùêKMäf£ÄT2I21e6Ç=¿ùê5·wqªå~'¦T%ÿ®myv~Æj±à«·ïbe­«¾ÃçÆ	ïRêYï<ÎDªó4àÛIõìO¶Å¤ÆZ!¸é,y7¬D¹ÝüöË¯ùåoÿzÇ÷?þ¿üôc­×ØzMtùªC»Àkisø_Ì×o¯øúí;îv{S"ÎrÜýKD§ãX«À9åQ·âf»åònWUf/2Ï76y E3þ¡XÍõ<üY£S¬6M+@fåÆûúûD=äL.»k~ùåWì6G~ôÃùÁ«Y?ÆVÈryÍÎe8ïQ· ;^ãç;²¾ººæÿüå¯ùõë·ìÇe×b"O²Ùx|vÊqbÂ;e{8p·ÝÑ@	¿è!¬É1UßªðRF½"óÜ½Z¾Zw­ûðReÖ=æRÝxpA½!â¹º¼á÷7öüõ«yôW¬](vÜ`=·&`ÂÐu°^Ò]_íÅÂí-ÿÇÿõüíÿó9·=«9xÍØí8u|ðä1×Û·Û=tMCÛ4|öêCÃÈëËk|2Pß4¤)SÍÃêÆ«ø}«3¾5Û*K?ô!45C¨ÃyE$Ö8ÝínÇ×ß\2æÈ^~ÊêÃ¬OÎÈñ@º»«Q9+Äñ}êè¡yG¶d»áÈ?|þÿþçÿÈ»ÛmCÛ´lÃaG.?¼}ÌáJ­NRÅÓß|ý1&VË%~JÍÜÈk[¼¯rõ}ÔÊ«>,ÖûP7gõÊÏãP¥ýAq® 0r¤ÝÄ»«ùÎãgôÝñÇ»[ÒaCqÈ.Óö=]ßaMßßBíèy}Å?üî+ÞÞÞÑûÅr 7»]qVW^ëAf+a¦£Ê¥ðßþô'ø.4(UË§ØÙsHãjm N¹WØÍêÑß_Z÷çªî¯^S6ÆhÄb¡MK	BÚ(ñj`´LÓwtmEïh-
+ØRÉ*lïüáÍ{þøþà\LÛÃÌÉÑ®iæ­Ý'I+[U÷Ü|þøÍîoC@Ìð®¶Áû¬©8ò'½Þ¬ÌÚàlRP°RùB)µ8_ß}8jU£º~ICy¨|ß×s·hh P?NX+c7lùúÝ_|ý1F?>'ÅBL¾	tm`Ñ65[ Sc9ïÈ±Æpiâ8~ö«_rÁ{­]^y zVno÷	Äoík+VGÜ¬':§V»'¸K¡ ^dÕñsM. FhZôpMâTý¸çÝû>ÿò+vcäâôqLZg½åÂ¢ë)¹<8Sãã½ç."BÊëÍ¦z MÀWR3§¶æïÇIõùAÈä:æ/S,%ìÁ¬¬s² Ùj^ dd'VË}þÐú	!'´^YáÑX2Rc¸¾¹ã÷oÞquwWOëJ1ò¬¹àY6JË2NB×6çR®(²Ô1þälÅñÓ¿ÂÛ\àògDI¤ÎñjDùÍÛÜò²=÷Ûgó/o«i)Bh)S-:RUñÎã½£mMðäàiPTv<2y#«Ä}ysÇË+
+SÀÝ¿¿2SÜ*Þf0tFöãH¾Çq"WY©d¨æ­yÈýùf0ßÛB$±ÙI¦4Np¾&:ÑDN	iÀ9cÕyB,d|Q}o:tÈ	ds$iqbJGnn7\m6d«ÚbB£ì<ËNIÙBë'´ï8NûtíÆRJu¾µæú¶å0¼¹¾ÅËV`&ÎÌpÝê­³hõåÌ
+Åj¸¡nÕ-%+Î¥éÉ¥ÁIdw´xâ!Ê%4hwÉq ÄænË»«kãH¼7!9%ÓlvætÅG¦T(f^Å¦-»Þmcw£µMc/\XðÎü0%wÕüP}Pæ¢x(q³ûh³:Tæ *Äs+¥uRÚ²@Ì0S¬DÊXPQPfáÑI)Þ4ií!y»g»¯Æã>½VhÕ½VUR	ïýqàjSáÚ#C4Á³ì<¿xÄ0¨
+«¾åñÙiV9gSD¬r³økvoÙÃ¨«£ÌâÉ+ÏnCCR,kk ¬1$]âÜÞam¦L´H9v·lö[n÷{
+Z
+¢yd.x¦IkÇ*f¹s{¦¦R}É.´­\åD_½»äâä\2¾äª,%j3ª¯Í×@j[OÕ	*¬«Þ ÑcVÚÎ¼Újf² 8¶%=º
+-zØ°9l(7;v;Þ]ß°Ûí+&©£&'¼w,»n> ðN­ï:Vý6´öøÑmGËÅlýú¯íÉé	§k{syÍ«.NWø¦&ªH=d«N¤Ö¶Î½Ù|¨U/38ª¥_ÌÈrJôªxghêX£ÊmÒy,tHÛàÇ-¤9¹ÝsL[Ê°ãp¼ãúnËífO6j\ômÃr± äLNèk| [á§ùgÛýÎ^_ÝØq¦É¹³§Î8»Ýmb4ïÄ­A²ªôeTÔÌPÑû¨E
+÷¦Ê·S$[ÚÈà!tøÆáR®A0çÑvõx·B[òî¸ÝQí0°;Q¯c.3h=«¾£o¦fkNÉ¥X2ÏZLÑ^üÕóü_å¯./³xyÑue½XX´RÇÁ¼wRTÉÉ¡É(	$±æ<3ÕG,gÁ@Ì îu¹-
+7#mçYºívR3v8¢ÎCÈDÜ Óî|µeÚÜ6;vØnö¤bð®¢ÌX×À¢méºöá;§³]6	ËÞ¼S;;Yç¿øøeüw÷³x»;¤O^<I¦/¾ú&9ÕBS¼WI*D°QÌê%dQ³ReN"äY<1´T\câòr÷ÊÙbcB½áiÐë-ys$¥ÓqÄñÙ§Ì»Ën÷Ç§aQº¶¡qù9 ÷trÏîÌÚVX¤E×ZÎÅÌJ9Y¯âßüô'ÃÛë»áÇçãë÷×ãóÇçÝ\ò½  øIDATñ«·ïÓcòÙ,:et(ÆQ`/* J4qL*óÃrª"¥Ta$ÏÙ<¨ã4òîýaY/ZV>GgM®yÀ!Wön¹¹Û±9³ü6«Ô xZïqÎÍ¤Mf®R+Á,[©¼B=±w7wåv»«¶'n·^,öÃñøêéãa{<ÇËëèfÒØNDzU	 Ê¤"­·UED³T¹@X#K8¢J)¡ ªìal-«nbÕ×øzÊÃTT
+c8ipâ@í!ãj®\÷±Ù25À½to¹¼(÷vÚ/Ì{_®7»TFÂ>§|Û¿9]­vÿÙw?9ìè9æ(ÄáÍ¢ìY3P3ÃDE³´,XæÁ,û*n,bILÈþpäÒ¹b)²ÕD¢ÚI5Ê&õ¶é¬&;§3»Å?×*¼Î ©m]f¬/miËÑl¤ãÍ´ß¤oRIwE¿ûäÃoØNª¶§¥DI"r´bA(9;æ(3ô­Òpí6C5p]ÔÙé*PJbÄ\Ê50­fZJYNji;äañ:§Åk(K¿æêóESª)uçï3&ª%SÎqwå°óÁßîÎO×[î¼Ê|)Î¥pÀ¬o+Å*Ë¹f³{ó±NÏ¹0eþTMâÙ2ÞÏ¬Í	&õÉ!¢¨zÄÕ¡KIXÉÙüô>HòJWdz©Q1ß*aæü¡if	À¬kÛ$DÆÍöÐ7awº\lO«Ý4Åw¡Ò4ÎÙJE¤!á0\Ê¹>ØbH¾ÆóØ·Wñ¡1©ÊC¤/Z=@N]µÆæÐ@yR,uæûß1:÷¤þ8E7Õúô¹UÛËæ7f@rÂ´\ößýÓónoÆ!x?üY(Êéð§¬    IEND®B`
\ ÷ ËÏÎÃÅ ÆÁÊÌÁ ÎÅÔ ÎÏ×ÏÊ ÓÔÒÏËÉ
diff -Naur ../work/WindowMaker-0.91.0/WindowMaker/Icons/Magnify.tiff wm/WindowMaker/Icons/Magnify.tiff
--- ../work/WindowMaker-0.91.0/WindowMaker/Icons/Magnify.tiff	1970-01-01 03:00:00.000000000 +0300
+++ wm/WindowMaker/Icons/Magnify.tiff	2000-03-15 04:25:57.000000000 +0300
@@ -0,0 +1,31 @@
+II* ~    P8$BaP¸d6DbQ8¤V-FcQ¸äv=HdR9$M'JeR¹d¶]/LfS9¤Öm7NgS¹äö}Ã Ah´N
+D a¨FA@ÝòþzÁN·ë¡Öñ~ºîÇûºä|µ\.WÓ}Æè~6 oéýÖZ	Å$Áð0ÂS"L@	Àoë ÿ ?à@(  ²ð, = >à@7Óýæù~¼§»=lÀy*LÇªÑÔí~¸îÛ¸ÈX JÉ(z)`cü ;A ¢([BÐ
+ ª  Ïø9Ï×ãØ óu¹ Wó Q=`Çó»gáè~IBWäEÇÃJ¬·)@hà4 ü	 RxfÉØ{öàØà @ 2`  Å #> ;È±ÇáòÐ*ÉðyÈnG(¨Â.~à 	<æÀ}äù\wEÙz  A40"âî{  }rÁÖºÌZ @ `` 
+G  À è=Ë1<È3ÈÏÇáø~ÌÈzgÐ xx {@ t¦IÊGÈ|Fà& 1ìD§`ìRA¬ÔS@!7¥ã'aåJFX °`Ç< ²PÊ \j1³4  ¯52ò3,¬M Lþ@CDz¡â«Uò[BzÕÇ±ÊeCJj86NvÄñXwöZb8@,/	ÀÎw¹.h©æ
+À©æÑN(ï²àHÊ÷E$E XJSÉyÚTØç³ì{.}HÕ~° `qð}à5¸{LÁÈf Ne	À@Bd*uÅiryPà0¢N éX}GØ`a!ì_¨u×	£¼--¦Í·³Ê$ÛÊ w6<O;ÌóLû<çjLÿÕT{R9ó±vèøÈÇ¼zõp
+ug0ìBÈ|(Æ<biåÕÛÒDY ÑÆà@8l ¨ T:åéÖ`mUE C(Å<à,Ù<7\ÛÉÍ®ýäÊgý3>L¹O 	©ºÃëÀjãí#»#DíÝ4&÷d ÇÙþ
+@d`^ûÜKa0:Ã{Ö#À´P*Ä¨ Äs¤q"58¿à³Ü¢GO¯E0õ< $¯SÀWÌH2àLu=@\`º/óÖÀµ 8~@ØhGì.´x"=ÆÀí`Üe?Æhec&æ?Ì*#Ô'ÁVÃ(
+q§,5¨·3ÈW©Î hù¨?êy"cKróE5ó&Ì¹<`ò `\ ¦=ªÆqì J£ ä}"èGG@x à5À}Q9²ÃÌRÈ"0"à@.p>4Çkâc@¡Ð> Ê(ÅI¥5+#î2¯é÷Ê³/*© ]n Ð)÷LêMuf`ÈP8@ØùËü Aè×Í`X àâ	|ç8F±ÔÄ£Â
+kqÀú	Á\ Q°ÌÀ ¡@ÄeòÈ f@ÍI¨OÐ2æz ÅX¢½9ÏjgAÔIÈ	+gqÎGð©E ?P	sUc¾Ó° ôÐ  £Ì °N.à#4Bmá%Ç`s¤¤XM >ÁÀGsuÆ'FH.£}@?Q¢úuXÅ@9äf¨WÅUì¦'Ì¯©s½!/cÐs¨\´ 	"ðU;.Èyà=xæ ðn ,8¬Ga6;«s"ø' ±²ÂÀH(á 1 ð¿Ø±ä?l t2¥9X±ÉçÅgUiæªSõ!I5*²?2ñåH ÐøHà}Ö@¦	@6`dtPs@aüM
+ÁåI.
+@Ä	Æ@pnàÎ u Ñc(k¨?@ï F6XP´edÙ£2æ0óôçåâ\¤º#é^fäá§Æ«V@øØà0Þ@PAö=Ío¨01=[Î"@tv%i@Ä@iE ðD@ æ x 
+!Pà(ÔºT09t:$¯ôò?×±¨qCó6¿4ä3		ÔæÒz¡¾Èî  xúÃð3Ñ¾¨iRàG7cl}¬ÄEXÀ
+@pÎ 0(¡¤ òi@Qè¢ø³G9¢:f~sÓc½.Ê@%©ÐÐ:½K @@ õTÀ Öp\@Êyt9º!¾>Iër2
+ ¸¡Ü$ÁRih`i¢üà<Àr1ø XÃèË¢¥+&¡e]®f1²¡²Æ­Ø£¡ EUø6àK£à@:Ð22!îª¯X] %=·#PðØ`X
+ g:aShR 	gÀ£æo\:K¡àèóÑð¥Gõ<èð*TcZ¡æJ¤p&Îp¼|¾=BÐ3 ÓÜü´å à0¦Ð%Øî  m±Ø8`!Xlò3 ëDd°n áÃ7C7`< _&¢¸çPº	Ð=ÂbäJÇ ü2  ôÚ®Õt½vØøÀh
+Ç 5 h|°"
+ÌP9À(ÒF;îà¯¤t@kÆ¤aÀ!îáæAáðAæwe^÷b$  
+
+ f á
+À` Ò  C3äXO í 
+i%è¨¦ùãRh / ¬à Áö*$±ü4CàHå*¥F<áú¡J+®Å	æG db¡¶ªÌd Ô
+ðá¶ÆáXêúßa¿*`P ÀÔ x!Là~CÌ3Ð`©à@ùCÂC:< èR¥ôãÄj ¨¬cDÇvdòáÞ9ÁèÓà @"R¡üUEfp²ç(Ë
+ AÂò¢îáxAðÁÒáüð"*À¾@ x	º GäS.^È2±. Zìd1( ( ÒhSCSK"ì.Î.ÌÂè XF¡ôÈÊzÉaô£ÎíC.à2à2DZ£PÎ!ØUAÒdF|¡ðÁÈ¡üõgu"&À" @dÂ``À)Öu+ÃGãàðjh«Ô¼IÞj#@4£$¡ÆÁÀ¡Ê &Á¶àþF|ä8 !*È¡Ì@s B;¤l£ÀqÛaö9ÁäBè&! !!Ô!O ¬$$Y bÀ
+à\` FÀà: `0À.0àfO.\¡¡Ú¬Ò£p¡¸!ø!¡ö¡¡ò"¤ O$2@ 0 aB
+ t |á¾Á1äà¡C@4F (c(v"èFãÀNåU,Å<Fj® Áþ!ÀúáZ¡ä¡°áöp    P8$BaP¸d6 @ Ð0 ?¢b " 	À`$DT@   D À [õþ ±p,Yìù~ OËù¸ä{½n×Ò|å|_w¬>­W¬VkUºåv
+Â³#ä4BäÓþ#/-@X â@,úö~OÀÖ÷À½o×ëèh§Ú.òû¡ìþl@è5ìæw=ÐCÀÁpH1
+ à0D áà0~¾æáì_  e°ÜÁSS¹öë\7^hõûì}FZçw½ß«¢ÂpX
+u eD­[ 7ôÜ1µÖKÀ©d.ð'ö GÁø|9òYlÞy'ùÔÁÃë8  H8 C8X	²ÀçËt-IJ» Ü ¡  Àp nX {·@ÐvÀë"ö_f©â?§ökÊ	ÞÃô½/Ì@6#(Ö`8a  Á,HÃl jî½HÁô §Iî Ú5  ~opÅ)Ú{ÆóëÌ4í=/è°£1C@b 0 ³P @P $  2	&@40v2Ð @JXìáeÁ´yfùâ~¶C·OÛËB¢ÁL   ´À  `ýÌ@à DÇàëD4'^IGò º
+±®uæ±nldÉ¤vEemcÊ¬¢@¨*Òõà! )`Lþ|¦À % @4  øN®ùãvD( °sçq¢ÆaÐ|qðÄ5jª¢@°DcXV C¹éA/È V  Ú¥)aß xF B$v)$­BK'¡t%9r#¾XËz·Åêá ` ÀHeé`:¼ ¸"À"B÷& Zv´Öz0',²~¡øfð'	ÓÆwêu°Þ9c[9@ èå¯)
+°QÀ pÉÌ7^lçÙ<h'Øì©}ó÷Ñ 1"¨P	 8-26 ÎÀ?¨ät¹í@óC`g¡ö$FàîE¤ÑÝê pà*3~fÛO@|·ñø ×ÈÿãyÑV¢ÇO¤ Wô XÁ`¸ðÄþ EÄÜËáî:ÚxRãüe.ÆèïiE ãâÄ OP&ð û 8ú5ò GXò`.(É #½§$1bÌyèÀ2ºâú¹Ø""<p÷â|¡@×zPÉt@ãÈ
+C4Er ä¡DJ¥Ò@@ þ              <       5       h                    p      ~                          "             ¤      ¬         (       =       R               Magnify.tiff  Created with The GIMP    ö  î       H      H   
\ ÷ ËÏÎÃÅ ÆÁÊÌÁ ÎÅÔ ÎÏ×ÏÊ ÓÔÒÏËÉ
diff -Naur ../work/WindowMaker-0.91.0/WindowMaker/Icons/Magnify.xpm wm/WindowMaker/Icons/Magnify.xpm
--- ../work/WindowMaker-0.91.0/WindowMaker/Icons/Magnify.xpm	1970-01-01 03:00:00.000000000 +0300
+++ wm/WindowMaker/Icons/Magnify.xpm	2000-03-15 04:25:57.000000000 +0300
@@ -0,0 +1,911 @@
+/* XPM */
+static char * Magnify_xpm[] = {
+"60 53 855 2",
+"  	c None",
+". 	c #C3A11E",
+"+ 	c #C9A71F",
+"@ 	c #D7B120",
+"# 	c #D7B21F",
+"$ 	c #D4AC1F",
+"% 	c #D0AB1F",
+"& 	c #BC951B",
+"* 	c #C6A01E",
+"= 	c #CFAA22",
+"- 	c #D6AF25",
+"; 	c #D4AD25",
+"> 	c #D3AC24",
+", 	c #D1AB28",
+"' 	c #D4AE2B",
+") 	c #D5B02E",
+"! 	c #D5B032",
+"~ 	c #D6B133",
+"{ 	c #D7B12E",
+"] 	c #D7B428",
+"^ 	c #D6B727",
+"/ 	c #D2B425",
+"( 	c #C09A1E",
+"_ 	c #CCA621",
+": 	c #D0A921",
+"< 	c #CEA823",
+"[ 	c #BCAA33",
+"} 	c #85AC7F",
+"| 	c #7EB098",
+"1 	c #87B69E",
+"2 	c #8FB7A2",
+"3 	c #94BBA4",
+"4 	c #98BDA6",
+"5 	c #9EBDA4",
+"6 	c #9AB798",
+"7 	c #95AA80",
+"8 	c #9AA55E",
+"9 	c #C3A83A",
+"0 	c #CFA628",
+"a 	c #D4AD23",
+"b 	c #DCBB27",
+"c 	c #C9A520",
+"d 	c #D0A41F",
+"e 	c #CE9F21",
+"f 	c #8CAA50",
+"g 	c #7DAA8E",
+"h 	c #77AD96",
+"i 	c #5DB5B4",
+"j 	c #6BBBC0",
+"k 	c #8BCACE",
+"l 	c #9FD3D7",
+"m 	c #A4D5D8",
+"n 	c #AAD7D8",
+"o 	c #ACD7D6",
+"p 	c #ABD2CD",
+"q 	c #A4C9BF",
+"r 	c #9AB9A6",
+"s 	c #89A170",
+"t 	c #B2A03B",
+"u 	c #C99C22",
+"v 	c #D5AE24",
+"w 	c #DEBE28",
+"x 	c #C79C1D",
+"y 	c #D4B023",
+"z 	c #CBA624",
+"A 	c #9CAA47",
+"B 	c #78AA93",
+"C 	c #5DADA7",
+"D 	c #4FADB0",
+"E 	c #5FB7BA",
+"F 	c #80C5C9",
+"G 	c #99CED2",
+"H 	c #ABD8DA",
+"I 	c #B4DBDC",
+"J 	c #B7DCDE",
+"K 	c #B7DEDF",
+"L 	c #BDE0E0",
+"M 	c #C0E1E1",
+"N 	c #C1E0E0",
+"O 	c #BBDEDF",
+"P 	c #ADD7D7",
+"Q 	c #9AC8C2",
+"R 	c #8FB4A3",
+"S 	c #829C6C",
+"T 	c #9CA048",
+"U 	c #CE9F1F",
+"V 	c #DBBB26",
+"W 	c #C49B1D",
+"X 	c #D3AC22",
+"Y 	c #BF9E28",
+"Z 	c #78A16D",
+"` 	c #65A89C",
+" .	c #4CAAAD",
+"..	c #4AAAB2",
+"+.	c #5BB2B7",
+"@.	c #68B7BD",
+"#.	c #86C5C9",
+"$.	c #9AD1D2",
+"%.	c #A3D3D6",
+"&.	c #ADD8DA",
+"*.	c #B2DADC",
+"=.	c #B6DCDC",
+"-.	c #B7DCDC",
+";.	c #B7DBDB",
+">.	c #B6D8D7",
+",.	c #ADD5D1",
+"'.	c #9FD0CE",
+").	c #8CC4C5",
+"!.	c #81BAB5",
+"~.	c #7BAC9F",
+"{.	c #7B9B66",
+"].	c #C8921D",
+"^.	c #D9B526",
+"/.	c #C0991C",
+"(.	c #BD9C28",
+"_.	c #779A66",
+":.	c #5AA39F",
+"<.	c #49A2AA",
+"[.	c #4CA4AF",
+"}.	c #52ABB2",
+"|.	c #5DB2B7",
+"1.	c #70BBBD",
+"2.	c #82C3C5",
+"3.	c #90CACD",
+"4.	c #9ACED1",
+"5.	c #9FD1D5",
+"6.	c #A7D5D8",
+"7.	c #ACD7D8",
+"8.	c #AFD8DA",
+"9.	c #ADD7D8",
+"0.	c #ADD7D6",
+"a.	c #ABD3D2",
+"b.	c #A3CEC9",
+"c.	c #98C7C4",
+"d.	c #8AC2C3",
+"e.	c #80BBBF",
+"f.	c #77B6BA",
+"g.	c #69AAA8",
+"h.	c #799874",
+"i.	c #C8911B",
+"j.	c #DBBB25",
+"k.	c #D4B123",
+"l.	c #CD9A1E",
+"m.	c #939B44",
+"n.	c #609990",
+"o.	c #4596A2",
+"p.	c #4A9EAA",
+"q.	c #4FA3AD",
+"r.	c #58ABB1",
+"s.	c #62AFB4",
+"t.	c #6EB7B9",
+"u.	c #7DBFC2",
+"v.	c #87C7C9",
+"w.	c #91C9CE",
+"x.	c #98CED1",
+"y.	c #9FD0D3",
+"z.	c #A3D2D6",
+"A.	c #A6D3D7",
+"B.	c #A7D5D6",
+"C.	c #A6D3D5",
+"D.	c #A3D2D1",
+"E.	c #9ECAC9",
+"F.	c #91C3C0",
+"G.	c #89BEBB",
+"H.	c #80B9BB",
+"I.	c #7BB7BA",
+"J.	c #6EACB6",
+"K.	c #60A1A1",
+"L.	c #76996B",
+"M.	c #C79B24",
+"N.	c #DEBF29",
+"O.	c #C79E1D",
+"P.	c #AC9D37",
+"Q.	c #719580",
+"R.	c #4F969A",
+"S.	c #4896A4",
+"T.	c #53A1AA",
+"U.	c #57A4AC",
+"V.	c #5DAAAF",
+"W.	c #64B0B2",
+"X.	c #6BB5B7",
+"Y.	c #75BABF",
+"Z.	c #80C0C5",
+"`.	c #89C3CA",
+" +	c #90C8CD",
+".+	c #94C9CE",
+"++	c #99CCD2",
+"@+	c #9CD0D3",
+"#+	c #9ECED3",
+"$+	c #9DCED2",
+"%+	c #9CCDCE",
+"&+	c #96CACA",
+"*+	c #8FC4C2",
+"=+	c #87BDBB",
+"-+	c #7EB7B7",
+";+	c #79B5B6",
+">+	c #73AFB6",
+",+	c #62A2AD",
+"'+	c #669C96",
+")+	c #A39D40",
+"!+	c #D6B223",
+"~+	c #D6B624",
+"{+	c #D8B425",
+"]+	c #C99B1E",
+"^+	c #78945C",
+"/+	c #529195",
+"(+	c #45919F",
+"_+	c #4C96A4",
+":+	c #559FA8",
+"<+	c #57A3AA",
+"[+	c #5DA6AC",
+"}+	c #62ACB1",
+"|+	c #6AB1B7",
+"1+	c #72B7BD",
+"2+	c #78BBC3",
+"3+	c #7EBDC5",
+"4+	c #83C3C9",
+"5+	c #8BC5CC",
+"6+	c #8EC5CD",
+"7+	c #93C8CE",
+"8+	c #91C8CD",
+"9+	c #91C9CA",
+"0+	c #90C7C9",
+"a+	c #86BDBD",
+"b+	c #7CB5B7",
+"c+	c #77B1B2",
+"d+	c #70ADB1",
+"e+	c #70ACAF",
+"f+	c #5899A1",
+"g+	c #799C79",
+"h+	c #D2A721",
+"i+	c #D4B628",
+"j+	c #AE7511",
+"k+	c #BD9726",
+"l+	c #74957F",
+"m+	c #458C9C",
+"n+	c #4591A4",
+"o+	c #4C95A3",
+"p+	c #4F9AA4",
+"q+	c #529CA7",
+"r+	c #58A2AB",
+"s+	c #5DAAB1",
+"t+	c #62ACB5",
+"u+	c #6AB4BB",
+"v+	c #6EB6BF",
+"w+	c #75B7C2",
+"x+	c #79BDC5",
+"y+	c #7EBDC7",
+"z+	c #83C0C8",
+"A+	c #85C0C8",
+"B+	c #86C3C9",
+"C+	c #87C0C8",
+"D+	c #87C2C5",
+"E+	c #86C0C3",
+"F+	c #83BDBE",
+"G+	c #77B2B6",
+"H+	c #72ADB2",
+"I+	c #69A6AC",
+"J+	c #66A6AD",
+"K+	c #5699A4",
+"L+	c #6A9A91",
+"M+	c #C49C23",
+"N+	c #DEBE27",
+"O+	c #9A680F",
+"P+	c #D8B825",
+"Q+	c #ABA53A",
+"R+	c #629489",
+"S+	c #448A9A",
+"T+	c #4791A4",
+"U+	c #4A95A3",
+"V+	c #4E96A3",
+"W+	c #4F99A4",
+"X+	c #55A3AA",
+"Y+	c #58AAB0",
+"Z+	c #5DAAB4",
+"`+	c #62ADB7",
+" @	c #66B2BB",
+".@	c #6AB2BD",
+"+@	c #6FB7BF",
+"@@	c #72B7C0",
+"#@	c #75B9C3",
+"$@	c #79BBC4",
+"%@	c #7BBBC4",
+"&@	c #7CBDC3",
+"*@	c #7DBBC2",
+"=@	c #7EBDC0",
+"-@	c #7EBBBF",
+";@	c #7EBBBB",
+">@	c #75B2B5",
+",@	c #73B1B2",
+"'@	c #64A2AA",
+")@	c #65A4AA",
+"!@	c #5696A4",
+"~@	c #5F9698",
+"{@	c #BC9B29",
+"]@	c #E3C228",
+"^@	c #896010",
+"/@	c #D5B626",
+"(@	c #ADA93A",
+"_@	c #629187",
+":@	c #45899A",
+"<@	c #4591A3",
+"[@	c #4990A2",
+"}@	c #4C94A1",
+"|@	c #4F96A3",
+"1@	c #55A2AA",
+"2@	c #57A4AD",
+"3@	c #58A6B1",
+"4@	c #5BA8B4",
+"5@	c #5DAAB6",
+"6@	c #62ADB9",
+"7@	c #66B0BB",
+"8@	c #69AFBB",
+"9@	c #6BB1BE",
+"0@	c #70B5BF",
+"a@	c #70B6BE",
+"b@	c #74B7BD",
+"c@	c #75B9BD",
+"d@	c #78B7BB",
+"e@	c #79B9BA",
+"f@	c #75B2B2",
+"g@	c #629DAA",
+"h@	c #66A1A8",
+"i@	c #5591A4",
+"j@	c #669894",
+"k@	c #BC9F2D",
+"l@	c #E3BD24",
+"m@	c #9D6A10",
+"n@	c #D3B024",
+"o@	c #B9A732",
+"p@	c #749782",
+"q@	c #498793",
+"r@	c #458E9F",
+"s@	c #4C91A1",
+"t@	c #4F95A2",
+"u@	c #529FA7",
+"v@	c #55A3AD",
+"w@	c #56A4B1",
+"x@	c #58A4B2",
+"y@	c #5AA7B5",
+"z@	c #5CABB7",
+"A@	c #5FADB7",
+"B@	c #64ACB9",
+"C@	c #66ADB9",
+"D@	c #68B0B9",
+"E@	c #6BB2B9",
+"F@	c #6FB4B7",
+"G@	c #72B5B7",
+"H@	c #73B2B6",
+"I@	c #75B5B2",
+"J@	c #74B0B1",
+"K@	c #66A4AA",
+"L@	c #6AA3A7",
+"M@	c #58919A",
+"N@	c #78966A",
+"O@	c #CCA325",
+"P@	c #E2C127",
+"Q@	c #DCB620",
+"R@	c #945B0C",
+"S@	c #C1911C",
+"T@	c #D3B528",
+"U@	c #84A25D",
+"V@	c #558C91",
+"W@	c #438AA2",
+"X@	c #4891A3",
+"Y@	c #4A90A1",
+"Z@	c #4A939F",
+"`@	c #4F98A3",
+" #	c #529CA6",
+".#	c #53A1AC",
+"+#	c #55A1AF",
+"@#	c #55A3B1",
+"##	c #56A4B2",
+"$#	c #57A8B4",
+"%#	c #58A6B4",
+"&#	c #5CA8B2",
+"*#	c #5DA8B4",
+"=#	c #61ABB4",
+"-#	c #66ABB2",
+";#	c #6AAFB4",
+">#	c #6BB0B2",
+",#	c #6DB1B2",
+"'#	c #70B1AD",
+")#	c #6FADAD",
+"!#	c #6EAAAB",
+"~#	c #669FA2",
+"{#	c #6B9991",
+"]#	c #A89D3B",
+"^#	c #DBB624",
+"/#	c #DEBD23",
+"(#	c #90560A",
+"_#	c #B57A14",
+":#	c #C4AE33",
+"<#	c #7EA18B",
+"[#	c #498C9F",
+"}#	c #458EA4",
+"|#	c #49919F",
+"1#	c #4A919F",
+"2#	c #4F99A1",
+"3#	c #539DA6",
+"4#	c #519EAC",
+"5#	c #4F9FAD",
+"6#	c #4FA1AF",
+"7#	c #4FA2B1",
+"8#	c #52A2B1",
+"9#	c #55A2B0",
+"0#	c #57A3AD",
+"a#	c #5CA4AF",
+"b#	c #5DA8AF",
+"c#	c #62AAAF",
+"d#	c #62AAAD",
+"e#	c #66ACAD",
+"f#	c #6AADAC",
+"g#	c #6AABAA",
+"h#	c #6AA4A4",
+"i#	c #6D9A95",
+"j#	c #849651",
+"k#	c #CFA422",
+"l#	c #E3C126",
+"m#	c #DEB821",
+"n#	c #B27011",
+"o#	c #C48A19",
+"p#	c #B9B540",
+"q#	c #739F93",
+"r#	c #4A8C9F",
+"s#	c #488CA3",
+"t#	c #4C919D",
+"u#	c #4E949E",
+"v#	c #519AA3",
+"w#	c #4F98A4",
+"x#	c #4E9CA7",
+"y#	c #4C9AAB",
+"z#	c #4D9EAC",
+"A#	c #4C9CAD",
+"B#	c #4E9FAD",
+"C#	c #529FAB",
+"D#	c #559FAB",
+"E#	c #56A2AB",
+"F#	c #58A3AA",
+"G#	c #5DA6AA",
+"H#	c #61AAAA",
+"I#	c #64A7A4",
+"J#	c #62A3A1",
+"K#	c #6A9A95",
+"L#	c #809658",
+"M#	c #CAA123",
+"N#	c #DFBE26",
+"O#	c #E5BE24",
+"P#	c #E2BC23",
+"Q#	c #A5630D",
+"R#	c #B97411",
+"S#	c #C7901A",
+"T#	c #AEB547",
+"U#	c #80AA93",
+"V#	c #5D9A9D",
+"W#	c #4D909E",
+"X#	c #4E8F9D",
+"Y#	c #56989F",
+"Z#	c #5A9FA4",
+"`#	c #5CA4A7",
+" $	c #4A96AA",
+".$	c #4A9AAB",
+"+$	c #4A9DAC",
+"@$	c #4C9AAA",
+"#$	c #4E9AAA",
+"$$	c #4F9AA7",
+"%$	c #559EA4",
+"&$	c #5BA2A2",
+"*$	c #6A9D93",
+"=$	c #759C8B",
+"-$	c #889A52",
+";$	c #DDBC26",
+">$	c #E5B922",
+",$	c #E1BB22",
+"'$	c #AA660F",
+")$	c #BC7613",
+"!$	c #D2AF23",
+"~$	c #C5BD3A",
+"{$	c #8BB16C",
+"]$	c #86AD95",
+"^$	c #6FA699",
+"/$	c #5C9FA1",
+"($	c #5B9FA4",
+"_$	c #62AAA7",
+":$	c #58A1A4",
+"<$	c #4A98A6",
+"[$	c #499AA8",
+"}$	c #4999AA",
+"|$	c #4A9AAA",
+"1$	c #4A96A7",
+"2$	c #4A96A4",
+"3$	c #4A95A2",
+"4$	c #569A9F",
+"5$	c #609D9A",
+"6$	c #759D87",
+"7$	c #809B59",
+"8$	c #AEA53D",
+"9$	c #D2B027",
+"0$	c #DEBE2B",
+"a$	c #E4B821",
+"b$	c #E3B822",
+"c$	c #B0680D",
+"d$	c #BE7813",
+"e$	c #CC9D1F",
+"f$	c #D0AF29",
+"g$	c #CEBE35",
+"h$	c #A3BA4E",
+"i$	c #8CB191",
+"j$	c #8AB198",
+"k$	c #75AA9A",
+"l$	c #5D9FA2",
+"m$	c #4991A4",
+"n$	c #4494AB",
+"o$	c #4195AD",
+"p$	c #4193AD",
+"q$	c #4193AB",
+"r$	c #4D919C",
+"s$	c #659F9A",
+"t$	c #7EA088",
+"u$	c #7C9F62",
+"v$	c #B4A637",
+"w$	c #D0B32D",
+"x$	c #D5B72A",
+"y$	c #DBBC2A",
+"z$	c #E2C851",
+"A$	c #EAD16D",
+"B$	c #E3BF32",
+"C$	c #D9B022",
+"D$	c #9B5E0D",
+"E$	c #B26B0F",
+"F$	c #BB7112",
+"G$	c #BD7714",
+"H$	c #C68B19",
+"I$	c #CD9E1E",
+"J$	c #D3B126",
+"K$	c #CABE37",
+"L$	c #B5BD45",
+"M$	c #89AF72",
+"N$	c #89AD91",
+"O$	c #79A896",
+"P$	c #83AA91",
+"Q$	c #86AA8E",
+"R$	c #86A78C",
+"S$	c #82A684",
+"T$	c #83A674",
+"U$	c #9EAF4C",
+"V$	c #BFB73C",
+"W$	c #D0BB31",
+"X$	c #D5BC30",
+"Y$	c #DFBF2A",
+"Z$	c #D7BC28",
+"`$	c #DABF51",
+" %	c #EAD995",
+".%	c #DFBC42",
+"+%	c #CC9E23",
+"@%	c #B88520",
+"#%	c #9A5716",
+"$%	c #9F5F0C",
+"%%	c #B4680F",
+"&%	c #BA7011",
+"*%	c #C9921C",
+"=%	c #D4B227",
+"-%	c #D6C02F",
+";%	c #D2C135",
+">%	c #CBC63E",
+",%	c #D1C136",
+"'%	c #D4BF33",
+")%	c #D5C032",
+"!%	c #D8BE2D",
+"~%	c #D7BD30",
+"{%	c #DABF29",
+"]%	c #E0BF25",
+"^%	c #DCBC27",
+"/%	c #D9B522",
+"(%	c #CFAD22",
+"_%	c #CCAA23",
+":%	c #CFAF2E",
+"<%	c #D0AA45",
+"[%	c #C5852A",
+"}%	c #B96B1E",
+"|%	c #AC5F1B",
+"1%	c #994814",
+"2%	c #9B4B16",
+"3%	c #924313",
+"4%	c #B0660F",
+"5%	c #B66D0F",
+"6%	c #BE7311",
+"7%	c #C27B15",
+"8%	c #CB8F1A",
+"9%	c #D1A11E",
+"0%	c #D29D1F",
+"a%	c #D5A420",
+"b%	c #D7AA20",
+"c%	c #DAAC21",
+"d%	c #DBB222",
+"e%	c #DDB322",
+"f%	c #DDB824",
+"g%	c #DEB31F",
+"h%	c #E0B41D",
+"i%	c #D9AF1E",
+"j%	c #C89E1D",
+"k%	c #BC951D",
+"l%	c #C6A623",
+"m%	c #C4A023",
+"n%	c #AC7B1B",
+"o%	c #A45419",
+"p%	c #AC5019",
+"q%	c #AE5119",
+"r%	c #AD551A",
+"s%	c #A9531A",
+"t%	c #954414",
+"u%	c #82370E",
+"v%	c #A9660D",
+"w%	c #BF7412",
+"x%	c #C37B14",
+"y%	c #C88315",
+"z%	c #CB8916",
+"A%	c #CF9016",
+"B%	c #D39716",
+"C%	c #D69A19",
+"D%	c #D8A019",
+"E%	c #D9A51A",
+"F%	c #DAA71B",
+"G%	c #DCA81B",
+"H%	c #DBA71C",
+"I%	c #DBAC1C",
+"J%	c #CFA21A",
+"K%	c #B98A18",
+"L%	c #9F7016",
+"M%	c #BF9C20",
+"N%	c #B9921C",
+"O%	c #894F10",
+"P%	c #833C12",
+"Q%	c #964215",
+"R%	c #A54D18",
+"S%	c #BE5F1F",
+"T%	c #B3581C",
+"U%	c #994416",
+"V%	c #853910",
+"W%	c #722E0C",
+"X%	c #AD6611",
+"Y%	c #C27A13",
+"Z%	c #C78214",
+"`%	c #CA8815",
+" &	c #D19218",
+".&	c #D39818",
+"+&	c #D59E18",
+"@&	c #D79F18",
+"#&	c #D7A01A",
+"$&	c #D19F18",
+"%&	c #C79519",
+"&&	c #936C14",
+"*&	c #63430A",
+"=&	c #967313",
+"-&	c #AD861C",
+";&	c #7C470F",
+">&	c #692D0C",
+",&	c #76330F",
+"'&	c #974616",
+")&	c #B0531B",
+"!&	c #9B3C12",
+"~&	c #9D4012",
+"{&	c #903B11",
+"]&	c #82350F",
+"^&	c #792F0C",
+"/&	c #B46A10",
+"(&	c #B66E10",
+"_&	c #BB7412",
+":&	c #C27D10",
+"<&	c #C78112",
+"[&	c #CA8713",
+"}&	c #CD8E14",
+"|&	c #CC8E16",
+"1&	c #CE8F16",
+"2&	c #D29616",
+"3&	c #452E05",
+"4&	c #865D0D",
+"5&	c #774D0E",
+"6&	c #643209",
+"7&	c #562507",
+"8&	c #4F2006",
+"9&	c #813A10",
+"0&	c #954514",
+"a&	c #913F12",
+"b&	c #AA4B17",
+"c&	c #A14111",
+"d&	c #9B3F12",
+"e&	c #9E4A17",
+"f&	c #A45517",
+"g&	c #9D4C18",
+"h&	c #4B1C04",
+"i&	c #401803",
+"j&	c #461C05",
+"k&	c #70330B",
+"l&	c #70300D",
+"m&	c #813B10",
+"n&	c #883B11",
+"o&	c #933810",
+"p&	c #BA5C1D",
+"q&	c #BF6122",
+"r&	c #B55A1E",
+"s&	c #984B17",
+"t&	c #79310E",
+"u&	c #7A300D",
+"v&	c #542303",
+"w&	c #602807",
+"x&	c #5A2709",
+"y&	c #652A0A",
+"z&	c #7D3910",
+"A&	c #A04F19",
+"B&	c #AF561A",
+"C&	c #B75B1E",
+"D&	c #B4511B",
+"E&	c #9E4113",
+"F&	c #893810",
+"G&	c #80330D",
+"H&	c #964617",
+"I&	c #552305",
+"J&	c #582507",
+"K&	c #6A2F0B",
+"L&	c #7A3A0F",
+"M&	c #894212",
+"N&	c #863D11",
+"O&	c #A54014",
+"P&	c #A04113",
+"Q&	c #A24C19",
+"R&	c #A5561C",
+"S&	c #9B4A19",
+"T&	c #602B08",
+"U&	c #612908",
+"V&	c #5B2708",
+"W&	c #672D0A",
+"X&	c #672C0C",
+"Y&	c #6A2A0B",
+"Z&	c #A64515",
+"`&	c #BF5C20",
+" *	c #BD6422",
+".*	c #AE571D",
+"+*	c #A45119",
+"@*	c #A2511B",
+"#*	c #502206",
+"$*	c #4C2005",
+"%*	c #451B04",
+"&*	c #542107",
+"**	c #793710",
+"=*	c #742F0C",
+"-*	c #CA6B25",
+";*	c #C16624",
+">*	c #9E4E19",
+",*	c #A4551A",
+"'*	c #381403",
+")*	c #371502",
+"!*	c #5A2509",
+"~*	c #7C3B0F",
+"{*	c #864011",
+"]*	c #954814",
+"^*	c #AA551D",
+"/*	c #B96120",
+"(*	c #C66525",
+"_*	c #BA5D1F",
+":*	c #9F4616",
+"<*	c #934114",
+"[*	c #A5551B",
+"}*	c #A05217",
+"|*	c #391602",
+"1*	c #5F2908",
+"2*	c #6B310A",
+"3*	c #5C2808",
+"4*	c #692F0C",
+"5*	c #954916",
+"6*	c #9D4D18",
+"7*	c #B65F1F",
+"8*	c #BC5E1F",
+"9*	c #A84615",
+"0*	c #A64917",
+"a*	c #A85219",
+"b*	c #A2501A",
+"c*	c #572306",
+"d*	c #421905",
+"e*	c #4D1F04",
+"f*	c #5E2807",
+"g*	c #7D3C10",
+"h*	c #7D3710",
+"i*	c #9F4E18",
+"j*	c #B0581D",
+"k*	c #A44917",
+"l*	c #AC4B17",
+"m*	c #984213",
+"n*	c #AC561D",
+"o*	c #9C4C17",
+"p*	c #431904",
+"q*	c #552406",
+"r*	c #602A09",
+"s*	c #72330D",
+"t*	c #9A4D19",
+"u*	c #9C4917",
+"v*	c #A64E19",
+"w*	c #A14214",
+"x*	c #A44715",
+"y*	c #B65B1F",
+"z*	c #AA541B",
+"A*	c #8B3E13",
+"B*	c #823A10",
+"C*	c #492205",
+"D*	c #522205",
+"E*	c #542207",
+"F*	c #843C11",
+"G*	c #924715",
+"H*	c #984717",
+"I*	c #873710",
+"J*	c #B65A1D",
+"K*	c #BF621E",
+"L*	c #AB4F18",
+"M*	c #903F13",
+"N*	c #7A370F",
+"O*	c #6E310D",
+"P*	c #3F1903",
+"Q*	c #351401",
+"R*	c #441A05",
+"S*	c #562307",
+"T*	c #73320E",
+"U*	c #8A4313",
+"V*	c #984513",
+"W*	c #833910",
+"X*	c #662C0A",
+"Y*	c #381603",
+"Z*	c #7C380F",
+"`*	c #884111",
+" =	c #974814",
+".=	c #9C4B15",
+"+=	c #904213",
+"@=	c #71330E",
+"#=	c #5D290A",
+"$=	c #562708",
+"%=	c #582506",
+"&=	c #5A2806",
+"*=	c #6E300B",
+"==	c #79360E",
+"-=	c #74350F",
+";=	c #672F0A",
+">=	c #471F06",
+",=	c #4E2105",
+"'=	c #522107",
+")=	c #502107",
+"!=	c #5F2B08",
+"~=	c #451C04",
+"{=	c #481E05",
+"]=	c #411904",
+"^=	c #391702",
+"/=	c #3C1A01",
+"(=	c #481E02",
+"_=	c #431900",
+":=	c #381401",
+"<=	c #250D00",
+"[=	c #2C1201",
+"                                                                                                                        ",
+"                                                                                                                        ",
+"                                                                                                                        ",
+"                                                                                                                        ",
+"                                                                                                                        ",
+"                                                                                                                        ",
+"                                                                                                                        ",
+"                                                                                                                        ",
+"                                . + @ # # $ %                                                                           ",
+"                        & * = - ; > , ' ) ! ~ { ] ^ /                                                                   ",
+"                    ( _ : < [ } | 1 2 3 4 5 6 7 8 9 0 a b                                                               ",
+"                  c d e f g h i j k l m m n o p q r s t u v w                                                           ",
+"              x y z A B C D E F G H I J K L M N O P Q R S T U V                                                         ",
+"            W X Y Z `  ...+.@.#.$.%.n &.*.=.-.;.>.,.'.).!.~.{.].^.                                                      ",
+"          /.: (._.:.<.[.}.|.1.2.3.4.5.6.7.8.9.0.a.b.c.d.e.f.g.h.i.j.                                                    ",
+"          k.l.m.n.o.p.q.r.s.t.u.v.w.x.y.z.A.B.C.D.E.F.G.H.I.J.K.L.M.N.                                                  ",
+"        O.X P.Q.R.S.T.U.V.W.X.Y.Z.`. +.+++@+#+$+%+&+*+=+-+;+>+,+'+)+!+~+                                                ",
+"        {+]+^+/+(+_+:+<+[+}+|+1+2+3+4+5+6+w.7+8+9+0+).a+b+c+d+e+f+g+h+i+                                                ",
+"      j+{+k+l+m+n+o+p+q+r+s+t+u+v+w+x+y+z+A+B+C+D+D+E+F+G+H+I+J+K+L+M+N+                                                ",
+"      O+P+Q+R+S+T+U+V+W+X+Y+Z+`+ @.@+@@@#@$@%@&@*@=@-@;@>@,@'@)@!@~@{@]@                                                ",
+"      ^@/@(@_@:@<@[@}@|@1@2@3@4@5@6@7@8@9@v+0@a@b@c@d@e@>@f@g@h@i@j@k@]@l@                                              ",
+"      m@n@o@p@q@r@[@s@t@u@v@v@w@x@y@z@A@6@B@C@D@E@F@G@H@I@J@K@L@M@N@O@P@Q@                                              ",
+"      R@S@T@U@V@W@X@Y@Z@`@ #T..#+#@###$#%#&#*#=#-#;#>#,#'#)#!#~#{#]#^#/#                                                ",
+"      (#_#a :#<#[#}#[@|#1#2#3#T.4#5#6#7#8#9#0#a#b#c#d#e#f#g#h#i#j#k#l#m#                                                ",
+"        n#o#X p#q#r#s#|#t#u#v#w#x#y#z#A#B#5#C#D#E#F#G#H#I#J#K#L#M#N#O#P#                                                ",
+"        Q#R#S#X T#U#V#W#X#Y#Z#`#W+ $.$.$+$@$#$$$q+3#%$&$*$=$-$O@;$O#>$,$                                                ",
+"          '$)$S#!$~${$]$^$/$($_$:$<$[$}$|$1$<$2$3$4$5$6$7$8$9$0$P@a$b$                                                  ",
+"            c$d$o#e$f$g$h$i$j$k$l$m$n$o$p$q$n+r$s$t$u$v$w$x$y$z$A$B$C$                                                  ",
+"            D$E$F$G$H$I$J$K$g$L$M$N$O$P$Q$R$S$T$U$V$W$X$Y$Z$> `$ %.%+%@%#%                                              ",
+"              $%%%&%F$d$o#*%U =%-%;%>%,%'%'%)%!%~%{%]%^%/%(%_%:%<%[%}%|%1%2%3%                                          ",
+"                  4%5%&%F$6%7%8%9%0%a%b%c%d%e%e%f%g%h%i%j%k%l%m%n%o%p%q%r%s%t%u%                                        ",
+"                    v%E$&%&%w%x%y%z%A%B%C%D%E%F%G%H%I%J%K%L%M%N%O%P%Q%R%S%T%U%V%W%                                      ",
+"                        X%%%&%6%Y%Z%`%A% &.&+&@&D%#&$&%&&&*&=&-&;&>&,&'&)&!&~&{&]&^&                                    ",
+"                              /&(&_&:&<&[&}&|&1&2&        3&4&5&6&7&8&9&0&a&b&c&d&e&f&g&                                ",
+"                                                                h&i&j&k&l&m&n&o&p&q&r&s&t&u&                            ",
+"                                                                    v&w&x&y&z&A&B&C&D&E&F&G&H&                          ",
+"                                                                      I&J&K&L&M&N&Q%d&O&P&Q&R&S&                        ",
+"                                                                        T&U&V&W&X&Y&]&{&Z&`& *.*+*@*                    ",
+"                                                                            #*$*%*&***=*s%q&-*;*s%>*,*                  ",
+"                                                                              '*)*!*~*{*]*^*/*(*_*:*<*[*}*              ",
+"                                                                                |*1*2*3*4*5*6*7*8*9*0*a*+*b*            ",
+"                                                                                  c*d*e*f*g*h*i*j*k*C&l*m*n*o*          ",
+"                                                                                      p*q*W&r*s*t*u*v*w*x*y*z*A*B*      ",
+"                                                                                        C*D*j&E*F*G*H*I*J*K*L*M*N*O*    ",
+"                                                                                          P*Q*R*S*T*U*H*s%p%V*W*4*X*    ",
+"                                                                                              Y*r*k&Z*`* =.=+=@=#=$=    ",
+"                                                                                                %=&=3*W&*===~*-=;=      ",
+"                                                                                                  >=,=7&7&'=)=!=        ",
+"                                                                                                      ~={=]=^=/=        ",
+"                                                                                                        (=_=:=Y*        ",
+"                                                                                                            <=<=[=      ",
+"                                                                                                                        ",
+"                                                                                                                        "};
diff -Naur ../work/WindowMaker-0.91.0/WindowMaker/Icons/Mouth.png wm/WindowMaker/Icons/Mouth.png
--- ../work/WindowMaker-0.91.0/WindowMaker/Icons/Mouth.png	1970-01-01 03:00:00.000000000 +0300
+++ wm/WindowMaker/Icons/Mouth.png	2002-01-26 18:56:26.000000000 +0300
@@ -0,0 +1,40 @@
+PNG
+
+   IHDR   @   @   ªiqÞ   gAMA  ±üa   bKGD ÿ ÿ ÿ ½§   	pHYs    ù¥   tIMEÒÇG{  ¢IDATxkv#Ù?<N2«º×ýç)x´§äa¸Ý]HF þÌ¬ºÝ6×RJIRb ½ò¿þçÿøï
+×}Ëï¢ò×¬Ü²°Ì²*PUQEÕpÆæ2Üê$	ÇqPdAÆ¤Ô ¸qW¾Ý6T}ßÄBl3Ã0ÅM±aP¹À¤R'J& dÌ
+Ì¬ÈÌ öñ¬Ï¨ú¬¯x¸&×BÞJê
+ß3ò[Â[	JÁ
+QBU É,*Ì	Z9PÅ<v2aJRZí¤ÇAuGçd$³H|&B2Ð* *$Ê)ZbZíS¬fUI©UTÉ´äYª_d	¸â!¼A}Ëäw)~ø½2¿%r ¦Z*¨  Ef*Ô²='ÆPÁÄ q's²ÇÌ¨v	Ïqpe\«B%¢F" $HT%%VªªrdåCA©*I ^ðM«¾üRÿPä_Cô7ºrÄ@QQiãYÖ«
+j¢¢¨vNù|PÕNAaG¢è3¿nd(P[pßLyfûÁÅ&WØRÔ&¥*T¥I"ñLá.ÈMQ/TRRpÉ|ÑoIüNò¯%üá_@Þ«¸¢¬f¶g¥¢"m(>`NÃáxî¤hô×Ó
+³AU	ÕQÑyÜ)³¹SôkG	¦Ee2,èh*²¤(AFYÍ ,-ÓæLó§E|Y# AfF32UoRòå·Bþª-áª\)FÕª)U@×ªuÐßÍ("*ZEfösÒÐÁER%ml*ÖCT Uì³º8ªN+¡s*)ªªJK9G¢ËÈ¸È!»gÖH¸PuEäVÔ;*ßú.¢7¤R%t±¡àFVadG23ç<Ø£8ªÐ\'mÚÆ
+t°wÔ(ÙÞE*IQTRI«HBD*©$°0Ä¤*¥L?U	¢»ÿ¨«D]P.Ê@äBqAäJÉUúû²"ª>g*SÄ*¨*)0g²?w#ÈL$ÛiY®`tÕ75TÕ%Õ©Q&RlS(ÈLÔäü½êÂ(É!e"GQÊº ÃxíêUJS¸ªS5!R*[é/ UT$eQU1ç1¹ÁÅ1£óÄ*d"ý´®ë®î%(Ñá-XL:"¨,"
+U)´@27UW¤{¢oqøÜ6?ÃY¦Û¡n¦U«¬iX!VIu¬8+SunK%ÂÁãìûd Äq jwÑ¬¤
+U]- USËI1;»«°ÂD JÀ 3«ª¤`ë 21Rr³-uIJ8¢Rµ¸Nû¤ªLé+ÖþuJªËV6p(ûäs<¾"IAeG­#©¨o9Sà,É¾Äª"B0D]WQ¾
+B«#ö¡-ÛUÀb"Zâj ºPE.x!'¶Ðîú ZtT
+"dt&ÅÅÁþ|0cµ¨gý0¤O=ó,`ÝAdB°¨ÇBëwsoZj"b¸{§QfGÒ¨S§¨!".¥)ZNYP{ Ö\}µº½y)ýNQPéöQy°pÌà¾?y<TDC[U¤qC;ÑLÌUG¢Ì²
+ÕÆ{3IÁKCb$
+0¤°ÀR¨,3«ÖnÇUØÄvÁ}(3Vp'dIWáWuñc
+phA&{ÀûóÉ××¹OÆÅQNÓ¸>§'Uf¬ºè
+QEU¢jlæ`äëë
+"«#@úpr&biw) +½ú
+£¢(¥»Iõ¡¸¨
+R%R¨TÄózFæÃE0ÌÜ#øº?øz<xÜw¾mãªp¾u(ÊYT@)°ÁXE²ª¸?TwT¤ê#6^í¼uaVÊEpLal"U]ß¤ÑwxÛ:$«ìp¥²G7
+Ym¹´ 
+*()1ù¼ßùñuçñØyÆ¸^0SB3]8[h¦PÞÀhÎÄÇDDG &¸Ã»#!sóV"SìT¥LÑêRî"D0\:ûÄÝµá}2ýA¬®Ä*Fç¿«æg´³¾¾|~ÞÜéâ²LLëù#¨ ²*Ð2Õ¬ER*¨+Ë ÑÏ'{LæâÙ¡ 28¨¬W%Y|bLÖëÄ]»24L­s¯÷ãàñ<çÁcß¹½]ðK_0Ùíx»²*çýLE]*ò8píá©ªØÌ/Js£ö'³ bï°Ú+AsÇ³'ÔVÔ1»	Á³¥`"8QÙU¶@«Ãê>4¾'Ñe%pÁs|Þï|=|íß6"È£çÎ1Eh, A]ºØF#n£`YäL´Û;_º³Êu»âS#yð8âÎ¦;lÞCº2çDî`U] ¶B¬;WóWd@Vk]¯û4££"#*f$Ç<x<wÇNEåÁó~çq» cP<þãþ|¿Þ¨÷7LHEfwmµ%3`*ÐÎId2ßß.o_ûÎ8ÊIº®â·qQaíBÕÉì5~é:ï¨¹={¾>ùì¬X2«8æd?#à²f\Ø3ùøzà¿AíÂ£ÿøøàãþà÷ËÌßÞ¹9pÝ°è¾]¡¤ÀÉ<vûÁ?>ùÚw"Íüþ«;?Oþüzpsã¦§­CkÚDJ	í9%µ#ÛfÚS©Fâj]õªDÎáCÎÉªYMZf±g2gR·Ï?¿ø·|}}b|Ü¿øóÏ/þøºó'?øñ<Øcò/ß¿ñVÉ¡ýùÉó8øñuçÿüñÁ|<¸¿»±;·Û;õx¢n
+ÐÁ1á@ñc,8¹ajêmÙö
+.!¸B¢$bÝòªÙ²Õfvøç19ÍSá¶Y|í;GÏ¸
+¿Ý®¨	ûsçÿÛ¿³?wÞo.ÇDÔxæÁ}>?î|Üï|> \ó+GÛÆeðîmòSÂ^Ó}ìº[ãâÝàú{*(YHO`µ5«[QdÄwèÐ¯äÁÌffÊÖQë¥¡ïtgrÌ÷w*ûw{F?ïûÚä¨4r+árÝ¸Ý6þ{óó}l¼¿ßãÂÛækhÊêÐà,!i=Ì C(öøT$zÐR7ÁT)mV+×«ºõTYAD1a}xe1DÈë 3Ù¸¢L2»XÂN²gÝ±®ÒçY°ms¶1P7´
+_D««°mc6SÆfh	³'ûx·ï*æI*iR(QÏ]ôx»aN\ÍðJllD=è¦§]¥ù¿ÈÎûL^¬­à 6p	RÂf)bEhAR	·ë2§qsÃÍ1S6wÌTqQ¬ç]¬7_èPÑRLý8²%}söçËdX³98yÎàcß?>¸^¯¼½]ñ®z­¸¬Ñÿ}ëU"ûÔE¤½]ËÉÔ/Ø"2NbÔ| KX¦ø5%ÖÝÛÈ¦ÐhòÓ5g¼O\ûZWhVúÚcÉ±HÜ®²fë1üãøK
+bÏZïâDÉ?ÓâDÈVMOi>PlÍÒÒ·«
+Õv¨2|¼0í®ºrS¿Tæ©v¸2ÜÚ!RTuç°ÅÓôu¦¬cë1Á´¹È¥J5®ëä*î1sBµnÒE¦=|òþ©f÷RÍVWjÅP#Í¢¬IT13LsCEyt}5¶â4#¬(æÆe» ªý{ZJÍ%!,`©ªÂDzX«vÆimFüK´Ó(Ú¤"ªä:±ÅTåRÛ{)ñÖçrµÕS)ê¡=®¸f~f4©²Zm¨ [HÑ¤å¢äó
+¤ÖûF1Õ¼E?ªßÃO¨],g)K´Ö`mP¼]66sÜÊ-eóAÅÎ!Ù¹¿òþY¤ÛasÍ²È9»G¶ÁÅbROêãÁ!HR6Ð«#Û1¹\0
+Élb#'uLL,öRdrøeCccô×¥äEÚyÊM±vd-:ÎÝÙ|ÀWf#2ÑUlög÷û=f;þ£5;ä"
+²Ãªb!É($Ùüq0p|ý]¾(y@	zÃÖ-cv{µ2Â¡F\7ê¶ÁíBnncµoá/I®ÓoÐÔÆ0ÆfD=©üý+Édû+Ðò''~æÈ\4WyLö_ÌöÏ/æs§TfÝâ¶:
+wØ¦8s6ü9Ñ­&5AÇà8Vµç>äòÕúÛ^6üâ¨ys¢dN*qÙp7$+C²­¬Äg£@YùlrKªZÝ9W¨Í@#ÇÁñx2ï|ûÿCñì?*8$±u2mÑ9<³'¿®3Å3óÕ&uß» ÛÀ6'Ì|&CþpüÍ±ë­ëÅ7¢}ßAá½]u¢+ôJ$ÁkiìÝ;¼®è|?hùæÅ
+ìãkçþã|îÌ}GG ;³YÚûTÙüÞ¶ApT-Róg»ûj­
+l¾a»5t>k.ÉúOÃ¯?ðáÈføØHW"#"læ\oÞ(¥tEÆxl'é¶Æ2þñõ`ÆD'XqF²}ñx<È}b5g+ÇA}Âq<ÑÕ&î÷&-¼ÓÀDðÍ|!ÇGôæÉÝÍþÚrF´t.?½8£7G¯Çßß8O=pízmz_Z7¨¼¬ÅK!rRRÄÌÜMmZêÏ`>Ìçãæc'÷Ï}ÂÜyBÉKô¨Wxô\äÈbíº¡Úpøèz£JDt*8°¹3FSÚc\Poé|îIYài0ÁoÞ Ë­[¼÷ÊØ¼ÙæEuûó95Q³{fU!Ul¢ÞE¹½óüóùC8êÑüþóGwÃeüó8H3*ÇÜ±Ew´í+¿sµZß÷ÕäÜÆhýË½'X®Þ"lê-G`ÃmôénnÊöíÊö~ÅokÜo\.¿V¦V[÷ÖÙS¥5üµ|`éÀ#HK2a'ámCö©Qîèû;rLòÌØù¼?º]nÎ[m<cªÒ'¬ªÜh5rÎ ²å(3c¨2ÆàRÅ¶õFÙ&Áu»°]¯Äu#·½9×·+cÜ~»±]·Ö'¶ÁÕ7Ææç¼Rðc-wi~®u3eF¡&TÍÖSìÛµi%Uj85ÞÝçÎÁ÷ÇÇãN=ÄÊí¹OÒµÙdnÃ¨CÆ0.6ØV7z_uCµÃÞ}ãízáv»0Æ2åáÆssÞ¾_¹ÜnøekUê207®Û¶¢OP5Ôxá3bµöÂ%R½§×,)ÖK¢Î."QµÁ)zRÇÁbãäû÷oüC¯ÏOåy<áãûÎóí"cMc¿ c]øóÉ¶]¹]¯Øí'¤Yã'òöû7¶uòcº&G3á2Fk
+Òt¸ÕRg5À¬þxJ"TLNÅDèM®IbH82 ÂýóÞy%½23U÷wÞßÞx»ßïß0x%ç\.-¨D@N.ÖKÛmCÇÆU "»êr>ùØw 6Çn®ßnmÃ¶6ÜµñÃp5ÔWÆTFÏKZº@ÑdGe?Mt´5`P¢ßz¬}GÞÁü|ðÉ}N6Udö¯äyðæ`ïßþàòý»ÝçÁñùÉ·ooØØíÆ¨ýÉ}?8î;Ï9UÈÛËoo\.Ì.-¡µñî©p¹Î¥-9W è9jZÍýl¿¯ÛK,'×KFR3Ú<ÎÀßççæÎ1[ºKP=ÄZÞúüìúzKÑ5ëðßLxÞÜ?>Þ?32e|{ãòÛ;ãvA6C¶QÍ[O<ùÕµÅÚ®>ËëWAfµÖðöügéZ¬½þ*B,²dF¡ëÍ5JYiòÖ«o¦ô´(Ù#×"wòëly-RðyÿdôrÕ	ÒÛßÞÙ¾ÝÐ£îl·6¬ÝÙ9­-Öµkó?'ÛeÓ_ðr½éÚééof6â£°J{­-µÙAy`m{v[¬ý`Î&þÔª.°O10¨ÙÄëT!ma*|Û¸}Û¸^»¯o[óÛíºäó;ku·÷­[i-jïeð/Æç?9àåé©PèÖÊ¤á©º¿ôÂÍÑË4uÝÐËÀö@æ1XÛ&kµ(rñ².Ì½O6èÅjÖñÉ	^.ÛVóõÔÚ<AÀºCh)ÍtdþË0kì¿r@³; Ã[MA.<KyÖÉúYbuéj,µ&Nï57áM |0¤Y$÷Nè­¯^Ì6mlªkÈ¼Ô]YlÓ	zéçkIKéÉóDÍý°azêMnD!DWvSâ9©¨ ±@Sÿíç²9CY"ÌûzJlµIwo§¢¶QH»KG¼="0aivU|ûÿ¥z!®F,'û´03Í©ýè¥&a«¦ÎÄ¢Q¶­1=®]´Nu3§"pé~?ÌºE/V£­8¹´3D}¿P´&Ì­jHN&­FÛKdÙv>ZûO¾NY ÖIya!Dû´o*;ÅÂÖ¦÷Pm·-Òm[sû
+ÃF¯_pÙÆYë}§ðÑZ^´ö/ó+íè#!µÈÐÊDkÇ­Z2QëÍQ]«êòÿ8;°bÖæßK 1leÞ<®½ânª¨	ñÉt*ãíº½Öæ|sªªh,P½@¥GåÏ õózjÕèÀÉÖ43É<¹´\¨ÕäÜüú¿FÀÿ÷QgSàÜ iXAnE sõÛf*££Ý¸Þ®,Õ­÷rÆFk/´J)âÍû5-sIò¿
+È§@L^¯s+mÝ¢£º±Ïñ÷ïæÿ³êïõ"ú¡jíåÒYll«rÚ!+OT«N$æÏnÚ>ÚmdøPé¡©Õ²àñå½½ØÈ.Ð­FU.ÂE:3ËDËTKDz{ü¯6¾ð«Ñ?o¬kÁN KþZ@í'ØDk­Àw¹VÝVÅº õ"-[	­¨¶*Ôí«RÃFqÉ>ÿzåçY+Ê¬½(=9ÊÔÊU;ïa-Oÿ³­§òïñ/}õÀ^ îBS"*­¿	ÑPW-1éa²IÙ÷0¡¤ Î}À­[cìGßÇb¢êl@Ñ»ó\¶¦'¸VGô4^õ´áW~µµü£çß¾VºñÂÙ¾q­ªÈÚøÚXZ¼
+«[XóóôX<âÕÐÛTû[PnÈ¬Wî×6P9^;'ª;*{ö-¦,ãk,úàïöþ7ëëiÑ#Í¹:».¦eØHÙ/¬ÝB®&Lz×¼ÕÜëøYv"XÂ`?|&Ç//ê°@Ò:iÖ7bvi"+Éý ©ri5ÙÚø¢KÒ±ìyübßË!þáà|®d½6 }Ý?p>NP¼È]aÃ·Òé-í%q¿?ª¥+LQ}Óö¦¨Æ$
+8x}ÌheÉDÊl-V5L$ùéeÛýg¾ØÖnË`¸ÐòuÛÜk¢:ûÑùÎ`­Òï¨x³És3¼~Âá¿?¦0VX÷e	Ä¹å±0 T/[çµÂï"¥?ÿxWþÎÆ¹ýþøsÙúÜ}ý`Ëð3>õ¦ËzídåW®_pEKñ'*}í4K¢Ðwu"Ã~èÝCZzI²nÍó³~ÒCQ©ü%8_)@çúsôÀ¿Nðõ¼Äfæzóu9åW¼>´/ä¼Í¦gy¤oYÉ12Þ/¸[:sSµ'Ù¢J­?¶´¥VkaëÅZwÔß¯íoø5þX_?3~µáXÏá®þÿZ½¨2{=]À(Ü=°]º¨%½EnúbÊl±¿DÜk_WÑýÜÈ_/ç³Ã=]§ñ¢úå¿þ!³-ãOð9á¿xn¥êÚ2M`Ý®|lÒ7>ÐUåµÝS½0ÑÆj%«å¾hÎ%ùÿëã±'èö kÁ§¨~Èãÿ¼Ì¢y    IEND®B`
\ ÷ ËÏÎÃÅ ÆÁÊÌÁ ÎÅÔ ÎÏ×ÏÊ ÓÔÒÏËÉ
diff -Naur ../work/WindowMaker-0.91.0/WindowMaker/Icons/Wine.png wm/WindowMaker/Icons/Wine.png
--- ../work/WindowMaker-0.91.0/WindowMaker/Icons/Wine.png	1970-01-01 03:00:00.000000000 +0300
+++ wm/WindowMaker/Icons/Wine.png	2002-01-27 08:59:29.000000000 +0300
@@ -0,0 +1,26 @@
+PNG
+
+   IHDR   @   @   ªiqÞ   gAMA  ±üa   bKGD      ùC»   	pHYs    d_   tIMEÒõ¡ê    IDATxm»IeWr&hfg¸÷Ý7ùìáÁ #Ed)Õ­ÌÊ, ½ÑB ­µÑVíôCj% F÷¢ PU«
+h´ºª²*»)LNÁ`>ûó7Ýácf½xçE²ºÃÝßàþß÷]ü¿ù^QÎ9çÙ©ª1 @Û¶Z×µ¶m+!©ë  ¼÷  ÀÌºX,d:òÉÉ	×uÍ§§§:ÍÔWWWê Õ¥ùëû~ï¹ÿÑã  ¸¿¿  "[[[°¹¹ioÞ¼i677mUU¦,K¬ª
+ «ªÂ^¯DÞ{ "1ÆÅb§Ói8::JvooÏÕu]Xk)UÕ9ç(ÆÆpÎpJQ @Û¶c ¨ªc¢s.ÎçóÄÌ<µ®k(ËRË%þ³â?3Âú9øg¯A  {÷îùíííj8ö«ªªÁHUq6-ONNÎªªjÈsÎÙ¢(µ¼÷ä½UEDfÖ£¤1¦2Åzï^¯×ëº®ODU±L)ï YkcÓ4 @Ddï=:km;HQ½÷bffUÙl9
+þGðÆû|ðÁ`{{{§ßïïìíí]»víÚhggÆã±«ª¢p"RÎçóòéÓ§òÙg}Õ4ÍlñÆk­5DdTRJ¢ªBDm×uÐucÄc<"öq#cLR²"ªªD$D1£1ED U9¥,3£ªRY""ÌÌÉZRUÕu-³ÙìûéeYâ~xpóæÍûÛÛÛÛûûûÜï÷»Ñh¨¶Ö6ÞûFU	 Ì<F£ýýý­ÃÃÃßüû¿ÿûÿ ÿIDÊÆÎZkiuAQD$¥ºü9¹ëºÈÌlÙGÄ+"êclJ	 @³#"DÖZQU°Öªªµ6äTaç¤ÄZËÞûcÔ^¯G!-ËR¬µÜëõXDèúõë{«kÿþýû;ï¾ûîh<cÌ¯Ú¶mCÙlÖ8ÀÌÜK)-T5F#sýúõ[·nm<~üø?ùäé`08BDODÅ:%HUC!¥DººbY­ª­j²å|JÉ«ªËFEd§DDb!\¹UT5GDµÖ² µVQH¢ Dc½óÎ;wîß¿ðöÛoÃá0F£+çÜ7MÓL¦ÓéâââbþòåËîââ",&¢´±±AÃáÐÇã¡1fÞu]\.Á ···ÇEQü @ñ=#X"cLBD$"QÕh­uÆc40[SJC¸ºÀ£ÖZEDÈ¹¥Ì"BÆã³"¢ÌlDDsÊÌZEõèÑ£ññÇïÞ¹sÇmllÔÆ3¹X.WÅbòüùóùéééâÛo¿M¯^½âíímøè£Ì£GìíÛ·cd>s×u¦,K`f©ªÊÇãæóù/ûý~`fÌi"Bh¬µY 0EQ ]0WKÍ_oê]]Bà0³¤8¥¤"Bªjrdµsdéüà½÷Þ»ÿü mmm]Zk1ÆÉÕÕÕÕt:_\\L¾þúëæèè¨===åËËKù¿øóóÿÜxï}¿ß/z½^i­-¦Ó©óÞ÷êºöDDu]ÛªªüÎÎÎ[Ï=»RúUQº®cfFc®ÏÖ9g1$"$"d 1ô}#Ä5·æn  Ì,1ÆµTUÑ9:PD0Æ;;;¿ùÁ¼÷î»ïv[[[§Æ¦i®¦ÓéòòòrzzzÚÏ?Þ,=::?ú£?Òßÿýßw?üá©(
+tÙu]¡ª¾,ËjkkËc3sÏ{_Þºu«<::úù|>a­mhüÀÌdk-""ch]À{½Ø®_  Æ9gBº>dö4§DD4w  tÎaJ	 ¹wxxøÃÿøÇ[×®];uÎ·m{9LW¯^-OOOëÙl¦I§§§|íÚ5ýË¿üKüðÃÍîî.9ç
+cL Î9êºÎEa`Üëõöy \×u²¹¹iîß¿ÿøÓO?ýý~ÿßæHDcÌÚûjQfü¤Ðf¯""¢µ1d23ÇS!å|k­ÉÞ UEUçÄßzôèÑÞÿý¸±±ñ]×ugÉäìââ¢>::uggg¡i@DÐuÿèG?þô§ôÃþ¶¶¶s®DÄu{ö¹¦èUuä»o©ê^UU~¿ßÅï½õÖ[ÃËËËýk×®§"*"JþìÛ¸ZkÕ:ç ç=ä\yÎTUB©ëºB`Ñìå7h.Æ¨¨)¥²ªªßù­ßú-wpp0!¢ËÓÓÓùÑÑQ}uu¦ÓiâÕU~òèþáÒG}DÞ{Q]µö|.d}±)¥±sî ßBÄ·Ê²|pzzú·m»1vãñøÞ8>>þ)3ÿo9ümv¨ª8ç$§µ23ØuØuÕõòÏ +((M­sQ@18ÍÞ¾wïÞÛ? Àåryzyyùêüü|vyyYO&°\.CÓ4cdff?û³?Ã÷ß?üðCòÞ»Ü¶zùð6àTÕ¤Dto{ïßñÑÑÑ?Öu}±\.Óéô´mÛ£ÝÝÝÝ¿ÿ_}öÙgÿùîÝ»ß!":çè{µò9  àM
+¬SÉtí%Î­Nß¼ w	Uù|^.ËüñÍ7n<!<½¼¼|yrrr9LæÉ¤Y,1ÆÈu]§£¨*xïáOþäOðOÿôOÁZKÖZkñKøåÏ¦]×Ì<TÕkÖÚ;ÖÚGx½,Ë­ÒÅb1!´Ëåòâõë×Onß¾½qûöíõÕW¿Õ¶í @³ÂÇ´>C>/cÐ ÷néº»®]×Ñr¹cÊ< ÖvX,1æþÉO~ÁàëårùÍññññÉÉÉÙd2YÎçó&ÀËå3RDDï½üñÿ1üÁüYkÑ9GHh»®+rîc¡^]×}kí¡µö>½CD·½÷{ßL§ÓË¶m®ëf)¥óù|'ÉýýýÞ~ûí=yòäßìììt¹KÁº¯ÓÝv]'Ùóo]Ö}~]ørÞ# Èt:{ïÿ§?þxYåËÉdòäøøøõñññåt:]ÖuÝÖuB ¬ªëÊ«¿ýÛ¿?Æ~¿Þ{DDL)£'"RcRªRJÞûÆÆûÎ¹Û½^ow:^Ôu=!´)¥@DWÌ<Ïçîùóç_ÃÏ>úôÓOÿeÓ4ÿÖ9!£Y2B«ª "+¾¦@D Ì8am 8::zxëÖ­÷ïß?õÞ{uuõíÅÅÅñr¹¼$¢¥s®5Æ¤¢(R½÷ÀÌ0uww¶¶¶ÐMÓ`Y=#¶m[ÅªºSå]cÌ=cÌçÜõ|ø³¦i®dåB$¢ëº®;cLxýúõñh4úÅÃï¼óÎ;ÿË_~ù_Ê²¼ÈìV33 P[v]ÖZTU²ÖRJÉXk%­ª*¼|ùò½Þ½uëÖkcÌóù|þ¼i#"ºìõzK	)¥DDêã23Æ`0àÍ7 IU3;D´ªZ¤ú)¥"îey îXkoWUuüÅÅÅg]×qn¿8¥Ä!	!`×uËgÏ}¹··÷Ë[·nýìÉ'¿cü_¢àÜÒÙÃ1F ±Á`]$LÛ¶ ¬¬yÁðÈÑÑÑ½¾óÖ[o½6Æ|×4Í9¶Ö^TUµDÄÙ#MÓHYÐu23t]EQÀöö6¨ªN§$"4mQ^D"z8ç®[koÀíªª@uyyùÿµm;O)ªZZkÑZ«eYöDDÛ¶ÕÅb!óù¦1xõòåËÏ?~üðÎ;?~úôé¿7ÆzïYD8N1`¢   »Â  1FDD_½zukÿwïÞ=³Ö¾1¨ê)]zïÆNUÙZ«Æèº¬µÀÌ`­Å¢(È{ `Ë¥uÎù\øzÆ~Q;ùðªzØëõ>8==ý&01^¥ÊÊªª<Ü6mQ4Ëårº®¼º{÷î?>xðàgÏ=ûyJéoTõZ"óçþç; ÐSÕªöTµDD~ûí·wwvv>~ôèÑ¤,Ë§"r,"/èÂZ» ¢ RV[Þ0ÅÌÂ@UÉ{oªª²ý~ßF£²,ËÒZ[ªêÆÞûçÜMïýMÙ_,æüüüUÛ¶ç]×]Äfîº®U¥¢(HD""²ª&UåcB9ò¨ëºè×®]Û6Æ¼ÿôéÓÿÜëõf D$ @PÕdsÑ[SÞµÈ£ß|óÍµÁ`ðwïÞeùRUÏà1æÂZ;.ÆÈ(ÆÍ	""dGè¬µ4Üh4rEQÖÚ1fè½¯¼÷C"Ú2Æl/j±XtÌ<WÕZDÚó1k1¥d×ÑDDuÂáp8õz½¶®ëncc...Ú/_Þ¸qãó[·n~ñÅ¿ ÿzuYQlîºæÆ(BëºöËåò£wß}WÃáµöè
+% ¬ôµÚ¶U¥¶m©m[o±UUù~¿ïA5£ÑhPE¿("Û¶í/ár¹Q°ÖÆchFRJ1ÀmÛªªòx<îYk£1Æå¢½^¯Fýv6¥c""N§Ó/^|÷Þ{ï}óàÁ¿ùæÿ}ccãÜZ  mÛÂZÀµt¼nÏ=»ûàÁáöööë¢(ÎTõÔ97!¢ MNÖ4ØdóùÜ¥1ÆEáÃass³¿»»;ç\ß3h¦¸ºº²]×1 eYg)çóyÌbZ.µÇùõë× ¶½÷Ã^¯ç ¢peY£Ñ¨ÜØØÉdÑjýêÕ«£ë×¯qóæÍ½Ï?ÿü! ÄW@¨,KÐÆªj¾üòË½ñxüþÁÁÁ¬,ËK"ºTÕ¹1¦ñÞwHXU51FqÎár¹D1]×+Ë²(Ë²7û£Ñh´³³Ó«ªjdzWWWîìì,0óQ¯×Óªª"3Ã|>mÛòJ\X×5.K³áÑhdC±õÞãh4êµm[Íf³Æ{Ùi>}úé§ÿèG?ºvxxø§§§ÿ­ßïÏÖuÎ­%£µcONNî=zôÈÃ+cÌDUç[ pCVM×uBÀ¦ilJÉWUU:çªÑh4Fcç\AD½¦izËå²uuef³ÙµvQE Ó|>!UÕcä®ë Ø¢(LÑZk]¡¹¼¼¼ðÞCQXE¦,Ëb0TÃáp¹»»këºnÚ¶M!p||üôÅÛ÷îÝûñ·ß~û1æße=SlnS`AçL&} ¸¹¹¹EQ¤Lu+UÝÌ ¦5æ"¥äRJ)ÆèVõÏ_UÕ ×ëõs#q!uuUt]×]õûý¦ßïG èÊ²D M)Rj3´Þ{Àãæ?!ôÊ²,1Þ9WTUUVUUlooÉd)"©®kíº.Ý¾}ûøààà½gÏý{"bï½Xk-dksÚ¶çÜÀ9§ÖZÏÌ=cLcDé¥ªv"Ò0sKDÞ9ÃáÐ ¢wÎYDì1ó`>ÛËËKsuuæóùl0L777Õ{sâ Ð@`æ®i EDqÎ!"&¢(UÅ¦imÛÖý~¿""GD®×ëU;;;1Æxqq±¼ººÈ"ÇÇÇ§óùüËwÞyçî³gÏîv]wÖ¶­Ø²,Á{Î9-Ìüj:Þê÷û[YFª¬µ­ÔÆVUë¸K AD1b'L&v>ÇüÅµk×ºªª¡ªªä½Î¹1Ç~bf&¢54gUå¬1ªªb¦á<oXúÞûs®×ï÷¹ßï×ãªªBÁc mÛÅ/.Þ~ûíÑ½{÷}òÉ'¿DÄÖüÕ_ýÕNY÷¾´Ö:"Â^¯wüOÿôOoß¸q£,¢ïÑÀZ[QÇ"]×Ár¹³³3xùòe×¶í´(å`0ÍÞÞ^ÒëõÔ{¯UU%ç\rÎ­¬µIUiY`1y¾·èÖ´@½÷¦,Ë²(è 2®Á¶me±X1Æ ".xíÚµj<ë·ß~{Ö4Í¥ùë¿þëm"*1V¤_vwwç¿øÅ/R¯×»^U!¢K)IJ)¦B×u©mÛ¸\.WWWæøø¸^.³íííùõë×Óx<Æáp½^Osê½mj­MÆh	ë¾á7cLUU¶ª*SÉÄ! jQ¾ªª1¦pÎUYK0 1Fm&µmÌa¡íºÎÜ¾}{¼\.õÅOlµªUm2¬ßû½ßûO÷ww?H)¦i!iaºX,®¦¹Z,Ëc»µµ777e4YD,SJuÃµàªD¤ °(SÎé ì½g Ð¢(hE(ÈY§@Æk=çóy=ÖÚ¾1¦)Ë²Ê3Â{_Ãj4Åõôüü|2Í¶÷÷÷û)%oUu=àkéÃÃÃÃ`ù?<yòã·ß~ÛcÚÂ|¹\´m{2ÍNg³ÙBDÂõë×Óææ¦ÝÙÙqÌÜëº.e)²Y×ÌÇSº1qQû2ch=ÝÍÃÌ2½¦´ë:mÛVQÛ¶Ëå²1Æ´Î¹ ªµÖUUÕÇË­­­z6ÂÙ6þùüÎ;xçÎ][×µ2³d¦ÄH"b¢ ßùßyö·û·{{{ãñ8:ç x¹X,NËå¼×ë5½^Oúý>nll  swMÓ`ö$"¢5Æ¬GêBDfefìõzd­5 `UÄ±ªB £¦HV×JÁfæÅ|W½^ ¢d­í¬µuQ ÐZkªª*F£QYUÕb>'Dä¢(Êcì÷ûúÞ{ïm²I `­µ^UMJ	ùîÝ»¿~ýº?l¿ßcxñâEÃÌ<¨,KÇÌyí¡®ëlV_)³DÊzæß17 &´íjj£êXÄ"I1@×ukï ·Û¨iºººbUí¨FDo­]GycL¯×ësËÜÅHDp±Xàþþ¾±y¸i²"Û^JÉ03@ºsçNýÿðÇMÓnnn`§,ËI»b'4ÀZ)%!`ò°ÕÆÝZ^Ë½­µJkITA¬0{qªJy<JÄ¡®Mj®Cl[)A´1^]TM½²ÖÚeî
+¾®ë2¼÷\¥/Ë²I)5V999	7nÜ KD- ªZH?/<@1ÇãæÞ½{ß>þ|{oo¯_ÅÍó¦iNúý¾Í§<WÀ©ªSUËÌ.«KÌÌÇf&`IÄ[k¥V%ë=xï	=§äSSSbÔ¦®M×4>¥$*b ¥4(B1Ær1¢(hY,Ì¤"""k-@Sx=e ã½ï-Ë¦m[°]×QV< "ÒRÒ<5»»»óW¯^½L&×®]ííímÊ<åíg%Ba+dØ¬"bRJ *Ì&¤d¬1@ RÒBCèÅv` )9ñÜ¶Çè%F«"QR²Iu¬ªIH¼%ZDf^.ÜµÓÓÓ4è÷ýþÁÁx4mZæ¶=fæ©µÖxçEàr>¯fæ®áDÄ¥4@YØH7oÞ|õôéÓýÍÍMFÃáp81ÖÅBbBÀ<M"Uµf¥"Dt1F/ÌTA´M£Ôu#K`>¹år\N§û6¾Á¶í¶-!ÆRBev R@¡ &Z÷)EÓyÐu''ïõ`1*îìË¢ ¾s;{Þ*ÑD¶x<EQóós´ëIIþúï$bõ_~y:LFûûûñx¼·\.'Ý|±píº®L)õ@µ ¢³¶DÄBE|êº±°[L&7zÓéh³®»QÛÀ¦1Æ«ªÕ :1BdÔZcò¢Cþ%¢Ð
+E0­÷«Pyý:ñå¥J¯§´»;,SÚÞ`®âéy"DßN§b¦UÕÜjÞÄ³!   ¦âÖ­['~úép<{³éôU$1Æ~±æ>l5Ì4¥É`o2ÙÚX,
+PuàPÈ rJÁ 1 B´ÞPQVE@Y*T µdTQ,¤`PÛ¥$¶iXêZÀìYAµôÖQÄ jcõdHó¡×{ ,"AVûA«}Ý4ÍÉë×¯wïÝ»7îtz:f/)õ9Cîº÷m]?Ú9>íO&DY^-c9`vºjDbD  D"U$URPDU D"@ Ìë+QQPÀ ïÙHøº®Ð{¦ª5D£ùÕ)³ØÉd"Þû i}x]1#9Éé`SJd­|ñÅ;ûûû£ñhtÝ9·hX××l]ÿ®»ºú`÷ä¤?L(ª!2 àÑ¢CDc®¤
+wiíuÐ·óáÐ@U c#´VSÞlç ¡CqNÑZ`UTcÐx/»ó¹Ý»¼tÓ~ßFÃuííb±`k-[kSVI Òz,aêºNº®ï}M§¯<yòî;Ú­­-~ù«_ýññÇßÜ¸¸Ø « ÌN Y2Æ¢%"cV(EQ`E~PEPSV]uõ(¶Î  " kWòÔ
+_ «B8F#ó9¡÷ÊèSr â6&a¿,ÉÖu-y«³ÎÎ´ZTDDft]Ç1FÃÌ4O¾úê«ñht¿°ÖnZ»Á§§×WW+D4*bIÕ!EDBÂnÅVÐ¬tÙÛU¸@È¡M`òãßc^*ÄUº0"¦1£eÃ1bÿê
+l]×ë5R1Æ0 0sN³¾/)%1J.¶m[òÖ~óùgÝôàÁñþ~q1D¹¼À³W GÆd2°Î])%PpÙS*â*ÔÀ­Sf0Ö]¥"XæÕî­(¬
+du  D° ¨)­vºNcÛY3ÓÆh®¦S²³ÙÖc0ïý¬Ó!wGü"ªJ9Î¿yòäÍÍÍ6Ã-w÷.^]^OéTûÑÒ*Wóh=ïÝ1få]" |HDPaÅÉ!suÀ)*Æ¹Õ{  UßDqe°@ ±BJ mÕwJ"R" BBår©ý~_RJ¤åÞÅÜ!ÖÙEñù¿úÕ?ø`XÈÕÎÎyÏgâ EXmT qî×ák8cÞ²SpJï! §&18Á@Êa«Èa]m©k`ç@ê:UmP× (´Ø9´ÖÚµ¼­ë¼Ï¼YSJoöiDBkcH±yõúõÿµ¹¹ù»wµ¸{W¯_ômD,ÌªâÚS "3"¨µ Æ¬ª;¬.d$ ãØ¼ÍAª`ÖK\!¼ymR.F®3÷Ð­ª9H×¦J`hæý­1hëºV ¢(t­¥­"Ua5õ À­±´mËÒ«_ýêWÏw¶¶[[m½»{ÚÕõE_µÌUATsxCõ¼ ²ZfE«
+I@òÖ$f0Ö­1×PÊf\dõÿVLÒVÿG*$ ÀñÈZ»©4O_Öa.yDå×ËÒRâ®ëâb±à¦i¬O¦ÓÿúâåK¬66J=<ìæeùj b4æM1#ÕUÞ¬"  * 3P2DÍBc [UÔZ°êÿ DÀD  ß«9:8Ð UEETWÈVÊ¤º®¡m[!H1eÁ3u]òÎÐz¯VFÈÜAå  ñIDAT\^a£Ç¯¿úæ ÛÞzkë,sÊr+äuøõ%¹*hîñ¥Ì 9%p¥*Z»ú{yã3õ´P  @+<IB~,(#ÂÒÚ¸õÖ[`SJÒucÄ¢(B½Í:÷sDpÎÖkrª¯µÞÿ?_}ýõ»·öà N§/ýr9FUçT¬´çsõìqQ´xÒ  D`Wð8%@c@EÞHWÊaÏ9ôº#Ñê1D`U@ DDæk×xÿ½÷ÄÎf3)ËR9ÅC×usVÑùfAz½Fò¢ã; ­Vý~÷äùó_Çã¸ÍMY'm»i0FU²Î3QÔu«ÿ? ååE2R?
+ d-@ÍxDÈPZb&8åú¡"+`¸"mí=|h»»jëºÖ<>bIÎ¹I ÈõcBHyb³^51yZÃñøo={÷½®u{{ÓéôéVÛöY¤´½Ä¼
+Ý|PYEÄ7(OrxTuuU Ì4ç}ÎgHß{W8yec EÀXQUÚ½½ùõ÷ÞS°Vl¥ª*^¥Ä¬ÞjÖæ4ÆbQáz:CyhupzzúÙåbq8¾u«¼:??½~ýÒ"È"#¢UÑË¡ÿýKAsß¾¼ËÀZ ¨
+Qdåõº²YÖY¡GçºêÝw£½=Îf²ÆþFÏÞÎi¸ºß&¯¡qAòÊ²4EQØ¢(¬_]¥µ¶·µµuüâõë#êõ6äúu9÷
+ ÈL£®FD 5®1*ªÊ¹È$UeM D41ë®ÆWÐë!¢ê¿ÍÆ¨)¬ê¨1íÑhôËÛ®ªôìü¼¶ñIaÍ¤,Ë¿Ì5½\°òÔs`Y½÷8 |~|~¾ëÁáÅt:§ï¾û®LÉ:f"YYv­$nk.°òZ.n°ö|Rë~Ds¾sÆëôÈ·Á ©5óªúº|÷]·±·M|zv6³ÉDó
+y"¢}Q¼ú«:\­AFFï=zïÉ9gsèÃ¼þò/¾Â¢xX=~,/»Ú;=}Õ_,"%` WFV  1ÈÐuÀÕÆ­ÓbÞTw"H+6©Âè×wd£´ª+1ÅQØÝ½ß¸Ñ+æìâ",fn¢ÜâR!8çªÚXk) å%CÌdI²ÆOÎ9ÌÚ;ä§ôÞýû_¼:>þèßøjtýz<{fÚ¯¿~18=mª®ÛRÕãÀUeÏýß þzÍnV©°ÊoÄ§Ußx@D4óDJÆL»WîæÍÅöÁA_Tgggÿï'töüü\¬µlùPãW:}ÊÃ5GxÃ(³;cEa¢à¢(L6 ÙØØ|÷Ýw¿8½¸øÑ[·nÍím>ÝÙ	/^ÔO\øº[kûàkË ®cD	\¨PJª+Z¾æ$Êæ²*¤HAUp]¿ ¼ ©(^êÖÖWvgÆ»»¦éºKxõÙgEwøS]×!ßa¥cÑê¾Ì«íë;°   ß^Î9ã½7Î9É""Ý½{÷?<}ú´·±±±¿½¹ÉûwïòpoÏoo·ù"©],
+Lq>Gªk UUBX-_Ä¨"¢iE×AVüd%Ì")	0 rGõÕZ«ê?¦ïÐûúÁ¢íºW¾,EQ¨].¼^kíºNsì½1Fêºn}2æv·&Eo®<Í]×7OÆ!ïü|òÉ»7nÜÀþh¤ÕãÇQTÂt
+<¡NÁ 6XUfMM#£¤¶©kUfÐWäHtðDRbKÄ*ÒMbüì§7ë½wãÆx´±1wMsêÎÏÓ;wÐ>þ\sPUe©MÓpYf6QUUBÀõ)x1ßmF9ìIU2}Í"¸~ýú¬ëºW'''óóóÍÝÝÝb{<¦A¿O½^È94DHÆ»ysky¹TªkÅ4µ­r"ÌI!¨¦¤Ýló×¯¡ùî;M£È	qY·íÕ8??û¯)Åñx?ÍêÝ¸ñK"
+ °ÜÞÞß¹sþÂ5ý.    IEND®B`
\ ÷ ËÏÎÃÅ ÆÁÊÌÁ ÎÅÔ ÎÏ×ÏÊ ÓÔÒÏËÉ
diff -Naur ../work/WindowMaker-0.91.0/WINGs/configuration.c wm/WINGs/configuration.c
--- ../work/WindowMaker-0.91.0/WINGs/configuration.c	2004-10-22 12:31:21.000000000 +0400
+++ wm/WINGs/configuration.c	2004-11-04 12:10:09.000000000 +0300
@@ -53,7 +53,6 @@
     if (defaults) {
         char *buttonName;
         unsigned button;
-        char *str;
 
         WINGsConfiguration.systemFont =
             WMGetUDStringForKey(defaults, "SystemFont");
diff -Naur ../work/WindowMaker-0.91.0/WINGs/dragcommon.c wm/WINGs/dragcommon.c
--- ../work/WindowMaker-0.91.0/WINGs/dragcommon.c	2004-10-12 22:29:18.000000000 +0400
+++ wm/WINGs/dragcommon.c	2004-11-04 12:10:09.000000000 +0300
@@ -1,4 +1,5 @@
-/* #include <X11/Xatom.h> */
+
+
 #include "WINGsP.h"
 
 #define VERSION_INFO(dragInfo) dragInfo->protocolVersion
diff -Naur ../work/WindowMaker-0.91.0/WINGs/dragdestination.c wm/WINGs/dragdestination.c
--- ../work/WindowMaker-0.91.0/WINGs/dragdestination.c	2004-10-12 22:29:31.000000000 +0400
+++ wm/WINGs/dragdestination.c	2004-11-04 12:10:09.000000000 +0300
@@ -1,5 +1,7 @@
-#include <X11/Xatom.h>
+
+
 #include "WINGsP.h"
+#include <X11/Xatom.h>
 
 #define XDND_SOURCE_RESPONSE_MAX_DELAY 3000
 
diff -Naur ../work/WindowMaker-0.91.0/WINGs/dragsource.c wm/WINGs/dragsource.c
--- ../work/WindowMaker-0.91.0/WINGs/dragsource.c	2004-10-23 06:46:09.000000000 +0400
+++ wm/WINGs/dragsource.c	2004-11-04 12:10:09.000000000 +0300
@@ -1,4 +1,7 @@
-#include "../src/config.h"
+
+
+#include "wconfig.h"
+#include "WINGsP.h"
 
 #include <X11/Xatom.h>
 #include <X11/cursorfont.h>
@@ -6,7 +9,6 @@
 #include <X11/extensions/shape.h>
 #endif
 
-#include "WINGsP.h"
 
 
 #define XDND_DESTINATION_RESPONSE_MAX_DELAY 10000
diff -Naur ../work/WindowMaker-0.91.0/WINGs/handlers.c wm/WINGs/handlers.c
--- ../work/WindowMaker-0.91.0/WINGs/handlers.c	2004-10-12 22:30:29.000000000 +0400
+++ wm/WINGs/handlers.c	2004-11-04 12:10:09.000000000 +0300
@@ -3,10 +3,9 @@
  * WINGs internal handlers: timer, idle and input handlers
  */
 
+#include "wconfig.h"
 #include "WINGsP.h"
 
-#include "../src/config.h"
-
 #include <sys/types.h>
 #include <unistd.h>
 
diff -Naur ../work/WindowMaker-0.91.0/WINGs/memory.c wm/WINGs/memory.c
--- ../work/WindowMaker-0.91.0/WINGs/memory.c	2004-10-13 00:41:49.000000000 +0400
+++ wm/WINGs/memory.c	2004-11-04 12:10:09.000000000 +0300
@@ -19,8 +19,7 @@
  */
 
 
-#include "../src/config.h"
-
+#include "wconfig.h"
 #include "WUtil.h"
 
 #include <stdlib.h>
diff -Naur ../work/WindowMaker-0.91.0/WINGs/po/Makefile.am wm/WINGs/po/Makefile.am
--- ../work/WindowMaker-0.91.0/WINGs/po/Makefile.am	2004-10-26 07:17:12.000000000 +0400
+++ wm/WINGs/po/Makefile.am	2004-10-27 10:00:10.000000000 +0400
@@ -31,7 +31,7 @@
 
 WINGs.pot: $(POTFILES)
 	xgettext --default-domain=WINGs \
-	--add-comments --keyword=_ $(POTFILES)
+	--add-comments --keyword=_ --keyword=N_ $(POTFILES)
 	if cmp -s WINGs.po WINGs.pot; then \
 	    rm -f WINGs.po; \
 	else \
diff -Naur ../work/WindowMaker-0.91.0/WINGs/Tests/wtest.c wm/WINGs/Tests/wtest.c
--- ../work/WindowMaker-0.91.0/WINGs/Tests/wtest.c	2004-10-22 04:02:17.000000000 +0400
+++ wm/WINGs/Tests/wtest.c	2004-11-04 12:10:11.000000000 +0300
@@ -1047,6 +1047,8 @@
 
     testColorPanel(scr);
 
+    testTextField(scr);
+
 #if 0
 
     testBox(scr);
diff -Naur ../work/WindowMaker-0.91.0/WINGs/usleep.c wm/WINGs/usleep.c
--- ../work/WindowMaker-0.91.0/WINGs/usleep.c	2004-10-12 22:32:36.000000000 +0400
+++ wm/WINGs/usleep.c	2004-11-04 12:10:09.000000000 +0300
@@ -1,6 +1,6 @@
 
 
-#include "../src/config.h"
+#include "wconfig.h"
 
 
 #ifdef HAVE_SYS_TIME_H
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wballoon.c wm/WINGs/wballoon.c
--- ../work/WindowMaker-0.91.0/WINGs/wballoon.c	2004-10-12 22:33:10.000000000 +0400
+++ wm/WINGs/wballoon.c	2004-11-04 12:10:09.000000000 +0300
@@ -1,7 +1,7 @@
 
 
 
-#include "../src/config.h"
+#include "wconfig.h"
 #include "WINGsP.h"
 
 #ifdef SHAPE
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wevent.c wm/WINGs/wevent.c
--- ../work/WindowMaker-0.91.0/WINGs/wevent.c	2004-10-12 22:34:43.000000000 +0400
+++ wm/WINGs/wevent.c	2004-11-04 12:10:09.000000000 +0300
@@ -213,6 +213,10 @@
         return True;
     }
 
+    if (XFilterEvent(event, None) == True) {
+        return False;
+    }
+
     mask = eventMasks[event->xany.type];
 
     window = event->xany.window;
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wfont.c wm/WINGs/wfont.c
--- ../work/WindowMaker-0.91.0/WINGs/wfont.c	2004-10-26 07:23:19.000000000 +0400
+++ wm/WINGs/wfont.c	2004-11-04 12:10:09.000000000 +0300
@@ -1,17 +1,17 @@
 
-#include "wconfig.h"
-
-#include <X11/Xft/Xft.h>
-#include <fontconfig/fontconfig.h>
-
 #include <stdlib.h>
 
+#include "wconfig.h"
+
 #include "WINGsP.h"
 
 #include <wraster.h>
 #include <assert.h>
 #include <X11/Xlocale.h>
 
+#include <X11/Xft/Xft.h>
+#include <fontconfig/fontconfig.h>
+
 
 #define DEFAULT_FONT "sans serif:pixelsize=12"
 
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wfont_noxft.c wm/WINGs/wfont_noxft.c
--- ../work/WindowMaker-0.91.0/WINGs/wfont_noxft.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/WINGs/wfont_noxft.c	2004-10-13 01:28:27.000000000 +0400
@@ -0,0 +1,769 @@
+
+
+#include "wconfig.h"
+
+#ifndef XFT
+
+#include "WINGsP.h"
+
+#include <wraster.h>
+#include <assert.h>
+#include <X11/Xlocale.h>
+
+
+static char *makeFontSetOfSize(char *fontset, int size);
+
+
+/* XLFD pattern matching */
+static char*
+getElementFromXLFD(const char *xlfd, int index)
+{
+    const char *p = xlfd;
+    while (*p != 0) {
+        if (*p == '-' && --index == 0) {
+            const char *end = strchr(p + 1, '-');
+            char *buf;
+            size_t len;
+            if (end == 0) end = p + strlen(p);
+            len = end - (p + 1);
+            buf = wmalloc(len);
+            memcpy(buf, p + 1, len);
+            buf[len] = 0;
+            return buf;
+        }
+        p++;
+    }
+    return strdup("*");
+}
+
+
+/* XLFD pattern matching */
+static char*
+generalizeXLFD(const char *xlfd)
+{
+    char *buf;
+    int len;
+    char *weight = getElementFromXLFD(xlfd, 3);
+    char *slant  = getElementFromXLFD(xlfd, 4);
+    char *pxlsz  = getElementFromXLFD(xlfd, 7);
+
+#define Xstrlen(A) ((A)?strlen(A):0)
+    len = Xstrlen(xlfd)+Xstrlen(weight)+Xstrlen(slant)+Xstrlen(pxlsz)*2+60;
+#undef Xstrlen
+
+    buf = wmalloc(len + 1);
+    snprintf(buf, len + 1, "%s,-*-*-%s-%s-*-*-%s-*-*-*-*-*-*-*,"
+             "-*-*-*-*-*-*-%s-*-*-*-*-*-*-*,*",
+             xlfd, weight, slant, pxlsz, pxlsz);
+
+    wfree(pxlsz);
+    wfree(slant);
+    wfree(weight);
+
+    return buf;
+}
+
+/* XLFD pattern matching */
+static XFontSet
+W_CreateFontSetWithGuess(Display *dpy, char *xlfd, char ***missing,
+                         int *nmissing, char **def_string)
+{
+    XFontSet fs = XCreateFontSet(dpy, xlfd, missing, nmissing, def_string);
+
+    if (fs != NULL && *nmissing == 0) return fs;
+
+    /* for non-iso8859-1 language and iso8859-1 specification
+     (this fontset is only for pattern analysis) */
+    if (fs == NULL) {
+        if (*nmissing != 0) XFreeStringList(*missing);
+        setlocale(LC_CTYPE, "C");
+        fs = XCreateFontSet(dpy, xlfd, missing, nmissing, def_string);
+        setlocale(LC_CTYPE, "");
+    }
+
+    /* make XLFD font name for pattern analysis */
+    if (fs != NULL) {
+        XFontStruct **fontstructs;
+        char **fontnames;
+        if (XFontsOfFontSet(fs, &fontstructs, &fontnames) > 0)
+            xlfd = fontnames[0];
+    }
+
+    xlfd = generalizeXLFD(xlfd);
+
+    if (*nmissing != 0) XFreeStringList(*missing);
+    if (fs != NULL) XFreeFontSet(dpy, fs);
+
+    fs = XCreateFontSet(dpy, xlfd, missing, nmissing, def_string);
+
+    wfree(xlfd);
+    return fs;
+}
+
+
+static char*
+xlfdFromFontName(char *fontName)
+{
+    char *systemFont, *boldSystemFont;
+    char *font;
+    int size;
+
+    systemFont = WINGsConfiguration.systemFont;
+    boldSystemFont = WINGsConfiguration.boldSystemFont;
+
+    size = WINGsConfiguration.defaultFontSize;
+
+    if (strcmp(fontName, "SystemFont")==0) {
+        font = systemFont;
+    } else if (strncmp(fontName, "SystemFont-", 11)==0) {
+        font = systemFont;
+        if (sscanf(&fontName[11], "%i", &size)!=1) {
+            size = WINGsConfiguration.defaultFontSize;
+            wwarning(_("Invalid size specification '%s' in %s. "
+                       "Using default %d\n"), &fontName[11], fontName, size);
+        }
+    } else if (strcmp(fontName, "BoldSystemFont")==0) {
+        font = boldSystemFont;
+    } else if (strncmp(fontName, "BoldSystemFont-", 15)==0) {
+        font = boldSystemFont;
+        if (sscanf(&fontName[15], "%i", &size)!=1) {
+            size = WINGsConfiguration.defaultFontSize;
+            wwarning(_("Invalid size specification '%s' in %s. "
+                       "Using default %d\n"), &fontName[15], fontName, size);
+        }
+    } else {
+        font = NULL;
+    }
+
+    return (font!=NULL ? makeFontSetOfSize(font, size) : wstrdup(fontName));
+}
+
+
+WMFont*
+WMCreateFontSet(WMScreen *scrPtr, char *fontName)
+{
+    WMFont *font;
+    Display *display = scrPtr->display;
+    char **missing;
+    int nmissing = 0;
+    char *defaultString;
+    char *fname;
+    XFontSetExtents *extents;
+
+    fname = xlfdFromFontName(fontName);
+
+    font = WMHashGet(scrPtr->fontSetCache, fname);
+    if (font) {
+        WMRetainFont(font);
+        wfree(fname);
+        return font;
+    }
+
+    font = wmalloc(sizeof(WMFont));
+    memset(font, 0, sizeof(WMFont));
+
+    font->notFontSet = 0;
+
+    font->screen = scrPtr;
+
+    font->font.set = W_CreateFontSetWithGuess(display, fname, &missing,
+                                              &nmissing, &defaultString);
+    if (nmissing > 0 && font->font.set) {
+        int i;
+
+        wwarning(_("the following character sets are missing in %s:"), fname);
+        for (i = 0; i < nmissing; i++) {
+            wwarning(missing[i]);
+        }
+        XFreeStringList(missing);
+        if (defaultString)
+            wwarning(_("the string \"%s\" will be used in place of any characters from those sets."),
+                     defaultString);
+    }
+    if (!font->font.set) {
+        wfree(font);
+        wfree(fname);
+        return NULL;
+    }
+
+    extents = XExtentsOfFontSet(font->font.set);
+
+    font->height = extents->max_logical_extent.height;
+    font->y = font->height - (font->height + extents->max_logical_extent.y);
+
+    font->refCount = 1;
+
+    font->name = fname;
+
+    assert(WMHashInsert(scrPtr->fontSetCache, font->name, font)==NULL);
+
+    return font;
+}
+
+
+
+WMFont*
+WMCreateNormalFont(WMScreen *scrPtr, char *fontName)
+{
+    WMFont *font;
+    Display *display = scrPtr->display;
+    char *fname, *ptr;
+
+    fontName = xlfdFromFontName(fontName);
+
+    if ((ptr = strchr(fontName, ','))) {
+        fname = wmalloc(ptr - fontName + 1);
+        strncpy(fname, fontName, ptr - fontName);
+        fname[ptr - fontName] = 0;
+    } else {
+        fname = wstrdup(fontName);
+    }
+
+    wfree(fontName);
+
+    font = WMHashGet(scrPtr->fontCache, fname);
+    if (font) {
+        WMRetainFont(font);
+        wfree(fname);
+        return font;
+    }
+
+    font = wmalloc(sizeof(WMFont));
+    memset(font, 0, sizeof(WMFont));
+
+    font->notFontSet = 1;
+
+    font->screen = scrPtr;
+
+    font->font.normal = XLoadQueryFont(display, fname);
+    if (!font->font.normal) {
+        wfree(font);
+        wfree(fname);
+        return NULL;
+    }
+    font->height = font->font.normal->ascent+font->font.normal->descent;
+    font->y = font->font.normal->ascent;
+
+    font->refCount = 1;
+
+    font->name = fname;
+
+    assert(WMHashInsert(scrPtr->fontCache, font->name, font)==NULL);
+
+    return font;
+}
+
+
+WMFont*
+WMCreateFont(WMScreen *scrPtr, char *fontName)
+{
+    return WMCreateFontWithFlags(scrPtr, fontName, WFDefaultFont);
+}
+
+
+WMFont*
+WMCreateFontWithFlags(WMScreen *scrPtr, char *fontName, WMFontFlags flags)
+{
+    Bool multiByte = scrPtr->useMultiByte;
+    WMFont *font;
+
+    if (flags & WFFontSet) {
+        multiByte = True;
+    } else if (flags & WFNormalFont) {
+        multiByte = False;
+    }
+
+    if (multiByte) {
+        font = WMCreateFontSet(scrPtr, fontName);
+    } else {
+        font = WMCreateNormalFont(scrPtr, fontName);
+    }
+
+    return font;
+}
+
+
+WMFont*
+WMRetainFont(WMFont *font)
+{
+    wassertrv(font!=NULL, NULL);
+
+    font->refCount++;
+
+    return font;
+}
+
+
+void
+WMReleaseFont(WMFont *font)
+{
+    wassertr(font!=NULL);
+
+    font->refCount--;
+    if (font->refCount < 1) {
+        if (font->notFontSet) {
+            XFreeFont(font->screen->display, font->font.normal);
+        } else {
+            XFreeFontSet(font->screen->display, font->font.set);
+        }
+
+        if (font->name) {
+            if (font->notFontSet) {
+                WMHashRemove(font->screen->fontCache, font->name);
+            } else {
+                WMHashRemove(font->screen->fontSetCache, font->name);
+            }
+            wfree(font->name);
+        }
+        wfree(font);
+    }
+}
+
+
+Bool
+WMIsAntialiasingEnabled(WMScreen *scrPtr)
+{
+    return False;
+}
+
+
+unsigned int
+WMFontHeight(WMFont *font)
+{
+    wassertrv(font!=NULL, 0);
+
+    return font->height;
+}
+
+
+char*
+WMGetFontName(WMFont *font)
+{
+    wassertrv(font!=NULL, NULL);
+
+    return font->name;
+}
+
+
+WMFont*
+WMDefaultSystemFont(WMScreen *scrPtr)
+{
+    return WMRetainFont(scrPtr->normalFont);
+}
+
+
+WMFont*
+WMDefaultBoldSystemFont(WMScreen *scrPtr)
+{
+    return WMRetainFont(scrPtr->boldFont);
+}
+
+
+static WMFont*
+makeSystemFontOfSize(WMScreen *scrPtr, int size, Bool bold)
+{
+    WMFont *font;
+    char *fontSpec;
+
+#define WConf WINGsConfiguration
+    if (bold) {
+        fontSpec = makeFontSetOfSize(WConf.boldSystemFont, size);
+    } else {
+        fontSpec = makeFontSetOfSize(WConf.systemFont, size);
+    }
+#undef WConf
+
+    if (scrPtr->useMultiByte) {
+        font = WMCreateFontSet(scrPtr, fontSpec);
+    } else {
+        font = WMCreateNormalFont(scrPtr, fontSpec);
+    }
+
+    if (!font) {
+        if (scrPtr->useMultiByte) {
+            wwarning(_("could not load font set %s. Trying fixed."), fontSpec);
+            font = WMCreateFontSet(scrPtr, "fixed");
+            if (!font) {
+                font = WMCreateFontSet(scrPtr, "-*-fixed-medium-r-normal-*-14-*-*-*-*-*-*-*");
+            }
+        } else {
+            wwarning(_("could not load font %s. Trying fixed."), fontSpec);
+            font = WMCreateNormalFont(scrPtr, "fixed");
+        }
+        if (!font) {
+            wwarning(_("could not load fixed font!"));
+            wfree(fontSpec);
+            return NULL;
+        }
+    }
+    wfree(fontSpec);
+
+    return font;
+}
+
+
+WMFont*
+WMSystemFontOfSize(WMScreen *scrPtr, int size)
+{
+    return makeSystemFontOfSize(scrPtr, size, False);
+}
+
+
+WMFont*
+WMBoldSystemFontOfSize(WMScreen *scrPtr, int size)
+{
+    return makeSystemFontOfSize(scrPtr, size, True);
+}
+
+
+XFontSet
+WMGetFontFontSet(WMFont *font)
+{
+    wassertrv(font!=NULL, NULL);
+
+    if (!font->notFontSet && !font->antialiased)
+        return font->font.set;
+
+    return NULL;
+}
+
+
+int
+WMWidthOfString(WMFont *font, char *text, int length)
+{
+    wassertrv(font!=NULL, 0);
+    wassertrv(text!=NULL, 0);
+
+    if (font->notFontSet) {
+        return XTextWidth(font->font.normal, text, length);
+    } else {
+        XRectangle rect;
+        XRectangle AIXsucks;
+
+        XmbTextExtents(font->font.set, text, length, &AIXsucks, &rect);
+
+        return rect.width;
+    }
+}
+
+
+
+void
+WMDrawString(WMScreen *scr, Drawable d, WMColor *color, WMFont *font,
+             int x, int y, char *text, int length)
+{
+    wassertr(font!=NULL);
+
+    if (font->notFontSet) {
+        XSetFont(scr->display, scr->drawStringGC, font->font.normal->fid);
+        XSetForeground(scr->display, scr->drawStringGC, W_PIXEL(color));
+        XDrawString(scr->display, d, scr->drawStringGC, x, y + font->y,
+                    text, length);
+    } else {
+        XSetForeground(scr->display, scr->drawStringGC, W_PIXEL(color));
+        XmbDrawString(scr->display, d, font->font.set, scr->drawStringGC,
+                      x, y + font->y, text, length);
+    }
+}
+
+
+void
+WMDrawImageString(WMScreen *scr, Drawable d, WMColor *color, WMColor *background,
+                  WMFont *font, int x, int y, char *text, int length)
+{
+    wassertr(font!=NULL);
+
+    if (font->notFontSet) {
+        XSetForeground(scr->display, scr->drawImStringGC, W_PIXEL(color));
+        XSetBackground(scr->display, scr->drawImStringGC, W_PIXEL(background));
+        XSetFont(scr->display, scr->drawImStringGC, font->font.normal->fid);
+        XDrawImageString(scr->display, d, scr->drawImStringGC,
+                         x, y + font->y, text, length);
+    } else {
+        XSetForeground(scr->display, scr->drawImStringGC, W_PIXEL(color));
+        XSetBackground(scr->display, scr->drawImStringGC, W_PIXEL(background));
+        XmbDrawImageString(scr->display, d, font->font.set, scr->drawImStringGC,
+                           x, y + font->y, text, length);
+    }
+}
+
+
+
+
+static char*
+makeFontSetOfSize(char *fontset, int size)
+{
+    char font[300], *f;
+    char *newfs = NULL;
+    char *ptr;
+
+    do {
+        char *tmp;
+        int end;
+
+
+        f = fontset;
+        ptr = strchr(fontset, ',');
+        if (ptr) {
+            int count = ptr-fontset;
+
+            if (count > 255) {
+                wwarning(_("font description %s is too large."), fontset);
+            } else {
+                memcpy(font, fontset, count);
+                font[count] = 0;
+                f = (char*)font;
+            }
+        }
+
+        if (newfs)
+            end = strlen(newfs);
+        else
+            end = 0;
+
+        tmp = wmalloc(end + strlen(f) + 8);
+        if (end != 0) {
+            sprintf(tmp, "%s,", newfs);
+            sprintf(tmp + end + 1, f, size);
+        } else {
+            sprintf(tmp + end, f, size);
+        }
+
+        if (newfs)
+            wfree(newfs);
+        newfs = tmp;
+
+        fontset = ptr+1;
+    } while (ptr!=NULL);
+
+    return newfs;
+}
+
+
+#define FONT_PROPS 14
+
+typedef struct {
+    char *props[FONT_PROPS];
+} W_FontAttributes;
+
+
+static void
+changeFontProp(char *buf, char *newprop, int position)
+{
+    char buf2[512];
+    char *ptr, *pptr, *rptr;
+    int count;
+
+    if (buf[0]!='-') {
+        /* // remove warning later. or maybe not */
+        wwarning(_("Invalid font specification: '%s'\n"), buf);
+        return;
+    }
+
+    ptr = pptr = rptr = buf;
+    count = 0;
+    while (*ptr && *ptr!=',') {
+        if (*ptr == '-') {
+            count++;
+            if (count-1==position+1) {
+                rptr = ptr;
+                break;
+            }
+            if (count-1==position) {
+                pptr = ptr+1;
+            }
+        }
+        ptr++;
+    }
+    if (position==FONT_PROPS-1) {
+        rptr = ptr;
+    }
+
+    *pptr = 0;
+    snprintf(buf2, 512, "%s%s%s", buf, newprop, rptr);
+    strcpy(buf, buf2);
+}
+
+
+static WMArray*
+getOptions(char *options)
+{
+    char *ptr, *ptr2, *str;
+    WMArray *result;
+    int count;
+
+    result = WMCreateArrayWithDestructor(2, (WMFreeDataProc*)wfree);
+
+    ptr = options;
+    while (1) {
+        ptr2 = strchr(ptr, ',');
+        if (!ptr2) {
+            WMAddToArray(result, wstrdup(ptr));
+            break;
+        } else {
+            count = ptr2 - ptr;
+            str = wmalloc(count+1);
+            memcpy(str, ptr, count);
+            str[count] = 0;
+            WMAddToArray(result, str);
+            ptr = ptr2 + 1;
+        }
+    }
+
+    return result;
+}
+
+
+#define WFAUnchanged (NULL)
+/* Struct for font change operations */
+typedef struct WMFontAttributes {
+    char *foundry;
+    char *family;
+    char *weight;
+    char *slant;
+    char *setWidth;
+    char *addStyle;
+    char *pixelSize;
+    char *pointSize;
+    char *resolutionX;
+    char *resolutionY;
+    char *spacing;
+    char *averageWidth;
+    char *registry;
+    char *encoding;
+} WMFontAttributes;
+
+WMFont*
+WMCopyFontWithChanges(WMScreen *scrPtr, WMFont *font,
+                      const WMFontAttributes *changes)
+{
+    int index[FONT_PROPS], count[FONT_PROPS];
+    int totalProps, i, j, carry;
+    char fname[512];
+    WMFontFlags fFlags;
+    WMBag *props;
+    WMArray *options;
+    WMFont *result;
+    char *prop;
+
+    snprintf(fname, 512, "%s", font->name);
+
+    fFlags = (font->antialiased ? WFAntialiased : WFNotAntialiased);
+    fFlags |= (font->notFontSet ? WFNormalFont : WFFontSet);
+
+    props = WMCreateBagWithDestructor(1, (WMFreeDataProc*)WMFreeArray);
+
+    totalProps = 0;
+    for (i=0; i<FONT_PROPS; i++) {
+        prop = ((W_FontAttributes*)changes)->props[i];
+        count[i] = index[i] = 0;
+        if (!prop) {
+            /* No change for this property */
+            continue;
+        } else if (strchr(prop, ',')==NULL) {
+            /* Simple option */
+            changeFontProp(fname, prop, i);
+        } else {
+            /* Option with fallback alternatives */
+            if ((changes==WFAEmphasized || changes==WFABoldEmphasized) &&
+                font->antialiased && strcmp(prop, "o,i")==0) {
+                options = getOptions("i,o");
+            } else {
+                options = getOptions(prop);
+            }
+            WMInsertInBag(props, i, options);
+            count[i] = WMGetArrayItemCount(options);
+            if (totalProps==0)
+                totalProps = 1;
+            totalProps = totalProps * count[i];
+        }
+    }
+
+    if (totalProps == 0) {
+        /* No options with fallback alternatives at all */
+        WMFreeBag(props);
+        return WMCreateFontWithFlags(scrPtr, fname, fFlags);
+    }
+
+    for (i=0; i<totalProps; i++) {
+        for (j=0; j<FONT_PROPS; j++) {
+            if (count[j]!=0) {
+                options = WMGetFromBag(props, j);
+                prop = WMGetFromArray(options, index[j]);
+                if (prop) {
+                    changeFontProp(fname, prop, j);
+                }
+            }
+        }
+        result = WMCreateFontWithFlags(scrPtr, fname, fFlags);
+        if (result) {
+            WMFreeBag(props);
+            return result;
+        }
+        for (j=FONT_PROPS-1, carry=1; j>=0; j--) {
+            if (count[j]!=0) {
+                index[j] += carry;
+                carry = (index[j]==count[j]);
+                index[j] %= count[j];
+            }
+        }
+    }
+
+    WMFreeBag(props);
+
+    return NULL;
+}
+
+// should WFANormal also set "normal" or leave it alone?
+static const WMFontAttributes W_FANormal = {
+    WFAUnchanged, WFAUnchanged, "medium,normal,regular", "r", "normal",
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged
+};
+
+
+static const WMFontAttributes W_FABold = {
+    WFAUnchanged, WFAUnchanged, "bold", WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged
+};
+
+
+static const WMFontAttributes W_FANotBold = {
+    WFAUnchanged, WFAUnchanged, "medium,normal,regular", WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged
+};
+
+
+static const WMFontAttributes W_FAEmphasized = {
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, "o,i",
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged
+};
+
+
+static const WMFontAttributes W_FANotEmphasized = {
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, "r",
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged
+};
+
+
+static const WMFontAttributes W_FABoldEmphasized = {
+    WFAUnchanged, WFAUnchanged, "bold", "o,i",
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged,
+    WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged, WFAUnchanged
+};
+
+
+const WMFontAttributes *WFANormal         = &W_FANormal;
+const WMFontAttributes *WFABold           = &W_FABold;
+const WMFontAttributes *WFANotBold        = &W_FANotBold;
+const WMFontAttributes *WFAEmphasized     = &W_FAEmphasized;
+const WMFontAttributes *WFANotEmphasized  = &W_FANotEmphasized;
+const WMFontAttributes *WFABoldEmphasized = &W_FABoldEmphasized;
+
+
+#endif
+
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wfont_wchar.c wm/WINGs/wfont_wchar.c
--- ../work/WindowMaker-0.91.0/WINGs/wfont_wchar.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/WINGs/wfont_wchar.c	2004-10-12 05:34:32.000000000 +0400
@@ -0,0 +1,599 @@
+
+#include "wconfig.h"
+
+#ifdef XFT
+
+#include <X11/Xft/Xft.h>
+#include <fontconfig/fontconfig.h>
+
+#if defined(HAVE_MBSNRTOWCS)
+# define __USE_GNU
+#endif
+
+#ifdef HAVE_WCHAR_H
+# include <wchar.h>
+#endif
+
+#include <stdlib.h>
+
+#include "WINGsP.h"
+
+#include <wraster.h>
+#include <assert.h>
+#include <X11/Xlocale.h>
+
+
+// && defined(HAVE_MBSTATE_T___COUNT)
+// in configure.ac use AC_CHECK_MEMBER(struct mbstate_t.__count,
+//                                     have=1, have=0, [#include <wchar.h>])
+#if defined(HAVE_MBSNRTOWCS)
+
+static size_t
+wmbsnrtowcs(wchar_t *dest, const char **src, size_t nbytes, size_t len)
+{
+    mbstate_t ps;
+    size_t n;
+
+    memset(&ps, 0, sizeof(mbstate_t));
+    n = mbsnrtowcs(dest, src, nbytes, len, &ps);
+    if (n!=(size_t)-1 && *src) {
+        *src -= ps.__count;
+    }
+
+    return n;
+}
+
+#elif defined(HAVE_MBRTOWC)
+
+// This is 8 times slower than the version above.
+static size_t
+wmbsnrtowcs(wchar_t *dest, const char **src, size_t nbytes, size_t len)
+{
+    mbstate_t ps;
+    const char *ptr;
+    size_t n;
+    int nb;
+
+    if (nbytes==0)
+        return 0;
+
+    memset(&ps, 0, sizeof(mbstate_t));
+
+    if (dest == NULL) {
+        for (ptr=*src, n=0; nbytes>0; n++) {
+            nb = mbrtowc(NULL, ptr, nbytes, &ps);
+            if (nb == -1) {
+                return ((size_t)-1);
+            } else if (nb==0 || nb==-2) {
+                return n;
+            }
+            ptr += nb;
+            nbytes -= nb;
+        }
+    }
+
+    for (ptr=*src, n=0; n<len && nbytes>0; n++, dest++) {
+        nb = mbrtowc(dest, ptr, nbytes, &ps);
+        if (nb == -2) {
+            *src = ptr;
+            return n;
+        } else if (nb == -1) {
+            *src = ptr;
+            return ((size_t)-1);
+        } else if (nb == 0) {
+            *src = NULL;
+            return n;
+        }
+        ptr += nb;
+        nbytes -= nb;
+    }
+
+    *src = ptr;
+    return n;
+}
+
+#else
+
+// Not only 8 times slower than the version based on mbsnrtowcs
+// but also this version is not thread safe nor reentrant
+
+static size_t
+wmbsnrtowcs(wchar_t *dest, const char **src, size_t nbytes, size_t len)
+{
+    const char *ptr;
+    size_t n;
+    int nb;
+
+    if (nbytes==0)
+        return 0;
+
+    mbtowc(NULL, NULL, 0); /* reset shift state */
+
+    if (dest == NULL) {
+        for (ptr=*src, n=0; nbytes>0; n++) {
+            nb = mbtowc(NULL, ptr, nbytes);
+            if (nb == -1) {
+                mbtowc(NULL, NULL, 0);
+                nb = mbtowc(NULL, ptr, strlen(ptr));
+                return (nb == -1 ? (size_t)-1 : n);
+            } else if (nb==0) {
+                return n;
+            }
+            ptr += nb;
+            nbytes -= nb;
+        }
+    }
+
+    for (ptr=*src, n=0; n<len && nbytes>0; n++, dest++) {
+        nb = mbtowc(dest, ptr, nbytes);
+        if (nb == -1) {
+            mbtowc(NULL, NULL, 0);
+            nb = mbtowc(NULL, ptr, strlen(ptr));
+            *src = ptr;
+            return (nb == -1 ? (size_t)-1 : n);
+        } else if (nb == 0) {
+            *src = NULL;
+            return n;
+        }
+        ptr += nb;
+        nbytes -= nb;
+    }
+
+    *src = ptr;
+    return n;
+}
+
+#endif
+
+
+#define DEFAULT_SIZE 12
+
+static char*
+fixXLFD(char *xlfd, int size)
+{
+    char *fname, *ptr;
+
+    fname = wmalloc(strlen(xlfd) + 20);
+    if (strstr(xlfd, "%d")!=NULL)
+        sprintf(fname, xlfd, size ? size : DEFAULT_SIZE);
+    else
+        strcpy(fname, xlfd);
+
+    if ((ptr = strchr(fname, ','))) {
+        *ptr = 0;
+    }
+
+    return fname;
+}
+
+
+static Bool
+hasProperty(FcPattern *pattern, const char *property)
+{
+    FcValue val;
+
+    if (FcPatternGet(pattern, property, 0, &val)==FcResultMatch) {
+        return True;
+    }
+
+    return False;
+}
+
+
+static Bool
+hasPropertyWithStringValue(FcPattern *pattern, const char *object, char *value)
+{
+    FcChar8 *str;
+    int id;
+
+    if (!value || value[0]==0)
+        return True;
+
+    id = 0;
+    while (FcPatternGetString(pattern, object, id, &str)==FcResultMatch) {
+        if (strcasecmp(value, (char*)str) == 0) {
+            return True;
+        }
+        id++;
+    }
+
+    return False;
+}
+
+
+// also handle an xlfd with %d for size?
+static char*
+makeFontOfSize(char *font, int size, char *fallback)
+{
+    FcPattern *pattern;
+    char *result;
+
+    if (font[0]=='-') {
+        char *fname;
+
+        fname = fixXLFD(font, size);
+        pattern = XftXlfdParse(fname, False, False);
+        wfree(fname);
+    } else {
+        pattern = FcNameParse(font);
+    }
+
+    //FcPatternPrint(pattern);
+    if (size > 0) {
+        FcPatternDel(pattern, "pixelsize");
+        FcPatternAddDouble(pattern, "pixelsize", (double)size);
+    } else if (size==0 && !hasProperty(pattern, "size") &&
+               !hasProperty(pattern, "pixelsize")) {
+        FcPatternAddDouble(pattern, "pixelsize", (double)DEFAULT_SIZE);
+    }
+
+    if (fallback && !hasPropertyWithStringValue(pattern, "family", fallback)) {
+        FcPatternAddString(pattern, "family", fallback);
+    }
+
+    result = FcNameUnparse(pattern);
+    FcPatternDestroy(pattern);
+
+    return result;
+}
+
+
+WMFont*
+WMCreateFont(WMScreen *scrPtr, char *fontName)
+{
+    WMFont *font;
+    Display *display = scrPtr->display;
+    char *fname, *ptr;
+
+    /* This is for back-compat (to allow reading of old xlfd descriptions) */
+    if (fontName[0]=='-' && (ptr = strchr(fontName, ','))) {
+        // warn for deprecation
+        fname = wmalloc(ptr - fontName + 1);
+        strncpy(fname, fontName, ptr - fontName);
+        fname[ptr - fontName] = 0;
+    } else {
+        fname = wstrdup(fontName);
+    }
+
+    font = WMHashGet(scrPtr->fontCache, fname);
+    if (font) {
+        WMRetainFont(font);
+        wfree(fname);
+        return font;
+    }
+
+    font = wmalloc(sizeof(WMFont));
+    memset(font, 0, sizeof(WMFont));
+
+    font->screen = scrPtr;
+
+    // remove
+    printf("WMCreateFont: %s\n", fname);
+
+    if (fname[0] == '-') {
+        // Backward compat thing. Remove in a later version
+        font->font = XftFontOpenXlfd(display, scrPtr->screen, fname);
+    } else {
+        font->font = XftFontOpenName(display, scrPtr->screen, fname);
+    }
+    if (!font->font) {
+        wfree(font);
+        wfree(fname);
+        return NULL;
+    }
+    font->height = font->font->ascent+font->font->descent;
+    font->y = font->font->ascent;
+
+    font->refCount = 1;
+
+    font->name = fname;
+
+    assert(WMHashInsert(scrPtr->fontCache, font->name, font)==NULL);
+
+    return font;
+}
+
+
+WMFont*
+WMRetainFont(WMFont *font)
+{
+    wassertrv(font!=NULL, NULL);
+
+    font->refCount++;
+
+    return font;
+}
+
+
+void
+WMReleaseFont(WMFont *font)
+{
+    wassertr(font!=NULL);
+
+    font->refCount--;
+    if (font->refCount < 1) {
+        XftFontClose(font->screen->display, font->font);
+        if (font->name) {
+            WMHashRemove(font->screen->fontCache, font->name);
+            wfree(font->name);
+        }
+        wfree(font);
+    }
+}
+
+
+Bool
+WMIsAntialiasingEnabled(WMScreen *scrPtr)
+{
+    return scrPtr->antialiasedText;
+}
+
+
+unsigned int
+WMFontHeight(WMFont *font)
+{
+    wassertrv(font!=NULL, 0);
+
+    return font->height;
+}
+
+
+char*
+WMGetFontName(WMFont *font)
+{
+    wassertrv(font!=NULL, NULL);
+
+    return font->name;
+}
+
+
+WMFont*
+WMDefaultSystemFont(WMScreen *scrPtr)
+{
+    return WMRetainFont(scrPtr->normalFont);
+}
+
+
+WMFont*
+WMDefaultBoldSystemFont(WMScreen *scrPtr)
+{
+    return WMRetainFont(scrPtr->boldFont);
+}
+
+
+WMFont*
+WMSystemFontOfSize(WMScreen *scrPtr, int size)
+{
+    WMFont *font;
+    char *fontSpec;
+
+    fontSpec = makeFontOfSize(WINGsConfiguration.systemFont, size, "sans");
+
+    font = WMCreateFont(scrPtr, fontSpec);
+
+    if (!font) {
+        wwarning(_("could not load font %s."), fontSpec);
+    }
+
+    wfree(fontSpec);
+
+    return font;
+}
+
+
+WMFont*
+WMBoldSystemFontOfSize(WMScreen *scrPtr, int size)
+{
+    WMFont *font;
+    char *fontSpec;
+
+    fontSpec = makeFontOfSize(WINGsConfiguration.boldSystemFont, size, "sans");
+
+    font = WMCreateFont(scrPtr, fontSpec);
+
+    if (!font) {
+        wwarning(_("could not load font %s."), fontSpec);
+    }
+
+    wfree(fontSpec);
+
+    return font;
+}
+
+
+int
+WMWidthOfString(WMFont *font, char *text, int length)
+{
+    XGlyphInfo extents;
+
+    wassertrv(font!=NULL, 0);
+    wassertrv(text!=NULL, 0);
+
+    if (font->screen->useWideChar) {
+        wchar_t *wtext;
+        const char *mtext;
+        int len;
+
+        wtext = (wchar_t *)wmalloc(sizeof(wchar_t)*(length+1));
+        mtext = text;
+        len = wmbsnrtowcs(wtext, &mtext, length, length);
+        if (len>0) {
+            wtext[len] = L'\0'; /* not really necessary here */
+            XftTextExtents32(font->screen->display, font->font,
+                             (XftChar32 *)wtext, len, &extents);
+        } else {
+            if (len==-1) {
+                wwarning(_("Conversion to widechar failed (possible "
+                           "invalid multibyte sequence): '%s':(pos %d)\n"),
+                         text, mtext-text+1);
+            }
+            extents.xOff = 0;
+        }
+        wfree(wtext);
+    } else if (font->screen->useMultiByte) {
+        XftTextExtentsUtf8(font->screen->display, font->font,
+                           (XftChar8 *)text, length, &extents);
+    } else {
+        XftTextExtents8(font->screen->display, font->font,
+                        (XftChar8 *)text, length, &extents);
+    }
+
+    return extents.xOff; /* don't ask :P */
+}
+
+
+
+void
+WMDrawString(WMScreen *scr, Drawable d, WMColor *color, WMFont *font,
+             int x, int y, char *text, int length)
+{
+    XftColor xftcolor;
+
+    wassertr(font!=NULL);
+
+    xftcolor.color.red = color->color.red;
+    xftcolor.color.green = color->color.green;
+    xftcolor.color.blue = color->color.blue;
+    xftcolor.color.alpha = color->alpha;;
+    xftcolor.pixel = W_PIXEL(color);
+
+    XftDrawChange(scr->xftdraw, d);
+
+    if (font->screen->useWideChar) {
+        wchar_t *wtext;
+        const char *mtext;
+        int len;
+
+        wtext = (wchar_t *)wmalloc(sizeof(wchar_t)*(length+1));
+        mtext = text;
+        len = wmbsnrtowcs(wtext, &mtext, length, length);
+        if (len>0) {
+            XftDrawString32(scr->xftdraw, &xftcolor, font->font,
+                            x, y + font->y, (XftChar32*)wtext, len);
+        } else if (len==-1) {
+            wwarning(_("Conversion to widechar failed (possible invalid "
+                       "multibyte sequence): '%s':(pos %d)\n"),
+                     text, mtext-text+1);
+            /* we can draw normal text, or we can draw as much widechar
+             * text as was already converted until the error. go figure */
+            /*XftDrawString8(scr->xftdraw, &xftcolor, font->font,
+             x, y + font->y, (XftChar8*)text, length);*/
+        }
+        wfree(wtext);
+    } else if (font->screen->useMultiByte) {
+        XftDrawStringUtf8(scr->xftdraw, &xftcolor, font->font,
+                          x, y + font->y, (XftChar8*)text, length);
+    } else {
+        XftDrawString8(scr->xftdraw, &xftcolor, font->font,
+                       x, y + font->y, (XftChar8*)text, length);
+    }
+}
+
+
+void
+WMDrawImageString(WMScreen *scr, Drawable d, WMColor *color, WMColor *background,
+                  WMFont *font, int x, int y, char *text, int length)
+{
+    XftColor textColor;
+    XftColor bgColor;
+
+    wassertr(font!=NULL);
+
+    textColor.color.red = color->color.red;
+    textColor.color.green = color->color.green;
+    textColor.color.blue = color->color.blue;
+    textColor.color.alpha = color->alpha;;
+    textColor.pixel = W_PIXEL(color);
+
+    bgColor.color.red = background->color.red;
+    bgColor.color.green = background->color.green;
+    bgColor.color.blue = background->color.blue;
+    bgColor.color.alpha = background->alpha;;
+    bgColor.pixel = W_PIXEL(background);
+
+    XftDrawChange(scr->xftdraw, d);
+
+    XftDrawRect(scr->xftdraw, &bgColor, x, y,
+                WMWidthOfString(font, text, length),
+                font->height);
+
+    if (font->screen->useWideChar) {
+        wchar_t *wtext;
+        const char *mtext;
+        int len;
+
+        mtext = text;
+        wtext = (wchar_t *)wmalloc(sizeof(wchar_t)*(length+1));
+        len = wmbsnrtowcs(wtext, &mtext, length, length);
+        if (len>0) {
+            XftDrawString32(scr->xftdraw, &textColor, font->font,
+                            x, y + font->y, (XftChar32*)wtext, len);
+        } else if (len==-1) {
+            wwarning(_("Conversion to widechar failed (possible invalid "
+                       "multibyte sequence): '%s':(pos %d)\n"),
+                     text, mtext-text+1);
+            /* we can draw normal text, or we can draw as much widechar
+             * text as was already converted until the error. go figure */
+            /*XftDrawString8(scr->xftdraw, &textColor, font->font,
+             x, y + font->y, (XftChar8*)text, length);*/
+        }
+        wfree(wtext);
+    } else if (font->screen->useMultiByte) {
+        XftDrawStringUtf8(scr->xftdraw, &textColor, font->font,
+                          x, y + font->y, (XftChar8*)text, length);
+    } else {
+        XftDrawString8(scr->xftdraw, &textColor, font->font,
+                       x, y + font->y, (XftChar8*)text, length);
+    }
+}
+
+
+WMFont*
+WMCopyFontWithStyle(WMScreen *scrPtr, WMFont *font, WMFontStyle style)
+{
+    FcPattern *pattern;
+    WMFont *copy;
+    char *name;
+
+    if (!font)
+        return NULL;
+
+    pattern = FcNameParse(WMGetFontName(font));
+    switch (style) {
+    case WFSNormal:
+        FcPatternDel(pattern, "weight");
+        FcPatternDel(pattern, "slant");
+        FcPatternAddString(pattern, "weight", "regular");
+        FcPatternAddString(pattern, "weight", "medium");
+        FcPatternAddString(pattern, "slant", "roman");
+        break;
+    case WFSBold:
+        FcPatternDel(pattern, "weight");
+        FcPatternAddString(pattern, "weight", "bold");
+        break;
+    case WFSEmphasized:
+        FcPatternDel(pattern, "slant");
+        FcPatternAddString(pattern, "slant", "italic");
+        FcPatternAddString(pattern, "slant", "oblique");
+        break;
+    case WFSBoldEmphasized:
+        FcPatternDel(pattern, "weight");
+        FcPatternDel(pattern, "slant");
+        FcPatternAddString(pattern, "weight", "bold");
+        FcPatternAddString(pattern, "slant", "italic");
+        FcPatternAddString(pattern, "slant", "oblique");
+        break;
+    }
+
+    name = FcNameUnparse(pattern);
+    copy = WMCreateFont(scrPtr, name);
+    FcPatternDestroy(pattern);
+    wfree(name);
+
+    return copy;
+}
+
+
+#endif /* XFT */
+
+
diff -Naur ../work/WindowMaker-0.91.0/WINGs/widgets.c wm/WINGs/widgets.c
--- ../work/WindowMaker-0.91.0/WINGs/widgets.c	2004-10-24 01:27:47.000000000 +0400
+++ wm/WINGs/widgets.c	2004-11-04 12:10:10.000000000 +0300
@@ -631,9 +631,6 @@
     scrPtr->xftdraw = XftDrawCreate(scrPtr->display, W_DRAWABLE(scrPtr),
                                     scrPtr->visual, scrPtr->colormap);
 
-    /* create input method stuff */
-    W_InitIMStuff(scrPtr);
-
     /* Create missing CUT_BUFFERs */
     {
         Atom *rootWinProps;
@@ -773,6 +770,9 @@
         return NULL;
     }
 
+    /* create input method stuff */
+    W_InitIM(scrPtr);
+
     scrPtr->checkButtonImageOn = makePixmap(scrPtr, CHECK_BUTTON_ON,
                                             CHECK_BUTTON_ON_WIDTH,
                                             CHECK_BUTTON_ON_HEIGHT, False);
diff -Naur ../work/WindowMaker-0.91.0/WINGs/WINGs/WINGs.h wm/WINGs/WINGs/WINGs.h
--- ../work/WindowMaker-0.91.0/WINGs/WINGs/WINGs.h	2004-10-25 05:48:39.000000000 +0400
+++ wm/WINGs/WINGs/WINGs.h	2004-11-04 12:10:11.000000000 +0300
@@ -7,7 +7,7 @@
 #include <WINGs/WUtil.h>
 #include <X11/Xlib.h>
 
-#define WINGS_H_VERSION  20040406
+#define WINGS_H_VERSION  20041030
 
 
 #ifdef __cplusplus
diff -Naur ../work/WindowMaker-0.91.0/WINGs/WINGs/WINGsP.h wm/WINGs/WINGs/WINGsP.h
--- ../work/WindowMaker-0.91.0/WINGs/WINGs/WINGsP.h	2004-10-24 01:27:47.000000000 +0400
+++ wm/WINGs/WINGs/WINGsP.h	2004-11-04 12:10:11.000000000 +0300
@@ -8,7 +8,7 @@
 
 #include <WINGs/WINGs.h>
 
-#if WINGS_H_VERSION < 20040406
+#if WINGS_H_VERSION < 20041030
 #error There_is_an_old_WINGs.h_file_somewhere_in_your_system._Please_remove_it.
 #endif
 
@@ -385,6 +385,7 @@
     WMPixmap *dragImage;
     int helpContext;
 
+    XIC xic;
 
     struct {
         unsigned int realized:1;
@@ -612,6 +613,22 @@
 
 void W_FreeViewXdndPart(WMView *view);
 
+/* XIM */
+void W_InitIM(WMScreen *scr);
+
+void W_CreateIC(WMView *view);
+
+void W_DestroyIC(WMView *view);
+
+void W_FocusIC(WMView *view);
+
+void W_UnFocusIC(WMView *view);
+
+void W_SetPreeditPositon(W_View *view, int x, int y);
+
+int W_LookupString(W_View *view, XKeyPressedEvent *event, char *buffer,
+                   int buflen, KeySym *keysym, Status *status);
+
 #ifdef __cplusplus
 }
 #endif /* __cplusplus */
diff -Naur ../work/WindowMaker-0.91.0/WINGs/winputmethod.c wm/WINGs/winputmethod.c
--- ../work/WindowMaker-0.91.0/WINGs/winputmethod.c	2004-10-23 03:58:59.000000000 +0400
+++ wm/WINGs/winputmethod.c	2004-11-04 12:10:10.000000000 +0300
@@ -5,83 +5,237 @@
 #include "WINGsP.h"
 
 
-
 typedef struct W_IMContext {
     XIM xim;
-
-    struct W_ICContext *icList;
+    XIMStyle ximstyle;
 } WMIMContext;
 
 
-typedef struct W_ICContext {
-    struct W_ICContext *next;
-    struct W_ICContext *prev;
-
-    XIC xic;
-} WMICContext;
 
+static void
+instantiateIM_cb(Display *display, XPointer client_data, XPointer call_data)
+{
+    W_InitIM((W_Screen *)client_data);
+}
 
 
-Bool
-W_InitIMStuff(WMScreen *scr)
+static void
+destroyIM_cb(XIM xim, XPointer client_data, XPointer call_data)
 {
-    WMIMContext *ctx;
+    W_Screen *scr = (W_Screen *)client_data;
+    W_View *target;
 
-    ctx = scr->imctx = wmalloc(sizeof(WMIMContext));
+    if (scr->imctx->xim != xim)
+        return;
 
-    ctx->xim = XOpenIM(scr->display, NULL, NULL, NULL);
-    if (ctx->xim == NULL) {
-        wwarning("could not open IM");
-        return False;
+    target = scr->rootView->childrenList;
+    while (target!=NULL) {
+        W_DestroyIC(target);
+        target = target->nextSister;
     }
 
+    wfree(scr->imctx);
+    scr->imctx = NULL;
+
+    XRegisterIMInstantiateCallback(scr->display, NULL, NULL, NULL,
+                                   instantiateIM_cb, (XPointer)scr);
 }
 
 
 void
-W_CloseIMStuff(WMScreen *scr)
+W_InitIM(W_Screen *scr)
 {
-    if (!scr->imctx)
+    XIM xim;
+
+    if (scr->imctx)
         return;
 
-    if (scr->imctx->xim)
-        XCloseIM(scr->imctx->xim);
-    wfree(scr->imctx);
-    scr->imctx = NULL;
-}
+    xim = XOpenIM(scr->display, NULL, NULL, NULL);
 
+    if (xim) {
+        XIMStyles *im_styles;
+        XIMCallback cb;
+        int i;
+
+        scr->imctx = wmalloc(sizeof(WMIMContext));
+        scr->imctx->xim = xim;
+
+        cb.callback = destroyIM_cb;
+        cb.client_data = (XPointer)scr;
+        if (XSetIMValues(scr->imctx->xim, XNDestroyCallback, &cb, NULL))
+            wwarning("could not add destroy callback for input method");
+        XUnregisterIMInstantiateCallback(scr->display, NULL, NULL, NULL,
+                                         instantiateIM_cb, (XPointer)scr);
+        /* Get available input style */
+        XGetIMValues(scr->imctx->xim, XNQueryInputStyle, &im_styles, NULL);
+
+        scr->imctx->ximstyle = 0;
+
+        for (i=0; i<im_styles->count_styles && scr->imctx->ximstyle==0; i++) {
+            if ((im_styles->supported_styles[i] & XIMPreeditPosition) &&
+                (im_styles->supported_styles[i] & XIMStatusNothing)) {
+                scr->imctx->ximstyle = XIMPreeditPosition | XIMStatusNothing;
+            } else if ((im_styles->supported_styles[i] & XIMPreeditNothing) &&
+                       (im_styles->supported_styles[i] & XIMStatusNothing)) {
+                scr->imctx->ximstyle = XIMPreeditNothing | XIMStatusNothing;
+            }
+        }
+        XFree(im_styles);
+    } else {
+        XRegisterIMInstantiateCallback(scr->display, NULL, NULL, NULL,
+                                       instantiateIM_cb, (XPointer)scr);
+    }
+}
 
 
-WMICContext*
+void
 W_CreateIC(WMView *view)
 {
     WMScreen *scr = W_VIEW_SCREEN(view);
-    WMICContext *ctx;
+    XVaNestedList preedit_attr = NULL;
+
+    if (view->xic || !view->flags.realized || !scr->imctx)
+        return;
+
+    if (scr->imctx->ximstyle & XIMPreeditPosition) {
+        XPoint spot;
+        XRectangle rect;
+        int ofs;
+
+        ofs = (view->size.height - WMFontHeight(scr->normalFont))/2;
+
+        rect.x = ofs;
+        rect.y = ofs;
+        rect.height = WMFontHeight(scr->normalFont);
+        rect.width = view->size.width - ofs*2;
+        spot.x = rect.x;
+        spot.y = rect.y + rect.height;
+
+        // this really needs to be changed, but I don't know how yet -Dan
+        // it used to be like this with fontsets, but no longer applies to xft
+        preedit_attr = XVaCreateNestedList(0, XNSpotLocation, &spot,
+                                           XNArea, &rect, XNFontInfo,
+                                           scr->normalFont->font, NULL);
+    }
+
+    view->xic = XCreateIC(scr->imctx->xim, XNInputStyle, scr->imctx->ximstyle,
+                          XNClientWindow, view->window,
+                          preedit_attr ? XNPreeditAttributes : NULL, preedit_attr,
+                          NULL);
+
+    if (preedit_attr)
+        XFree(preedit_attr);
+
+    if (view->xic) {
+        unsigned long fevent = 0;
+        XGetICValues(view->xic, XNFilterEvents, &fevent, NULL);
+        XSelectInput(scr->display, view->window,
+                     ButtonPressMask | ButtonReleaseMask | ExposureMask |
+                     KeyPressMask | FocusChangeMask| ButtonMotionMask |fevent);
+    }
+}
+
+
+void
+W_DestroyIC(WMView *view)
+{
+    if (view->xic) {
+        XDestroyIC(view->xic);
+        view->xic = 0;
+    }
+}
+
+
+static void
+setPreeditArea(W_View *view)
+{
+    WMScreen *scr = W_VIEW_SCREEN(view);
+    XVaNestedList preedit_attr = NULL;
+
+    if (view->xic && (scr->imctx->ximstyle & XIMPreeditPosition)) {
+        XRectangle rect;
+        int ofs;
+
+        ofs = (view->size.height - WMFontHeight(scr->normalFont))/2;
+        rect.x = ofs;
+        rect.y = ofs;
+        rect.height = WMFontHeight(scr->normalFont);
+        rect.width = view->size.width - ofs*2;
+
+        preedit_attr = XVaCreateNestedList(0, XNArea, &rect, NULL);
+        XSetICValues(view->xic, XNPreeditAttributes, preedit_attr, NULL);
+
+        if (preedit_attr) {
+            XFree(preedit_attr);
+        }
+    }
+}
 
-    ctx->prev = NULL;
-    ctx->next = scr->imctx->icList;
-    if (scr->imctx->icList)
-        scr->imctx->icList->prev = ctx;
 
+void
+W_FocusIC(WMView *view)
+{
+    WMScreen *scr = W_VIEW_SCREEN(view);
 
+    if (view->xic) {
+        XSetICFocus(view->xic);
+        XSetICValues(view->xic, XNFocusWindow, view->window, NULL);
+
+        if (scr->imctx->ximstyle & XIMPreeditPosition) {
+            setPreeditArea(view);
+        }
+    }
 }
 
 
 void
-W_DestroyIC(WMICContext *ctx)
+W_UnFocusIC(WMView *view)
 {
-    XDestroyIC(ctx->xic);
+    if (view->xic) {
+        XUnsetICFocus(view->xic);
+    }
+}
 
 
+void
+W_SetPreeditPositon(W_View *view, int x, int y)
+{
+    WMScreen *scr = W_VIEW_SCREEN(view);
+    XVaNestedList preedit_attr = NULL;
+
+    if (view->xic && (scr->imctx->ximstyle & XIMPreeditPosition)) {
+        XPoint spot;
+        int ofs;
+
+        ofs = (view->size.height - WMFontHeight(scr->normalFont))/2;
+        spot.x = x;
+        spot.y = y + view->size.height - ofs - 3;
+        preedit_attr = XVaCreateNestedList(0, XNSpotLocation, &spot, NULL);
+        XSetICValues(view->xic, XNPreeditAttributes, preedit_attr, NULL);
+        if (preedit_attr) {
+            XFree(preedit_attr);
+        }
+    }
 }
 
 
 int
-W_LookupString(WMView *view, XKeyEvent *event,
-               char buffer, int bufsize, KeySym ksym)
+W_LookupString(W_View *view, XKeyPressedEvent *event, char *buffer, int buflen,
+               KeySym *keysym, Status *status)
 {
+    WMScreen *scr = W_VIEW_SCREEN(view);
 
-}
+    XSetInputFocus(scr->display, view->window, RevertToParent, CurrentTime);
 
+    if (view->xic) {
+#ifdef X_HAVE_UTF8_STRING
+        return Xutf8LookupString(view->xic, event, buffer, buflen, keysym, status);
+#else
+        return XLookupString(event, buffer, buflen, keysym, (XComposeStatus *)status);
+#endif
+    } else {
+        return XLookupString(event, buffer, buflen, keysym, (XComposeStatus *)status);
+    }
+}
 
 
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wmisc.c wm/WINGs/wmisc.c
--- ../work/WindowMaker-0.91.0/WINGs/wmisc.c	2004-10-12 22:37:19.000000000 +0400
+++ wm/WINGs/wmisc.c	2004-11-11 12:39:46.000000000 +0300
@@ -107,7 +107,7 @@
     int i, w, beforecrlf, word1, word2;
 
     /* text length before first cr/lf */
-    beforecrlf = strcspn(text, "\n\r");
+    beforecrlf = strcspn(text, "\n");
 
     if (!wrap || beforecrlf==0)
         return beforecrlf;
@@ -180,7 +180,7 @@
                 i = j;
         }
     } else {
-        i = strcspn(text, "\n\r");
+        i = strcspn(text, "\n");
     }
     return i;
 }
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wscroller.c wm/WINGs/wscroller.c
--- ../work/WindowMaker-0.91.0/WINGs/wscroller.c	2004-10-12 22:41:45.000000000 +0400
+++ wm/WINGs/wscroller.c	2004-11-04 12:10:10.000000000 +0300
@@ -672,6 +672,8 @@
          handleMotion(sPtr, pushX, pushY); */
         break;
 
+    case WSDecrementWheel:
+    case WSIncrementWheel:
     case WSKnobSlot:
     case WSNoPart:
         /* dummy */
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wtext.c wm/WINGs/wtext.c
--- ../work/WindowMaker-0.91.0/WINGs/wtext.c	2004-10-23 06:45:11.000000000 +0400
+++ wm/WINGs/wtext.c	2004-11-04 12:10:10.000000000 +0300
@@ -2299,6 +2299,7 @@
 
 }
 
+# if 0
 static void
 fontChanged(void *observerData, WMNotification *notification)
 {
@@ -2312,6 +2313,7 @@
     if (tPtr->flags.ownsSelection)
         WMSetTextSelectionFont(tPtr, font);
 }
+#endif
 
 
 static  void
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wtextfield.c wm/WINGs/wtextfield.c
--- ../work/WindowMaker-0.91.0/WINGs/wtextfield.c	2004-10-12 22:45:48.000000000 +0400
+++ wm/WINGs/wtextfield.c	2004-11-04 12:10:10.000000000 +0300
@@ -71,7 +71,7 @@
         unsigned int waitingSelection:1; /* requested selection, but
         * didnt get yet */
 
-        /**/
+       
         unsigned int notIllegalMovement:1;
     } flags;
 } TextField;
@@ -312,6 +312,13 @@
 }
 
 
+static void
+realizeObserver(void *self, WMNotification *not)
+{
+    W_CreateIC(((TextField*)self)->view);
+}
+
+
 WMTextField*
 WMCreateTextField(WMWidget *parent)
 {
@@ -364,6 +371,8 @@
                               WMSelectionOwnerDidChangeNotification,
                               (void*)XA_PRIMARY);
 
+    WMAddNotificationObserver(realizeObserver, tPtr,
+                              WMViewRealizedNotification, tPtr->view);
 
     tPtr->flags.cursorOn = 1;
 
@@ -762,8 +771,11 @@
               cx, tPtr->offsetWidth, cx,
               tPtr->view->size.height - tPtr->offsetWidth - 1);
 
-    if (tPtr->flags.secure)
+    W_SetPreeditPositon(tPtr->view, cx, 0);
+
+    if (tPtr->flags.secure) {
         wfree(text);
+    }
 }
 
 
@@ -953,9 +965,9 @@
 
     CHECK_CLASS(data, WC_TextField);
 
-
     switch (event->type) {
     case FocusIn:
+        W_FocusIC(tPtr->view);
         if (W_FocusedViewOfToplevel(W_TopLevelOfView(tPtr->view))!=tPtr->view)
             return;
         tPtr->flags.focused = 1;
@@ -973,6 +985,7 @@
         break;
 
     case FocusOut:
+        W_UnFocusIC(tPtr->view);
         tPtr->flags.focused = 0;
 #if 0
         if (tPtr->timerID)
@@ -1021,7 +1034,8 @@
     controled = (event->xkey.state & ControlMask ? True : False);
     modified = shifted || controled;
 
-    count = XLookupString(&event->xkey, buffer, 63, &ksym, NULL);
+    count = W_LookupString(tPtr->view, &event->xkey, buffer, 63, &ksym, NULL);
+    //count = XLookupString(&event->xkey, buffer, 63, &ksym, NULL);
     buffer[count] = '\0';
 
     switch (ksym) {
@@ -1613,6 +1627,8 @@
         WMDeleteTimerHandler(tPtr->timerID);
 #endif
 
+    W_DestroyIC(tPtr->view);
+
     WMReleaseFont(tPtr->font);
     /*// use lostSelection() instead of WMDeleteSelectionHandler here?*/
     WMDeleteSelectionHandler(tPtr->view, XA_PRIMARY, CurrentTime);
diff -Naur ../work/WindowMaker-0.91.0/WINGs/wview.c wm/WINGs/wview.c
--- ../work/WindowMaker-0.91.0/WINGs/wview.c	2004-10-12 22:46:16.000000000 +0400
+++ wm/WINGs/wview.c	2004-11-04 12:10:10.000000000 +0300
@@ -130,6 +130,8 @@
         adoptChildView(parent, view);
     }
 
+    view->xic = 0;
+
     view->refCount = 1;
 
     view->eventHandlers = WMCreateArrayWithDestructor(4, wfree);
@@ -213,7 +215,6 @@
     assert(view->size.width > 0);
     assert(view->size.height > 0);
 
-
     if (view->parent && !view->parent->flags.realized) {
         wwarning("trying to realize widget of unrealized parent");
         return;
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/Font.c wm/WPrefs.app/Font.c
--- ../work/WindowMaker-0.91.0/WPrefs.app/Font.c	1970-01-01 03:00:00.000000000 +0300
+++ wm/WPrefs.app/Font.c	2004-10-13 13:16:40.000000000 +0400
@@ -0,0 +1,2100 @@
+/* Font.c- text/font settings
+ *
+ *  WPrefs - Window Maker Preferences Program
+ *
+ *  Copyright (c) 1999-2003 Alfredo K. Kojima
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,
+ *  USA.
+ */
+
+
+#include "WPrefs.h"
+#include <X11/Xlocale.h>
+#include <ctype.h>
+
+typedef struct _Panel {
+    WMBox *box;
+    char *sectionName;
+
+    char *description;
+
+    CallbackRec callbacks;
+
+    WMWidget *parent;
+
+
+    WMLabel *prevL;
+
+    WMFontPanel *fontPanel;
+
+    WMPopUpButton *fontSel;
+    WMFrame *multiF;
+    WMButton *togMulti;
+    WMFrame *langF;
+    WMPopUpButton *langP;
+    WMFrame *aaF;
+    WMButton *togAA;
+
+    /* single byte */
+    WMTextField *fontT;
+    WMButton *changeB;
+
+    /* multibyte */
+    WMLabel *fsetL;
+    WMList *fsetLs;
+
+    WMButton *addB;
+    WMButton *editB;
+    WMButton *remB;
+
+    WMButton *upB;
+    WMButton *downB;
+
+    WMColor *white;
+    WMColor *black;
+    WMColor *light;
+    WMColor *dark;
+
+    WMColor *back;
+    WMColor *colors[9];
+
+    Pixmap preview;
+    WMPixmap *previewPix;
+    WMPixmap *hand;
+    WMPixmap *up_arrow;
+    WMPixmap *down_arrow;
+    WMPixmap *alt_up_arrow;
+    WMPixmap *alt_down_arrow;
+
+    int oldsection;
+    char menuStyle;
+    char titleAlignment;
+    Bool MultiByteText;
+
+    Bool AntialiasedText;
+} _Panel;
+
+
+
+#define ICON_FILE	"fonts"
+
+static WMRect previewPositions[] = {
+#define WINTITLE	0
+    {{30, 10},{190, 20}},
+#define DISTITLE	1
+    {{30, 35},{90, 64}},
+#define PMTITLE		2
+    {{30, 105},{90, 20}},
+#define PMITEM		3
+    {{30, 125},{90, 20*4}},
+#define PCLIP		4
+    {{156, 35},{64, 64}},
+#define PICON		5
+    {{156, 105},{64, 64}}
+};
+#define EVERYTHING 0xff
+
+static char *colorOptions[] = {
+#define FTITLE	(1<<0)
+    "FTitleColor", "white",
+#define DISCOL	(1<<1)			/* Display uses white always */
+#define MTITLE	(1<<2)
+    "MenuTitleColor", "white",
+#define MITEM	(1<<3)
+    "MenuTextColor", "black",
+#define CLIP	(1<<4)
+    "ClipTitleColor", "black",
+#define CCLIP	(1<<4)
+    "ClipTitleColor", "#454045",
+#define ICONT	(1<<5)
+    "IconTitleColor", "white",
+#define ICONB	(1<<5)
+    "IconTitleBack", "black"
+};
+
+#define MSTYLE_NORMAL	0
+#define MSTYLE_SINGLE	1
+#define MSTYLE_FLAT	2
+
+
+#define RESIZEBAR_BEVEL	-1
+#define MENU_BEVEL	-2
+#define CLIP_BUTTON_SIZE	23
+#define ICON_SIZE	64
+
+
+static char *textureOptions[] = {
+    "FTitleBack",
+    NULL,
+    "MenuTitleBack",
+    "MenuTextBack",
+    "IconBack",
+    "IconBack"
+};
+
+/* XPM */
+static char * hand_xpm[] = {
+    "22 21 19 1",
+    "       c None",
+    ".      c #030305",
+    "+      c #7F7F7E",
+    "@      c #B5B5B6",
+    "#      c #C5C5C6",
+    "$      c #969697",
+    "%      c #FDFDFB",
+    "&      c #F2F2F4",
+    "*      c #E5E5E4",
+    "=      c #ECECEC",
+    "-      c #DCDCDC",
+    ";      c #D2D2D0",
+    ">      c #101010",
+    ",      c #767674",
+    "'      c #676767",
+    ")      c #535355",
+    "!      c #323234",
+    "~      c #3E3C56",
+    "{      c #333147",
+    "                      ",
+    "       .....          ",
+    "     ..+@##$.         ",
+    "    .%%%&@..........  ",
+    "   .%*%%&#%%%%%%%%%$. ",
+    "  .*#%%%%%%%%%&&&&==. ",
+    " .-%%%%%%%%%=*-;;;#$. ",
+    " .-%%%%%%%%&..>.....  ",
+    " >-%%%%%%%%%*#+.      ",
+    " >-%%%%%%%%%*@,.      ",
+    " >#%%%%%%%%%*@'.      ",
+    " >$&&%%%%%%=...       ",
+    " .+@@;=&%%&;$,>       ",
+    "  .',$@####$+).       ",
+    "   .!',+$++,'.        ",
+    "     ..>>>>>.         ",
+    "                      ",
+    "     ~~{{{~~          ",
+    "   {{{{{{{{{{{        ",
+    "     ~~{{{~~          ",
+    "                      "};
+
+static char *up_arrow_xpm[] = {
+    "9 9 3 1",
+    ".		c #acaaac",
+    "%		c #525552",
+    "#		c #000000",
+    "....%....",
+    "....#....",
+    "...%#%...",
+    "...###...",
+    "..%###%..",
+    "..#####..",
+    ".%#####%.",
+    ".#######.",
+    "%#######%"
+};
+
+static char *down_arrow_xpm[] = {
+    "9 9 3 1",
+    ".		c #acaaac",
+    "%		c #525552",
+    "#		c #000000",
+    "%#######%",
+    ".#######.",
+    ".%#####%.",
+    "..#####..",
+    "..%###%..",
+    "...###...",
+    "...%#%...",
+    "....#....",
+    "....%...."
+};
+
+static char *alt_up_arrow_xpm[] = {
+    "9 9 2 1",
+    ".		c #ffffff",
+    "%		c #525552",
+    "....%....",
+    "....%....",
+    "...%%%...",
+    "...%%%...",
+    "..%%%%%..",
+    "..%%%%%..",
+    ".%%%%%%%.",
+    ".%%%%%%%.",
+    "%%%%%%%%%"
+};
+
+static char *alt_down_arrow_xpm[] = {
+    "9 9 2 1",
+    ".		c #ffffff",
+    "%		c #525552",
+    "%%%%%%%%%",
+    ".%%%%%%%.",
+    ".%%%%%%%.",
+    "..%%%%%..",
+    "..%%%%%..",
+    "...%%%...",
+    "...%%%...",
+    "....%....",
+    "....%...."
+};
+/* XPM */
+
+static WMPropList *CurrentFontArray = NULL;
+//static WMPropList *CurrentMenuTitleFont = NULL;
+//static WMPropList *CurrentMenuTextFont = NULL;
+//static WMPropList *CurrentIconTitleFont = NULL;
+//static WMPropList *CurrentClipTitleFont = NULL;
+//static WMPropList *CurrentLargeDisplayFont = NULL;
+
+static WMPropList *DefaultWindowTitleFont = NULL;
+static WMPropList *DefaultMenuTitleFont = NULL;
+static WMPropList *DefaultMenuTextFont = NULL;
+static WMPropList *DefaultIconTitleFont = NULL;
+static WMPropList *DefaultClipTitleFont = NULL;
+static WMPropList *DefaultLargeDisplayFont = NULL;
+
+static void changePage(WMWidget *w, void *data);
+static void setLanguageType(void *data, Bool multiByte);
+static void refillFontSetList(void *data);
+static void readFontEncodings(void *data);
+static void changeLanguageAction(WMWidget *w, void *data);
+static void checkListForArrows(void *data);
+
+static char* getFontEncoding(void *data);
+static char* getFontSampleString(void *data);
+
+/* note single element */
+static WMFont* getFontForPreview(void *data, int element);
+static WMFont* getDefaultSystemFont(void *data, int element);
+
+static WMPropList* getDefaultFontProp(void *data, char *encoding, int section);
+static WMPropList* getCurrentFontProp(void *data, int section);
+
+static Bool isEncodingMultiByte(void *data);
+
+static void
+str2rcolor(RContext *rc, char *name, RColor *color)
+{
+    XColor xcolor;
+
+    XParseColor(rc->dpy, rc->cmap, name, &xcolor);
+
+    color->alpha = 255;
+    color->red = xcolor.red >> 8;
+    color->green = xcolor.green >> 8;
+    color->blue = xcolor.blue >> 8;
+}
+
+static void
+drawMenuBevel(RImage *img)
+{
+    RColor light, dark, mid;
+    int i;
+    int iheight = img->height / 4;
+
+    light.alpha = 0;
+    light.red = light.green = light.blue = 80;
+
+    dark.alpha = 255;
+    dark.red = dark.green = dark.blue = 0;
+
+    mid.alpha = 0;
+    mid.red = mid.green = mid.blue = 40;
+
+    for (i = 1; i < 4; i++) {
+        ROperateLine(img, RSubtractOperation, 0, i*iheight-2,
+                     img->width-1, i*iheight-2, &mid);
+
+        RDrawLine(img, 0, i*iheight-1, img->width-1, i*iheight-1, &dark);
+
+        ROperateLine(img, RAddOperation, 1, i*iheight,
+                     img->width-2, i*iheight, &light);
+    }
+}
+
+static void
+paintTitle(WMScreen *scr, Drawable d, WMColor *color, WMFont *font,
+           int part, WMAlignment align, char *text)
+{
+    int l = strlen(text);
+    int x = previewPositions[part].pos.x;
+    int y = previewPositions[part].pos.y;
+    int w = previewPositions[part].size.width;
+    int h = previewPositions[part].size.height;
+
+    switch (align) {
+    case WALeft:
+        x += 5;
+        break;
+    case WARight:
+        x += w - 5 - WMWidthOfString(font, text, l);
+        break;
+    default:
+    case WACenter:
+        x += (w - WMWidthOfString(font, text, l))/2;
+        break;
+    }
+    WMDrawString(scr, d, color, font, x,
+                 y + (h - WMFontHeight(font))/2, text, l);
+}
+
+static void
+paintItems(WMScreen *scr, Drawable d, WMColor *color, WMFont *font,
+           int part, char *text)
+{
+    int l = strlen(text);
+    int x = previewPositions[part].pos.x;
+    int y = previewPositions[part].pos.y;
+    //int w = previewPositions[part].size.width;
+    int h = previewPositions[part].size.height/4;
+    int i;
+    for( i = 0; i < 4 ; i++) {
+        WMDrawString(scr, d, color, font, x+5,
+                     y+(20*i)+(h - WMFontHeight(font))/2, text, l);
+    }
+}
+
+static void
+paintIcon(WMScreen *scr,Drawable d, WMColor *color, WMColor *Iback,
+          WMFont *font, int part, char *text)
+{
+    Display *dpy = WMScreenDisplay(scr);
+    int l = strlen(text);
+    int x = previewPositions[part].pos.x+1;
+    int y = previewPositions[part].pos.y+1;
+    int w = previewPositions[part].size.width-2;
+    int h = WMFontHeight(font)+2;
+
+    XFillRectangle(dpy, d, WMColorGC(Iback), x, y, w, h);
+    x += (w - WMWidthOfString(font, text, l))/2;
+    WMDrawString(scr, d, color, font, x,
+                 y + (h - WMFontHeight(font))/2, text, l);
+
+}
+
+static void
+drawFonts(_Panel *panel, int elements)
+{
+    WMScreen *scr = WMWidgetScreen(panel->box);
+    WMPixmap *pixmap;
+    Pixmap d;
+
+    pixmap = WMGetLabelImage(panel->prevL);
+    d = WMGetPixmapXID(pixmap);
+
+    if(elements & FTITLE) {
+        paintTitle(scr, d, panel->colors[0], getFontForPreview(panel, WINTITLE),
+                   WINTITLE, panel->titleAlignment, _("Window Title Font"));
+    }
+    if(elements & DISCOL) {
+        paintTitle(scr, d, panel->white, getFontForPreview(panel, DISTITLE),
+                   DISTITLE, WACenter, _("Display"));
+    }
+    if(elements & MTITLE) {
+        paintTitle(scr, d, panel->colors[1], getFontForPreview(panel, PMTITLE),
+                   PMTITLE, WALeft, _("Menu Title"));
+    }
+    if(elements & MITEM) {
+        paintItems(scr, d, panel->colors[2], getFontForPreview(panel, PMITEM),
+                   PMITEM, _("Menu Item"));
+    }
+    if(elements & CLIP) {
+        WMDrawString(scr, d, panel->colors[4],
+                     getFontForPreview(panel, PCLIP), 169,37, "1",1);
+        WMDrawString(scr, d, panel->colors[3],
+                     getFontForPreview(panel, PCLIP),179, 84, _("Clip title"), 10);
+    }
+    if(elements & ICONT) {
+        paintIcon(scr, d, panel->colors[5], panel->colors[6],
+                  getFontForPreview(panel, PICON), PICON, _("Icon Title"));
+    }
+}
+
+static void
+dumpRImage(char *path, RImage *image)
+{
+    FILE *f;
+    int channels = (image->format == RRGBAFormat ? 4 : 3);
+
+    f = fopen(path, "w");
+    if (!f) {
+        wsyserror(path);
+        return;
+    }
+    fprintf(f, "%02x%02x%1x", image->width, image->height, channels);
+
+    fwrite(image->data, 1, image->width * image->height * channels, f);
+
+    if (fclose(f) < 0) {
+        wsyserror(path);
+    }
+}
+
+/*static int
+ isPixmap(WMPropList *prop)
+ {
+ WMPropList *p;
+ char *s;
+
+ p = WMGetFromPLArray(prop, 0);
+ s = WMGetFromPLString(p);
+ if (strcasecmp(&s[1], "pixmap")==0)
+ return 1;
+ else
+ return 0;
+ }*/
+
+static Pixmap
+renderTexture(WMScreen *scr, WMPropList *texture, int width, int height,
+              char *path, int border)
+{
+    char *type;
+    RImage *image = NULL;
+    Pixmap pixmap;
+    RContext *rc = WMScreenRContext(scr);
+    char *str;
+    RColor rcolor;
+
+
+    type = WMGetFromPLString(WMGetFromPLArray(texture, 0));
+
+    if (strcasecmp(type, "solid")==0) {
+
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 1));
+
+        str2rcolor(rc, str, &rcolor);
+
+        image = RCreateImage(width, height, False);
+        RClearImage(image, &rcolor);
+    } else if (strcasecmp(type, "igradient")==0) {
+        int t1, t2;
+        RColor c1[2], c2[2];
+
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 1));
+        str2rcolor(rc, str, &c1[0]);
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 2));
+        str2rcolor(rc, str, &c1[1]);
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 3));
+        t1 = atoi(str);
+
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 4));
+        str2rcolor(rc, str, &c2[0]);
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 5));
+        str2rcolor(rc, str, &c2[1]);
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 6));
+        t2 = atoi(str);
+
+        image = RRenderInterwovenGradient(width, height, c1, t1, c2, t2);
+    } else if (strcasecmp(&type[1], "gradient")==0) {
+        int style;
+        RColor rcolor2;
+
+        switch (toupper(type[0])) {
+        case 'V':
+            style = RVerticalGradient;
+            break;
+        case 'H':
+            style = RHorizontalGradient;
+            break;
+        default:
+        case 'D':
+            style = RDiagonalGradient;
+            break;
+        }
+
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 1));
+        str2rcolor(rc, str, &rcolor);
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 2));
+        str2rcolor(rc, str, &rcolor2);
+
+        image = RRenderGradient(width, height, &rcolor, &rcolor2, style);
+    } else if (strcasecmp(&type[2], "gradient")==0 && toupper(type[0])=='T') {
+        int style;
+        RColor rcolor2;
+        int i;
+        RImage *grad, *timage;
+        char *path;
+
+        switch (toupper(type[1])) {
+        case 'V':
+            style = RVerticalGradient;
+            break;
+        case 'H':
+            style = RHorizontalGradient;
+            break;
+        default:
+        case 'D':
+            style = RDiagonalGradient;
+            break;
+        }
+
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 3));
+        str2rcolor(rc, str, &rcolor);
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 4));
+        str2rcolor(rc, str, &rcolor2);
+
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 1));
+
+        if ((path=wfindfileinarray(GetObjectForKey("PixmapPath"), str))!=NULL)
+            timage = RLoadImage(rc, path, 0);
+
+        if (!path || !timage) {
+            wwarning("could not load file '%s': %s", path,
+                     RMessageForError(RErrorCode));
+        } else {
+            grad = RRenderGradient(width, height, &rcolor, &rcolor2, style);
+
+            image = RMakeTiledImage(timage, width, height);
+            RReleaseImage(timage);
+
+            i = atoi(WMGetFromPLString(WMGetFromPLArray(texture, 2)));
+
+            RCombineImagesWithOpaqueness(image, grad, i);
+            RReleaseImage(grad);
+        }
+    } else if (strcasecmp(&type[2], "gradient")==0 && toupper(type[0])=='M') {
+        int style;
+        RColor **colors;
+        int i, j;
+
+        switch (toupper(type[1])) {
+        case 'V':
+            style = RVerticalGradient;
+            break;
+        case 'H':
+            style = RHorizontalGradient;
+            break;
+        default:
+        case 'D':
+            style = RDiagonalGradient;
+            break;
+        }
+
+        j = WMGetPropListItemCount(texture);
+
+        if (j > 0) {
+            colors = wmalloc(j * sizeof(RColor*));
+
+            for (i = 2; i < j; i++) {
+                str = WMGetFromPLString(WMGetFromPLArray(texture, i));
+                colors[i-2] = wmalloc(sizeof(RColor));
+                str2rcolor(rc, str, colors[i-2]);
+            }
+            colors[i-2] = NULL;
+
+            image = RRenderMultiGradient(width, height, colors, style);
+
+            for (i = 0; colors[i]!=NULL; i++)
+                wfree(colors[i]);
+            wfree(colors);
+        }
+    } else if (strcasecmp(&type[1], "pixmap")==0) {
+        RImage *timage = NULL;
+        char *path;
+        RColor color;
+
+        str = WMGetFromPLString(WMGetFromPLArray(texture, 1));
+
+        if ((path=wfindfileinarray(GetObjectForKey("PixmapPath"), str))!=NULL)
+            timage = RLoadImage(rc, path, 0);
+
+        if (!path || !timage) {
+            wwarning("could not load file '%s': %s", path ? path : str,
+                     RMessageForError(RErrorCode));
+        } else {
+            str = WMGetFromPLString(WMGetFromPLArray(texture, 2));
+            str2rcolor(rc, str, &color);
+
+            switch (toupper(type[0])) {
+            case 'T':
+                image = RMakeTiledImage(timage, width, height);
+                RReleaseImage(timage);
+                timage = image;
+                break;
+            case 'C':
+                image = RMakeCenteredImage(timage, width, height, &color);
+                RReleaseImage(timage);
+                timage = image;
+                break;
+            case 'S':
+            case 'M':
+                image = RScaleImage(timage, width, height);
+                RReleaseImage(timage);
+                timage = image;
+                break;
+            }
+
+        }
+        wfree(path);
+    }
+
+    if (!image)
+        return None;
+
+    if (path) {
+        dumpRImage(path, image);
+    }
+
+    if (border < 0) {
+        if (border == MENU_BEVEL) {
+            drawMenuBevel(image);
+            RBevelImage(image, RBEV_RAISED2);
+        }
+    } else if (border) {
+        RBevelImage(image, border);
+    }
+
+    RConvertImage(rc, image, &pixmap);
+    RReleaseImage(image);
+
+    return pixmap;
+}
+
+static Pixmap
+renderMenu(_Panel *panel, WMPropList *texture, int width, int iheight)
+{
+    WMScreen *scr = WMWidgetScreen(panel->parent);
+    Display *dpy = WMScreenDisplay(scr);
+    Pixmap pix, tmp;
+    //RContext *rc = WMScreenRContext(scr);
+    GC gc = XCreateGC(dpy, WMWidgetXID(panel->parent), 0, NULL);
+    int i;
+
+    switch (panel->menuStyle) {
+    case MSTYLE_NORMAL:
+        tmp = renderTexture(scr, texture, width, iheight, NULL, RBEV_RAISED2);
+
+        pix = XCreatePixmap(dpy, tmp, width, iheight*4, WMScreenDepth(scr));
+        for (i = 0; i < 4; i++) {
+            XCopyArea(dpy, tmp, pix, gc, 0, 0, width, iheight, 0, iheight*i);
+        }
+        XFreePixmap(dpy, tmp);
+        break;
+    case MSTYLE_SINGLE:
+        pix = renderTexture(scr, texture, width, iheight*4, NULL, MENU_BEVEL);
+        break;
+    case MSTYLE_FLAT:
+        pix = renderTexture(scr, texture, width, iheight*4, NULL, RBEV_RAISED2);
+        break;
+    }
+    XFreeGC(dpy, gc);
+
+    return pix;
+}
+
+static void
+renderClip(_Panel *panel, GC gc, int part, int relief)
+{
+    WMScreen *scr = WMWidgetScreen(panel->box);
+    Display *dpy = WMScreenDisplay(scr);
+    RContext *rc = WMScreenRContext(scr);
+    WMPropList *prop;
+    Pixmap pix;
+    XImage *original;
+    XPoint p[4];
+    RImage *tile;
+    RColor black;
+    RColor dark;
+    RColor light;
+    int pt, tp;
+    int as;
+
+    prop = GetObjectForKey(textureOptions[part]);
+
+    pix = renderTexture(scr, prop,
+                        previewPositions[part].size.width,
+                        previewPositions[part].size.height,
+                        NULL, relief);
+
+
+    original = XGetImage(dpy, pix, 0, 0, 64, 64,
+                         AllPlanes, ZPixmap);
+    if (!original){
+        wwarning(_("error capturing \"original\" tile image"),
+                 RMessageForError(RErrorCode));
+    }
+    tile = RCreateImageFromXImage(rc, original, NULL);
+
+    XDestroyImage(original);
+    XFreePixmap(WMScreenDisplay(scr), pix);
+
+    pt = CLIP_BUTTON_SIZE*ICON_SIZE/64;
+    tp = ICON_SIZE-1 - pt;
+    as = pt - 15;
+
+    black.alpha = 255;
+    black.red = black.green = black.blue = 0;
+
+    dark.alpha = 0;
+    dark.red = dark.green = dark.blue = 60;
+
+    light.alpha = 0;
+    light.red = light.green = light.blue = 80;
+
+
+    /* top right */
+    ROperateLine(tile, RSubtractOperation, tp, 0, ICON_SIZE-2,
+                 pt-1, &dark);
+    RDrawLine(tile, tp-1, 0, ICON_SIZE-1, pt+1, &black);
+    ROperateLine(tile, RAddOperation, tp, 2, ICON_SIZE-3,
+                 pt, &light);
+
+    /* arrow bevel */
+    ROperateLine(tile, RSubtractOperation, ICON_SIZE - 7 - as, 4,
+                 ICON_SIZE - 5, 4, &dark);
+    ROperateLine(tile, RSubtractOperation, ICON_SIZE - 6 - as, 5,
+                 ICON_SIZE - 5, 6 + as, &dark);
+    ROperateLine(tile, RAddOperation, ICON_SIZE - 5, 4, ICON_SIZE - 5, 6 + as,
+                 &light);
+
+    /* bottom left */
+    ROperateLine(tile, RAddOperation, 2, tp+2, pt-2,
+                 ICON_SIZE-3, &dark);
+    RDrawLine(tile, 0, tp-1, pt+1, ICON_SIZE-1, &black);
+    ROperateLine(tile, RSubtractOperation, 0, tp-2, pt+1,
+                 ICON_SIZE-2, &light);
+
+    /* arrow bevel */
+    ROperateLine(tile, RSubtractOperation, 4, ICON_SIZE - 7 - as, 4,
+                 ICON_SIZE - 5, &dark);
+    ROperateLine(tile, RSubtractOperation, 5, ICON_SIZE - 6 - as,
+                 6 + as, ICON_SIZE - 5, &dark);
+    ROperateLine(tile, RAddOperation, 4, ICON_SIZE - 5, 6 + as, ICON_SIZE - 5,
+                 &light);
+
+    RConvertImage(rc, tile, &pix);
+
+    /* top right arrow */
+    p[0].x = p[3].x = ICON_SIZE-5-as;
+    p[0].y = p[3].y = 5;
+    p[1].x = ICON_SIZE-6;
+    p[1].y = 5;
+    p[2].x = ICON_SIZE-6;
+    p[2].y = 4+as;
+    XFillPolygon(dpy, pix, WMColorGC(panel->colors[4]), p, 3, Convex, CoordModeOrigin);
+    XDrawLines(dpy, pix, WMColorGC(panel->colors[4]), p, 4, CoordModeOrigin);
+
+    /* bottom left arrow */
+    p[0].x = p[3].x = 5;
+    p[0].y = p[3].y = ICON_SIZE-5-as;
+    p[1].x = 5;
+    p[1].y = ICON_SIZE-6;
+    p[2].x = 4+as;
+    p[2].y = ICON_SIZE-6;
+    XFillPolygon(dpy, pix, WMColorGC(panel->colors[4]), p, 3, Convex, CoordModeOrigin);
+    XDrawLines(dpy, pix, WMColorGC(panel->colors[4]), p, 4, CoordModeOrigin);
+
+    XCopyArea(dpy, pix, panel->preview, gc, 0, 0,
+              previewPositions[part].size.width,
+              previewPositions[part].size.height,
+              previewPositions[part].pos.x,
+              previewPositions[part].pos.y);
+
+    RReleaseImage(tile);
+    XFreePixmap(WMScreenDisplay(scr), pix);
+}
+
+static void
+renderPreview(_Panel *panel, GC gc, int part, int relief)
+{
+    WMPropList *prop;
+    Pixmap pix;
+    WMScreen *scr = WMWidgetScreen(panel->box);
+
+    prop = GetObjectForKey(textureOptions[part]);
+
+    pix = renderTexture(scr, prop,
+                        previewPositions[part].size.width,
+                        previewPositions[part].size.height,
+                        NULL, relief);
+    XCopyArea(WMScreenDisplay(scr), pix,
+              panel->preview, gc, 0, 0,
+              previewPositions[part].size.width,
+              previewPositions[part].size.height,
+              previewPositions[part].pos.x,
+              previewPositions[part].pos.y);
+
+    XFreePixmap(WMScreenDisplay(scr), pix);
+}
+
+static void
+paintPreviewBox(Panel *panel, int elements)
+{
+    WMScreen *scr = WMWidgetScreen(panel->parent);
+    Display *dpy = WMScreenDisplay(scr);
+    //int refresh = 0;
+    GC gc;
+    WMColor *black = WMBlackColor(scr);
+    Pixmap mitem;
+
+    gc = XCreateGC(dpy, WMWidgetXID(panel->parent), 0, NULL);
+
+    if (panel->preview == None) {
+        WMPixmap *pix;
+
+        panel->preview = XCreatePixmap(dpy, WMWidgetXID(panel->parent),
+                                       240-4, 190-4, WMScreenDepth(scr));
+
+        pix = WMCreatePixmapFromXPixmaps(scr, panel->preview, None,
+                                         240-4, 190-4, WMScreenDepth(scr));
+
+        WMSetLabelImage(panel->prevL, pix);
+        WMReleasePixmap(pix);
+    }
+    XFillRectangle(dpy, panel->preview, WMColorGC(panel->back),
+                   0, 0, 240-4, 190-4);
+
+    if (elements & (1<<WINTITLE)) {
+        renderPreview(panel, gc, WINTITLE, RBEV_RAISED2);
+        XDrawRectangle(dpy, panel->preview, WMColorGC(black),
+                       previewPositions[WINTITLE].pos.x-1,
+                       previewPositions[WINTITLE].pos.y-1,
+                       previewPositions[WINTITLE].size.width,
+                       previewPositions[WINTITLE].size.height);
+    }
+    if (elements & (1<<DISTITLE)) {
+        XDrawRectangle(dpy, panel->preview, WMColorGC(panel->back),
+                       previewPositions[DISTITLE].pos.x-1,
+                       previewPositions[DISTITLE].pos.y-1,
+                       previewPositions[DISTITLE].size.width,
+                       previewPositions[DISTITLE].size.height);
+    }
+    if (elements & (1<<PMTITLE)) {
+        renderPreview(panel, gc, PMTITLE, RBEV_RAISED2);
+        XDrawRectangle(dpy, panel->preview, WMColorGC(black),
+                       previewPositions[PMTITLE].pos.x-1,
+                       previewPositions[PMTITLE].pos.y-1,
+                       previewPositions[PMTITLE].size.width,
+                       previewPositions[PMTITLE].size.height);
+    }
+    if (elements & (1<<PMITEM)) {
+        WMPropList *prop;
+
+        prop = GetObjectForKey(textureOptions[PMITEM]);
+        mitem = renderMenu(panel, prop,
+                           previewPositions[PMITEM].size.width,
+                           previewPositions[PMITEM].size.height/4);
+
+        XCopyArea(dpy, mitem, panel->preview, gc, 0, 0,
+                  previewPositions[PMITEM].size.width,
+                  previewPositions[PMITEM].size.height,
+                  previewPositions[PMITEM].pos.x,
+                  previewPositions[PMITEM].pos.y);
+
+        XFreePixmap(dpy, mitem);
+    }
+    if (elements & (1<<PMITEM|1<<PMTITLE)) {
+        XDrawLine(dpy, panel->preview, gc, 29, 125, 29, 125+20*4+25);
+        XDrawLine(dpy, panel->preview, gc, 119, 125, 119, 125+20*4+25);
+    }
+    if (elements & (1<<PCLIP)) {
+        renderClip(panel, gc, PCLIP, RBEV_RAISED3);
+        XDrawRectangle(dpy, panel->preview, WMColorGC(black),
+                       previewPositions[PCLIP].pos.x-1,
+                       previewPositions[PCLIP].pos.y-1,
+                       previewPositions[PCLIP].size.width,
+                       previewPositions[PCLIP].size.height);
+    }
+    if (elements & (1<<PICON)) {
+        renderPreview(panel, gc, PICON, RBEV_RAISED3);
+        XDrawRectangle(dpy, panel->preview, WMColorGC(black),
+                       previewPositions[PICON].pos.x-1,
+                       previewPositions[PICON].pos.y-1,
+                       previewPositions[PICON].size.width,
+                       previewPositions[PICON].size.height);
+    }
+    drawFonts(panel, elements);
+    WMRedisplayWidget(panel->prevL);
+    XFreeGC(dpy, gc);
+    WMReleaseColor(black);
+}
+
+static void
+paintTextField(void *data, int section)
+{
+    _Panel *panel = (_Panel*)data;
+    //char *sample = NULL;
+    int encoding;
+    encoding = WMGetPopUpButtonSelectedItem(panel->langP);
+    WMSetTextFieldFont(panel->fontT, getFontForPreview(panel, section));
+    switch(encoding) {
+    case 0:  /* Current Font in theme */
+        WMSetTextFieldText(panel->fontT,
+                           "ABCDEFGHIKLMNOPQRSTUVXYWZabcdefghiklmnopqrstuvxywz0123456789\x00e0\x00e6\x00e7\x00eb\x00ee\x00f0\x00f1\x00f3\x00f9\x00fd\x00c0\x00c6\x00c7\x00cb\x00ce\x00d0\x00d1\x00d3\x00d9\x00dd");
+        break;
+    case 1:  /* default */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //	"ABCDEFGHIKLMNOPQRSTUVXYWZabcdefghiklmnopqrstuvxywz0123456789\x00e0\x00e6\x00e7\x00eb\x00ee\x00f0\x00f1\x00f3\x00f9\x00fd\x00c0\x00c6\x00c7\x00cb\x00ce\x00d0\x00d1\x00d3\x00d9\x00dd");
+        break;
+    case 2:  /* latin1 iso8859-1 */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //  "ABCDEFGHIKLMNOPQRSTUVXYWZabcdefghiklmnopqrstuvxywz0123456789\x00e0\x00e6\x00e7\x00eb\x00ee\x00f0\x00f1\x00f3\x00f9\x00fd\x00c0\x00c6\x00c7\x00cb\x00ce\x00d0\x00d1\x00d3\x00d9\x00dd");
+        break;
+    case 3:  /* latin2 iso8859-2 */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //		"ABCDEFGHIKLMNOPQRSTUVXYWZabcdefghiklmnopqrstuvxywz0123456789\x00e0\x00e6\x00e7\x00eb\x00ee\x00f0\x00f1\x00f3\x00f9\x00fd\x00c0\x00c6\x00c7\x00cb\x00ce\x00d0\x00d1\x00d3\x00d9\x00dd");
+        break;
+    case 4:  /* Greek iso8859-7 */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //		"ABCDEFGHIKLMNOPQRSTUVXYWZabcdefghiklmnopqrstuvxywz0123456789\x00e0\x00e6\x00e7\x00eb\x00ee\x00f0\x00f1\x00f3\x00f9\x00fd\x00c0\x00c6\x00c7\x00cb\x00ce\x00d0\x00d1\x00d3\x00d9\x00dd");
+        break;
+        /* luckily all these happen to have the MultiByte chars in the same places */
+    case 5:  /* Japanese jisx0208.1983 */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //		"Window Maker ÀßÄê¥æ¡¼¥Æ¥£¥ê¥Æ¥£");
+        break;
+    case 6:  /* Korean ksc5601.1987 */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //		"À©µµ¿ì ¸ÞÀÌÄ¿ ¼³Á¤");
+        break;
+    case 7:  /* korean2 daewoo */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //		"À©µµ¿ì ¸ÞÀÌÄ¿ ¼³Á¤");
+        break;
+    case 8:  /* Russian koi8-r */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //		"ó×ÏÊÓÔ×Á Window Maker");
+        break;
+    case 9:  /* Ukranian koi8-u */
+        WMSetTextFieldText(panel->fontT, getFontSampleString(panel));
+        //		"ABCDEFGHIKLMNOPQRSTUVXYWZabcdefghiklmnopqrstuvxywz0123456789\x00e0\x00e6\x00e7\x00eb\x00ee\x00f0\x00f1\x00f3\x00f9\x00fd\x00c0\x00c6\x00c7\x00cb\x00ce\x00d0\x00d1\x00d3\x00d9\x00dd");
+        break;
+    }
+}
+
+static void
+previewClick(XEvent *event, void *clientData)
+{
+    _Panel *panel = (_Panel*)clientData;
+    int i;
+
+    for (i = 0; i < sizeof(previewPositions)/sizeof(WMRect); i++) {
+        if (event->xbutton.x >= previewPositions[i].pos.x
+            && event->xbutton.y >= previewPositions[i].pos.y
+            && event->xbutton.x < previewPositions[i].pos.x
+            + previewPositions[i].size.width
+            && event->xbutton.y < previewPositions[i].pos.y
+            + previewPositions[i].size.height) {
+
+            WMSetPopUpButtonSelectedItem(panel->fontSel, i);
+            changePage(panel->fontSel, panel);
+            return;
+        }
+    }
+}
+
+static void
+changePage(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    int section;
+    WMScreen *scr = WMWidgetScreen(panel->box);
+    RContext *rc = WMScreenRContext(scr);
+    static WMPoint positions[] = {
+        {5, 15},
+        {5, 62},
+        {5, 110},
+        {5, 140},
+        {130, 62},
+        {130, 132}
+    };
+
+    if (w) {
+        section = WMGetPopUpButtonSelectedItem(panel->fontSel);
+    }
+    {
+        WMColor *color;
+
+        color = WMCreateRGBColor(scr, 0x5100, 0x5100, 0x7100, True);
+        XFillRectangle(rc->dpy, panel->preview, WMColorGC(color),
+                       positions[panel->oldsection].x,
+                       positions[panel->oldsection].y, 22, 22);
+        WMReleaseColor(color);
+    }
+    if (w) {
+        panel->oldsection = section;
+        WMDrawPixmap(panel->hand, panel->preview, positions[section].x,
+                     positions[section].y);
+    }
+    WMRedisplayWidget(panel->prevL);
+    paintTextField(panel, section);
+    refillFontSetList(panel);
+}
+
+static void
+setLanguageType(void *data, Bool multiByte)
+{
+    _Panel *p = (_Panel*)data;
+
+    if (multiByte) {
+        WMMapWidget(p->fsetL);
+        WMMapWidget(p->fsetLs);
+        WMMapWidget(p->addB);
+        WMMapWidget(p->editB);
+        WMMapWidget(p->remB);
+        WMMapWidget(p->upB);
+        WMMapWidget(p->downB);
+
+        WMUnmapWidget(p->fontT);
+        WMUnmapWidget(p->changeB);
+    } else {
+        WMUnmapWidget(p->fsetL);
+        WMUnmapWidget(p->fsetLs);
+        WMUnmapWidget(p->addB);
+        WMUnmapWidget(p->editB);
+        WMUnmapWidget(p->remB);
+        WMUnmapWidget(p->upB);
+        WMUnmapWidget(p->downB);
+
+        WMMapWidget(p->fontT);
+        WMMapWidget(p->changeB);
+    }
+}
+
+static void
+refillFontSetList(void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    WMPropList *array;
+    char *encoding = getFontEncoding(panel);
+    int section = WMGetPopUpButtonSelectedItem(panel->fontSel);
+    int i;
+    //int pos;
+    WMClearList(panel->fsetLs);
+    if(!encoding) {
+        array = getCurrentFontProp(panel, section);
+    } else {
+        array = getDefaultFontProp(panel, encoding, section);
+    }
+    if(!array){
+        wwarning("error not Font prop given");
+    } else {
+        for (i = 0; i < WMGetPropListItemCount(array); i++) {
+            WMGetFromPLArray(array, i);
+            WMAddListItem( panel->fsetLs,
+                          WMGetFromPLString(
+                                            WMGetFromPLArray(array, i)));
+        }
+        WMReleasePropList(array);
+        WMSelectListItem(panel->fsetLs, 0);
+    }
+
+    checkListForArrows(panel);
+}
+
+static void
+insertCurrentFont(char *data, char *type)
+{
+    WMPropList *key;
+    WMPropList *array;
+    char *tmp, *str;
+
+    key = WMCreatePLString(type);
+    array = WMCreatePLArray(NULL);
+
+    str = wstrdup(data);
+    tmp = strtok(str, ",");
+    while(tmp) {
+        WMAddToPLArray(array, WMCreatePLString(tmp));
+        tmp = strtok(NULL, ",");
+    }
+    wfree(str);
+
+
+    WMPutInPLDictionary(CurrentFontArray, key, array);
+}
+
+static void
+readFontEncodings(void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    WMPropList *pl = NULL;
+    char *path;
+    char *msg;
+
+    path = WMPathForResourceOfType("font.data", NULL);
+    if (!path) {
+        msg = _("Could not locate font information file WPrefs.app/font.data");
+        goto error;
+    }
+
+    pl = WMReadPropListFromFile(path);
+    if (!pl) {
+        msg = _("Could not read font information file WPrefs.app/font.data");
+        goto error;
+    } else {
+        int i;
+        WMPropList *key = WMCreatePLString("Encodings");
+        WMPropList *array;
+        WMMenuItem *mi;
+
+        array = WMGetFromPLDictionary(pl, key);
+        WMReleasePropList(key);
+        if (!array || !WMIsPLArray(array)) {
+            msg = _("Invalid data in font information file WPrefs.app/font.data.\n"
+                    "Encodings data not found.");
+            goto error;
+        }
+
+        WMAddPopUpButtonItem(panel->langP, _("Current"));
+
+        for (i = 0; i < WMGetPropListItemCount(array); i++) {
+            WMPropList *item, *str;
+
+            item = WMGetFromPLArray(array, i);
+            str = WMGetFromPLArray(item, 0);
+            mi = WMAddPopUpButtonItem(panel->langP, WMGetFromPLString(str));
+            WMSetMenuItemRepresentedObject(mi, WMRetainPropList(item));
+        }
+        WMSetPopUpButtonSelectedItem(panel->langP, 0);
+
+
+        key = WMCreatePLString("WindowTitleFont");
+        DefaultWindowTitleFont = WMRetainPropList(WMGetFromPLDictionary(pl, key));
+        WMReleasePropList(key);
+
+        key = WMCreatePLString("MenuTitleFont");
+        DefaultMenuTitleFont = WMRetainPropList(WMGetFromPLDictionary(pl, key));
+        WMReleasePropList(key);
+
+        key = WMCreatePLString("MenuTextFont");
+        DefaultMenuTextFont = WMRetainPropList(WMGetFromPLDictionary(pl, key));
+        WMReleasePropList(key);
+
+        key = WMCreatePLString("IconTitleFont");
+        DefaultIconTitleFont = WMRetainPropList(WMGetFromPLDictionary(pl, key));
+        WMReleasePropList(key);
+
+        key = WMCreatePLString("ClipTitleFont");
+        DefaultClipTitleFont = WMRetainPropList(WMGetFromPLDictionary(pl, key));
+        WMReleasePropList(key);
+
+        key = WMCreatePLString("LargeDisplayFont");
+        DefaultLargeDisplayFont = WMRetainPropList(WMGetFromPLDictionary(pl, key));
+        WMReleasePropList(key);
+    }
+
+    WMReleasePropList(pl);
+    return;
+error:
+    if (pl)
+        WMReleasePropList(pl);
+
+    WMRunAlertPanel(WMWidgetScreen(panel->parent), panel->parent,
+                    _("Error"), msg, _("OK"), NULL, NULL);
+}
+
+static void
+checkListForArrows(void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    int list;
+    list = WMGetListNumberOfRows(panel->fsetLs);
+
+    if(list > 1)
+    {
+        if(WMGetListSelectedItemRow(panel->fsetLs) == 0) {
+            WMSetButtonEnabled(panel->upB, False);
+            WMSetButtonEnabled(panel->downB, True);
+        } else if(WMGetListSelectedItemRow(panel->fsetLs) == list-1) {
+            WMSetButtonEnabled(panel->downB, False);
+            WMSetButtonEnabled(panel->upB, True);
+        } else {
+            WMSetButtonEnabled(panel->upB, True);
+            WMSetButtonEnabled(panel->downB, True);
+        }
+
+    } else {
+        WMSetButtonEnabled(panel->upB, False);
+        WMSetButtonEnabled(panel->downB, False);
+    }
+    /* added to control the Remove button */
+    if(list > 1)
+        WMSetButtonEnabled(panel->remB, True);
+    else
+        WMSetButtonEnabled(panel->remB, False);
+}
+
+static char*
+fontOfLang(void *data, char *encoding, int section)
+{
+    _Panel *panel = (_Panel*)data;
+    WMPropList *array;
+    char *buf = NULL;
+    int i;
+
+    if(!encoding)
+        array = getCurrentFontProp(panel, section);
+    else
+        array = getDefaultFontProp(panel, encoding, section);
+
+    if(!array) {
+        wwarning("error no font prop given");
+        return NULL;
+    } else {
+        for(i=0; i<WMGetPropListItemCount(array); i++)
+        {
+            if(buf) buf = wstrconcat(buf, ",");
+            buf = wstrconcat(buf, WMGetFromPLString(WMGetFromPLArray(array, i)));
+        }
+        WMReleasePropList(array);
+        return wstrdup(buf);
+    }
+}
+
+static void
+changeLanguageAction(WMWidget *w, void *data)
+{
+    Panel *panel = (Panel*)data;
+    //WMScreen *scr = WMWidgetScreen(panel->box);
+    int section;
+
+    section = WMGetPopUpButtonSelectedItem(w);
+
+    if(isEncodingMultiByte(panel)) {
+        setLanguageType(panel, True);
+    } else {
+        if(panel->MultiByteText) setLanguageType(panel, True);
+        else setLanguageType(panel, False);
+    }
+
+    paintPreviewBox(panel, EVERYTHING);
+    changePage(panel->fontSel, panel);
+}
+
+static WMFont*
+getFontForPreview(void *data, int element)
+{
+    _Panel *panel = (_Panel*)data;
+    WMFont *font;
+    char *fname;
+    WMScreen *scr = WMWidgetScreen(panel->box);
+    char *encoding = getFontEncoding(panel);
+    fname = fontOfLang(panel, encoding, element);
+    //if (WMHasAntialiasingSupport(scr)) {
+    if(panel->AntialiasedText) {
+        // fix this -Dan font = WMCreateFontWithFlags(scr, fname, WFAntialiased);
+        font = WMCreateFont(scr, fname);
+    } else {
+        font = WMCreateFont(scr, fname);
+    }
+    //} else {
+    //	font = WMCreateFont(scr, fname);
+    //}
+    if(!font) {
+        char *msg;
+        int length;
+        length = strlen("\"")+
+            strlen(fname)+strlen("\" was not loaded correctly.  Make sure the font is available for that encoding.\nLoadind default system font.");
+        msg = wmalloc(length +1);
+        snprintf(msg, length + 1,
+                 "\"%s\" was not loaded correctly.  Make sure the font is available for that encoding.\nLoading default system font.",
+                 fname);
+        WMRunAlertPanel(WMWidgetScreen(panel->parent),panel->parent,
+                        _("Warning"), msg, _("OK"), NULL, NULL);
+        font = getDefaultSystemFont(panel, element);
+    }
+    return font;
+}
+
+static char*
+getFontSampleString(void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    //WMScreen *scr = WMWidgetScreen(panel->box);
+    WMMenuItem *mi;
+    WMPropList *pl;
+    int section;
+
+    section = WMGetPopUpButtonSelectedItem(panel->langP);
+    mi = WMGetPopUpButtonMenuItem(panel->langP, section);
+    pl = WMGetMenuItemRepresentedObject(mi);
+
+    if (!pl) {
+        return NULL;
+    } else {
+        char *sample;
+        sample = WMGetFromPLString(WMGetFromPLArray(pl,3));
+        return sample;
+    }
+}
+
+static char*
+getFontEncoding(void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    //WMScreen *scr = WMWidgetScreen(panel->box);
+    WMMenuItem *mi;
+    WMPropList *pl;
+    int section;
+
+    section = WMGetPopUpButtonSelectedItem(panel->langP);
+    mi = WMGetPopUpButtonMenuItem(panel->langP, section);
+    pl = WMGetMenuItemRepresentedObject(mi);
+
+    if (!pl) {
+        return NULL;
+    } else {
+        char *encoding;
+        encoding = WMGetFromPLString(WMGetFromPLArray(pl,2));
+        return encoding;
+    }
+}
+
+static Bool
+isEncodingMultiByte(void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    //WMScreen *scr = WMWidgetScreen(panel->box);
+    WMMenuItem *mi;
+    WMPropList *pl;
+    int section;
+
+    section = WMGetPopUpButtonSelectedItem(panel->langP);
+    mi = WMGetPopUpButtonMenuItem(panel->langP, section);
+    pl = WMGetMenuItemRepresentedObject(mi);
+
+    if (!pl) {
+        return False;
+    } else {
+        char *multiByte;
+        int res;
+        multiByte = WMGetFromPLString(WMGetFromPLArray(pl,1));
+        res = atoi(multiByte);
+        if(res)
+            return True;
+        else
+            return False;
+    }
+}
+
+static WMPropList*
+getCurrentFontProp(void *data, int section)
+{
+    WMPropList *array;
+    switch (section) {
+    case 0:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(CurrentFontArray,
+                                                       WMCreatePLString("WindowTitleFont")));
+        break;
+    case 1:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(CurrentFontArray,
+                                                       WMCreatePLString("LargeDisplayFont")));
+        break;
+    case 2:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(CurrentFontArray,
+                                                       WMCreatePLString("MenuTitleFont")));
+        break;
+    case 3:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(CurrentFontArray,
+                                                       WMCreatePLString("MenuTextFont")));
+        break;
+    case 4:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(CurrentFontArray,
+                                                       WMCreatePLString("ClipTitleFont")));
+        break;
+    case 5:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(CurrentFontArray,
+                                                       WMCreatePLString("IconTitleFont")));
+        break;
+    }
+    if(!WMIsPLArray(array)) {
+        return NULL;
+    } else {
+        return array;
+    }
+}
+
+static WMPropList*
+getDefaultFontProp(void *data, char *encoding, int section)
+{
+    WMPropList *array;
+    WMPropList *key = WMCreatePLString(encoding);
+    switch (section) {
+    case 0:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(DefaultWindowTitleFont, key));
+        WMReleasePropList(key);
+        break;
+    case 1:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(DefaultLargeDisplayFont, key));
+        WMReleasePropList(key);
+        break;
+    case 2:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(DefaultMenuTitleFont, key));
+        WMReleasePropList(key);
+        break;
+    case 3:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(DefaultMenuTextFont, key));
+        WMReleasePropList(key);
+        break;
+    case 4:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(DefaultClipTitleFont, key));
+        WMReleasePropList(key);
+        break;
+    case 5:
+        array = WMRetainPropList(
+                                 WMGetFromPLDictionary(DefaultIconTitleFont, key));
+        WMReleasePropList(key);
+        break;
+    }
+    if(!WMIsPLArray(array)) {
+        return NULL;
+    } else {
+        return array;
+    }
+}
+
+static WMFont*
+getDefaultSystemFont(void *data, int element)
+{
+    _Panel *panel = (_Panel*)data;
+    WMScreen *scr = WMWidgetScreen(panel->box);
+
+    switch(element) {
+    case 0:
+    case 2:
+        return WMBoldSystemFontOfSize(scr, 12);
+    case 1:
+        return WMBoldSystemFontOfSize(scr, 24);
+    case 4:
+    case 5:
+        return WMSystemFontOfSize(scr, 8);
+    case 3:
+    default:
+        return WMSystemFontOfSize(scr, 12);
+    }
+}
+
+static void
+multiClick(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    if(!panel->MultiByteText) {
+        WMSetButtonText(panel->togMulti, _("Yes"));
+        setLanguageType(panel, True);
+        panel->MultiByteText = True;
+    } else {
+        WMSetButtonText(panel->togMulti, _("Auto"));
+        if(isEncodingMultiByte(panel)) setLanguageType(panel, True);
+        else setLanguageType(panel, False);
+        panel->MultiByteText = False;
+    }
+}
+
+static void
+toggleAA(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    //int section;
+    if(panel->AntialiasedText)
+        panel->AntialiasedText = False;
+    else
+        panel->AntialiasedText = True;
+    /* hmm now i gotta redraw all the fonts in the preview section
+     * and the text field
+     */
+    paintPreviewBox(panel, EVERYTHING);
+    changePage(panel->fontSel, panel);
+    if(isEncodingMultiByte(panel)) setLanguageType(panel, True);
+}
+
+static void
+listClick(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+
+    checkListForArrows(panel);
+}
+
+static void
+moveUpListItem(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    WMListItem *tmp;
+    int pos;
+    char *listtext;
+    WMPropList *array;
+    WMPropList *string;
+    char *encoding = getFontEncoding(panel);
+    int section = WMGetPopUpButtonSelectedItem(panel->fontSel);
+
+    if(!encoding)
+        array = getCurrentFontProp(panel, section);
+    else
+        array = getDefaultFontProp(panel, encoding, section);
+
+    pos = WMGetListSelectedItemRow(panel->fsetLs);
+
+    tmp = WMGetListItem(panel->fsetLs, pos);
+    listtext = wstrdup(tmp->text);
+    string = WMCreatePLString(listtext);
+
+    WMRemoveListItem(panel->fsetLs, pos);
+    WMDeleteFromPLArray(array, pos);
+    WMInsertListItem(panel->fsetLs, pos-1, listtext);
+    WMInsertInPLArray(array, pos-1, string);
+
+    paintPreviewBox(panel, EVERYTHING);
+    changePage(panel->fontSel, panel);
+
+    WMSelectListItem(panel->fsetLs, pos-1);
+    checkListForArrows(panel);
+}
+
+static void
+moveDownListItem(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    WMListItem *tmp;
+    int pos;
+    char *listtext;
+    WMPropList *array;
+    WMPropList *string;
+    char *encoding = getFontEncoding(panel);
+    int section = WMGetPopUpButtonSelectedItem(panel->fontSel);
+
+    if(!encoding)
+        array = getCurrentFontProp(panel, section);
+    else
+        array = getDefaultFontProp(panel, encoding, section);
+
+    pos = WMGetListSelectedItemRow(panel->fsetLs);
+
+    tmp = WMGetListItem(panel->fsetLs, pos);
+    listtext = wstrdup(tmp->text);
+    string = WMCreatePLString(listtext);
+    WMRemoveListItem(panel->fsetLs, pos);
+    WMDeleteFromPLArray(array, pos);
+    WMInsertListItem(panel->fsetLs, pos+1, listtext);
+    WMInsertInPLArray(array, pos+1, string);
+
+    paintPreviewBox(panel, EVERYTHING);
+    changePage(panel->fontSel, panel);
+
+    WMSelectListItem(panel->fsetLs, pos+1);
+    checkListForArrows(panel);
+}
+
+static void
+addButtonAction(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    char *chosenFont;
+    int pos;
+    WMPropList *array;
+    WMPropList *string;
+    char *encoding = getFontEncoding(panel);
+    int section = WMGetPopUpButtonSelectedItem(panel->fontSel);
+
+    if(!encoding)
+        array = getCurrentFontProp(panel, section);
+    else
+        array = getDefaultFontProp(panel, encoding, section);
+
+    WMHideFontPanel(panel->fontPanel);
+    chosenFont = WMGetFontName(WMGetFontPanelFont(panel->fontPanel));
+    string = WMCreatePLString(chosenFont);
+    pos = WMGetListSelectedItemRow(panel->fsetLs);
+    WMInsertListItem(panel->fsetLs, pos+1, chosenFont);
+    WMInsertInPLArray(array, pos+1, string);
+    WMSelectListItem(panel->fsetLs, pos+1);
+
+    paintPreviewBox(panel, EVERYTHING);
+    changePage(panel->fontSel, panel);
+}
+
+static void
+changeButtonAction(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    char *chosenFont;
+    int pos;
+    WMPropList *array;
+    WMPropList *string;
+    char *encoding = getFontEncoding(panel);
+    int section = WMGetPopUpButtonSelectedItem(panel->fontSel);
+
+    if(!encoding)
+        array = getCurrentFontProp(panel, section);
+    else
+        array = getDefaultFontProp(panel, encoding, section);
+
+    WMHideFontPanel(panel->fontPanel);
+
+    chosenFont = WMGetFontName(WMGetFontPanelFont(panel->fontPanel));
+    string = WMCreatePLString(chosenFont);
+
+    pos = WMGetListSelectedItemRow(panel->fsetLs);
+    WMRemoveListItem(panel->fsetLs, pos);
+    WMDeleteFromPLArray(array, pos);
+    WMInsertListItem(panel->fsetLs, pos, chosenFont);
+    WMInsertInPLArray(array, pos, string);
+    WMSelectListItem(panel->fsetLs, pos);
+
+    paintPreviewBox(panel, EVERYTHING);
+    changePage(panel->fontSel, panel);
+}
+
+static void
+changeButtonClick(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+
+    WMSetFontPanelAction(panel->fontPanel, changeButtonAction, panel);
+    WMShowFontPanel(panel->fontPanel);
+}
+
+static void
+addButtonClick(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+
+    WMSetFontPanelAction(panel->fontPanel, addButtonAction, panel);
+    WMShowFontPanel(panel->fontPanel);
+}
+
+static void
+removeButtonClick(WMWidget *w, void *data)
+{
+    _Panel *panel = (_Panel*)data;
+    int pos;
+    int list;
+    WMPropList *array;
+    char *encoding = getFontEncoding(panel);
+    int section = WMGetPopUpButtonSelectedItem(panel->fontSel);
+
+    if(!encoding)
+        array = getCurrentFontProp(panel, section);
+    else
+        array = getDefaultFontProp(panel, encoding, section);
+
+    pos = WMGetListSelectedItemRow(panel->fsetLs);
+    WMRemoveListItem(panel->fsetLs, pos);
+    WMDeleteFromPLArray(array, pos);
+
+    list = WMGetListNumberOfRows(panel->fsetLs);
+    if(list != 0) {
+        if(list > pos)
+            WMSelectListItem(panel->fsetLs, pos);
+        else if(list == pos)
+            WMSelectListItem(panel->fsetLs, list-1);
+        else
+            WMSelectListItem(panel->fsetLs, 0);
+    }
+    checkListForArrows(panel);
+
+    paintPreviewBox(panel, EVERYTHING);
+    changePage(panel->fontSel, panel);
+}
+
+static void
+showData(_Panel *panel)
+{
+    //WMScreen *scr = WMWidgetScreen(panel->parent);
+    char *str;
+    int i;
+
+    CurrentFontArray = WMCreatePLDictionary(NULL, NULL);
+
+    str = GetStringForKey("WindowTitleFont");
+    insertCurrentFont(wstrdup(str), "WindowTitleFont");
+
+    str = GetStringForKey("LargeDisplayFont");
+    insertCurrentFont(wstrdup(str), "LargeDisplayFont");
+
+    str = GetStringForKey("MenuTitleFont");
+    insertCurrentFont(wstrdup(str), "MenuTitleFont");
+
+    str = GetStringForKey("MenuTextFont");
+    insertCurrentFont(wstrdup(str), "MenuTextFont");
+
+    str = GetStringForKey("ClipTitleFont");
+    insertCurrentFont(wstrdup(str), "ClipTitleFont");
+
+    str = GetStringForKey("IconTitleFont");
+    insertCurrentFont(wstrdup(str), "IconTitleFont");
+
+    /* i put this here cause it needs to be known before we paint */
+    readFontEncodings(panel);
+
+    str = GetStringForKey("MenuStyle");
+    if (str && strcasecmp(str, "flat")==0) {
+        panel->menuStyle = MSTYLE_FLAT;
+    } else if (str && strcasecmp(str, "singletexture")==0) {
+        panel->menuStyle = MSTYLE_SINGLE;
+    } else {
+        panel->menuStyle = MSTYLE_NORMAL;
+    }
+
+    str = GetStringForKey("TitleJustify");
+    if (str && strcasecmp(str, "left")==0) {
+        panel->titleAlignment = WALeft;
+    } else if (str && strcasecmp(str, "right")==0) {
+        panel->titleAlignment = WARight;
+    } else {
+        panel->titleAlignment = WACenter;
+    }
+    for (i = 0; i < sizeof(colorOptions)/(2*sizeof(char*)); i++) {
+        WMColor *color;
+
+        str = GetStringForKey(colorOptions[i*2]);
+        if (!str)
+            str = colorOptions[i*2+1];
+
+        if (!(color = WMCreateNamedColor(WMWidgetScreen(panel->box), str, False))) {
+            color = WMCreateNamedColor(WMWidgetScreen(panel->box), "#000000", False);
+        }
+        panel->colors[i] = color;
+    }
+
+    str = GetStringForKey("MultiByteText");
+    if (str)
+    {
+        if (strcasecmp(str, "YES")==0) {
+            setLanguageType(panel, True);
+            WMSetButtonText(panel->togMulti, "Yes");
+            printf("yes multi\n");
+            panel->MultiByteText = True;
+        } else if (strcasecmp(str, "AUTO") == 0) {
+            char *locale;
+            locale = setlocale(LC_CTYPE, NULL);
+            if(locale != NULL
+               && (strncmp(locale, "ja", 2) == 0
+                   || strncmp(locale, "zh", 2) == 0
+                   || strncmp(locale, "ko", 2) == 0)) {
+                setLanguageType(panel, True);
+                WMSetButtonText(panel->togMulti, "Auto");
+                printf("auto multi\n");
+                panel->MultiByteText = True;
+            } else {
+                setLanguageType(panel, False);
+                WMSetButtonText(panel->togMulti, "Auto");
+                panel->MultiByteText = False;
+            }
+        }
+    } else {
+        char *locale;
+        locale = setlocale(LC_CTYPE, NULL);
+        if(locale != NULL
+           && (strncmp(locale, "ja", 2) == 0
+               || strncmp(locale, "zh", 2) == 0
+               || strncmp(locale, "ko", 2) == 0)) {
+            setLanguageType(panel, True);
+            WMSetButtonText(panel->togMulti, "Auto");
+            printf("auto multi\n");
+            panel->MultiByteText = True;
+        } else {
+            setLanguageType(panel, False);
+            WMSetButtonText(panel->togMulti, "Auto");
+            panel->MultiByteText = False;
+        }
+    }
+    /* gotta check for Antialiasing AFTER MultiByte incase the use has both
+     * to maintain behavior in Current Fonts set or i could add another if
+     * statement to setLanguageType =) */
+    //if (WMHasAntialiasingSupport(scr)) {
+    WMMapWidget(panel->togAA);
+    if(GetBoolForKey("AntialiasedText")){
+        WMSetButtonSelected(panel->togAA, True);
+        panel->AntialiasedText = True;
+    } else {
+        WMSetButtonSelected(panel->togAA, False);
+        panel->AntialiasedText = False;
+    }
+    //} else {
+    //	WMUnmapWidget(panel->togAA);
+    //}
+
+
+    paintPreviewBox(panel, EVERYTHING);
+}
+
+static void
+createPanel(Panel *p)
+{
+    _Panel *panel = (_Panel*)p;
+    WMScreen *scr = WMWidgetScreen(panel->parent);
+
+
+    panel->box = WMCreateBox(panel->parent);
+    WMSetViewExpandsToParent(WMWidgetView(panel->box), 2, 2, 2, 2);
+
+    panel->hand = WMCreatePixmapFromXPMData(scr, hand_xpm);
+    panel->up_arrow = WMCreatePixmapFromXPMData(scr, up_arrow_xpm);
+    panel->down_arrow = WMCreatePixmapFromXPMData(scr, down_arrow_xpm);
+    panel->alt_up_arrow = WMCreatePixmapFromXPMData(scr, alt_up_arrow_xpm);
+    panel->alt_down_arrow = WMCreatePixmapFromXPMData(scr, alt_down_arrow_xpm);
+
+    panel->prevL = WMCreateLabel(panel->box);
+    WMResizeWidget(panel->prevL, 240, FRAME_HEIGHT - 45);
+    WMMoveWidget(panel->prevL, 15, 35);
+    WMSetLabelRelief(panel->prevL, WRSunken);
+    WMSetLabelImagePosition(panel->prevL, WIPImageOnly);
+
+    WMCreateEventHandler(WMWidgetView(panel->prevL), ButtonPressMask,
+                         previewClick, panel);
+
+    /* Widget Selection */
+    panel->fontSel = WMCreatePopUpButton(panel->box);
+    WMResizeWidget(panel->fontSel, 135, 20);
+    WMMoveWidget(panel->fontSel, 15, 10);
+    WMAddPopUpButtonItem(panel->fontSel, _("Window Title Font"));
+    WMAddPopUpButtonItem(panel->fontSel, _("Large Display Font"));
+    WMAddPopUpButtonItem(panel->fontSel, _("Menu Title Font"));
+    WMAddPopUpButtonItem(panel->fontSel, _("Menu Item Font" ));
+    WMAddPopUpButtonItem(panel->fontSel, _("Clip Title Font"));
+    WMAddPopUpButtonItem(panel->fontSel, _("Icon Title Font"));
+
+    WMSetPopUpButtonSelectedItem(panel->fontSel, 0);
+
+    WMSetPopUpButtonAction(panel->fontSel, changePage, panel);
+
+    /* MultiByteText toggle */
+    panel->multiF = WMCreateFrame(panel->box);
+    WMResizeWidget(panel->multiF, 70, 50);
+    WMMoveWidget(panel->multiF, 440, 10);
+    WMSetFrameTitle(panel->multiF, _("MultiByte"));
+
+
+    panel->togMulti = WMCreateCommandButton(panel->multiF);
+    WMResizeWidget(panel->togMulti, 40, 20);
+    WMMoveWidget(panel->togMulti, 15, 20);
+    WMSetButtonAction(panel->togMulti, multiClick, panel);
+
+    WMMapSubwidgets(panel->multiF);
+
+    /* language selection */
+    panel->langF = WMCreateFrame(panel->box);
+    WMResizeWidget(panel->langF, 165, 50);
+    WMMoveWidget(panel->langF, 265, 10);
+    WMSetFrameTitle(panel->langF, _("Default Font Encodings"));
+
+    panel->langP = WMCreatePopUpButton(panel->langF);
+    WMResizeWidget(panel->langP, 135, 20);
+    WMMoveWidget(panel->langP, 15, 20);
+
+    WMSetPopUpButtonAction(panel->langP, changeLanguageAction, panel);
+
+    WMMapSubwidgets(panel->langF);
+
+    /* Antialiasing */
+    //if (WMHasAntialiasingSupport(scr)) {
+    panel->togAA = WMCreateSwitchButton(panel->box);
+    WMResizeWidget(panel->togAA, 110, 20);
+    WMMoveWidget(panel->togAA, 155, 10);
+    WMSetButtonText(panel->togAA, _("Smooth Fonts"));
+    WMSetBalloonTextForView(_("Smooth Font edges for the eye candy\n"
+                              "requires a restart after saving"),
+                            WMWidgetView(panel->togAA));
+    WMSetButtonAction(panel->togAA, toggleAA, panel);
+    //}
+    /* multibyte */
+    panel->fsetL = WMCreateLabel(panel->box);
+    WMResizeWidget(panel->fsetL, 245, 20);
+    WMMoveWidget(panel->fsetL, 265, 70);
+    WMSetLabelText(panel->fsetL, _("Font Set"));
+    WMSetLabelRelief(panel->fsetL, WRSunken);
+    WMSetLabelTextAlignment(panel->fsetL, WACenter);
+    {
+        WMFont *font;
+        WMColor *color;
+
+        color = WMDarkGrayColor(scr);
+        font = WMBoldSystemFontOfSize(scr, 12);
+
+        WMSetWidgetBackgroundColor(panel->fsetL, color);
+        WMSetLabelFont(panel->fsetL, font);
+
+        WMReleaseFont(font);
+        WMReleaseColor(color);
+
+        color = WMWhiteColor(scr);
+        WMSetLabelTextColor(panel->fsetL, color);
+        WMReleaseColor(color);
+    }
+
+    panel->fsetLs = WMCreateList(panel->box);
+    WMResizeWidget(panel->fsetLs, 245, 86);
+    WMMoveWidget(panel->fsetLs, 265, 92);
+    WMSetListAction(panel->fsetLs, listClick, panel);
+    WMSetListDoubleAction(panel->fsetLs, changeButtonClick, panel);
+
+    panel->addB = WMCreateCommandButton(panel->box);
+    WMResizeWidget(panel->addB, 78, 24);
+    WMMoveWidget(panel->addB, 265, 201);
+    WMSetButtonText(panel->addB, _("Add..."));
+    WMSetButtonAction(panel->addB, addButtonClick, panel);
+
+    panel->editB = WMCreateCommandButton(panel->box);
+    WMResizeWidget(panel->editB, 78, 24);
+    WMMoveWidget(panel->editB, 348, 201);
+    WMSetButtonText(panel->editB, _("Change..."));
+    WMSetButtonAction(panel->editB, changeButtonClick, panel);
+
+    panel->remB = WMCreateCommandButton(panel->box);
+    WMResizeWidget(panel->remB, 78, 24);
+    WMMoveWidget(panel->remB, 431, 201);
+    WMSetButtonText(panel->remB, _("Remove"));
+    WMSetButtonAction(panel->remB, removeButtonClick, panel);
+
+    /* happy Up/Down buttons */
+    panel->upB = WMCreateCommandButton(panel->box);
+    WMResizeWidget(panel->upB, 16, 16);
+    WMMoveWidget(panel->upB, 265, 182);
+    WMSetButtonImage(panel->upB, panel->up_arrow);
+    WMSetButtonAltImage(panel->upB, panel->alt_up_arrow);
+    WMSetButtonImagePosition(panel->upB, WIPImageOnly);
+    WMSetButtonImageDimsWhenDisabled(panel->upB, True);
+    WMSetButtonAction(panel->upB, moveUpListItem, panel);
+
+    panel->downB = WMCreateCommandButton(panel->box);
+    WMResizeWidget(panel->downB, 16, 16);
+    WMMoveWidget(panel->downB, 286, 182);
+    WMSetButtonImage(panel->downB, panel->down_arrow);
+    WMSetButtonAltImage(panel->downB, panel->alt_down_arrow);
+    WMSetButtonImagePosition(panel->downB, WIPImageOnly);
+    WMSetButtonImageDimsWhenDisabled(panel->downB, True);
+    WMSetButtonAction(panel->downB, moveDownListItem, panel);
+
+    /* single byte */
+    panel->fontT = WMCreateTextField(panel->box);
+    WMResizeWidget(panel->fontT, 245, 30);
+    WMMoveWidget(panel->fontT, 265, 120);
+
+    panel->changeB = WMCreateCommandButton(panel->box);
+    WMResizeWidget(panel->changeB, 104, 24);
+    WMMoveWidget(panel->changeB, 335, 160);
+    WMSetButtonText(panel->changeB, _("Change..."));
+    WMSetButtonAction(panel->changeB, changeButtonClick, panel);
+
+
+    panel->black = WMBlackColor(scr);
+    panel->white = WMWhiteColor(scr);
+    panel->light = WMGrayColor(scr);
+    panel->dark = WMDarkGrayColor(scr);
+    panel->back = WMCreateRGBColor(scr, 0x5100, 0x5100, 0x7100, True);
+
+    /* Font Panel !!!!! */
+    panel->fontPanel = WMGetFontPanel(scr);
+
+#if 0
+    for (i = 0; Languages[i].language != NULL; i++) {
+        WMAddPopUpButtonItem(panel->langP, Languages[i].language);
+    }
+
+    for (i = 0; Options[i].description != NULL; i++) {
+        WMAddListItem(panel->settingLs, Options[i].description);
+    }
+#endif
+    WMRealizeWidget(panel->box);
+    WMMapSubwidgets(panel->box);
+
+    showData(panel);
+    changePage(panel->fontSel, panel);
+}
+
+static void
+storeData(Panel *p)
+{
+    _Panel *panel = (_Panel*)p;
+    int i;
+
+    char *encoding = getFontEncoding(panel);
+
+    for(i=0;i < 6; i++)
+    {
+        switch(i) {
+        case 0:
+            SetStringForKey(fontOfLang(panel, encoding, i),
+                            "WindowTitleFont");
+            break;
+        case 1:
+            SetStringForKey(fontOfLang(panel, encoding, i),
+                            "LargeDisplayFont");
+            break;
+        case 2:
+            SetStringForKey(fontOfLang(panel, encoding, i),
+                            "MenuTitleFont");
+            break;
+        case 3:
+            SetStringForKey(fontOfLang(panel, encoding, i),
+                            "MenuTextFont");
+            break;
+        case 4:
+            SetStringForKey(fontOfLang(panel, encoding, i),
+                            "ClipTitleFont");
+            break;
+        case 5:
+            SetStringForKey(fontOfLang(panel, encoding, i),
+                            "IconTitleFont");
+            break;
+        }
+    }
+
+    //if (WMHasAntialiasingSupport(WMWidgetScreen(panel->box)))
+    SetBoolForKey(WMGetButtonSelected(panel->togAA), "AntialiasedText");
+
+    if(panel->MultiByteText)
+        SetStringForKey("YES", "MultiByteText");
+    else {
+        if(isEncodingMultiByte(panel)) SetStringForKey("YES", "MultiByteText");
+        else SetStringForKey("AUTO", "MultiByteText");
+    }
+}
+
+static void
+prepClosure(Panel *p)
+{
+    _Panel *panel = (_Panel*)p;
+    WMFreeFontPanel(panel->fontPanel);
+    WMReleasePropList(CurrentFontArray);
+    /* and what ever else i've forgotten or overlooked
+     * maybe someone will add them */
+}
+
+Panel*
+InitFont(WMScreen *scr, WMWidget *parent)
+{
+    _Panel *panel;
+
+    panel = wmalloc(sizeof(_Panel));
+    memset(panel, 0, sizeof(_Panel));
+
+    panel->sectionName = _("Font Preferences");
+    panel->description = _("Font Configurations for Windows, Menus etc");
+
+    panel->parent = parent;
+
+    panel->callbacks.createWidgets = createPanel;
+    panel->callbacks.updateDomain = storeData;
+    panel->callbacks.prepareForClose = prepClosure;
+
+    AddSection(panel, ICON_FILE);
+
+    return panel;
+}
+
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/FontSimple.c wm/WPrefs.app/FontSimple.c
--- ../work/WindowMaker-0.91.0/WPrefs.app/FontSimple.c	2004-10-24 01:59:18.000000000 +0400
+++ wm/WPrefs.app/FontSimple.c	2004-10-27 10:00:10.000000000 +0400
@@ -39,6 +39,7 @@
 # define FC_WEIGHT_ULTRABOLD         FC_WEIGHT_EXTRABOLD
 # define FC_WEIGHT_HEAVY             FC_WEIGHT_BLACK
 /* Widths */
+# define FC_WIDTH                    "width"
 # define FC_WIDTH_ULTRACONDENSED     50
 # define FC_WIDTH_EXTRACONDENSED     63
 # define FC_WIDTH_CONDENSED          75
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/Makefile.am wm/WPrefs.app/Makefile.am
--- ../work/WindowMaker-0.91.0/WPrefs.app/Makefile.am	2004-10-17 09:14:48.000000000 +0400
+++ wm/WPrefs.app/Makefile.am	2004-11-04 12:10:11.000000000 +0300
@@ -2,11 +2,11 @@
 
 AUTOMAKE_OPTIONS = no-dependencies
 
-wpexecbindir = @wprefsdir@
+wpexecbindir = @wprefs_bindir@
 
 wpexecbin_PROGRAMS = WPrefs 
 
-wpdatadir = @wprefsdir@
+wpdatadir = @wprefs_datadir@
 
 wpdata_DATA = WPrefs.tiff WPrefs.xpm
 
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/po/ja.po wm/WPrefs.app/po/ja.po
--- ../work/WindowMaker-0.91.0/WPrefs.app/po/ja.po	2004-10-26 07:52:38.000000000 +0400
+++ wm/WPrefs.app/po/ja.po	2004-10-27 10:00:10.000000000 +0400
@@ -4,309 +4,85 @@
 #             Takeo Hashimoto <hashimototakeo@mac.com>
 # collaborated with members in wmaker-jp ML and Project Vine
 #
-# Last Update: version 0.45
+# Last Update: for WindowMaker 0.91.0
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: WPrefs.app 0.45\n"
-"POT-Creation-Date: 2001-09-08 12:43+0900\n"
-"PO-Revision-Date: 2001-09-12 03:20+0900\n"
+"Project-Id-Version: WPrefs.app \n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2004-10-26 21:52+0900\n"
+"PO-Revision-Date: 2004-10-26 22:00+0900\n"
 "Last-Translator: Takeo Hashimoto <hashimototakeo@mac.com>\n"
-"Language-Team: Japanese\n"
+"Language-Team: Japanese \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8-bit\n"
+"Content-Transfer-Encoding: 8bit\n"
 
-#: ../../WPrefs.app/main.c:74
-#, c-format
-msgid "usage: %s [options]\n"
-msgstr "ä½¿ç¨æ³: %s [ãªãã·ã§ã³]\n"
-
-#: ../../WPrefs.app/main.c:75
-msgid "options:"
-msgstr "ãªãã·ã§ã³:"
-
-#: ../../WPrefs.app/main.c:76
-msgid " -display <display>\tdisplay to be used"
-msgstr " -display <display>\tä½¿ç¨ãããã£ã¹ãã¬ã¤"
-
-#: ../../WPrefs.app/main.c:77
-msgid " --version\t\tprint version number and exit"
-msgstr " -version\t\tãã¼ã¸ã§ã³ãè¡¨ç¤ºãã¦çµäº"
-
-#: ../../WPrefs.app/main.c:78
-msgid " --help\t\tprint this message and exit"
-msgstr " --help\t\tãã®ã¡ãã»ã¼ã¸ãè¡¨ç¤ºãã¦çµäº"
-
-#: ../../WPrefs.app/main.c:137
-#, c-format
-msgid "too few arguments for %s"
-msgstr "%s ã«å¯¾ããå¼æ°ãå°ãªããã¾ã"
-
-#: ../../WPrefs.app/main.c:159
-msgid "X server does not support locale"
-msgstr "Xãµã¼ããã­ã±ã¼ã«æ©è½ããµãã¼ããã¦ãã¾ãã"
-
-#: ../../WPrefs.app/main.c:162
-msgid "cannot set locale modifiers"
-msgstr "ã­ã±ã¼ã«ãè¨­å®ã§ãã¾ãã"
-
-#: ../../WPrefs.app/main.c:168
-#, c-format
-msgid "could not open display %s"
-msgstr "ãã£ã¹ãã¬ã¤ %s ãéãã¾ãã"
-
-#: ../../WPrefs.app/main.c:176
-msgid "could not initialize application"
-msgstr "ã¢ããªã±ã¼ã·ã§ã³ãåæåã§ãã¾ãã"
-
-#: ../../WPrefs.app/WPrefs.c:259
-msgid "Window Maker Preferences"
-msgstr "Window Maker ã®è¨­å®"
-
-#: ../../WPrefs.app/WPrefs.c:283
-msgid "Revert Page"
-msgstr "ãã¼ã¸ãå¾©å¸°"
-
-#: ../../WPrefs.app/WPrefs.c:289
-msgid "Revert All"
-msgstr "å¨ã¦ãå¾©å¸°"
-
-#: ../../WPrefs.app/WPrefs.c:295
-msgid "Save"
-msgstr "ä¿å­"
-
-#: ../../WPrefs.app/Appearance.c:2294 ../../WPrefs.app/WPrefs.c:301
-msgid "Close"
-msgstr "éãã"
-
-#: ../../WPrefs.app/WPrefs.c:308
-msgid "Balloon Help"
-msgstr "ãã«ã¼ã³ãã«ã"
-
-#: ../../WPrefs.app/WPrefs.c:333
-msgid "Window Maker Preferences Utility"
-msgstr "Window Maker è¨­å®ã¦ã¼ãã£ãªãã£"
-
-#: ../../WPrefs.app/WPrefs.c:340
-#, c-format
-msgid "Version %s for Window Maker %s or newer"
-msgstr "ãã¼ã¸ã§ã³ %s (Window Maker %s ä»¥éå¯¾å¿)"
-
-#: ../../WPrefs.app/WPrefs.c:348
-msgid "Starting..."
-msgstr "èµ·åä¸­..."
-
-#: ../../WPrefs.app/WPrefs.c:354
-msgid ""
-"Programming/Design: Alfredo K. Kojima\n"
-"Artwork: Marco van Hylckama Vlieg, Largo et al\n"
-"More Programming: James Thompson et al"
-msgstr ""
-"ãã­ã°ã©ã /ãã¶ã¤ã³: Alfredo K. Kojima\n"
-"ç¾è¡: Marco van Hylckama Vlieg\n"
-"ãã­ã°ã©ã : James Thompson"
-
-#: ../../WPrefs.app/WPrefs.c:454
-#, c-format
-msgid "could not locate image file %s\n"
-msgstr "ã¤ã¡ã¼ã¸ãã¡ã¤ã« %s ãè¦ä»ããã¾ãã\n"
-
-#: ../../WPrefs.app/Appearance.c:1965 ../../WPrefs.app/Configurations.c:242
-#: ../../WPrefs.app/Configurations.c:254 ../../WPrefs.app/Focus.c:289
-#: ../../WPrefs.app/Focus.c:300 ../../WPrefs.app/MenuPreferences.c:135
-#: ../../WPrefs.app/MenuPreferences.c:146
-#: ../../WPrefs.app/MenuPreferences.c:174
-#: ../../WPrefs.app/MenuPreferences.c:189 ../../WPrefs.app/MouseSettings.c:560
-#: ../../WPrefs.app/MouseSettings.c:571 ../../WPrefs.app/WPrefs.c:557
-#: ../../WPrefs.app/WPrefs.c:582
-#, c-format
-msgid "could not load icon file %s"
-msgstr "ã¢ã¤ã³ã³ %s ãã­ã¼ãã§ãã¾ãã"
-
-#: ../../WPrefs.app/WPrefs.c:669
-#, c-format
-msgid "could not load image file %s:%s"
-msgstr "ç»åãã¡ã¤ã« %s:%s ãéãã¾ãã"
-
-#: ../../WPrefs.app/WPrefs.c:688
-msgid "Loading Window Maker configuration files..."
-msgstr "Window Maker ã®è¨­å®ãã¡ã¤ã«ãèª­ã¿è¾¼ã¿ä¸­..."
-
-#: ../../WPrefs.app/WPrefs.c:692
-msgid "Initializing configuration panels..."
-msgstr "è¨­å®ããã«ãåæåä¸­..."
-
-#: ../../WPrefs.app/WPrefs.c:726
-msgid ""
-"WPrefs is free software and is distributed WITHOUT ANY\n"
-"WARRANTY under the terms of the GNU General Public License."
-msgstr ""
-"WPrefs ã¯ããªã¼ã½ããã§ãã GNU ä¸è¬å¬æä½¿ç¨è¨±è«¾æ¸ã®ä¸ã§\n"
-"ç¡ä¿è¨¼ã§éå¸ããã¾ã."
-
-#: ../../WPrefs.app/WPrefs.c:755 ../../WPrefs.app/WPrefs.c:835
-#, c-format
-msgid "Window Maker domain (%s) is corrupted!"
-msgstr "Window Maker ã®ãã¡ã¤ã³ (%s) ã«éå®³!"
-
-#: ../../WPrefs.app/Font.c:330 ../../WPrefs.app/Menu.c:1533
-#: ../../WPrefs.app/MouseSettings.c:140 ../../WPrefs.app/MouseSettings.c:160
-#: ../../WPrefs.app/TexturePanel.c:613 ../../WPrefs.app/TexturePanel.c:693
-#: ../../WPrefs.app/Themes.c:96 ../../WPrefs.app/WPrefs.c:756
-#: ../../WPrefs.app/WPrefs.c:761 ../../WPrefs.app/WPrefs.c:779
-#: ../../WPrefs.app/WPrefs.c:789 ../../WPrefs.app/WPrefs.c:799
-#: ../../WPrefs.app/WPrefs.c:836 ../../WPrefs.app/WPrefs.c:841
-msgid "Error"
-msgstr "ã¨ã©ã¼"
-
-#: ../../WPrefs.app/Font.c:330 ../../WPrefs.app/Menu.c:1533
-#: ../../WPrefs.app/MouseSettings.c:142 ../../WPrefs.app/MouseSettings.c:162
-#: ../../WPrefs.app/TexturePanel.c:614 ../../WPrefs.app/TexturePanel.c:695
-#: ../../WPrefs.app/TexturePanel.c:1529 ../../WPrefs.app/Themes.c:98
-#: ../../WPrefs.app/WPrefs.c:756 ../../WPrefs.app/WPrefs.c:761
-#: ../../WPrefs.app/WPrefs.c:781 ../../WPrefs.app/WPrefs.c:793
-#: ../../WPrefs.app/WPrefs.c:799 ../../WPrefs.app/WPrefs.c:806
-#: ../../WPrefs.app/WPrefs.c:836 ../../WPrefs.app/WPrefs.c:841
-msgid "OK"
-msgstr "OK"
-
-#: ../../WPrefs.app/WPrefs.c:759
-#, c-format
-msgid "Could not load Window Maker domain (%s) from defaults database."
-msgstr "Window Maker domain (%s) ãããã©ã«ããã¼ã¿ãã¼ã¹ããèª­ã¿è¾¼ãã¾ãã"
-
-#: ../../WPrefs.app/WPrefs.c:776
-msgid "could not extract version information from Window Maker"
-msgstr "Window Maker ãããã¼ã¸ã§ã³æå ±ãåå¾ã§ãã¾ãã"
-
-#: ../../WPrefs.app/WPrefs.c:777
-msgid "Make sure wmaker is in your search path."
-msgstr "wmaker ããµã¼ããã¹ã«å«ã¾ãã¦ãããç¢ºèªãã¦ä¸ãã"
-
-#: ../../WPrefs.app/WPrefs.c:780
-msgid ""
-"Could not extract version from Window Maker. Make sure it is correctly "
-"installed and is in your PATH environment variable."
-msgstr ""
-"Window Maker ã®ãã¼ã¸ã§ã³æå ±ãèª­ã¿åãã¾ãã. é©åã«ã¤ã³ã¹ãã¼ã«ãã¦, PATH "
-"è¨­å®ããã¦ãããã¨ãç¢ºèªãã¦ãã ãã"
-
-#: ../../WPrefs.app/WPrefs.c:790
-msgid ""
-"Could not extract version from Window Maker. Make sure it is correctly "
-"installed and the path where it installed is in the PATH environment "
-"variable."
-msgstr ""
-"Window Makerã®ãã¼ã¸ã§ã³æå ±ãèª­ã¿ã¨ãã¾ãã. é©åã«ã¤ã³ã¹ãã¼ã«ãã¦, ããã« "
-"PATH ãéãã¦ãããã¨ãç¢ºèªãã¦ãã ãã"
-
-#: ../../WPrefs.app/WPrefs.c:797
-#, c-format
-msgid ""
-"WPrefs only supports Window Maker 0.18.0 or newer.\n"
-"The version installed is %i.%i.%i\n"
-msgstr ""
-"WPrefsã¯Window Maker 0.18.0 ä»¥éããµãã¼ããã¦ãã¾ã.\n"
-"ã¤ã³ã¹ãã¼ã«ããã¦ããã®ã¯ %i.%i.%i ã§ã\n"
-
-#: ../../WPrefs.app/WPrefs.c:804
-#, c-format
-msgid ""
-"Window Maker %i.%i.%i, which is installed in your system, is not fully "
-"supported by this version of WPrefs."
-msgstr ""
-"ããªãã®ã·ã¹ãã ã«ã¤ã³ã¹ãã¼ã«ããã¦ããWindow Maker %i.%i.%i ã¯, "
-"Wprefsã®ãã®ãã¼ã¸ã§ã³ã§ã¯ä¸é¨ãµãã¼ããã¦ããã¾ãã"
-
-#: ../../WPrefs.app/Menu.c:1568 ../../WPrefs.app/WPrefs.c:806
-msgid "Warning"
-msgstr "è­¦å"
-
-#: ../../WPrefs.app/WPrefs.c:817
-#, c-format
-msgid "could not run \"%s --global_defaults_path\"."
-msgstr "\"%s -global_defaults_path\" ãå®è¡ã§ãã¾ãã"
-
-#: ../../WPrefs.app/WPrefs.c:839
-#, c-format
-msgid "Could not load global Window Maker domain (%s)."
-msgstr "Window Makerã®ã°ã­ã¼ãã«ã»ãã¡ã¤ã³(%s)ãèª­ã¿è¾¼ãã¾ãã"
-
-#: ../../WPrefs.app/WPrefs.c:1088
-#, c-format
-msgid ""
-"bad speed value for option %s\n"
-". Using default Medium"
-msgstr ""
-"ãªãã·ã§ã³ %s ã®speedå¤ã¯ä¸æ­£ã§ã. \n"
-"ããã©ã«ãå¤ãä½¿ç¨ãã¾ã"
-
-#: ../../WPrefs.app/Appearance.c:1131
+#: ../../WPrefs.app/Appearance.c:1154
 msgid "Select File"
 msgstr "ãã¡ã¤ã«ã®é¸æ"
 
-#: ../../WPrefs.app/Appearance.c:1533
+#: ../../WPrefs.app/Appearance.c:1555
 msgid "Focused Window"
 msgstr "ãã©ã¼ã«ã¹ã¦ã£ã³ãã¦"
 
-#: ../../WPrefs.app/Appearance.c:1537
+#: ../../WPrefs.app/Appearance.c:1560
 msgid "Unfocused Window"
 msgstr "ãã©ã¼ã«ã¹ããã¦ãªãã¦ã£ã³ãã¦"
 
-#: ../../WPrefs.app/Appearance.c:1541
+#: ../../WPrefs.app/Appearance.c:1565
 msgid "Owner of Focused Window"
 msgstr "ãã©ã¼ã«ã¹ã¦ã£ã³ãã¦ã®ãªã¼ãã¼"
 
-#: ../../WPrefs.app/Appearance.c:1545 ../../WPrefs.app/Appearance.c:1862
+#: ../../WPrefs.app/Appearance.c:1570 ../../WPrefs.app/Appearance.c:1893
 msgid "Menu Title"
 msgstr "ã¡ãã¥ã¼ã¿ã¤ãã«"
 
-#: ../../WPrefs.app/Appearance.c:1549 ../../WPrefs.app/Appearance.c:1551
+#: ../../WPrefs.app/Appearance.c:1575 ../../WPrefs.app/Appearance.c:1578
 msgid "Normal Item"
 msgstr "æ®éã®é ç®"
 
-#: ../../WPrefs.app/Appearance.c:1555
+#: ../../WPrefs.app/Appearance.c:1583
 msgid "Disabled Item"
 msgstr "ç¡å¹ãªé ç®"
 
-#: ../../WPrefs.app/Appearance.c:1564
+#: ../../WPrefs.app/Appearance.c:1595
 msgid "Highlighted"
 msgstr "ãã¤ã©ã¤ã"
 
-#: ../../WPrefs.app/Appearance.c:1755
+#: ../../WPrefs.app/Appearance.c:1786
 msgid "Texture"
 msgstr "ãã¯ã¹ãã£"
 
-#: ../../WPrefs.app/Appearance.c:1763
+#: ../../WPrefs.app/Appearance.c:1794
 msgid "Titlebar of Focused Window"
 msgstr "ãã©ã¼ã«ã¹ã¦ã£ã³ãã¦ã®ã¿ã¤ãã«ãã¼"
 
-#: ../../WPrefs.app/Appearance.c:1764
+#: ../../WPrefs.app/Appearance.c:1795
 msgid "Titlebar of Unfocused Windows"
 msgstr "ãã©ã¼ã«ã¹ã®ãªãã¦ã£ã³ãã¦ã®ã¿ã¤ãã«ãã¼"
 
-#: ../../WPrefs.app/Appearance.c:1765
+#: ../../WPrefs.app/Appearance.c:1796
 msgid "Titlebar of Focused Window's Owner"
 msgstr "ãã©ã¼ã«ã¹ã¦ã£ã³ãã¦ã®ãªã¼ãã¼ã®ã¿ã¤ãã«ãã¼"
 
-#: ../../WPrefs.app/Appearance.c:1766
+#: ../../WPrefs.app/Appearance.c:1797
 msgid "Window Resizebar"
 msgstr "ãªãµã¤ãºãã¼"
 
-#: ../../WPrefs.app/Appearance.c:1767
+#: ../../WPrefs.app/Appearance.c:1798
 msgid "Titlebar of Menus"
 msgstr "ã¡ãã¥ã¼ã®ã¿ã¤ãã«ãã¼"
 
-#: ../../WPrefs.app/Appearance.c:1768
+#: ../../WPrefs.app/Appearance.c:1799
 msgid "Menu Items"
 msgstr "ã¡ãã¥ã¼é ç®"
 
-#: ../../WPrefs.app/Appearance.c:1769
+#: ../../WPrefs.app/Appearance.c:1800
 msgid "Icon Background"
 msgstr "ã¢ã¤ã³ã³ã®èæ¯"
 
-#: ../../WPrefs.app/Appearance.c:1784
+#: ../../WPrefs.app/Appearance.c:1815
 msgid ""
 "Double click in the texture you want to use\n"
 "for the selected item."
@@ -314,108 +90,120 @@
 "é¸æããé ç®ã«ä½¿ç¨ããããã¯ã¹ãã£ã\n"
 "ããã«ã¯ãªãã¯ãã¦ãã ãã"
 
-#: ../../WPrefs.app/Appearance.c:1798
+#: ../../WPrefs.app/Appearance.c:1829
 msgid "New"
 msgstr "æ°è¦"
 
-#: ../../WPrefs.app/Appearance.c:1802
+#: ../../WPrefs.app/Appearance.c:1833
 msgid "Create a new texture."
 msgstr "æ°è¦ãã¯ã¹ãã£ã®ä½æ"
 
-#: ../../WPrefs.app/Appearance.c:1810
+#: ../../WPrefs.app/Appearance.c:1841
 msgid "Extract..."
 msgstr "æ½åº..."
 
-#: ../../WPrefs.app/Appearance.c:1814
+#: ../../WPrefs.app/Appearance.c:1845
 msgid "Extract texture(s) from a theme or a style file."
 msgstr "ãã¼ããã¹ã¿ã¤ã«ãããã¯ã¹ãã£ãæ½åºãã¾ã"
 
-#: ../../WPrefs.app/Appearance.c:1824
+#: ../../WPrefs.app/Appearance.c:1855
 msgid "Edit"
 msgstr "ç·¨é"
 
-#: ../../WPrefs.app/Appearance.c:1827
+#: ../../WPrefs.app/Appearance.c:1858
 msgid "Edit the highlighted texture."
 msgstr "ãã¤ã©ã¤ãããã¦ãããã¯ã¹ãã£ãç·¨éãã¾ã"
 
-#: ../../WPrefs.app/Appearance.c:1835 ../../WPrefs.app/TexturePanel.c:1317
+#: ../../WPrefs.app/Appearance.c:1866 ../../WPrefs.app/TexturePanel.c:1318
 msgid "Delete"
 msgstr "åé¤"
 
-#: ../../WPrefs.app/Appearance.c:1839
+#: ../../WPrefs.app/Appearance.c:1870
 msgid "Delete the highlighted texture."
 msgstr "ãã¤ã©ã¤ãããã¦ãããã¯ã¹ãã£ãåé¤ãã¾ã"
 
-#: ../../WPrefs.app/Appearance.c:1852
+#: ../../WPrefs.app/Appearance.c:1883
 msgid "Color"
 msgstr "è²..."
 
-#: ../../WPrefs.app/Appearance.c:1859
+#: ../../WPrefs.app/Appearance.c:1890
 msgid "Focused Window Title"
 msgstr "ãã©ã¼ã«ã¹ã¦ã£ã³ãã¦ã®ã¿ã¤ãã«"
 
-#: ../../WPrefs.app/Appearance.c:1860
+#: ../../WPrefs.app/Appearance.c:1891
 msgid "Unfocused Window Title"
 msgstr "ãã©ã¼ã«ã¹ããã¦ããªãã¦ã£ã³ãã¦ã®ã¿ã¤ãã«"
 
-#: ../../WPrefs.app/Appearance.c:1861
+#: ../../WPrefs.app/Appearance.c:1892
 msgid "Owner of Focused Window Title"
 msgstr "ãã©ã¼ã«ã¹ã¦ã£ã³ãã¦ã®ãªã¼ãã¼ã®ã¿ã¤ãã«"
 
-#: ../../WPrefs.app/Appearance.c:1863
+#: ../../WPrefs.app/Appearance.c:1894
 msgid "Menu Item Text"
 msgstr "ã¡ãã¥ã¼é ç®ã®æå­"
 
-#: ../../WPrefs.app/Appearance.c:1864
+#: ../../WPrefs.app/Appearance.c:1895
 msgid "Disabled Menu Item Text"
 msgstr "ç¡å¹ãªã¡ãã¥ã¼é ç®ã®æå­"
 
-#: ../../WPrefs.app/Appearance.c:1865
+#: ../../WPrefs.app/Appearance.c:1896
 msgid "Menu Highlight Color"
 msgstr "ãã¤ã©ã¤ããããã¡ãã¥ã¼é ç®"
 
-#: ../../WPrefs.app/Appearance.c:1866
+#: ../../WPrefs.app/Appearance.c:1897
 msgid "Highlighted Menu Text Color"
 msgstr "ãã¤ã©ã¤ããããã¡ãã¥ã¼ã®æå­"
 
-#: ../../WPrefs.app/Appearance.c:1905
+#: ../../WPrefs.app/Appearance.c:1936
 msgid "Background"
 msgstr "èæ¯"
 
-#: ../../WPrefs.app/Appearance.c:1917 ../../WPrefs.app/TexturePanel.c:1504
+#: ../../WPrefs.app/Appearance.c:1948 ../../WPrefs.app/TexturePanel.c:1504
 msgid "Browse..."
 msgstr "åç§..."
 
-#: ../../WPrefs.app/Appearance.c:1930
+#: ../../WPrefs.app/Appearance.c:1961
 msgid "Options"
 msgstr "ãªãã·ã§ã³"
 
-#: ../../WPrefs.app/Appearance.c:1937
+#: ../../WPrefs.app/Appearance.c:1968
 msgid "Menu Style"
 msgstr "ã¡ãã¥ã¼ã®ã¹ã¿ã¤ã«"
 
-#: ../../WPrefs.app/Appearance.c:1979
+#: ../../WPrefs.app/Appearance.c:1996 ../../WPrefs.app/Configurations.c:241
+#: ../../WPrefs.app/Configurations.c:253 ../../WPrefs.app/Focus.c:288
+#: ../../WPrefs.app/Focus.c:299 ../../WPrefs.app/MenuPreferences.c:134
+#: ../../WPrefs.app/MenuPreferences.c:145
+#: ../../WPrefs.app/MenuPreferences.c:173
+#: ../../WPrefs.app/MenuPreferences.c:188 ../../WPrefs.app/MouseSettings.c:560
+#: ../../WPrefs.app/MouseSettings.c:571 ../../WPrefs.app/WPrefs.c:546
+#: ../../WPrefs.app/WPrefs.c:571
+#, c-format
+msgid "could not load icon file %s"
+msgstr "ã¢ã¤ã³ã³ %s ãã­ã¼ãã§ãã¾ãã"
+
+#: ../../WPrefs.app/Appearance.c:2010
 msgid "Title Alignment"
 msgstr "ã¿ã¤ãã«ã®éç½®"
 
-#: ../../WPrefs.app/Appearance.c:1986
+#: ../../WPrefs.app/Appearance.c:2017
 msgid "Left"
 msgstr "å·¦"
 
-#: ../../WPrefs.app/Appearance.c:1989 ../../WPrefs.app/TexturePanel.c:1518
+#: ../../WPrefs.app/Appearance.c:2020 ../../WPrefs.app/TexturePanel.c:1518
 #: ../../WPrefs.app/Workspace.c:270
 msgid "Center"
 msgstr "ä¸­å¤®"
 
-#: ../../WPrefs.app/Appearance.c:1992
+#: ../../WPrefs.app/Appearance.c:2023
 msgid "Right"
 msgstr "å³"
 
-#: ../../WPrefs.app/Appearance.c:2216
+#: ../../WPrefs.app/Appearance.c:2247
 msgid "Appearance Preferences"
-msgstr "å¤è¦³ã®è¨­å®"
+msgstr "å¤è¦³ã®è¨­å® "
 
-#: ../../WPrefs.app/Appearance.c:2218
+#: ../../WPrefs.app/Appearance.c:2249
 msgid ""
 "Background texture configuration for windows,\n"
 "menus and icons."
@@ -423,15 +211,19 @@
 "ã¦ã£ã³ãã¦ã»ã¡ãã¥ã¼ã»ã¢ã¤ã³ã³ã®\n"
 "èæ¯ããã¯ã¹ãã£ãè¨­å®ãã¾ã"
 
-#: ../../WPrefs.app/Appearance.c:2263
+#: ../../WPrefs.app/Appearance.c:2294
 msgid "Extract Texture"
 msgstr "ãã¯ã¹ãã£ã®æ½åº"
 
-#: ../../WPrefs.app/Appearance.c:2283
+#: ../../WPrefs.app/Appearance.c:2314
 msgid "Textures"
 msgstr "ãã¯ã¹ãã£"
 
-#: ../../WPrefs.app/Appearance.c:2299
+#: ../../WPrefs.app/Appearance.c:2325 ../../WPrefs.app/WPrefs.c:301
+msgid "Close"
+msgstr "éãã"
+
+#: ../../WPrefs.app/Appearance.c:2330
 msgid "Extract"
 msgstr "æ½åº"
 
@@ -446,26 +238,26 @@
 #: ../../WPrefs.app/Configurations.c:164 ../../WPrefs.app/Workspace.c:109
 #, c-format
 msgid "could not process icon %s:"
-msgstr "ã¢ã¤ã³ã³ %s ãå¦çã§ãã¾ãã:"
+msgstr "ã¢ã¤ã³ã³ %s ãå¦çã§ãã¾ãã"
 
-#: ../../WPrefs.app/Configurations.c:189 ../../WPrefs.app/Workspace.c:164
+#: ../../WPrefs.app/Configurations.c:188 ../../WPrefs.app/Workspace.c:164
 #, c-format
 msgid "could not load image file %s"
-msgstr "ã¤ã¡ã¼ã¸ãã¡ã¤ã« %s ãã­ã¼ãã§ãã¾ãã"
+msgstr "ç»åãã¡ã¤ã« %s ãã­ã¼ãã§ãã¾ãã"
 
-#: ../../WPrefs.app/Configurations.c:203
+#: ../../WPrefs.app/Configurations.c:202
 msgid "Icon Slide Speed"
 msgstr "ã¢ã¤ã³ã³ç§»åéåº¦"
 
-#: ../../WPrefs.app/Configurations.c:209
+#: ../../WPrefs.app/Configurations.c:208
 msgid "Shade Animation Speed"
 msgstr "ã·ã§ã¼ãã¢ãã¡ã¼ã·ã§ã³éåº¦"
 
-#: ../../WPrefs.app/Configurations.c:271
+#: ../../WPrefs.app/Configurations.c:270
 msgid "Smooth Scaling"
 msgstr "æ»ãããªè¡¨ç¤º"
 
-#: ../../WPrefs.app/Configurations.c:272
+#: ../../WPrefs.app/Configurations.c:271
 msgid ""
 "Smooth scaled background images, neutralizing\n"
 "the `pixelization' effect. This will slow\n"
@@ -474,21 +266,19 @@
 "èæ¯ãæ»ããã«ãã¦ãã¯ã»ã«ãç®ç«ããªããã¾ã.\n"
 "ç»åã®èª­ã¿è¾¼ã¿ãããããéããªãããããã¾ãã"
 
-#: ../../WPrefs.app/Configurations.c:313
+#: ../../WPrefs.app/Configurations.c:312
 msgid "Titlebar Style"
 msgstr "ã¿ã¤ãã«ãã¼"
 
-# msgstr "ã¿ã¤ãã«ãã¼ã®ã¹ã¿ã¤ã«"
-#: ../../WPrefs.app/Configurations.c:351
+#: ../../WPrefs.app/Configurations.c:350
 msgid "Animations and Sound"
 msgstr "ã¢ãã¡ã¼ã·ã§ã³ã¨ãµã¦ã³ã"
 
-#: ../../WPrefs.app/Configurations.c:357
+#: ../../WPrefs.app/Configurations.c:356
 msgid "Animations"
 msgstr "ã¢ãã¡"
 
-# msgstr "ã¢ãã¡ã¼ã·ã§ã³"
-#: ../../WPrefs.app/Configurations.c:368
+#: ../../WPrefs.app/Configurations.c:367
 msgid ""
 "Disable/enable animations such as those shown\n"
 "for window miniaturization, shading etc."
@@ -496,11 +286,11 @@
 "ã¦ã£ã³ãã¦ã®æå°åãã·ã§ã¼ãã®ã¨ãã®ã¢ãã¡è¡¨ç¤º\n"
 "ãæå¹å/ç¡å¹åãã¾ã"
 
-#: ../../WPrefs.app/Configurations.c:376
+#: ../../WPrefs.app/Configurations.c:375
 msgid "Superfluous"
 msgstr "ç¹æ®å¹æ"
 
-#: ../../WPrefs.app/Configurations.c:387
+#: ../../WPrefs.app/Configurations.c:386
 msgid ""
 "Disable/enable `superfluous' features and\n"
 "animations. These include the `ghosting' of the\n"
@@ -511,25 +301,25 @@
 "ãã¾ã. ããã¯ã¢ã¤ã³ã³ã®ç§»åæã®å½±è¡¨ç¤ºã\n"
 "ããã¯è§£é¤ã®ã¨ãã®ççºãªã©ãããã§ã."
 
-#: ../../WPrefs.app/Configurations.c:397
+#: ../../WPrefs.app/Configurations.c:396
 msgid "Sounds"
 msgstr "ãµã¦ã³ã"
 
-#: ../../WPrefs.app/Configurations.c:408
+#: ../../WPrefs.app/Configurations.c:407
 msgid ""
 "Disable/enable support for sound effects played\n"
 "for actions like shading and closing a window.\n"
 "You will need a module distributed separately\n"
 "for this. You can get it at:\n"
-"http://shadowmere.student.utwente.nl/"
+"http://largo.windowmaker.org/files.php#WSoundServer"
 msgstr ""
 "ã¦ã£ã³ãã¦ã®ã¯ã­ã¼ãºãã·ã§ã¼ãã®ã¢ã¯ã·ã§ã³ã«ã¤ãã\n"
 "ãµã¦ã³ãå¹æãæå¹å/ç¡å¹åãã¾ã. ãã®æ©è½ã«ã¯\n"
 "å¥éå¸ã®ã¢ã¸ã¥ã¼ã«ãç¨æããå¿è¦ãããã¾ã.\n"
 "ãã¡ãããè¦§ãã ãã:\n"
-"http://shadowmere.student.utwente.nl/"
+"http://largo.windowmaker.org/files.php#WSoundServer"
 
-#: ../../WPrefs.app/Configurations.c:419
+#: ../../WPrefs.app/Configurations.c:418
 msgid ""
 "Note: sound requires a module distributed\n"
 "separately"
@@ -537,11 +327,11 @@
 "â»ãµã¦ã³ãæ©è½ã«ã¯å¥éã¢ã¸ã¥ã¼ã«\n"
 "ãç¨æããå¿è¦ãããã¾ã"
 
-#: ../../WPrefs.app/Configurations.c:429
+#: ../../WPrefs.app/Configurations.c:428
 msgid "Dithering colormap for 8bpp"
 msgstr "8bppã«åãããæ¸è²"
 
-#: ../../WPrefs.app/Configurations.c:431
+#: ../../WPrefs.app/Configurations.c:430
 msgid ""
 "Number of colors to reserve for Window Maker\n"
 "on displays that support only 8bpp (PseudoColor)."
@@ -549,11 +339,11 @@
 "8bpp ããå¯¾å¿ãã¦ããªããã£ã¹ãã¬ã¤ã®ã¨ãã«\n"
 "Window Maker ã«äºç´ããè²ã®æ°"
 
-#: ../../WPrefs.app/Configurations.c:438
+#: ../../WPrefs.app/Configurations.c:437
 msgid "Disable dithering in any visual/depth"
 msgstr "å¨ã¦ã®è²æ·±åº¦ã§æ¸è²ãè¡ããªã"
 
-#: ../../WPrefs.app/Configurations.c:459
+#: ../../WPrefs.app/Configurations.c:458
 msgid ""
 "More colors for\n"
 "applications"
@@ -561,19 +351,19 @@
 "ã¢ããªã«\n"
 "ãã£ã¨è²ã"
 
-#: ../../WPrefs.app/Configurations.c:466
+#: ../../WPrefs.app/Configurations.c:465
 msgid ""
 "More colors for\n"
 "Window Maker"
 msgstr ""
-"Window Maker\n"
-"ã«ãã£ã¨è²ã"
+"Window Makerã«\n"
+"ãã£ã¨è²ã"
 
-#: ../../WPrefs.app/Configurations.c:521
+#: ../../WPrefs.app/Configurations.c:520
 msgid "Other Configurations"
-msgstr "ãã®ä»ã®è¨­å®"
+msgstr "ãã®ä»ã®è¨­å® "
 
-#: ../../WPrefs.app/Configurations.c:523
+#: ../../WPrefs.app/Configurations.c:522
 msgid ""
 "Animation speeds, titlebar styles, various option\n"
 "toggling and number of colors to reserve for\n"
@@ -585,7 +375,7 @@
 
 #: ../../WPrefs.app/Expert.c:75
 msgid ""
-"Disable miniwindows (icons for miniaturized windows). For use with KDE/GNOME."
+"Disable miniwindows (icons for minimized windows). For use with KDE/GNOME."
 msgstr "ããã¦ã£ã³ãã¦(æå°åæã®ã¢ã¤ã³ã³è¡¨ç¤º)ã®ç¡å¹å. KDE/GNOME åã."
 
 #: ../../WPrefs.app/Expert.c:76
@@ -594,29 +384,29 @@
 
 #: ../../WPrefs.app/Expert.c:77
 msgid "Automatically save session when exiting Window Maker."
-msgstr "Window Makerçµäºæã«èªåçã«ã»ãã·ã§ã³ãä¿å­"
+msgstr "Window Makerçµäºæã«èªåçã«ã»ãã·ã§ã³ãä¿å­ãã"
 
 #: ../../WPrefs.app/Expert.c:78
 msgid "Use SaveUnder in window frames, icons, menus and other objects."
 msgstr "åã¦ã£ã³ãã¦, ã¢ã¤ã³ã³, ã¡ãã¥ã¼ç­ã®ç»åãã¡ã¢ãªã¼ã«ä¿æãã"
 
 #: ../../WPrefs.app/Expert.c:79
-msgid "Use Windoze style cycling."
-msgstr "æWindowsé¢¨ãªãµã¤ã¯ã«åä½"
-
-#: ../../WPrefs.app/Expert.c:80
 msgid "Disable confirmation panel for the Kill command."
 msgstr "å¼·å¶çµäºæã®ç¢ºèªããã«ãè¡¨ç¤ºããªã"
 
-#: ../../WPrefs.app/Expert.c:81
+#: ../../WPrefs.app/Expert.c:80
 msgid "Disable selection animation for selected icons."
-msgstr "é¸æãããã¢ã¤ã³ã³ã®ã¢ãã¡ã¼ã·ã§ã³ã«ããå¼·èª¿ãä¸­æ­¢"
+msgstr "é¸æãããã¢ã¤ã³ã³ã®ã¢ãã¡ã¼ã·ã§ã³ã«ããå¼·èª¿ãããªã"
 
-#: ../../WPrefs.app/Expert.c:115
-msgid "Expert User Preferences"
-msgstr "ã¨ã­ã¹ãã¼ãè¨­å®"
+#: ../../WPrefs.app/Expert.c:81
+msgid "Smooth font edges (needs restart)."
+msgstr "ãã©ã³ãã®ãµã¡ãæ»ããã«ãã (è¦ åèµ·å)"
 
 #: ../../WPrefs.app/Expert.c:117
+msgid "Expert User Preferences"
+msgstr "ã¨ã­ã¹ãã¼ãè¨­å® "
+
+#: ../../WPrefs.app/Expert.c:119
 msgid ""
 "Options for people who know what they're doing...\n"
 "Also have some other misc. options."
@@ -624,71 +414,62 @@
 "ä½ããã£ã¦ããããã£ã¦ãäººã®ããã®ãªãã·ã§ã³...\n"
 "éå¤ãªãªãã·ã§ã³ãå«ã¿ã¾ã."
 
-#: ../../WPrefs.app/Focus.c:81
+#: ../../WPrefs.app/Focus.c:80
 #, c-format
 msgid "bad option value %s for option FocusMode. Using default Manual"
 msgstr ""
 "ãã©ã¼ã«ã¹ã¢ã¼ããªãã·ã§ã³ %s ãä¸é©åã§ã. ããã©ã«ãå¤ æå ãä½¿ãã¾ã"
 
-#: ../../WPrefs.app/Focus.c:95
+#: ../../WPrefs.app/Focus.c:94
 #, c-format
 msgid "bad option value %s for option ColormapMode. Using default Auto"
 msgstr "ã«ã©ã¼ããããªãã·ã§ã³ %s ãä¸é©åã§ã. ããã©ã«ãå¤ èªå ãä½¿ãã¾ã"
 
-#: ../../WPrefs.app/Focus.c:215
+#: ../../WPrefs.app/Focus.c:214
 msgid "Input Focus Mode"
 msgstr "ã¤ã³ãããã»ãã©ã¼ã«ã¹ã®è¨­å®"
 
-#: ../../WPrefs.app/Focus.c:223
-msgid "Manual:  Click on the window to set keyboard input focus"
-msgstr "æåï¼ ã¦ã£ã³ãã¦ä¸ã§ã¯ãªãã¯ãã¦ ã¤ã³ãããã»ãã©ã¼ã«ã¹ãç§»å"
-
-#: ../../WPrefs.app/Focus.c:230
-msgid "Auto:  Set keyboard input focus to the window under the mouse pointer"
-msgstr "èªåï¼ ãã¦ã¹ã«ã¼ã½ã«ãããã¦ã£ã³ãã¦ã« ã¤ã³ãããã»ãã©ã¼ã«ã¹ãç§»å"
+#: ../../WPrefs.app/Focus.c:222
+msgid "Manual:  Click on the window to set keyboard input focus."
+msgstr "æåï¼ãã©ã¼ã«ã¹ãã ã¦ã£ã³ãã¦ä¸ã§ã¯ãªãã¯ãã"
+
+#: ../../WPrefs.app/Focus.c:229
+msgid "Auto:  Set keyboard input focus to the window under the mouse pointer."
+msgstr "èªåï¼ãã¦ã¹ãã¤ã³ã¿ã§ èªåçã«ãã©ã¼ã«ã¹ãåå¾"
 
-#: ../../WPrefs.app/Focus.c:244
+#: ../../WPrefs.app/Focus.c:243
 msgid "Install colormap in the window..."
-msgstr "ã«ã©ã¼ãããã®ã¦ã£ã³ãã¦ã¸ã®è¨­å®..."
+msgstr "ã«ã©ã¼ãããã®ã¦ã£ã³ãã¦ã¸ã®è¨­å®ã¯..."
 
-#: ../../WPrefs.app/Focus.c:249
+#: ../../WPrefs.app/Focus.c:248
 msgid "...that has the input focus."
 msgstr "...ãã©ã¼ã«ã¹ãç§»åããæã«"
 
-#: ../../WPrefs.app/Focus.c:254
-msgid "...that is under the mouse pointer."
-msgstr "...ãã¦ã¹ã«ã¼ã½ã«ã®ä¸ã«ããæ"
+#: ../../WPrefs.app/Focus.c:253
+msgid "...that's under the mouse pointer."
+msgstr "...ãã¦ã¹ãã¤ã³ã¿ãããæã«"
 
-#: ../../WPrefs.app/Focus.c:263
+#: ../../WPrefs.app/Focus.c:262
 msgid "Automatic Window Raise Delay"
 msgstr "èªåçã«åé¢ã¸åºãã¾ã§ã«"
 
-#: ../../WPrefs.app/Focus.c:320 ../../WPrefs.app/MouseSettings.c:601
+#: ../../WPrefs.app/Focus.c:319 ../../WPrefs.app/MouseSettings.c:601
 msgid "msec"
 msgstr "msec"
 
-#: ../../WPrefs.app/Focus.c:337
-msgid ""
-"Do not let applications receive\n"
-"the click used to focus windows."
-msgstr ""
-"ãã©ã¼ã«ã¹ç§»åã®ããã®ãã¦\n"
-"ã¹ã¯ãªãã¯ãã¢ããªã±ã¼ã·ã§\n"
-"ã³ã«æ¸¡ããªã"
-
-#: ../../WPrefs.app/Focus.c:343
-msgid ""
-"Automatically focus new\n"
-"windows."
-msgstr ""
-"ãã©ã¼ã«ã¹ãèªåçã«æ°ãã\n"
-"ã¦ã£ã³ãã¦ã«ç§»å"
+#: ../../WPrefs.app/Focus.c:336
+msgid "Do not let applications receive the click used to focus windows."
+msgstr "ãã©ã¼ã«ã¹ç§»åã®ããã®ãã¦ã¹ã¯ãªãã¯ãã¢ããªã±ã¼ã·ã§ã³ã«æ¸¡ããªã."
+
+#: ../../WPrefs.app/Focus.c:342
+msgid "Automatically focus new windows."
+msgstr "ãã©ã¼ã«ã¹ãèªåçã« æ°ããã¦ã£ã³ãã¦ã«ç§»å"
 
-#: ../../WPrefs.app/Focus.c:364
+#: ../../WPrefs.app/Focus.c:363
 msgid "Window Focus Preferences"
-msgstr "ã¦ã£ã³ãã¦ãã©ã¼ã«ã¹ã®è¨­å®"
+msgstr "ã¦ã£ã³ãã¦ãã©ã¼ã«ã¹ã®è¨­å® "
 
-#: ../../WPrefs.app/Focus.c:366
+#: ../../WPrefs.app/Focus.c:365
 msgid ""
 "Keyboard focus switching policy, colormap switching\n"
 "policy for 8bpp displays and other related options."
@@ -696,54 +477,49 @@
 "ã­ã¼ãã¼ãã§ã®ãã©ã¼ã«ã¹åãæ¿ãããªã·ã¼, \n"
 "8bpp ç»é¢ç¨ã®ã«ã©ã¼ãããåãæ¿ãããªã·ã¼, ãã®ä»"
 
-#: ../../WPrefs.app/Font.c:277
-msgid "Could not locate font information file WPrefs.app/font.data"
-msgstr "ãã©ã³ãæå ±ãã¡ã¤ã« WPrefs.app/font.data ãè¦ã¤ããã¾ãã"
+#: ../../WPrefs.app/FontSimple.c:106
+msgid "Window Title"
+msgstr "ã¦ã£ã³ãã¦ã¿ã¤ãã«"
 
-#: ../../WPrefs.app/Font.c:283
-msgid "Could not read font information file WPrefs.app/font.data"
-msgstr "ãã©ã³ãæå ±ãã¡ã¤ã« WPrefs.app/font.data ãèª­ã¿è¾¼ãã¾ãã"
+#: ../../WPrefs.app/FontSimple.c:108
+msgid "Menu Text"
+msgstr "ã¡ãã¥ã¼é ç®"
 
-#: ../../WPrefs.app/Font.c:294
-msgid ""
-"Invalid data in font information file WPrefs.app/font.data.\n"
-"Encodings data not found."
-msgstr ""
-"ãã©ã³ãæå ±ãã¡ã¤ã« WPrefs.app/font.data ã®åå®¹ãä¸æ­£ã§ã.\n"
-"ã¨ã³ã³ã¼ããã¼ã¿ãããã¾ãã"
+#: ../../WPrefs.app/FontSimple.c:109
+msgid "Icon Title"
+msgstr "ã¢ã¤ã³ã³ã¿ã¤ãã«"
 
-#: ../../WPrefs.app/Font.c:299
-msgid "- Custom -"
-msgstr "- ã«ã¹ã¿ã  -"
+#: ../../WPrefs.app/FontSimple.c:110
+msgid "Clip Title"
+msgstr "ã¯ãªããã¿ã¤ãã«"
 
-#: ../../WPrefs.app/Font.c:376
-msgid "Default Font Sets"
-msgstr "ããã©ã«ããã©ã³ã"
+#: ../../WPrefs.app/FontSimple.c:111
+msgid "Desktop Caption"
+msgstr "ãã¹ã¯ãããå"
 
-#: ../../WPrefs.app/Font.c:389
-msgid "Font Set"
-msgstr "ãã©ã³ãã»ãã"
+#: ../../WPrefs.app/FontSimple.c:689
+msgid "Sample Text"
+msgstr "ãµã³ãã«"
 
-#: ../../WPrefs.app/Font.c:418
-msgid "Add..."
-msgstr "è¿½å ..."
+#: ../../WPrefs.app/FontSimple.c:707
+msgid "Family"
+msgstr ""
 
-#: ../../WPrefs.app/Font.c:423 ../../WPrefs.app/Font.c:438
-msgid "Change..."
-msgstr "å¤æ´..."
+#: ../../WPrefs.app/FontSimple.c:736
+msgid "Style"
+msgstr ""
 
-#: ../../WPrefs.app/Font.c:428 ../../WPrefs.app/Paths.c:288
-#: ../../WPrefs.app/Paths.c:319
-msgid "Remove"
-msgstr "åé¤"
+#: ../../WPrefs.app/FontSimple.c:739
+msgid "Size"
+msgstr ""
+
+#: ../../WPrefs.app/FontSimple.c:777
+msgid "Font Configuration"
+msgstr "ãã©ã³ãã®è¨­å® "
 
-#: ../../WPrefs.app/Font.c:477
-msgid "Font Preferences"
-msgstr "ãã©ã³ãè¨­å®"
-
-#: ../../WPrefs.app/Font.c:478
-msgid "Font Configurations for Windows, Menus etc"
-msgstr "ã¦ã£ã³ãã¦ãã¡ãã¥ã¼ãªã©ã®ãã©ã³ãè¨­å®"
+#: ../../WPrefs.app/FontSimple.c:779
+msgid "Configure fonts for Window Maker titlebars, menus etc."
+msgstr "ã¿ã¤ãã«ãã¼ãã¡ãã¥ã¼ã«ä½¿ããã©ã³ãã®è¨­å®"
 
 #: ../../WPrefs.app/Icons.c:180
 msgid "Icon Positioning"
@@ -796,7 +572,7 @@
 
 #: ../../WPrefs.app/Icons.c:345
 msgid "Icon Preferences"
-msgstr "ã¢ã¤ã³ã³ã®è¨­å®"
+msgstr "ã¢ã¤ã³ã³ã®è¨­å® "
 
 #: ../../WPrefs.app/Icons.c:347
 msgid ""
@@ -826,230 +602,250 @@
 msgid "Not done"
 msgstr "ã¾ã "
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:186 ../../WPrefs.app/Menu.c:327
-#: ../../WPrefs.app/TexturePanel.c:1535
+#: ../../WPrefs.app/KeyboardShortcuts.c:310 ../../WPrefs.app/Menu.c:360
+#: ../../WPrefs.app/TexturePanel.c:1535 ../../WPrefs.app/imagebrowser.c:100
 msgid "Cancel"
 msgstr "ã­ã£ã³ã»ã«"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:187
+#: ../../WPrefs.app/KeyboardShortcuts.c:311
 msgid "Press the desired shortcut key(s) or click Cancel to stop capturing."
 msgstr "è¨­å®ãããã·ã§ã¼ãã«ããã­ã¼ãæ¼ãã¦ãã ãã. (ä¸­æ­ãã¿ã³ã§ä¸­æ­¢)"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:207
-#: ../../WPrefs.app/KeyboardShortcuts.c:456 ../../WPrefs.app/Menu.c:338
-#: ../../WPrefs.app/Menu.c:782
+#: ../../WPrefs.app/KeyboardShortcuts.c:331
+#: ../../WPrefs.app/KeyboardShortcuts.c:584 ../../WPrefs.app/Menu.c:371
+#: ../../WPrefs.app/Menu.c:830
 msgid "Capture"
 msgstr "åãè¾¼ã¿"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:208
-#: ../../WPrefs.app/KeyboardShortcuts.c:464
-msgid "Click Capture to interactively define the shortcut key."
+#: ../../WPrefs.app/KeyboardShortcuts.c:332
+#: ../../WPrefs.app/KeyboardShortcuts.c:592
+msgid "Click on Capture to interactively define the shortcut key."
 msgstr ""
 "ã·ã§ã¼ãã«ãããå¯¾è©±ç\n"
 "ã«å®ç¾©ããã«ã¯åãè¾¼ã¿\n"
 "ãã¯ãªãã¯ãã¦ä¸ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:363
+#: ../../WPrefs.app/KeyboardShortcuts.c:486
 msgid "Actions"
 msgstr "ã¢ã¯ã·ã§ã³"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:379
+#: ../../WPrefs.app/KeyboardShortcuts.c:500
 msgid "Open applications menu"
 msgstr "ã¢ããªã±ã¼ã·ã§ã³ã»ã¡ãã¥ã¼ãéã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:380
+#: ../../WPrefs.app/KeyboardShortcuts.c:501
 msgid "Open window list menu"
 msgstr "ã¦ã£ã³ãã¦ãªã¹ãã»ã¡ãã¥ã¼ãéã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:381
+#: ../../WPrefs.app/KeyboardShortcuts.c:502
 msgid "Open window commands menu"
 msgstr "ã¦ã£ã³ãã¦ã³ãã³ãã»ã¡ãã¥ã¼ãéã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:382
+#: ../../WPrefs.app/KeyboardShortcuts.c:503
 msgid "Hide active application"
 msgstr "ã¢ã¯ãã£ãã»ã¢ããªã±ã¼ã·ã§ã³ãé ã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:383
+#: ../../WPrefs.app/KeyboardShortcuts.c:504
+msgid "Hide other applications"
+msgstr "ä»ã®ã¢ããªã±ã¼ã·ã§ã³ãé ã"
+
+#: ../../WPrefs.app/KeyboardShortcuts.c:505
 msgid "Miniaturize active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ãæå°å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:384
+#: ../../WPrefs.app/KeyboardShortcuts.c:506
 msgid "Close active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ãéãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:385
+#: ../../WPrefs.app/KeyboardShortcuts.c:507
 msgid "Maximize active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ãæå¤§å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:386
+#: ../../WPrefs.app/KeyboardShortcuts.c:508
 msgid "Maximize active window vertically"
 msgstr "ã¦ã£ã³ãã¦ãç¸¦æ¹åã«æå¤§å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:387
+#: ../../WPrefs.app/KeyboardShortcuts.c:509
 msgid "Maximize active window horizontally"
 msgstr "ã¦ã£ã³ãã¦ãæ¨ªæ¹åã«æå¤§å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:388
+#: ../../WPrefs.app/KeyboardShortcuts.c:510
 msgid "Raise active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ãåé¢ã«"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:389
+#: ../../WPrefs.app/KeyboardShortcuts.c:511
 msgid "Lower active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ãèé¢ã«"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:390
+#: ../../WPrefs.app/KeyboardShortcuts.c:512
 msgid "Raise/Lower window under mouse pointer"
 msgstr "ãã¦ã¹ãã¤ã³ã¿ä¸ã®ã¦ã£ã³ãã¦ãå/èé¢ã¸"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:391
+#: ../../WPrefs.app/KeyboardShortcuts.c:513
 msgid "Shade active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ãç³ã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:392
+#: ../../WPrefs.app/KeyboardShortcuts.c:514
 msgid "Move/Resize active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ã®ç§»å/æ¡å¤§ç¸®å°"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:393
+#: ../../WPrefs.app/KeyboardShortcuts.c:515
 msgid "Select active window"
 msgstr "ã¢ã¯ãã£ãã»ã¦ã£ã³ãã¦ã®é¸æ"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:394
+#: ../../WPrefs.app/KeyboardShortcuts.c:516
 msgid "Focus next window"
 msgstr "ãã©ã¼ã«ã¹ãæ¬¡ã®ã¦ã£ã³ãã¦ã¸"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:395
+#: ../../WPrefs.app/KeyboardShortcuts.c:517
 msgid "Focus previous window"
 msgstr "ãã©ã¼ã«ã¹ãåã®ã¦ã£ã³ãã¦ã¸"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:396
+#: ../../WPrefs.app/KeyboardShortcuts.c:518
 msgid "Switch to next workspace"
 msgstr "æ¬¡ã®ã¯ã¼ã¯ã¹ãã¼ã¹ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:397
+#: ../../WPrefs.app/KeyboardShortcuts.c:519
 msgid "Switch to previous workspace"
 msgstr "åã®ã¯ã¼ã¯ã¹ãã¼ã¹ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:398
+#: ../../WPrefs.app/KeyboardShortcuts.c:520
 msgid "Switch to next ten workspaces"
 msgstr "10ååã®ã®ã¯ã¼ã¯ã¹ãã¼ã¹ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:399
+#: ../../WPrefs.app/KeyboardShortcuts.c:521
 msgid "Switch to previous ten workspaces"
 msgstr "10åæåã®ã¯ã¼ã¯ã¹ãã¼ã¹ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:400
+#: ../../WPrefs.app/KeyboardShortcuts.c:522
 msgid "Switch to workspace 1"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹1ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:401
+#: ../../WPrefs.app/KeyboardShortcuts.c:523
 msgid "Switch to workspace 2"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹2ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:402
+#: ../../WPrefs.app/KeyboardShortcuts.c:524
 msgid "Switch to workspace 3"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹3ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:403
+#: ../../WPrefs.app/KeyboardShortcuts.c:525
 msgid "Switch to workspace 4"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹4ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:404
+#: ../../WPrefs.app/KeyboardShortcuts.c:526
 msgid "Switch to workspace 5"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹5ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:405
+#: ../../WPrefs.app/KeyboardShortcuts.c:527
 msgid "Switch to workspace 6"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹6ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:406
+#: ../../WPrefs.app/KeyboardShortcuts.c:528
 msgid "Switch to workspace 7"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹7ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:407
+#: ../../WPrefs.app/KeyboardShortcuts.c:529
 msgid "Switch to workspace 8"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹8ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:408
+#: ../../WPrefs.app/KeyboardShortcuts.c:530
 msgid "Switch to workspace 9"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹9ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:409
+#: ../../WPrefs.app/KeyboardShortcuts.c:531
 msgid "Switch to workspace 10"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹10ã¸ç§»å"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:410
+#: ../../WPrefs.app/KeyboardShortcuts.c:532
 msgid "Shortcut for window 1"
 msgstr "ã¦ã£ã³ãã¦1ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:411
+#: ../../WPrefs.app/KeyboardShortcuts.c:533
 msgid "Shortcut for window 2"
 msgstr "ã¦ã£ã³ãã¦2ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:412
+#: ../../WPrefs.app/KeyboardShortcuts.c:534
 msgid "Shortcut for window 3"
 msgstr "ã¦ã£ã³ãã¦3ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:413
+#: ../../WPrefs.app/KeyboardShortcuts.c:535
 msgid "Shortcut for window 4"
 msgstr "ã¦ã£ã³ãã¦4ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:414
+#: ../../WPrefs.app/KeyboardShortcuts.c:536
 msgid "Shortcut for window 5"
 msgstr "ã¦ã£ã³ãã¦5ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:415
+#: ../../WPrefs.app/KeyboardShortcuts.c:537
 msgid "Shortcut for window 6"
 msgstr "ã¦ã£ã³ãã¦6ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:416
+#: ../../WPrefs.app/KeyboardShortcuts.c:538
 msgid "Shortcut for window 7"
 msgstr "ã¦ã£ã³ãã¦7ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:417
+#: ../../WPrefs.app/KeyboardShortcuts.c:539
 msgid "Shortcut for window 8"
 msgstr "ã¦ã£ã³ãã¦8ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:418
+#: ../../WPrefs.app/KeyboardShortcuts.c:540
 msgid "Shortcut for window 9"
 msgstr "ã¦ã£ã³ãã¦9ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:419
+#: ../../WPrefs.app/KeyboardShortcuts.c:541
 msgid "Shortcut for window 10"
 msgstr "ã¦ã£ã³ãã¦10ã¸ã®ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:420
+#: ../../WPrefs.app/KeyboardShortcuts.c:542
 msgid "Switch to Next Screen/Monitor"
 msgstr "æ¬¡ã®ã¹ã¯ãªã¼ã³/ã¢ãã¿ã¸"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:421
+#: ../../WPrefs.app/KeyboardShortcuts.c:544
+msgid "Move VirtualDesktop to next left edge"
+msgstr "ä»®æ³ãã¹ã¯ããããæ¬¡ã®å·¦å´å¢çã¸"
+
+#: ../../WPrefs.app/KeyboardShortcuts.c:545
+msgid "Move VirtualDesktop to next right edge"
+msgstr "ä»®æ³ãã¹ã¯ããããæ¬¡ã®å³å´å¢çã¸"
+
+#: ../../WPrefs.app/KeyboardShortcuts.c:546
+msgid "Move VirtualDesktop to next top edge"
+msgstr "ä»®æ³ãã¹ã¯ããããæ¬¡ã®ä¸å´å¢çã¸"
+
+#: ../../WPrefs.app/KeyboardShortcuts.c:547
+msgid "Move VirtualDesktop to next bottom edge"
+msgstr "ä»®æ³ãã¹ã¯ããããæ¬¡ã®ä¸å´å¢çã¸"
+
+#: ../../WPrefs.app/KeyboardShortcuts.c:549
 msgid "Raise Clip"
 msgstr "ã¯ãªãããåé¢ã«"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:422
+#: ../../WPrefs.app/KeyboardShortcuts.c:550
 msgid "Lower Clip"
 msgstr "ã¯ãªãããèé¢ã«"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:423
+#: ../../WPrefs.app/KeyboardShortcuts.c:551
 msgid "Raise/Lower Clip"
 msgstr "ã¯ãªãããå/èé¢ã«"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:425
+#: ../../WPrefs.app/KeyboardShortcuts.c:553
 msgid "Toggle keyboard language"
 msgstr "ã­ã¼ãã¼ãã®è¨èªåæ¿ã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:439
+#: ../../WPrefs.app/KeyboardShortcuts.c:567
 msgid "Shortcut"
 msgstr "ã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:450 ../../WPrefs.app/Menu.c:788
+#: ../../WPrefs.app/KeyboardShortcuts.c:578 ../../WPrefs.app/Menu.c:836
 msgid "Clear"
 msgstr "ã¯ãªã¢"
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:512
+#: ../../WPrefs.app/KeyboardShortcuts.c:640
 msgid "Keyboard Shortcut Preferences"
-msgstr "ã­ã¼ãã¼ãã·ã§ã¼ãã«ããã®è¨­å®"
+msgstr "ã­ã¼ãã¼ãã·ã§ã¼ãã«ããã®è¨­å® "
 
-#: ../../WPrefs.app/KeyboardShortcuts.c:514
+#: ../../WPrefs.app/KeyboardShortcuts.c:642
 msgid ""
 "Change the keyboard shortcuts for actions such\n"
 "as changing workspaces and opening menus."
@@ -1057,171 +853,184 @@
 "ã¯ã¼ã¯ã¹ãã¼ã¹ã®å¤æ´ãã¡ãã¥ã¼æä½ã®\n"
 "ã­ã¼ãã¼ãã·ã§ã¼ãã«ããåä½ãè¨­å®ãã¾ã"
 
-#: ../../WPrefs.app/Menu.c:477
+#: ../../WPrefs.app/Menu.c:278
+msgid "Select Program"
+msgstr "ãã­ã°ã©ã é¸æ"
+
+#: ../../WPrefs.app/Menu.c:510
 msgid "New Items"
 msgstr "æ°è¦"
 
-#: ../../WPrefs.app/Menu.c:478
+#: ../../WPrefs.app/Menu.c:511
 msgid "Sample Commands"
 msgstr "ãµã³ãã«ã³ãã³ã"
 
-#: ../../WPrefs.app/Menu.c:479
+#: ../../WPrefs.app/Menu.c:512
 msgid "Sample Submenus"
 msgstr "ãµã³ãã«ãµãã¡ãã¥ã¼"
 
-#: ../../WPrefs.app/Menu.c:493
+#: ../../WPrefs.app/Menu.c:526
 msgid "Run Program"
 msgstr "ãã­ã°ã©ã å®è¡"
 
-#: ../../WPrefs.app/Menu.c:494
+#: ../../WPrefs.app/Menu.c:527
 msgid "Internal Command"
 msgstr "åé¨ã³ãã³ã"
 
-#: ../../WPrefs.app/Menu.c:495
+#: ../../WPrefs.app/Menu.c:528
 msgid "Submenu"
 msgstr "ãµãã¡ãã¥ã¼"
 
-#: ../../WPrefs.app/Menu.c:496
+#: ../../WPrefs.app/Menu.c:529
 msgid "External Submenu"
 msgstr "å¤é¨ãµãã¡ãã¥ã¼"
 
-#: ../../WPrefs.app/Menu.c:497
+#: ../../WPrefs.app/Menu.c:530
 msgid "Generated Submenu"
 msgstr "èªåçæã®ãµãã¡ãã¥ã¼"
 
-#: ../../WPrefs.app/Menu.c:498
+#: ../../WPrefs.app/Menu.c:531
 msgid "Directory Contents"
 msgstr "ãã£ã¬ã¯ããªã®åå®¹"
 
-#: ../../WPrefs.app/Menu.c:499
+#: ../../WPrefs.app/Menu.c:532
 msgid "Workspace Menu"
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã¡ãã¥ã¼"
 
-#: ../../WPrefs.app/Menu.c:500 ../../WPrefs.app/MouseSettings.c:840
+#: ../../WPrefs.app/Menu.c:533 ../../WPrefs.app/MouseSettings.c:840
 msgid "Window List Menu"
 msgstr "ã¦ã£ã³ãã¦ä¸è¦§ã¡ãã¥ã¼"
 
-#: ../../WPrefs.app/Menu.c:519
+#: ../../WPrefs.app/Menu.c:552
 msgid "XTerm"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:522
+#: ../../WPrefs.app/Menu.c:555
 msgid "rxvt"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:525
+#: ../../WPrefs.app/Menu.c:558
 msgid "ETerm"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:528
+#: ../../WPrefs.app/Menu.c:561
 msgid "Run..."
-msgstr "èµ·å..."
+msgstr "å®è¡..."
 
-#: ../../WPrefs.app/Menu.c:531
+#: ../../WPrefs.app/Menu.c:562
+#, c-format
+msgid "%a(Run,Type command to run)"
+msgstr "%a (å®è¡ããã³ãã³ããå¥å)"
+
+#: ../../WPrefs.app/Menu.c:564
 msgid "Netscape"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:534
+#: ../../WPrefs.app/Menu.c:567
 msgid "gimp"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:537
+#: ../../WPrefs.app/Menu.c:570
 msgid "epic"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:540
+#: ../../WPrefs.app/Menu.c:573
 msgid "ee"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:543
+#: ../../WPrefs.app/Menu.c:576
 msgid "xv"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:546
+#: ../../WPrefs.app/Menu.c:579
 msgid "Acrobat Reader"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:549
+#: ../../WPrefs.app/Menu.c:582
 msgid "ghostview"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:552 ../../WPrefs.app/Menu.c:809
+#: ../../WPrefs.app/Menu.c:585 ../../WPrefs.app/Menu.c:857
 msgid "Exit Window Maker"
-msgstr "Window Makerãçµäº"
+msgstr "Window Maker ãçµäº"
 
-#: ../../WPrefs.app/Menu.c:575
+#: ../../WPrefs.app/Menu.c:608
 msgid "Debian Menu"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:578
+#: ../../WPrefs.app/Menu.c:611
 msgid "RedHat Menu"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:581
+#: ../../WPrefs.app/Menu.c:614
 msgid "Menu Conectiva"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:584 ../../WPrefs.app/Themes.c:250
+#: ../../WPrefs.app/Menu.c:617 ../../WPrefs.app/Themes.c:250
 msgid "Themes"
 msgstr "ãã¼ã"
 
-#: ../../WPrefs.app/Menu.c:589
+#: ../../WPrefs.app/Menu.c:622
 msgid "Bg Images (scale)"
 msgstr "èæ¯(æ¡å¤§/ç¸®å°)"
 
-#: ../../WPrefs.app/Menu.c:594
+#: ../../WPrefs.app/Menu.c:627
 msgid "Bg Images (tile)"
 msgstr "èæ¯(ããã¤ãã)"
 
-#: ../../WPrefs.app/Menu.c:599
+#: ../../WPrefs.app/Menu.c:632
 msgid "Assorted XTerms"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:601
+#: ../../WPrefs.app/Menu.c:634
 msgid "XTerm Yellow on Blue"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:604
+#: ../../WPrefs.app/Menu.c:637
 msgid "XTerm White on Black"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:607
+#: ../../WPrefs.app/Menu.c:640
 msgid "XTerm Black on White"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:610
+#: ../../WPrefs.app/Menu.c:643
 msgid "XTerm Black on Beige"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:613
+#: ../../WPrefs.app/Menu.c:646
 msgid "XTerm White on Green"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:616
+#: ../../WPrefs.app/Menu.c:649
 msgid "XTerm White on Olive"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:619
+#: ../../WPrefs.app/Menu.c:652
 msgid "XTerm Blue on Blue"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:622
+#: ../../WPrefs.app/Menu.c:655
 msgid "XTerm BIG FONTS"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:644
+#: ../../WPrefs.app/Menu.c:677
 msgid "Program to Run"
 msgstr "å®è¡ãããã­ã°ã©ã "
 
-#: ../../WPrefs.app/Menu.c:658
+#: ../../WPrefs.app/Menu.c:687
+msgid "Browse"
+msgstr "åç§"
+
+#: ../../WPrefs.app/Menu.c:698
 msgid "Run the program inside a Xterm"
 msgstr ""
 
-#: ../../WPrefs.app/Menu.c:668
+#: ../../WPrefs.app/Menu.c:708
 msgid "Path for Menu"
 msgstr "ã¡ãã¥ã¼ãã¹"
 
-#: ../../WPrefs.app/Menu.c:681
+#: ../../WPrefs.app/Menu.c:721
 msgid ""
 "Enter the path for a file containing a menu\n"
 "or a list of directories with the programs you\n"
@@ -1237,11 +1046,11 @@
 "ã¨ã, \n"
 "/usr/X11R6/bin ~/xbin"
 
-#: ../../WPrefs.app/Menu.c:696
+#: ../../WPrefs.app/Menu.c:736
 msgid "Command"
 msgstr "ã³ãã³ã"
 
-#: ../../WPrefs.app/Menu.c:710
+#: ../../WPrefs.app/Menu.c:750
 msgid ""
 "Enter a command that outputs a menu\n"
 "definition to stdout when invoked."
@@ -1249,11 +1058,19 @@
 "ã¡ãã¥ã¼å®ç¾©ãåºåããã³ãã³ãã\n"
 "å¥åãã¦ãã ãã"
 
-#: ../../WPrefs.app/Menu.c:721
+#: ../../WPrefs.app/Menu.c:758
+msgid ""
+"Cache menu contents after opening for\n"
+"the first time"
+msgstr ""
+"ååã­ã¼ãæã«ã¡ãã¥ã¼ã®åå®¹ã\n"
+"ã­ã£ãã·ã¥ãã"
+
+#: ../../WPrefs.app/Menu.c:769
 msgid "Command to Open Files"
 msgstr "ãã¡ã¤ã«ãéãã³ãã³ã"
 
-#: ../../WPrefs.app/Menu.c:735
+#: ../../WPrefs.app/Menu.c:783
 msgid ""
 "Enter the command you want to use to open the\n"
 "files in the directories listed below."
@@ -1261,71 +1078,71 @@
 "ãããã®ãã£ã¬ã¯ããªã«ãããã¡ã¤ã«ãéãã¨ãã«\n"
 "ä½¿ç¨ããã³ãã³ããå¥åãã¦ãã ãã"
 
-#: ../../WPrefs.app/Menu.c:744
+#: ../../WPrefs.app/Menu.c:792
 msgid "Directories with Files"
 msgstr "ãã¡ã¤ã«ã®ãããã£ã¬ã¯ããª"
 
-#: ../../WPrefs.app/Menu.c:757
+#: ../../WPrefs.app/Menu.c:805
 msgid "Strip extensions from file names"
 msgstr "æ¡å¼µå­ãé¤å»ãã"
 
-#: ../../WPrefs.app/Menu.c:769
+#: ../../WPrefs.app/Menu.c:817
 msgid "Keyboard Shortcut"
 msgstr "ã­ã¼ãã¼ãã·ã§ã¼ãã«ãã"
 
-#: ../../WPrefs.app/Menu.c:805
+#: ../../WPrefs.app/Menu.c:853
 msgid "Arrange Icons"
 msgstr "ã¢ã¤ã³ã³ãæ´å"
 
-#: ../../WPrefs.app/Menu.c:806
+#: ../../WPrefs.app/Menu.c:854
 msgid "Hide All Windows Except For The Focused One"
 msgstr "ãã©ã¼ã«ã¹ã¦ã£ã³ãã¦ä»¥å¤ãé ã"
 
-#: ../../WPrefs.app/Menu.c:807
+#: ../../WPrefs.app/Menu.c:855
 msgid "Show All Windows"
 msgstr "å¨ã¦ã®ã¦ã£ã³ãã¦ãè¡¨ç¤º"
 
-#: ../../WPrefs.app/Menu.c:810
+#: ../../WPrefs.app/Menu.c:858
 msgid "Exit X Session"
-msgstr "Xã»ãã·ã§ã³ãçµäº"
+msgstr "X ã»ãã·ã§ã³ãçµäº"
 
-#: ../../WPrefs.app/Menu.c:811
+#: ../../WPrefs.app/Menu.c:859
 msgid "Restart Window Maker"
 msgstr "Window Makerãåèµ·å"
 
-#: ../../WPrefs.app/Menu.c:812
+#: ../../WPrefs.app/Menu.c:860
 msgid "Start Another Window Manager   : ("
 msgstr "ã¡ããã¦ã£ã³ãã¦ããã¼ã¸ã£ãèµ·å (-_-#"
 
-#: ../../WPrefs.app/Menu.c:814
+#: ../../WPrefs.app/Menu.c:862
 msgid "Save Current Session"
 msgstr "ã»ãã·ã§ã³ãä¿å­"
 
-#: ../../WPrefs.app/Menu.c:815
+#: ../../WPrefs.app/Menu.c:863
 msgid "Clear Saved Session"
 msgstr "ã»ãã·ã§ã³ãã¯ãªã¢"
 
-#: ../../WPrefs.app/Menu.c:816
+#: ../../WPrefs.app/Menu.c:864
 msgid "Refresh Screen"
 msgstr "ç»é¢ã®åæç»"
 
-#: ../../WPrefs.app/Menu.c:817
+#: ../../WPrefs.app/Menu.c:865
 msgid "Open Info Panel"
 msgstr "æå ±ããã«"
 
-#: ../../WPrefs.app/Menu.c:818
+#: ../../WPrefs.app/Menu.c:866
 msgid "Open Copyright Panel"
 msgstr "èä½æ¨©è¡¨ç¤º"
 
-#: ../../WPrefs.app/Menu.c:824
+#: ../../WPrefs.app/Menu.c:872
 msgid "Window Manager to Start"
 msgstr "èµ·åããã¦ã£ã³ãã¦ããã¼ã¸ã£"
 
-#: ../../WPrefs.app/Menu.c:840
+#: ../../WPrefs.app/Menu.c:888
 msgid "Do not confirm action."
 msgstr "åä½ããã¡ãã¡ç¢ºèªããªã"
 
-#: ../../WPrefs.app/Menu.c:850
+#: ../../WPrefs.app/Menu.c:896
 msgid ""
 "Instructions:\n"
 "\n"
@@ -1345,44 +1162,44 @@
 " - é ç®ã§ããã«ã¯ãªãã¯ãã¦ã©ãã«ãç·¨é\n"
 " - é ç®ãã¯ãªãã¯ãã¦é¢é£æå ±ãç·¨é"
 
-#: ../../WPrefs.app/Menu.c:1067
+#: ../../WPrefs.app/Menu.c:1120
 #, c-format
 msgid "unknown command '%s' in menu"
 msgstr "ã¡ãã¥ã¼åã®ã³ãã³ã '%s' ã¯ç¥ãã¾ãã"
 
-#: ../../WPrefs.app/Menu.c:1099
+#: ../../WPrefs.app/Menu.c:1152
 msgid ": Execute Program"
 msgstr ": ãã­ã°ã©ã ã®å®è¡"
 
-#: ../../WPrefs.app/Menu.c:1103
+#: ../../WPrefs.app/Menu.c:1156
 msgid ": Perform Internal Command"
 msgstr ": åé¨ã³ãã³ãã®å¼ã³åºã"
 
-#: ../../WPrefs.app/Menu.c:1107
+#: ../../WPrefs.app/Menu.c:1160
 msgid ": Open a Submenu"
 msgstr ": ãµãã¡ãã¥ã¼ãéã"
 
-#: ../../WPrefs.app/Menu.c:1111
+#: ../../WPrefs.app/Menu.c:1164
 msgid ": Program Generated Submenu"
 msgstr ": ãµãã¡ãã¥ã¼ãèªåçæ"
 
-#: ../../WPrefs.app/Menu.c:1115
+#: ../../WPrefs.app/Menu.c:1168
 msgid ": Directory Contents Menu"
 msgstr ": ã¡ãã¥ã¼ãå«ããã£ã¬ã¯ããª"
 
-#: ../../WPrefs.app/Menu.c:1119
+#: ../../WPrefs.app/Menu.c:1172
 msgid ": Open Workspaces Submenu"
 msgstr ": ã¯ã¼ã¯ã¹ãã¼ã¹ãµãã¡ãã¥ã¼ãéã"
 
-#: ../../WPrefs.app/Menu.c:1123
+#: ../../WPrefs.app/Menu.c:1176
 msgid ": Open Window List Submenu"
 msgstr ": ã¦ã£ã³ãã¦ä¸è¦§ãµãã¡ãã¥ã¼ãéã"
 
-#: ../../WPrefs.app/Menu.c:1343
+#: ../../WPrefs.app/Menu.c:1401
 msgid "Remove Submenu"
 msgstr "ãµãã¡ãã¥ã¼ã®åé¤"
 
-#: ../../WPrefs.app/Menu.c:1344
+#: ../../WPrefs.app/Menu.c:1402
 msgid ""
 "Removing this item will destroy all items inside\n"
 "the submenu. Do you really want to do that?"
@@ -1390,30 +1207,49 @@
 "ãã®é ç®ãåé¤ããã¨ä¸­ã®ãµãã¡ãã¥ã¼ãã¿ããª\n"
 "ç ´å£ãã¾ã. æ¬å½ã«å®è¡ãã¾ãã?"
 
-#: ../../WPrefs.app/Menu.c:1346
+#: ../../WPrefs.app/Menu.c:1404
 msgid "Yes"
 msgstr "ã¯ã"
 
-#: ../../WPrefs.app/Menu.c:1346
+#: ../../WPrefs.app/Menu.c:1404
 msgid "No"
 msgstr "ããã"
 
-#: ../../WPrefs.app/Menu.c:1347
+#: ../../WPrefs.app/Menu.c:1405
 msgid "Yes, don't ask again."
 msgstr "ã¯ã, ä»¥å¾ç¢ºèªããªã"
 
-#. if there is a localized plmenu for the tongue put it's filename here
-#: ../../WPrefs.app/Menu.c:1514 ../../WPrefs.app/Menu.c:1521
-#, c-format
-msgid "%s/Library/WindowMaker/plmenu"
-msgstr "%s/Library/WindowMaker/plmenu.ja"
-
-#: ../../WPrefs.app/Menu.c:1530
+#: ../../WPrefs.app/Menu.c:1579
 #, c-format
 msgid "Could not open default menu from '%s'"
 msgstr "æ¨æºã®ã¡ãã¥ã¼ã '%s' ããéãã¾ããã§ãã"
 
-#: ../../WPrefs.app/Menu.c:1569
+#: ../../WPrefs.app/Menu.c:1583 ../../WPrefs.app/MouseSettings.c:140
+#: ../../WPrefs.app/MouseSettings.c:160 ../../WPrefs.app/TexturePanel.c:615
+#: ../../WPrefs.app/TexturePanel.c:695 ../../WPrefs.app/Themes.c:96
+#: ../../WPrefs.app/WPrefs.c:740 ../../WPrefs.app/WPrefs.c:745
+#: ../../WPrefs.app/WPrefs.c:762 ../../WPrefs.app/WPrefs.c:772
+#: ../../WPrefs.app/WPrefs.c:782 ../../WPrefs.app/WPrefs.c:820
+#: ../../WPrefs.app/WPrefs.c:825
+msgid "Error"
+msgstr "ã¨ã©ã¼"
+
+#: ../../WPrefs.app/Menu.c:1583 ../../WPrefs.app/MouseSettings.c:142
+#: ../../WPrefs.app/MouseSettings.c:162 ../../WPrefs.app/TexturePanel.c:616
+#: ../../WPrefs.app/TexturePanel.c:697 ../../WPrefs.app/TexturePanel.c:1529
+#: ../../WPrefs.app/Themes.c:98 ../../WPrefs.app/WPrefs.c:740
+#: ../../WPrefs.app/WPrefs.c:745 ../../WPrefs.app/WPrefs.c:764
+#: ../../WPrefs.app/WPrefs.c:776 ../../WPrefs.app/WPrefs.c:782
+#: ../../WPrefs.app/WPrefs.c:789 ../../WPrefs.app/WPrefs.c:820
+#: ../../WPrefs.app/WPrefs.c:825 ../../WPrefs.app/imagebrowser.c:105
+msgid "OK"
+msgstr "äºè§£"
+
+#: ../../WPrefs.app/Menu.c:1612 ../../WPrefs.app/WPrefs.c:789
+msgid "Warning"
+msgstr "è­¦å"
+
+#: ../../WPrefs.app/Menu.c:1613
 msgid ""
 "The menu file format currently in use is not supported\n"
 "by this tool. Do you want to discard the current menu\n"
@@ -1423,31 +1259,31 @@
 "ãµãã¼ããã¦ãã¾ãã. ãã®ãã¼ã«ãä½¿ãããã«ç¾è¡ã¡ãã¥ã¼\n"
 "ãå»æ£ãã¦ããããã§ãã?"
 
-#: ../../WPrefs.app/Menu.c:1572
+#: ../../WPrefs.app/Menu.c:1616
 msgid "Yes, Discard and Update"
 msgstr "ã¯ã, å»æ£ãã¦æ´æ°"
 
-#: ../../WPrefs.app/Menu.c:1573
+#: ../../WPrefs.app/Menu.c:1617
 msgid "No, Keep Current Menu"
 msgstr "ããã, ç¾ç¶ãç¶­æ"
 
-#: ../../WPrefs.app/Menu.c:1821
+#: ../../WPrefs.app/Menu.c:1880
 msgid "Applications Menu Definition"
 msgstr "ã¢ããªã±ã¼ã·ã§ã³ã»ã¡ãã¥ã¼ã®å®ç¾©"
 
-#: ../../WPrefs.app/Menu.c:1823
+#: ../../WPrefs.app/Menu.c:1882
 msgid "Edit the menu for launching applications."
 msgstr "ã¢ããªãèµ·åããã¡ãã¥ã¼ãç·¨é"
 
-#: ../../WPrefs.app/MenuPreferences.c:112
+#: ../../WPrefs.app/MenuPreferences.c:111
 msgid "Menu Scrolling Speed"
 msgstr "ã¡ãã¥ã¼ã®ã¹ã¯ã­ã¼ã«éåº¦"
 
-#: ../../WPrefs.app/MenuPreferences.c:161
+#: ../../WPrefs.app/MenuPreferences.c:160
 msgid "Submenu Alignment"
 msgstr "ãµãã¡ãã¥ã¼ã®ä¸¦ã³"
 
-#: ../../WPrefs.app/MenuPreferences.c:205
+#: ../../WPrefs.app/MenuPreferences.c:204
 msgid ""
 "Always open submenus inside the screen, instead of scrolling.\n"
 "Note: this is annoying."
@@ -1455,15 +1291,15 @@
 "ã¹ã¯ã­ã¼ã«ããªãã§ãµãã¡ãã¥ã¼ãå¸¸ã«ç»é¢åã«è¡¨ç¤ºãã.\n"
 "(ã¡ãã£ã¨ã¦ã¶ã)"
 
-#: ../../WPrefs.app/MenuPreferences.c:210
+#: ../../WPrefs.app/MenuPreferences.c:209
 msgid "Scroll off-screen menus when pointer is moved over them."
 msgstr "ç»é¢ããã¯ã¿åºãã¡ãã¥ã¼ããã¤ã³ã¿ã®ç§»åã«åããã¦ã¹ã¯ã­ã¼ã«"
 
-#: ../../WPrefs.app/MenuPreferences.c:230
+#: ../../WPrefs.app/MenuPreferences.c:229
 msgid "Menu Preferences"
-msgstr "ã¡ãã¥ã¼ã®è¨­å®"
+msgstr "ã¡ãã¥ã¼ã®è¨­å® "
 
-#: ../../WPrefs.app/MenuPreferences.c:232
+#: ../../WPrefs.app/MenuPreferences.c:231
 msgid ""
 "Menu usability related options. Scrolling speed,\n"
 "alignment of submenus etc."
@@ -1480,8 +1316,8 @@
 "Invalid mouse acceleration threshold value. Must be the number of pixels to "
 "travel before accelerating."
 msgstr ""
-"ãã¦ã¹å éã®ãã©ã¡ã¼ã¿ã¼ãä¸æ­£ã§ã. "
-"å éãéå§ããã¾ã§ã®ç§»åéããã¯ã»ã«ã§æå®ãã¾ã"
+"ãã¦ã¹å éã®ãã©ã¡ã¼ã¿ã¼ãä¸æ­£ã§ã. å éãéå§ããã¾ã§ã®ç§»åéããã¯ã»ã«ã§æ"
+"å®ãã¾ã"
 
 #: ../../WPrefs.app/MouseSettings.c:262 ../../WPrefs.app/MouseSettings.c:274
 #: ../../WPrefs.app/MouseSettings.c:286 ../../WPrefs.app/MouseSettings.c:298
@@ -1566,7 +1402,7 @@
 #: ../../WPrefs.app/MouseSettings.c:724
 #, c-format
 msgid "could not create temporary file %s"
-msgstr "ãã³ãã©ãªãã¡ã¤ã« %s ãä½æã§ãã¾ãã"
+msgstr "ä¸æãã¡ã¤ã« %s ãä½æã§ãã¾ãã"
 
 #: ../../WPrefs.app/MouseSettings.c:756
 #, c-format
@@ -1619,7 +1455,7 @@
 
 #: ../../WPrefs.app/MouseSettings.c:849
 msgid "Mouse Preferences"
-msgstr "ãã¦ã¹ã®è¨­å®"
+msgstr "ãã¦ã¹ã®è¨­å® "
 
 #: ../../WPrefs.app/MouseSettings.c:851
 msgid ""
@@ -1629,36 +1465,40 @@
 "ãã¦ã¹ã®éåº¦ãå éåº¦, ããã«ã¯ãªãã¯ã®éå»¶,\n"
 "ãã¿ã³éç½®ã®ç·¨éãªã©ãªã©"
 
-#: ../../WPrefs.app/Paths.c:84
+#: ../../WPrefs.app/Paths.c:85
 msgid "bad value in option IconPath. Using default path list"
 msgstr "ã¢ã¤ã³ã³ãã¹ã®å¤ãä¸æ­£ã§ã. ããã©ã«ãã®ãã¹ãä½¿ç¨ãã¾ã"
 
-#: ../../WPrefs.app/Paths.c:101
+#: ../../WPrefs.app/Paths.c:102
 msgid "bad value in option PixmapPath. Using default path list"
 msgstr "Pixmapã®ãã¹ãä¸æ­£ã§ã. ããã©ã«ãã®ãã¹ãä½¿ç¨ãã¾ã"
 
-#: ../../WPrefs.app/Paths.c:149
+#: ../../WPrefs.app/Paths.c:150
 msgid "Select directory"
 msgstr "ãã£ã¬ã¯ããªã®é¸æ"
 
-#: ../../WPrefs.app/Paths.c:270
+#: ../../WPrefs.app/Paths.c:266
 msgid "Icon Search Paths"
 msgstr "ã¢ã¤ã³ã³æ¤ç´¢ãã¹"
 
-#: ../../WPrefs.app/Paths.c:281 ../../WPrefs.app/Paths.c:312
-#: ../../WPrefs.app/TexturePanel.c:1311
+#: ../../WPrefs.app/Paths.c:277 ../../WPrefs.app/Paths.c:308
+#: ../../WPrefs.app/TexturePanel.c:1312
 msgid "Add"
 msgstr "è¿½å "
 
-#: ../../WPrefs.app/Paths.c:301
+#: ../../WPrefs.app/Paths.c:284 ../../WPrefs.app/Paths.c:315
+msgid "Remove"
+msgstr "é¤å»"
+
+#: ../../WPrefs.app/Paths.c:297
 msgid "Pixmap Search Paths"
 msgstr "Pixmapæ¤ç´¢ãã¹"
 
-#: ../../WPrefs.app/Paths.c:341
+#: ../../WPrefs.app/Paths.c:337
 msgid "Search Path Configuration"
-msgstr "æ¤ç´¢ãã¹ã®è¨­å®"
+msgstr "æ¤ç´¢ãã¹ã®è¨­å® "
 
-#: ../../WPrefs.app/Paths.c:343
+#: ../../WPrefs.app/Paths.c:339
 msgid ""
 "Search paths to use when looking for pixmaps\n"
 "and icons."
@@ -1667,10 +1507,12 @@
 "æ¢ç´¢ãã¹"
 
 #: ../../WPrefs.app/Preferences.c:75
+#, c-format
 msgid "OFF"
 msgstr "OFF"
 
 #: ../../WPrefs.app/Preferences.c:77
+#, c-format
 msgid "1 pixel"
 msgstr "1 ãã¯ã»ã«"
 
@@ -1780,7 +1622,7 @@
 
 #: ../../WPrefs.app/Preferences.c:349
 msgid "Miscellaneous Ergonomic Preferences"
-msgstr "ãã®ä»ã®æä½æ§ã®è¨­å®"
+msgstr "ãã®ä»ã®æä½æ§ã®è¨­å® "
 
 #: ../../WPrefs.app/Preferences.c:350
 msgid ""
@@ -1802,73 +1644,73 @@
 msgid "Hue"
 msgstr "è²ç¸"
 
-#: ../../WPrefs.app/TexturePanel.c:610
+#: ../../WPrefs.app/TexturePanel.c:612
 msgid "Could not load the selected file: "
 msgstr "é¸æãããã¡ã¤ã«ãéãã¾ãã: "
 
-#: ../../WPrefs.app/TexturePanel.c:664
+#: ../../WPrefs.app/TexturePanel.c:666
 msgid "Open Image"
 msgstr "ç»åãéã"
 
-#: ../../WPrefs.app/TexturePanel.c:694
+#: ../../WPrefs.app/TexturePanel.c:696
 msgid "The selected file does not contain a supported image."
 msgstr "é¸æãããã¡ã¤ã«ã«ã¯è¡¨ç¤ºå¯è½ãªç»åãå«ã¾ãã¦ãã¾ãã."
 
-#: ../../WPrefs.app/TexturePanel.c:945
+#: ../../WPrefs.app/TexturePanel.c:947
 #, c-format
 msgid "could not load file '%s': %s"
 msgstr "ãã¡ã¤ã«ãèª­ã¿è¾¼ãã¾ãã '%s': %s"
 
-#: ../../WPrefs.app/TexturePanel.c:1064
+#: ../../WPrefs.app/TexturePanel.c:1066
 #, c-format
 msgid "error creating texture %s"
 msgstr "ãã¯ã¹ãã£ã®ä½æã«å¤±æ %s"
 
-#: ../../WPrefs.app/TexturePanel.c:1255
+#: ../../WPrefs.app/TexturePanel.c:1256
 msgid "Texture Panel"
 msgstr "ãã¯ã¹ãã£ããã«"
 
-#: ../../WPrefs.app/TexturePanel.c:1263
+#: ../../WPrefs.app/TexturePanel.c:1264
 msgid "Texture Name"
 msgstr "ãã¯ã¹ãã£ã®åå"
 
-#: ../../WPrefs.app/TexturePanel.c:1275
+#: ../../WPrefs.app/TexturePanel.c:1276
 msgid "Solid Color"
 msgstr "ãã¿å¡ã"
 
-#: ../../WPrefs.app/TexturePanel.c:1276
+#: ../../WPrefs.app/TexturePanel.c:1277
 msgid "Gradient Texture"
 msgstr "ã°ã©ãã¼ã·ã§ã³è¡¨ç¤º"
 
-#: ../../WPrefs.app/TexturePanel.c:1277
+#: ../../WPrefs.app/TexturePanel.c:1278
 msgid "Simple Gradient Texture"
 msgstr "åç´ãªã°ã©ãã¼ã¸ã§ã³"
 
-#: ../../WPrefs.app/TexturePanel.c:1278
+#: ../../WPrefs.app/TexturePanel.c:1279
 msgid "Textured Gradient"
 msgstr "ãã¯ã¹ãã£ã§ã°ã©ãã¼ã·ã§ã³"
 
-#: ../../WPrefs.app/TexturePanel.c:1279
+#: ../../WPrefs.app/TexturePanel.c:1280
 msgid "Image Texture"
-msgstr "ç»å"
+msgstr "ãã¯ã¹ãã£ç»å"
 
-#: ../../WPrefs.app/TexturePanel.c:1287
+#: ../../WPrefs.app/TexturePanel.c:1288
 msgid "Default Color"
 msgstr "ããã©ã«ãã®è²"
 
-#: ../../WPrefs.app/TexturePanel.c:1299
+#: ../../WPrefs.app/TexturePanel.c:1300
 msgid "Gradient Colors"
 msgstr "ã°ã©ãã¼ã·ã§ã³ã®è²"
 
-#: ../../WPrefs.app/TexturePanel.c:1395
+#: ../../WPrefs.app/TexturePanel.c:1396
 msgid "Direction"
 msgstr "æ¹å"
 
-#: ../../WPrefs.app/TexturePanel.c:1423
+#: ../../WPrefs.app/TexturePanel.c:1424
 msgid "Gradient"
 msgstr "å¤ååº¦"
 
-#: ../../WPrefs.app/TexturePanel.c:1441
+#: ../../WPrefs.app/TexturePanel.c:1442
 msgid "Gradient Opacity"
 msgstr "ä¸éæåº¦"
 
@@ -1915,12 +1757,131 @@
 
 #: ../../WPrefs.app/Themes.c:193
 msgid "Tile of The Day"
-msgstr "ä»æ¥ã®ã¿ã¤ãã«"
+msgstr "ä»æ¥ã®ã¿ã¤ã«"
 
 #: ../../WPrefs.app/Themes.c:213
 msgid "Bar of The Day"
 msgstr "ä»æ¥ã®ãã¼"
 
+#: ../../WPrefs.app/WPrefs.c:260 ../../WPrefs.app/WPrefs.c:331
+msgid "Window Maker Preferences"
+msgstr ""
+
+#: ../../WPrefs.app/WPrefs.c:283
+msgid "Revert Page"
+msgstr "ãã¼ã¸ãå¾©å¸°"
+
+#: ../../WPrefs.app/WPrefs.c:289
+msgid "Revert All"
+msgstr "å¨ã¦ãå¾©å¸°"
+
+#: ../../WPrefs.app/WPrefs.c:295
+msgid "Save"
+msgstr "ä¿å­"
+
+#: ../../WPrefs.app/WPrefs.c:308
+msgid "Balloon Help"
+msgstr "ãã«ã¼ã³ãã«ã"
+
+#: ../../WPrefs.app/WPrefs.c:338
+#, c-format
+msgid "Version %s"
+msgstr ""
+
+#: ../../WPrefs.app/WPrefs.c:345
+msgid "Starting..."
+msgstr "èµ·åä¸­..."
+
+#: ../../WPrefs.app/WPrefs.c:443
+#, c-format
+msgid "could not locate image file %s\n"
+msgstr "ã¤ã¡ã¼ã¸ãã¡ã¤ã« %s ãè¦ä»ããã¾ãã\n"
+
+#: ../../WPrefs.app/WPrefs.c:656
+#, c-format
+msgid "could not load image file %s:%s"
+msgstr "ç»åãã¡ã¤ã« %s:%s ãéãã¾ãã"
+
+#: ../../WPrefs.app/WPrefs.c:674
+msgid "Loading Window Maker configuration files..."
+msgstr "Window Maker ã®è¨­å®ãã¡ã¤ã«ãèª­ã¿è¾¼ã¿ä¸­..."
+
+#: ../../WPrefs.app/WPrefs.c:678
+msgid "Initializing configuration panels..."
+msgstr "è¨­å®ããã«ãåæåä¸­..."
+
+#: ../../WPrefs.app/WPrefs.c:739 ../../WPrefs.app/WPrefs.c:819
+#, c-format
+msgid "Window Maker domain (%s) is corrupted!"
+msgstr "Window Maker ã®ãã¡ã¤ã³ (%s) ã«éå®³!"
+
+#: ../../WPrefs.app/WPrefs.c:743
+#, c-format
+msgid "Could not load Window Maker domain (%s) from defaults database."
+msgstr "Window Maker domain (%s) ãããã©ã«ããã¼ã¿ãã¼ã¹ããèª­ã¿è¾¼ãã¾ãã"
+
+#: ../../WPrefs.app/WPrefs.c:759
+msgid "could not extract version information from Window Maker"
+msgstr "Window Maker ãããã¼ã¸ã§ã³æå ±ãåå¾ã§ãã¾ãã"
+
+#: ../../WPrefs.app/WPrefs.c:760
+msgid "Make sure wmaker is in your search path."
+msgstr "wmaker ããµã¼ããã¹ã«å«ã¾ãã¦ãããç¢ºèªãã¦ä¸ãã"
+
+#: ../../WPrefs.app/WPrefs.c:763
+msgid ""
+"Could not extract version from Window Maker. Make sure it is correctly "
+"installed and is in your PATH environment variable."
+msgstr ""
+"Window Maker ã®ãã¼ã¸ã§ã³æå ±ãèª­ã¿åãã¾ãã. é©åã«ã¤ã³ã¹ãã¼ã«ãã¦, PATH "
+"è¨­å®ããã¦ãããã¨ãç¢ºèªãã¦ãã ãã"
+
+#: ../../WPrefs.app/WPrefs.c:773
+msgid ""
+"Could not extract version from Window Maker. Make sure it is correctly "
+"installed and the path where it installed is in the PATH environment "
+"variable."
+msgstr ""
+"Window Makerã®ãã¼ã¸ã§ã³æå ±ãèª­ã¿ã¨ãã¾ãã. é©åã«ã¤ã³ã¹ãã¼ã«ãã¦, ããã« "
+"PATH ãéãã¦ãããã¨ãç¢ºèªãã¦ãã ãã"
+
+#: ../../WPrefs.app/WPrefs.c:780
+#, c-format
+msgid ""
+"WPrefs only supports Window Maker 0.18.0 or newer.\n"
+"The version installed is %i.%i.%i\n"
+msgstr ""
+"WPrefsã¯Window Maker 0.18.0 ä»¥éããµãã¼ããã¦ãã¾ã.\n"
+"ã¤ã³ã¹ãã¼ã«ããã¦ããã®ã¯ %i.%i.%i ã§ã\n"
+
+#: ../../WPrefs.app/WPrefs.c:787
+#, c-format
+msgid ""
+"Window Maker %i.%i.%i, which is installed in your system, is not fully "
+"supported by this version of WPrefs."
+msgstr ""
+"ããªãã®ã·ã¹ãã ã«ã¤ã³ã¹ãã¼ã«ããã¦ããWindow Maker %i.%i.%i ã¯, "
+"Wprefsã®ãã®ãã¼ã¸ã§ã³ã§ã¯ä¸é¨ãµãã¼ããã¦ããã¾ãã."
+
+#: ../../WPrefs.app/WPrefs.c:800
+#, c-format
+msgid "could not run \"%s --global_defaults_path\"."
+msgstr "\"%s -global_defaults_path\" ãå®è¡ã§ãã¾ãã."
+
+#: ../../WPrefs.app/WPrefs.c:823
+#, c-format
+msgid "Could not load global Window Maker domain (%s)."
+msgstr "Window Makerã®ã°ã­ã¼ãã«ã»ãã¡ã¤ã³(%s)ãèª­ã¿è¾¼ãã¾ãã."
+
+#: ../../WPrefs.app/WPrefs.c:1072
+#, c-format
+msgid ""
+"bad speed value for option %s\n"
+". Using default Medium"
+msgstr ""
+"ãªãã·ã§ã³ %s ã®speedå¤ã¯ä¸æ­£ã§ã. \n"
+"ããã©ã«ãå¤ãä½¿ç¨ãã¾ã"
+
 #: ../../WPrefs.app/WindowHandling.c:141
 #, c-format
 msgid "bad option value %s in WindowPlacement. Using default value"
@@ -1956,7 +1917,7 @@
 
 #: ../../WPrefs.app/WindowHandling.c:253
 msgid "Cascade"
-msgstr "ã«ã¹ã±ã¼ã"
+msgstr "ãããã¦éã­ã"
 
 #: ../../WPrefs.app/WindowHandling.c:254
 msgid "Smart"
@@ -2015,19 +1976,19 @@
 msgid "Attract"
 msgstr "ã²ã£ã¤ã"
 
-#: ../../WPrefs.app/WindowHandling.c:423
+#: ../../WPrefs.app/WindowHandling.c:421
 msgid ""
-"Open dialogs in same workspace\n"
+"Open dialogs in the same workspace\n"
 "as their owners"
 msgstr ""
 "ãã¤ã¢ã­ã°ã¯ãªã¼ãã¼ã¨åã\n"
 "ã¯ã¼ã¯ã¹ãã¼ã¹ã«è¡¨ç¤ºãã"
 
-#: ../../WPrefs.app/WindowHandling.c:450
+#: ../../WPrefs.app/WindowHandling.c:448
 msgid "Window Handling Preferences"
-msgstr "ã¦ã£ã³ãã¦æä½ã®è¨­å®"
+msgstr "ã¦ã£ã³ãã¦æä½ã®è¨­å® "
 
-#: ../../WPrefs.app/WindowHandling.c:452
+#: ../../WPrefs.app/WindowHandling.c:450
 msgid ""
 "Window handling options. Initial placement style\n"
 "edge resistance, opaque move etc."
@@ -2040,19 +2001,15 @@
 msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã®æä½"
 
 #: ../../WPrefs.app/Workspace.c:183
-msgid ""
-"wrap to the first workspace after the\n"
-"last workspace."
-msgstr ""
-"æå¾ã®ã¯ã¼ã¯ã¹ãã¼ã¹ãã\n"
-"æåã®ã¯ã¼ã¯ã¹ãã¼ã¹ã«"
+msgid "Wrap to the first workspace from the last workspace."
+msgstr "æå¾ã®ã¯ã¼ã¯ã¹ãã¼ã¹ãã æåã®ã¯ã¼ã¯ã¹ãã¼ã¹ã«"
 
 #: ../../WPrefs.app/Workspace.c:205
-msgid "switch workspaces while dragging windows."
+msgid "Switch workspaces while dragging windows."
 msgstr "ãã©ãã°ä¸­ã«ã¯ã¼ã¯ã¹ãã¼ã¹ã®åãæ¿ã"
 
 #: ../../WPrefs.app/Workspace.c:227
-msgid "automatically create new workspaces."
+msgid "Automatically create new workspaces."
 msgstr "èªåçã«æ°ããã¯ã¼ã¯ã¹ãã¼ã¹ãä½æ"
 
 #: ../../WPrefs.app/Workspace.c:250
@@ -2113,7 +2070,7 @@
 
 #: ../../WPrefs.app/Workspace.c:364
 msgid "Workspace Preferences"
-msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã®è¨­å®"
+msgstr "ã¯ã¼ã¯ã¹ãã¼ã¹ã®è¨­å® "
 
 #: ../../WPrefs.app/Workspace.c:366
 msgid ""
@@ -2123,20 +2080,52 @@
 "ã¯ã¼ã¯ã¹ãã¼ã¹ã®æä½ã®è¨­å®.\n"
 "ããã¯/ã¯ãªãããããã§æå¹å/ç¡å¹åã§ãã¾ã"
 
-#~ msgid ""
-#~ "Set keyboard input focus to\n"
-#~ "the window under the mouse pointer,\n"
-#~ "including the root window."
-#~ msgstr ""
-#~ "ã«ã¼ãã¦ã£ã³ãã¦ãå«ã, ãã¦ã¹\n"
-#~ "ãã¤ã³ã¿ã®ä¸ã®ã¦ã£ã³ãã¦ã«ã¤ã³\n"
-#~ "ãããã»ãã©ã¼ã«ã¹ãç§»åãã"
+#: ../../WPrefs.app/imagebrowser.c:95
+msgid "View"
+msgstr "ãã¥ã¼"
 
-#~ msgid "Click window to focus"
-#~ msgstr "ã¦ã£ã³ãã¦ã®ã¯ãªãã¯ã§"
+#: ../../WPrefs.app/main.c:59
+#, c-format
+msgid "usage: %s [options]\n"
+msgstr "ä½¿ç¨æ¹æ³: %s [ãªãã·ã§ã³]\n"
 
-#~ msgid "Focus follows mouse"
-#~ msgstr "ãã¦ã¹ã«ã¼ã½ã«ã®ç§»åã§"
+#: ../../WPrefs.app/main.c:60
+msgid "options:"
+msgstr "ãªãã·ã§ã³:"
+
+#: ../../WPrefs.app/main.c:61
+msgid " -display <display>\tdisplay to be used"
+msgstr " -display <display>\tãã£ã¹ãã¬ã¤ã®æå®"
+
+#: ../../WPrefs.app/main.c:62
+msgid " --version\t\tprint version number and exit"
+msgstr " --version\t\tãã¼ã¸ã§ã³ãè¡¨ç¤ºãã¦ããçµäºãã"
+
+#: ../../WPrefs.app/main.c:63
+msgid " --help\t\tprint this message and exit"
+msgstr " --help\t\tãã®ã¡ãã»ã¼ã¸ãè¡¨ç¤ºãã¦ããçµäºãã"
+
+#: ../../WPrefs.app/main.c:122
+#, c-format
+msgid "too few arguments for %s"
+msgstr "%sã«å¯¾ããå¼æ°ãè¶³ãã¾ãã"
+
+#: ../../WPrefs.app/main.c:145
+msgid "X server does not support locale"
+msgstr "Xãµã¼ããã­ã±ã¼ã«æ©è½ããµãã¼ããã¦ãã¾ãã"
+
+#: ../../WPrefs.app/main.c:148
+msgid "cannot set locale modifiers"
+msgstr "ã­ã±ã¼ã«ãè¨­å®ã§ãã¾ãã"
+
+#: ../../WPrefs.app/main.c:154
+#, c-format
+msgid "could not open display %s"
+msgstr "ãã£ã¹ãã¬ã¤`%s'ãéãã¾ãã"
+
+#: ../../WPrefs.app/main.c:162
+msgid "could not initialize application"
+msgstr "ã¢ããªã±ã¼ã·ã§ã³ã®åæåã«å¤±æ"
 
-#~ msgid "\"Sloppy\" focus"
-#~ msgstr "\"Sloppy\" ãã©ã¼ã«ã¹"
+#~ msgid "%s/Library/WindowMaker/plmenu"
+#~ msgstr "%s/Library/WindowMaker/plmenu.ja"
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/po/Makefile.am wm/WPrefs.app/po/Makefile.am
--- ../work/WindowMaker-0.91.0/WPrefs.app/po/Makefile.am	2004-10-26 07:17:12.000000000 +0400
+++ wm/WPrefs.app/po/Makefile.am	2004-10-27 10:00:10.000000000 +0400
@@ -39,7 +39,7 @@
 
 WPrefs.pot: $(POTFILES)
 	xgettext --default-domain=WPrefs \
-	--add-comments --keyword=_ $(POTFILES)
+	--add-comments --keyword=_ --keyword=N_ $(POTFILES)
 	if cmp -s WPrefs.po WPrefs.pot; then \
 	    rm -f WPrefs.po; \
 	else \
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/tiff/Makefile.am wm/WPrefs.app/tiff/Makefile.am
--- ../work/WindowMaker-0.91.0/WPrefs.app/tiff/Makefile.am	2000-04-03 01:05:08.000000000 +0400
+++ wm/WPrefs.app/tiff/Makefile.am	2004-11-04 12:10:11.000000000 +0300
@@ -1,4 +1,4 @@
-tiffdatadir = $(wprefsdir)/tiff
+tiffdatadir = $(wprefs_datadir)/tiff
 
 EXTRA_DIST = \
 	advancetonewworkspace.tiff \
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/tiff/miscprefs2.tiff wm/WPrefs.app/tiff/miscprefs2.tiff
--- ../work/WindowMaker-0.91.0/WPrefs.app/tiff/miscprefs2.tiff	1970-01-01 03:00:00.000000000 +0300
+++ wm/WPrefs.app/tiff/miscprefs2.tiff	1999-01-25 22:06:53.000000000 +0300
@@ -0,0 +1,20 @@
+II* $                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ\\\ÿ§§§ÿ                                \\\ÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿòÂÿòÂÿòÂÿNþÖÿf®Êÿf®ÊÿòÂÿNþÖÿòÂÿòÂÿòÂÿNþÖÿòÂÿòÂÿòÂÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿf®ÊÿòÂÿf®ÊÿNþÖÿf®Êÿf®ÊÿòÂÿNþÖÿf®ÊÿòÂÿf®ÊÿNþÖÿf®ÊÿòÂÿf®ÊÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿòÂÿNþÖÿf®ÊÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿòÂÿòÂÿòÂÿNþÖÿf®Êÿf®ÊÿòÂÿNþÖÿòÂÿf®Êÿf®ÊÿNþÖÿòÂÿòÂÿòÂÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                \\\ÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿNþÖÿ§§§ÿ                                §§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ§§§ÿ                                                                                                                                                                                                                                   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ                                   ÿTßTÿ_TÿÿÂïÿ2¯ÿÿ&äÿ.·äÿÿqäÿÙÇ¤ÿÿÍ[$ÿ=«$ÿÿs$ÿëÃ$ÿÿÇÍDÿuÿÿ÷ÙÿÏqÿÿÞÿ_vÿÿá
+øÿ²Øÿÿ±bØÿ	B¨ÿÿ)¨ÿi¨ÿÿ9ø¨ÿù¨¨ÿÿÿÿÿ                                   ÿTßTÿ_TÿÿÂïÿ2¯ÿÿ&äÿ.·äÿÿqäÿÙÇ¤ÿÿÍ[$ÿ=«$ÿÿs$ÿëÃ$ÿÿÇÍDÿuÿÿ÷ÙÿÏqÿÿÞÿ_vÿÿá
+øÿ²Øÿÿ±bØÿ	B¨ÿÿ)¨ÿi¨ÿÿ9ø¨ÿù¨¨ÿÿÿÿÿ                                   ÿTßTÿ_TÿÿÂïÿ2¯ÿÿ&äÿ.·äÿÿqäÿÙÇ¤ÿÿÍ[$ÿ=«$ÿÿs$ÿëÃ$ÿÿÇÍDÿuÿÿ÷ÙÿÏqÿÿÞÿ_vÿÿá
+øÿ²Øÿÿ±bØÿ	B¨ÿÿ)¨ÿi¨ÿÿ9ø¨ÿù¨¨ÿÿÿÿÿ                                   ÿTßTÿ_TÿÿÂïÿ2¯ÿÿ&äÿ.·äÿÿqäÿÙÇ¤ÿÿÍ[$ÿ=«$ÿÿs$ÿëÃ$ÿÿÇÍDÿuÿÿ÷ÙÿÏqÿÿÞÿ_vÿÿá
+øÿ²Øÿÿ±bØÿ	B¨ÿÿ)¨ÿi¨ÿÿ9ø¨ÿù¨¨ÿÿÿÿÿ                                   ÿTßTÿ_TÿÿÂïÿ2¯ÿÿ&äÿ.·äÿÿqäÿÙÇ¤ÿÿÍ[$ÿ=«$ÿÿs$ÿëÃ$ÿÿÇÍDÿuÿÿ÷ÙÿÏqÿÿÞÿ_vÿÿá
+øÿ²Øÿÿ±bØÿ	B¨ÿÿ)¨ÿi¨ÿÿ9ø¨ÿù¨¨ÿÿÿÿÿ                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        °°°8ºº:>==Ý#××W__ÿ77×½}½#æ>pp°8                                                    ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ                            ÚZïÿgÇGÿ5eÅÿ~NÿVFúÿfÿ	¡ÿãCÿo¯OÿÖÖÖ                                                ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿÿ                        ©)ï¯¯ÿÙÿ2bÿêÿIÁþÿiÿ©1aÿþîNÿò¢ÿ&zÿËËÿeå%                                            ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿÿ                    ¡!AUOOÿ^.ÿ²bÿ¥éIÿÕyÿáA>ÿN¶ÿÖæÿ^Îöÿ1¡ÿîNöÿâ¢Âÿcÿy¹9U                                        ÿñqqÿñqqÿñqqÿñqqÿñqqÿÿÿÿÿÿÿñqqÿñqqÿñqqÿñqqÿñqqÿÿ                ¼<<ÿÑaAÿ²bBÿuùÿvÿ&ºÿ:ÿ&ºÿ&ºÿfÆúÿfÆÿæ¦FÿÎÖÿRâBÿk«Kÿêª*                                    ÿînnÿînnÿînnÿînnÿînnÿÿ
+ÿ ÿ
+ÿ ÿ
+ÿ ÿ
+ÿ ÿxÿînnÿînnÿînnÿînnÿînnÿÿ            ÀÀÀÛëwÓ£ÿÜìÌÿ¹	Ñÿ¦zÿêªÿªÿêªÿjÿjÿZZêÿ::ÿzzÿÚÿ¦Æúÿ&zÿ§ÇwÀÀÀ                                ÿúúúÿúúúÿúúúÿúúúÿúúúÿÿxÿxÿxÿxÿxÿúúúÿúúúÿúúúÿúúúÿúúúÿÿ            ôttæ_ÿ¶VÿúZªÿÎÖVÿ2rÒÿòrRÿrò²ÿ
+Jòÿ
+rÿò
+rÿÊ
+ÿ*jJÿªêÊÿªjÿÚ:êÿâBÿý=ÿâbæ                                ÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿÿ            .Îg'Çÿ¼¬ÿÎ¶Vÿ""ÿ¢¢ÿbbÿâbÿRâÿÒÿR2ÿ2rÒÿ2rÒÿ2rÒÿò
+ÒÿJ²ÿÊ*rÿîNÿ%E                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ            Ýí­G½]ÿl4ÿÚªÿ¼|Üÿ||<ÿ|ÿBüÿÂÿÂÿÂ¢BÿB"ÿ¢â"ÿB"ÿ"¢ÿâÂÿR²âÿÊrRÿ«KG                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ            G{Ûß¥ÿlÿü<ÿ\¬ÿ\¬ÿ<<ÿ<|ÿ|Üÿü<ÿü<ÿ¼üÜÿü<ÿ¼ü\ÿ¼|ÿüÜÿ""ÿ"üÿ'{Ûß                                                                                                                    û[ß¥9ÿ¬,tÿìÌÿ¬,ÿìlLÿìÌÿ\¬ÿ¼<ÿÜ<ìÿ<¼ÿÜ<ìÿÜ<ìÿ\\lÿìÌÿÜ¬ÿ¼<ÿü<ÿûËß                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ            MG¥ÿ4Ôdÿ¬Ìÿ,Lôÿl¬ÿ¬Lÿ\lÌÿ¬LÿìlLÿ,ÿìÌÿìÌÿìlLÿ,ÿ\lÌÿÜ¬ÿ¼ÿ3=G                                ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿý½½ÿÿ            Ö¦&s}ÿÔÿLtÔÿ,´ÿlLôÿ,ÿìÌÿìÌÿlLôÿ,ÿ,ÿìÌÿlLôÿ,ÿ\lÌÿ<lÿZjÿÉñ                                ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿå¥¥ÿÿ            ä¤$æ³ÃÿÜÿ´TÿÌô4ÿ,´ÿlLôÿlLôÿ¬tÿ¬tÿlLôÿlLôÿ¬tÿ,´ÿ¬tÿ¬Lÿ|ÜÿÑÿüæ                                ÿñqqÿñqqÿñqqÿñqqÿñqqÿÿÿÿÿÿÿñqqÿñqqÿñqqÿñqqÿñqqÿÿ            @@@-E¹w±~îÿä$ÿLtTÿLôÔÿ,´ÿ,´ÿ,´ÿ¬tÿ¬tÿÌ4ÿ¬´ÿÌ4ÿlLôÿ,LtÿÂÿ-Yw@@@                                ÿînnÿînnÿînnÿînnÿînnÿÿXXÿXXÿXXÿXXÿfTTÿînnÿînnÿînnÿînnÿînnÿÿ                4íÙÿb¼ÿLÔÿLôTÿtTÿÌô4ÿ,´ÿ,´ÿ¬tÿÌ4ÿÌÔÿ,4ÿÌ4ÿBÜÿ~N6ÿ2¢B                                    ÿúúúÿúúúÿúúúÿúúúÿúúúÿÿfTTÿfTTÿfTTÿfTTÿfTTÿúúúÿúúúÿúúúÿúúúÿúúúÿÿ                    zÊ
+Uy!ÿl4ÿÜ,ÿ,LtÿLtÔÿÌô4ÿ,´ÿ,´ÿLtTÿÌÔÿLôTÿü¼\ÿúêÿ^6U                                        ÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿâââÿÿ                        fªyQÿÜ,ÿìÌÿü|ÿ¬,ôÿL´TÿL´ÔÿL4ÿ\Ìÿ<<ÿFÊÿ®                                            ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ                            |,Éáÿ^úÿ|¬tÿ\,ÿ\ÿBBÜÿ¼¼ÿ
+RBÿQNÿ
+b                                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ                                àà8¬>anÖ#9á^¹áÞÿinæ#ò¢>8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          0       0       Â$                
+        )   Ê$      ô$      
+%                    *       %         R               /usr/home/fatal/newprefs/miscprefs2.tiff  Created with The GIMP          
\ ÷ ËÏÎÃÅ ÆÁÊÌÁ ÎÅÔ ÎÏ×ÏÊ ÓÔÒÏËÉ
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/tiff/temp.tiff wm/WPrefs.app/tiff/temp.tiff
--- ../work/WindowMaker-0.91.0/WPrefs.app/tiff/temp.tiff	1970-01-01 03:00:00.000000000 +0300
+++ wm/WPrefs.app/tiff/temp.tiff	1999-01-25 22:06:53.000000000 +0300
@@ -0,0 +1,19 @@
+II* $                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  °  ô ð                                                                                                                                                                                Ð  ð* àÿ((ÿ|HH                                                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ®`àÿÍ¨¨ÿøøÿ¨¨ÿÊÿ      à   @                                                ÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿÿ¦ZZÿÁ`àÿeÿÈÈÿIrrÿ5¬¬ÿº$$ÿ((³ÌÈ   @                                            ÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿÿ®`àÿUÿ;vvÿÕVVÿ½¢¢ÿN¬¬ÿêÿvèèÿ¨¨¨aààà,   à                                            ÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿ`àÿèèÿaØØÿu::ÿ}ÿ¾,,ÿZ44ÿÂøøÿøøÿÝò   P                                            ÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿhhÿ®`àÿÍPPÿÅÌÌÿérrÿ]RRÿN,,ÿrrÿÂ¸¸ÿÂ88ÿÄèè_HHHKÖ      @                                        ÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿèèèÿ àÿeÿ1DDÿ=^^ÿllÿÎ,,ÿFôôÿ88ÿâxxÿ$hhÿ_000   ©   Ü   p                                       ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿLääÿf àÿU00ÿÉÿYªªÿÝÿÎ¬¬ÿZÿxxÿb¸¸ÿ$hhÿÿððð_g   -                                              ÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿ®`àÿãÿsÿ+))ÿÝÿ^ÜÜÿ¾ÿÊ´´ÿbxxÿZÒÒÿºººÿêêêÿ°°°ßçÀÀÀ½   ~   ´   `                                    ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿ.`àÿ}¸¸ÿÝÊÊÿÿÍ¼¼ÿ~ÜÜÿ22ÿrÿøøÿÿÂÂÂÿ|||ÿ¨¨¨ÿ000ßçÀÀÀ   ®                                           ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿê àÿ((ÿÝââÿ¾¾ÿBBÿllÿRRÿ²ÿ"¸¸ÿâ¼¼ÿBBBÿüüüÿÿ(((ÿ000ßPPP'   %   J   è   À                                    ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿ2 àÿhhÿýÚÚÿÎÎÿ||ÿÿîÿJLLÿøøÿâ<<ÿÂÂÂÿ¼¼¼ÿÿlllÿ¨¨¨ÿppp_ppp;àààA      à                                        ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿ©©ÿ àÿ}ØØÿêêÿ}^^ÿ=ÿnÿ22ÿôôÿ¢¸¸ÿâÜÜÿÂÂÂÿüüüÿÿ¬¬¬ÿÿÿÈÈÈ(((s   H                                           ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿ¥AAÿ00ÿyÿãááÿíüüÿ®ÿ.bbÿ2¤¤ÿbxxÿâÿBBBÿ¼¼¼ÿÿ¬¬¬ÿìììÿ¼¼¼ÿøøøÿ888ïXXXPPP²   P                                            ÛÛÛÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿyyÿøøÿILLÿnllÿ¦llÿbÿâxxÿ$ØØÿXXXÿÿhhhÿ¨¨¨ÿhhhÿÿøøøÿ444ÿÄÄÄ¯¸¸¸PPPâ   P                                            ÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿ[[[ÿ³³³ÿÿRRÿ¢¸¸ÿÖbbÿÔÔÿ"8¸ÿ
+
+ÿªªªÿªªªÿ
+
+
+ÿ²²²ÿòòòÿªªªÿ¶¶¶ÿÿCCCÿäää/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿ³³³ÿÙÙÙÿÿêêêÿªÿèÿ|XXÿ"<<ÿ<<<ÿìììÿlllÿìììÿ<<<ÿÿòòòÿ¶¶¶ÿQQQÿ¼¼¼ÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿ³³³ÿ¹¹¹ÿzzzÿRRRÿtttÿÿêòòÿÂÿ|||ÿ<<<ÿlllÿ,,,ÿÿüüüÿ
+
+
+ÿ¶¶¶ÿQQQÿÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿ¥¥¥ÿÿ¹¹¹ÿjjjÿ¢¢¢ÿ\\\ÿÁÁÁÿÿ222ÿ\\\ÿ\\\ÿÿ¬¬¬ÿlllÿ¼¼¼ÿòòòÿ¶¶¶ÿÿÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿsssÿ¡¡¡ÿÚÚÚÿÂÂÂÿ\\\ÿÿñññÿ¶¶¶ÿ¢¢¢ÿ,,,ÿ,,,ÿ¬¬¬ÿìììÿ¼¼¼ÿ
+
+
+ÿöööÿQQQÿÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿÿ³³³ÿ^^^ÿÚÚÚÿlllÿ<<<ÿ999ÿÿîîîÿjjjÿ¼¼¼ÿ,,,ÿ¬¬¬ÿÿ¼¼¼ÿÿÿ111ÿYYYÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿ³³³ÿÎÎÎÿ
+
+
+ÿ´´´ÿÿ¼¼¼ÿ\\\ÿÿÄÄÄÿXXXÿèèèÿÿ888ÿxxxÿDDDÿ´´´ÿÿ¼¼¼ÿüüüÿüüüÿüüüÿüüüÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿ[[[ÿSSSÿAAAÿÿìììÿæææÿëëëÿÿåååÿ^^^ÿºººÿÊÊÊÿÿÎÎÎÿiiiÿeeeÿÍÍÍÿÿ«««ÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿÿ®®®ÿ²²²ÿ´´´ÿÿ999ÿ			ÿnnnÿêêêÿBBBÿ\\\ÿÿ***ÿNNNÿ111ÿ©©©ÿÿ999ÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿcccÿÿ
+
+
+ÿÿÖÖÖÿ999ÿ			ÿnnnÿªªªÿüüüÿ\\\ÿÿêêêÿ®®®ÿqqqÿYYYÿ¹¹¹ÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿÿ³³³ÿÿ222ÿtttÿ¾¾¾ÿ999ÿ			ÿnnnÿªªªÿ¼¼¼ÿÿÿÿÿ			ÿYYYÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿyyyÿyyyÿKKKÿÖÖÖÿbbbÿLLLÿÿÙÙÙÿ			ÿnnnÿªªªÿ|||ÿÿBBBÿÚÚÚÿ^^^ÿIIIÿ999ÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿyyyÿyyyÿÿKKKÿÎÎÎÿBBBÿÌÌÌÿ!!!ÿ999ÿ			ÿ®®®ÿ***ÿ¼¼¼ÿÿ¢¢¢ÿÿ~~~ÿIIIÿ999ÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                            ÛÛÛÿÿìììÿrrrÿÿ,,,ÿ´´´ÿüüüÿ|||ÿ\\\ÿôôôÿÿÿhhhÿ888ÿäääÿÌÌÌÿÜÜÜÿ|||ÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿ/xxxíPPPâ   P                                            kkkÿóóóÿcccÿÔÔÔÿ<<<ÿÿãããÿÿÿ%%%ÿ®®®ÿªªªÿÊÊÊÿÿñññÿíííÿÿÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿÛÛÛÿ/xxxíPPPâ   P                                            ³³³ÿÿÿ666ÿ¼¼¼ÿáááÿ999ÿ			ÿnnnÿÊÊÊÿ<<<ÿ\\\ÿrrrÿ¶¶¶ÿáááÿéééÿ¹¹¹ÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                    LLLüCCCOÿõõõÿêêêÿÌÌÌÿ666ÿYYYÿ			ÿîîîÿ***ÿ<<<ÿ\\\ÿrrrÿöööÿÑÑÑÿÿ¹¹¹ÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                    ¥¥¥seeescccÿ111ÿÌÌÌÿÞÞÞÿIIIÿ¡¡¡ÿNNNÿªªªÿüüüÿ<<<ÿÿÿ111ÿÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                        ]]]Oÿbbbÿ111ÿ±±±ÿ^^^ÿ&&&ÿrrrÿÿÿ***ÿ®®®ÿñññÿYYYÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                        î..ÿÙÙÙÿqqqÿ...ÿÿ***ÿbbbÿÂÂÂÿjjjÿ®®®ÿ			ÿÙÙÙÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿyyyÿüüüÿ/xxxíPPPâ   P                                           økkkÿÿôôôÿ$$$ÿÿøøøÿøøøÿÄÄÄÿtttÿÿ¼¼¼ÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿüüüÿ/¸¸¸íPPPb   P                                              XàààðððË¯ÈÈÈ(((èèè¸¸¸ïÄÄÄ¯äää///////////////////////ÏäääW¸¸¸"                                              @   x   N#ÐÐÐ{°°°;«hhhSXXX¸¸¸xxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxíxxxí¸¸¸m888õ¨¨¨!Ì   à                                               ðâÀÀÀ   U   ©àààÎZPPP2PPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâPPPâb"ÌÈ   @                                                   ¸   ò      ü   ¸   p   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P   P         à   @                                                          Ø      ð   À                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    0       0       Â$                
+        $   Ê$      î$      %                    *       %         R               /usr/home/fatal/newprefs/menus.tiff Created with The GIMP          
\ ÷ ËÏÎÃÅ ÆÁÊÌÁ ÎÅÔ ÎÏ×ÏÊ ÓÔÒÏËÉ
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/xpm/Makefile.am wm/WPrefs.app/xpm/Makefile.am
--- ../work/WindowMaker-0.91.0/WPrefs.app/xpm/Makefile.am	2000-04-03 01:05:08.000000000 +0400
+++ wm/WPrefs.app/xpm/Makefile.am	2004-11-04 12:10:11.000000000 +0300
@@ -1,4 +1,4 @@
-xpmdatadir = $(wprefsdir)/xpm
+xpmdatadir = $(wprefs_datadir)/xpm
 
 
 EXTRA_DIST = \
diff -Naur ../work/WindowMaker-0.91.0/WPrefs.app/xpm/temp.xpm wm/WPrefs.app/xpm/temp.xpm
--- ../work/WindowMaker-0.91.0/WPrefs.app/xpm/temp.xpm	1970-01-01 03:00:00.000000000 +0300
+++ wm/WPrefs.app/xpm/temp.xpm	1999-05-16 06:49:06.000000000 +0400
@@ -0,0 +1,159 @@
+/* XPM */
+static char * image_name[] = {
+"48 48 108 2",
+"  	c None",
+". 	c #108408420842",
+"X 	c #000000000000",
+"o 	c #084200000000",
+"O 	c #529408420842",
+"+ 	c #739C10841084",
+"@ 	c #421010841084",
+"# 	c #631863186318",
+"$ 	c #739C08420842",
+"% 	c #B5AC18C618C6",
+"& 	c #A52821082108",
+"* 	c #6B5A18C618C6",
+"= 	c #5294294A294A",
+"- 	c #18C618C618C6",
+"; 	c #294A294A294A",
+": 	c #63185AD65AD6",
+"> 	c #842008420842",
+", 	c #A52808420842",
+"< 	c #842010841084",
+"1 	c #94A44A524A52",
+"2 	c #AD6A318C318C",
+"3 	c #5AD621082108",
+"4 	c #4A5210841084",
+"5 	c #084208420842",
+"6 	c #AD6A08420842",
+"7 	c #DEF66B5A6B5A",
+"8 	c #AD6A6B5A6B5A",
+"9 	c #BDEE42104210",
+"0 	c #739C318C318C",
+"q 	c #5AD6294A294A",
+"w 	c #842018C618C6",
+"e 	c #AD6A5AD65AD6",
+"r 	c #7BDE318C318C",
+"t 	c #421021082108",
+"y 	c #4A5221082108",
+"u 	c #210818C618C6",
+"i 	c #B5AC08420842",
+"p 	c #A528318C318C",
+"a 	c #BDEE4A524A52",
+"s 	c #84204A524A52",
+"d 	c #108410841084",
+"f 	c #631808420842",
+"g 	c #8C6221082108",
+"h 	c #BDEE7BDE7BDE",
+"j 	c #AD6A39CE39CE",
+"k 	c #6318318C318C",
+"l 	c #318C294A294A",
+"z 	c #94A421082108",
+"x 	c #9CE652945294",
+"c 	c #BDEE39CE39CE",
+"v 	c #5AD6318C318C",
+"b 	c #DEF6DEF6DEF6",
+"n 	c #C630294A294A",
+"m 	c #CE7263186318",
+"M 	c #D6B494A494A4",
+"N 	c #7BDE39CE39CE",
+"B 	c #7BDE52945294",
+"V 	c #5294318C318C",
+"C 	c #5AD64A524A52",
+"Z 	c #5AD65AD65AD6",
+"A 	c #529452945294",
+"S 	c #9CE69CE69CE6",
+"D 	c #BDEE21082108",
+"F 	c #BDEE52945294",
+"G 	c #BDEE84208420",
+"H 	c #B5AC39CE39CE",
+"J 	c #7BDE4A524A52",
+"K 	c #4A5242104210",
+"L 	c #421042104210",
+"P 	c #BDEE18C618C6",
+"I 	c #B5AC42104210",
+"U 	c #4A52294A294A",
+"Y 	c #4A5239CE39CE",
+"T 	c #39CE39CE39CE",
+"R 	c #4A5208420842",
+"E 	c #BDEE5AD65AD6",
+"W 	c #CE72739C739C",
+"Q 	c #739C52945294",
+"! 	c #9CE694A494A4",
+"~ 	c #7BDE08420842",
+"^ 	c #739C39CE39CE",
+"/ 	c #4A524A524A52",
+"( 	c #A52884208420",
+") 	c #9CE64A524A52",
+"_ 	c #C63084208420",
+"` 	c #739C4A524A52",
+"' 	c #210821082108",
+"] 	c #A5289CE69CE6",
+"[ 	c #94A4318C318C",
+"{ 	c #631839CE39CE",
+"} 	c #318C318C318C",
+"| 	c #CE72CE72CE72",
+" .	c #63184A524A52",
+"..	c #6B5A4A524A52",
+"X.	c #5AD652945294",
+"o.	c #6B5A6B5A6B5A",
+"O.	c #C630C630C630",
+"+.	c #529439CE39CE",
+"@.	c #421018C618C6",
+"#.	c #8C628C628C62",
+"$.	c #7BDE7BDE7BDE",
+"%.	c #A528A528A528",
+"&.	c #842084208420",
+"*.	c #94A494A494A4",
+"=.	c #739C739C739C",
+"-.	c #D6B4D6B4D6B4",
+";.	c #B5ACB5ACB5AC",
+":.	c #AD6AAD6AAD6A",
+"                                                                                                ",
+"                                                                                                ",
+"                                                                                                ",
+"                                                                        . X                     ",
+"                                                                    o O + @                     ",
+"            # # # # # # # # # # # # # # # # # # # # # # # # # # # # $ % & * = X X X             ",
+"            # - - - - - - - - - - - - - - - - - - - - - - - - ; : > , < 1 2 3 4 5 X X           ",
+"            # - - - - - - - - - - - - - - - - - - - - - - - - ; $ 6 7 8 9 0 q * - 5 X           ",
+"            # - - - - - - - - - - - - - - - - - - - - - - - - $ % w e 9 r q t y - 5 X           ",
+"            # - - - - - - - - - - - - - - - - - - - - - - u $ i p 1 a 0 s t t u d 5 X X         ",
+"            # - - - - - - - - - - - - - - - - - - - - - - f , g h j 0 k t y u d d 5 X X X       ",
+"            # ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; l f 6 z x c 0 v t t u d d 5 5 X X X       ",
+"            b b b b b b b b b b b b b b b b b b b b b $ n m M 9 N B V t C Z A d 5 X X X X       ",
+"            b S S S S S S S S S S S S S S S S S S S $ D F G H N J = y K L L - d 5 5 X X X       ",
+"            b S S S S S S S S S S S S S S S S S S O P a h I 0 J U t Y L L T - 5 5 5 X X X       ",
+"            b S S S S S S S S S S S S S S S S S R P E W I N Q V y Y L L T T - d d 5 X X         ",
+"            b S S S S S S S S S S S S S S S ! ~ P E h 9 ^ J V t Y / Y T T T - d - 5 X X         ",
+"            b S S S S S S S S S S S S S S S ( $ ) _ I ^ ` U t Y L L T T T L ' ' - 5 X           ",
+"            b L L L L L L L L L L L L L L L L ] y [ 0 { y y u - - - - - - ' } ' ' 5 X           ",
+"            b b b b b b b b b b b b b b b b | b  .t ..= t X.A A A / / A o.S O.; ' 5 X           ",
+"            b S S S S S S S S S S S S S S | S Z A +.@.@.Y L T T T L L / o.#.L ; ' 5 X           ",
+"            b S S S S S S S S S S S S S | S Z / } $.X.L L L T T T L A o.#.S L ; ' 5 X           ",
+"            b S S S S S S S S S S S %.| S A / T &.$./ T T T T T L / o.#.S S L ; ' 5 X           ",
+"            b S S S S S S S S S S S | &.Z / T #.#.o./ T T T T L A o.#.S S S L ; ' 5 X           ",
+"            b S S S S S S S S S %.| $.Z T L S *.$.A L T T T L A =.#.S S S S L ; ' 5 X           ",
+"            b L L L L L L L L L | =.A } } L T } ' - - - ' ' ' } T L L L L L L ; ' 5 X           ",
+"            b b b b b b b b b O.&.# T # -.O.%.$.Z A Z =.*.%.;.O.-.b b b b b b ; ' 5 X           ",
+"            b S S S S S S S | =./ } # S *.=.Z L T L A =.#.*.S S S S S S S S L ; ' 5 X           ",
+"            b S S S S S S O.$.A T o.S *.=.A L T L A =.#.S S S S S S S S S S L ; ' 5 X           ",
+"            b S S S S %.| =./ } $.S *.=.A L T L Z $.*.S S S S S S S S S S S L ; ' 5 X           ",
+"            b S S S S | o./ } #.S *.=.A L T L Z $.*.S S S S S S S S S S S S L ; ' 5 X           ",
+"            b S S %.| =.L } &.S *.=.A L T / # $.*.S S S S S S S S S S S S S L ; ' 5 X           ",
+"            b Z T / &.T } L L T } ' - - ' ; T T L L L L L L L L L L L L L L L ; ' 5 X           ",
+"            -.| O.; L / O.b O.%.=.A A o.#.;.| b b b b b b b b b b b b b b b b ; ' 5 X           ",
+"            | O.O.o.L &.S #.=.A L T / o.&.S S S S S S S S S S S S S S S S S L ; ' 5 X           ",
+"        } O.| :.Z } o.S *.=.A L T / =.#.S S S S S S S S S S S S S S S S S S L ; ' 5 X           ",
+"        %.%.O.#.} $.*.&.=.A L L A =.#.S S S S S S S S S S S S S S S S S S S L ; ' 5 X           ",
+"          ;.;./ #.#.$.# / L L A =.#.S S S S S S S S S S S S S S S S S S S S L ; ' 5 X           ",
+"          d =.S #.=.# A / L A =.*.S S S S S S S S S S S S S S S S S S S S S L ; ' 5 X           ",
+"          5 -.T } ; ' ' ' ; } T L L L L L L L L L L L L L L L L L L L L L L L ; ' 5 X           ",
+"          X X 5 d d d - - ' ' ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ' 5 X           ",
+"          X X 5 5 5 d d - - ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' - 5 X           ",
+"            X X X 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 X X           ",
+"            X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X             ",
+"              X X X X X                                                                         ",
+"              X X X X                                                                           ",
+"                                                                                                ",
+"                                                                                                "};
diff -Naur ../work/WindowMaker-0.91.0/wrlib/bench.h wm/wrlib/bench.h
--- ../work/WindowMaker-0.91.0/wrlib/bench.h	1970-01-01 03:00:00.000000000 +0300
+++ wm/wrlib/bench.h	2004-10-13 13:16:44.000000000 +0400
@@ -0,0 +1,68 @@
+
+
+
+inline static void
+cycle_bench(int start)
+{
+    static volatile unsigned int start_cycle;
+
+    if (start) {
+        asm volatile
+            ("pushl %%edx	\n\t"
+             "rdtsc         	\n\t"
+             "movl %%eax,%0  	\n\t"
+             "cld            	\n\t"
+             "popl %%edx	\n\t"
+             "nop            	\n\t"
+             "nop            	\n\t"
+             "nop            	\n\t"
+             "nop            	\n\t"
+             "nop            	\n\t"
+             "nop       	\n\t"
+             "nop            	\n\t"
+             "nop    	        \n\t"
+             : "=m" (start_cycle) : : "eax", "edx");
+    } else {
+        volatile int end;
+
+        asm volatile
+            ("pushl %%edx	\n\t"
+             "clc            	\n\t"
+             "rdtsc          	\n\t"
+             "movl %%eax, %0	\n\t"
+             "popl %%edx	\n\t"
+             : "=m" (end) : : "eax", "edx");
+
+        printf("Cycle count = %u\n", end - start_cycle - 68);
+    }
+}
+
+
+
+#if 0
+// seems linux doesnt allow user progs to exec rdpcm..
+inline static void
+cache_bench(int start)
+{
+    static int start_cycle;
+
+    if (start) {
+        asm volatile
+            ("movl $1,%%ecx	\n\t"
+             "rdpmc             \n\t"
+             "movl %%eax,%0     \n\t"
+             : "=m" (start_cycle));
+    } else {
+        int end;
+
+        asm volatile
+            ("movl $1,%%ecx	\n\t"
+             "rdpmc             \n\t"
+             "movl %%eax,%0"
+             : "=m" (end));
+
+        printf("Cache reloads counted = %i\n", end - start_cycle);
+    }
+}
+
+#endif
diff -Naur ../work/WindowMaker-0.91.0/wrlib/x86_specific.c wm/wrlib/x86_specific.c
--- ../work/WindowMaker-0.91.0/wrlib/x86_specific.c	2004-10-13 01:18:01.000000000 +0400
+++ wm/wrlib/x86_specific.c	2004-11-04 12:10:12.000000000 +0300
@@ -37,33 +37,33 @@
     result = 0;
 
     asm volatile
-        ("pushal		\n\t" // please dont forget this in any asm
-         "pushfl		\n\t" // check whether cpuid supported
-         "pop %%eax		\n\t"
-         "movl %%eax, %%ebx	\n\t"
-         "xorl $(1<<21), %%eax	\n\t"
-         "pushl %%eax		\n\t"
-         "popfl			\n\t"
-         "pushfl		\n\t"
-         "popl %%eax		\n\t"
-         "xorl %%ebx, %%eax	\n\t"
-         "andl $(1<<21), %%eax	\n\t"
-         "jz .NotPentium	\n\t"
-         "xorl %%eax, %%eax	\n\t" // no eax effect because of the movl below
-         // except reseting flags. is it needed?
-         "movl $1, %%eax	\n\t"
-         "cpuid			\n\t"
-         "test $(1<<23), %%edx	\n\t"
-         "jz .NotMMX		\n\t"
-
-         "popal			\n\t" // popal needed because the address of
-         "movl $1, %0		\n\t" // variable %0 may be kept in a register
-         "jmp .noPop		\n"
-
-".NotMMX:			\n"
-".NotPentium:			\n\t"
-         "popal			\n"
-".noPop:			\n\t"
+        ("pushal                \n\t" // please dont forget this in any asm
+         "pushfl                \n\t" // check whether cpuid supported
+         "pop %%eax             \n\t"
+         "movl %%eax, %%ebx     \n\t"
+         "xorl $(1<<21), %%eax  \n\t"
+         "pushl %%eax           \n\t"
+         "popfl                 \n\t"
+         "pushfl                \n\t"
+         "popl %%eax            \n\t"
+         "xorl %%ebx, %%eax     \n\t"
+         "andl $(1<<21), %%eax  \n\t"
+         "jz .NotPentium        \n\t"
+         "xorl %%eax, %%eax     \n\t" // no eax effect because of the movl below
+                                      // except reseting flags. is it needed?
+         "movl $1, %%eax        \n\t"
+         "cpuid                 \n\t"
+         "test $(1<<23), %%edx  \n\t"
+         "jz .NotMMX            \n\t"
+
+         "popal                 \n\t" // popal needed because the address of
+         "movl $1, %0           \n\t" // variable %0 may be kept in a register
+         "jmp .noPop            \n"
+
+".NotMMX:                       \n"
+".NotPentium:                   \n\t"
+         "popal                 \n"
+".noPop:                        \n\t"
 
          : "=m" (result));
 
@@ -73,9 +73,9 @@
 
 /*
  * TODO:
- * 		32/8	24/8	32/16	24/16	32/24	24/24
- * PPlain	YES	YES
- * MMX				DONE
+ *              32/8    24/8    32/16   24/16   32/24   24/24
+ * PPlain       YES     YES
+ * MMX                          DONE
  *
  *
  * - try to align stack (local variable space) into quadword boundary
@@ -106,191 +106,191 @@
 
     asm volatile
         (
-         "pushal       			\n\t"
+         "pushal                        \n\t"
 
          // pack dr, dg and db into mm6
-         "movl  %7, %%eax		\n\t"
-         "movl  %8, %%ebx		\n\t"
-         "movl  %9, %%ecx		\n\t"
-         "movw  %%ax, %16		\n\t"
-         "movw  %%bx, %17		\n\t"
-         "movw  %%cx, %18		\n\t"
-         "movw  $0,  %19		\n\t"
+         "movl  %7, %%eax               \n\t"
+         "movl  %8, %%ebx               \n\t"
+         "movl  %9, %%ecx               \n\t"
+         "movw  %%ax, %16               \n\t"
+         "movw  %%bx, %17               \n\t"
+         "movw  %%cx, %18               \n\t"
+         "movw  $0,  %19                \n\t"
 
-         "movq  %16, %%mm6		\n\t" // dr dg db 0
+         "movq  %16, %%mm6              \n\t" // dr dg db 0
 
          // pack 4|4|4|4 into mm7, for shifting (/16)
-         "movl $0x00040004, %16		\n\t"
-         "movl $0x00040004, %18		\n\t"
-         "movq %16, %%mm7		\n\t"
+         "movl $0x00040004, %16         \n\t"
+         "movl $0x00040004, %18         \n\t"
+         "movq %16, %%mm7               \n\t"
 
          // store constant values for using with mmx when dithering
-         "movl $0x00070007, %16		\n\t"
-         "movl $0x00070007, %18		\n\t"
-         "movq %16, %%mm5		\n\t"
-
-         "movl $0x00050005, %16		\n\t"
-         "movl $0x00050005, %18		\n\t"
-         "movq %16, %%mm4		\n\t"
-
-         "movl $0x00030003, %16		\n\t"
-         "movl $0x00030003, %18		\n\t"
-         "movq %16, %%mm3		\n\t"
+         "movl $0x00070007, %16         \n\t"
+         "movl $0x00070007, %18         \n\t"
+         "movq %16, %%mm5               \n\t"
+
+         "movl $0x00050005, %16         \n\t"
+         "movl $0x00050005, %18         \n\t"
+         "movq %16, %%mm4               \n\t"
+
+         "movl $0x00030003, %16         \n\t"
+         "movl $0x00030003, %18         \n\t"
+         "movq %16, %%mm3               \n\t"
 
          // process 1 pixel / cycle, each component treated as 16bit
-         "movl %0, %%esi		\n"   // esi = image->data
+         "movl %0, %%esi                \n"   // esi = image->data
 
-".LoopYa:				\n\t"
-         "movl %13, %%eax		\n\t"
-         "movl %%eax, %26		\n\t" // x = width
+".LoopYa:                               \n\t"
+         "movl %13, %%eax               \n\t"
+         "movl %%eax, %26               \n\t" // x = width
 
-         "movl %14, %%eax		\n\t"
-         "decl %%eax			\n\t" // y--
-         "movl %%eax, %14		\n\t"
-         "js .Enda			\n\t" // if y < 0, goto end
-         "andl $1, %%eax		\n\t"
-         "jz .LoopY_1a			\n"   // if (y&1) goto LoopY_1
+         "movl %14, %%eax               \n\t"
+         "decl %%eax                    \n\t" // y--
+         "movl %%eax, %14               \n\t"
+         "js .Enda                      \n\t" // if y < 0, goto end
+         "andl $1, %%eax                \n\t"
+         "jz .LoopY_1a                  \n"   // if (y&1) goto LoopY_1
 
-".LoopY_0a:				\n\t"
+".LoopY_0a:                             \n\t"
 
-         "movl %2, %%ebx		\n\t" // ebx = err
-         "movl %%ebx, %25		\n\t" // [-36] = err
-         "movl %3, %%eax		\n\t" //
-         "movl %%eax, %24		\n\t" // [-32] = nerr
+         "movl %2, %%ebx                \n\t" // ebx = err
+         "movl %%ebx, %25               \n\t" // [-36] = err
+         "movl %3, %%eax                \n\t" //
+         "movl %%eax, %24               \n\t" // [-32] = nerr
 
-         "jmp .LoopXa			\n"
+         "jmp .LoopXa                   \n"
 
-".LoopY_1a:				\n\t"
+".LoopY_1a:                             \n\t"
 
-         "movl %3, %%ebx		\n\t" // ebx = nerr
-         "movl %%ebx, %25		\n\t" // [-36] = nerr
-         "movl %2, %%eax		\n\t" //
-         "movl %%eax, %24		\n\t" // [-32] = eerr
+         "movl %3, %%ebx                \n\t" // ebx = nerr
+         "movl %%ebx, %25               \n\t" // [-36] = nerr
+         "movl %2, %%eax                \n\t" //
+         "movl %%eax, %24               \n\t" // [-32] = eerr
 
-         ".align 16			\n"
-".LoopXa:				\n\t"
+         ".align 16                     \n"
+".LoopXa:                               \n\t"
 
          // calculate errors and pixel components
 
          // depend on ebx, esi, mm6
-         "movq (%%ebx), %%mm1		\n\t" // mm1 = error[0..3]
-         "punpcklbw (%%esi), %%mm0	\n\t" // mm0 = image->data[0..3]
-         "psrlw $8, %%mm0		\n\t" // fixup mm0
-         "paddusb %%mm1, %%mm0		\n\t" // mm0 = mm0 + mm1 (sat. to 255)
-         "movq %%mm0, %20		\n\t" // save the pixel
+         "movq (%%ebx), %%mm1           \n\t" // mm1 = error[0..3]
+         "punpcklbw (%%esi), %%mm0      \n\t" // mm0 = image->data[0..3]
+         "psrlw $8, %%mm0               \n\t" // fixup mm0
+         "paddusb %%mm1, %%mm0          \n\t" // mm0 = mm0 + mm1 (sat. to 255)
+         "movq %%mm0, %20               \n\t" // save the pixel
 
-         "movzwl %20, %%ecx		\n\t" // ecx = pixel.red
-         "movl %4, %%edi		\n\t" // edi = rtable
+         "movzwl %20, %%ecx             \n\t" // ecx = pixel.red
+         "movl %4, %%edi                \n\t" // edi = rtable
          //agi
-         "leal (%%edi, %%ecx, 2), %%eax	\n\t" // eax = &rtable[pixel.red]
+         "leal (%%edi, %%ecx, 2), %%eax \n\t" // eax = &rtable[pixel.red]
          // agi
-         "movw (%%eax), %%dx		\n\t" // dx = rtable[pixel.red]
-         "movw %%dx, %16		\n\t" // save rr
+         "movw (%%eax), %%dx            \n\t" // dx = rtable[pixel.red]
+         "movw %%dx, %16                \n\t" // save rr
 
-         "movzwl %21, %%ecx		\n\t" // ecx = pixel.green
-         "movl %5, %%edi		\n\t" // edi = gtable
+         "movzwl %21, %%ecx             \n\t" // ecx = pixel.green
+         "movl %5, %%edi                \n\t" // edi = gtable
          //agi
-         "leal (%%edi, %%ecx, 2), %%eax	\n\t" // eax = &gtable[pixel.green]
+         "leal (%%edi, %%ecx, 2), %%eax \n\t" // eax = &gtable[pixel.green]
          //agi
-         "movw (%%eax), %%dx		\n\t" // dx = gtable[pixel.green]
-         "movw %%dx, %17		\n\t" // save gg
+         "movw (%%eax), %%dx            \n\t" // dx = gtable[pixel.green]
+         "movw %%dx, %17                \n\t" // save gg
 
-         "movzwl %22, %%ecx		\n\t" // ecx = pixel.blue
-         "movl %6, %%edi		\n\t" // ebx = btable
+         "movzwl %22, %%ecx             \n\t" // ecx = pixel.blue
+         "movl %6, %%edi                \n\t" // ebx = btable
          //agi
-         "leal (%%edi, %%ecx, 2), %%eax	\n\t" // eax = &btable[pixel.blue]
+         "leal (%%edi, %%ecx, 2), %%eax \n\t" // eax = &btable[pixel.blue]
          //agi
-         "movw (%%eax), %%dx		\n\t" // dx = btable[pixel.blue]
-         "movw %%dx, %18		\n\t" // save bb
+         "movw (%%eax), %%dx            \n\t" // dx = btable[pixel.blue]
+         "movw %%dx, %18                \n\t" // save bb
 
-         "movw $0, %19			\n\t" // save dummy aa
+         "movw $0, %19                  \n\t" // save dummy aa
 
-         "movq %16, %%mm1		\n\t" // load mm1 with rrggbbaa
-         "pmullw %%mm6, %%mm1		\n\t" // mm1 = rr*dr|...
-         "psubsw %%mm1, %%mm0		\n\t" // error = pixel - mm1
+         "movq %16, %%mm1               \n\t" // load mm1 with rrggbbaa
+         "pmullw %%mm6, %%mm1           \n\t" // mm1 = rr*dr|...
+         "psubsw %%mm1, %%mm0           \n\t" // error = pixel - mm1
 
 
          // distribute the error
 
          // depend on mm0, mm7, mm3, mm4, mm5
 
-         "movl %25, %%ebx 		\n\t"
+         "movl %25, %%ebx               \n\t"
 
-         "movq %%mm0, %%mm1		\n\t"
-         "pmullw %%mm5, %%mm1		\n\t" // mm1 = mm1*7
-         "psrlw %%mm7, %%mm1		\n\t" // mm1 = mm1/16
-         "paddw	8(%%ebx), %%mm1		\n\t"
-         "movq %%mm1, 8(%%ebx)		\n\t" // err[x+1,y] = rer*7/16
-
-
-         "movl %24, %%ebx 		\n\t"
-
-         "movq %%mm0, %%mm1		\n\t"
-         "pmullw %%mm4, %%mm1		\n\t" // mm1 = mm1*5
-         "psrlw %%mm7, %%mm1		\n\t" // mm1 = mm1/16
-         "paddw -8(%%ebx), %%mm1		\n\t"
-         "movq %%mm1, -8(%%ebx)		\n\t" // err[x-1,y+1] += rer*3/16
-
-         "movq %%mm0, %%mm1		\n\t"
-         "pmullw %%mm3, %%mm1		\n\t" // mm1 = mm1*3
-         "psrlw %%mm7, %%mm1		\n\t" // mm1 = mm1/16
-         "paddw 8(%%ebx), %%mm1		\n\t"
-         "movq %%mm1, (%%ebx)		\n\t" // err[x,y+1] += rer*5/16
+         "movq %%mm0, %%mm1             \n\t"
+         "pmullw %%mm5, %%mm1           \n\t" // mm1 = mm1*7
+         "psrlw %%mm7, %%mm1            \n\t" // mm1 = mm1/16
+         "paddw 8(%%ebx), %%mm1                \n\t"
+         "movq %%mm1, 8(%%ebx)          \n\t" // err[x+1,y] = rer*7/16
+
+
+         "movl %24, %%ebx               \n\t"
+
+         "movq %%mm0, %%mm1             \n\t"
+         "pmullw %%mm4, %%mm1           \n\t" // mm1 = mm1*5
+         "psrlw %%mm7, %%mm1            \n\t" // mm1 = mm1/16
+         "paddw -8(%%ebx), %%mm1                \n\t"
+         "movq %%mm1, -8(%%ebx)         \n\t" // err[x-1,y+1] += rer*3/16
+
+         "movq %%mm0, %%mm1             \n\t"
+         "pmullw %%mm3, %%mm1           \n\t" // mm1 = mm1*3
+         "psrlw %%mm7, %%mm1            \n\t" // mm1 = mm1/16
+         "paddw 8(%%ebx), %%mm1         \n\t"
+         "movq %%mm1, (%%ebx)           \n\t" // err[x,y+1] += rer*5/16
 
-         "psrlw %%mm7, %%mm0		\n\t" // mm0 = mm0/16
-         "movq %%mm0, 8(%%ebx)		\n\t" // err[x+1,y+1] = rer/16
+         "psrlw %%mm7, %%mm0            \n\t" // mm0 = mm0/16
+         "movq %%mm0, 8(%%ebx)          \n\t" // err[x+1,y+1] = rer/16
 
 
          // calculate final pixel value and store
-         "movl %10, %%ecx		\n\t"
-         "movw %16, %%ax		\n\t"
-         "shlw %%cl, %%ax		\n\t" //NP* ax = r<<roffs
-
-         "movl %11, %%ecx		\n\t"
-         "movw %17, %%bx		\n\t"
-         "shlw %%cl, %%bx		\n\t" //NP*
-         "orw %%bx, %%ax		\n\t"
-
-         "movl %12, %%ecx		\n\t"
-         "movw %18, %%bx		\n\t"
-         "shlw %%cl, %%bx		\n\t" //NP*
-         "orw %%bx, %%ax		\n\t"
-
-         "movl %1, %%edx		\n\t"
-         "movw %%ax, (%%edx)		\n\t"
-         "addl $2, %%edx		\n\t" // increment ximage
-         "movl %%edx, %1		\n\t"
+         "movl %10, %%ecx               \n\t"
+         "movw %16, %%ax                \n\t"
+         "shlw %%cl, %%ax               \n\t" //NP* ax = r<<roffs
+
+         "movl %11, %%ecx               \n\t"
+         "movw %17, %%bx                \n\t"
+         "shlw %%cl, %%bx               \n\t" //NP*
+         "orw %%bx, %%ax                \n\t"
+
+         "movl %12, %%ecx               \n\t"
+         "movw %18, %%bx                \n\t"
+         "shlw %%cl, %%bx               \n\t" //NP*
+         "orw %%bx, %%ax                \n\t"
+
+         "movl %1, %%edx                \n\t"
+         "movw %%ax, (%%edx)            \n\t"
+         "addl $2, %%edx                \n\t" // increment ximage
+         "movl %%edx, %1                \n\t"
 
          // prepare for next iteration on X
 
-         "addl $8, %24			\n\t" // nerr += 8
+         "addl $8, %24                  \n\t" // nerr += 8
 
-         "movl %25, %%ebx		\n\t"
-         "addl $8, %%ebx		\n\t"
-         "movl %%ebx, %25		\n\t" // ebx = err += 8
+         "movl %25, %%ebx               \n\t"
+         "addl $8, %%ebx                \n\t"
+         "movl %%ebx, %25               \n\t" // ebx = err += 8
 
 
          // Note: in the last pixel, this would cause an invalid memory access
          // because, punpcklbw is used (which reads 8 bytes) and the last
          // pixel is only 4 bytes. This is no problem because the image data
          // was allocated with extra 4 bytes when created.
-         "addl $4, %%esi			\n\t" // image->data += 4
+         "addl $4, %%esi                        \n\t" // image->data += 4
 
 
-         "decl %26			\n\t" // x--
-         "jnz .LoopXa			\n\t" // if x>0, goto .LoopX
+         "decl %26                      \n\t" // x--
+         "jnz .LoopXa                   \n\t" // if x>0, goto .LoopX
 
 
          // depend on edx
-         "addl %15, %%edx		\n\t" // add extra offset to ximage
-         "movl %%edx, %1		\n\t"
+         "addl %15, %%edx               \n\t" // add extra offset to ximage
+         "movl %%edx, %1                \n\t"
 
 
-         "jmp .LoopYa			\n"
+         "jmp .LoopYa                   \n"
 
-".Enda:					\n\t" // THE END
-         "emms				\n\t"
-         "popal				\n\t"
+".Enda:                                 \n\t" // THE END
+         "emms                          \n\t"
+         "popal                         \n\t"
          :
          :
          "m" (image),                      // %0
@@ -354,77 +354,77 @@
 
     asm volatile
         (
-         "pushal       			\n\t"
+         "pushal                        \n\t"
 
-         "movl %13, %%eax		\n\t" // eax = width
-         "movl %%eax, %%ebx		\n\t"
-         "shrl $2, %%eax		\n\t"
-         "movl %%eax, %27		\n\t" // w1 = width / 4
-         "andl $3, %%ebx		\n\t"
-         "movl %%ebx, %28		\n"   // w2 = width %% 4
+         "movl %13, %%eax               \n\t" // eax = width
+         "movl %%eax, %%ebx             \n\t"
+         "shrl $2, %%eax                \n\t"
+         "movl %%eax, %27               \n\t" // w1 = width / 4
+         "andl $3, %%ebx                \n\t"
+         "movl %%ebx, %28               \n"   // w2 = width %% 4
 
 
-".LoopYc:				\n\t"
-         "movl %13, %%eax		\n\t"
-         "movl %%eax, %26		\n\t" // x = width
+".LoopYc:                               \n\t"
+         "movl %13, %%eax               \n\t"
+         "movl %%eax, %26               \n\t" // x = width
 
-         "decl %14			\n\t" // height--
-         "js .Endc			\n\t" // if height < 0 then end
+         "decl %14                      \n\t" // height--
+         "js .Endc                      \n\t" // if height < 0 then end
 
-         "movl %14, %%eax		\n\t"
-         "decl %%eax			\n\t" // y--
-         "movl %%eax, %14		\n\t"
-         "js .Endc			\n\t" // if y < 0, goto end
-         "andl $1, %%eax		\n\t"
-         "jz .LoopY_1c			\n"   // if (y&1) goto LoopY_1
+         "movl %14, %%eax               \n\t"
+         "decl %%eax                    \n\t" // y--
+         "movl %%eax, %14               \n\t"
+         "js .Endc                      \n\t" // if y < 0, goto end
+         "andl $1, %%eax                \n\t"
+         "jz .LoopY_1c                  \n"   // if (y&1) goto LoopY_1
 
-".LoopY_0c:				\n\t"
+".LoopY_0c:                             \n\t"
 
-         "movl %2, %%ebx		\n\t" // ebx = err
-         "movl %%ebx, %25		\n\t" // [-36] = err
-         "movl %3, %%eax		\n\t" //
-         "movl %%eax, %24		\n\t" // [-32] = nerr
+         "movl %2, %%ebx                \n\t" // ebx = err
+         "movl %%ebx, %25               \n\t" // [-36] = err
+         "movl %3, %%eax                \n\t" //
+         "movl %%eax, %24               \n\t" // [-32] = nerr
 
-         "jmp .LoopX_1c			\n"
+         "jmp .LoopX_1c                 \n"
 
-".LoopY_1c:				\n\t"
+".LoopY_1c:                             \n\t"
 
-         "movl %3, %%ebx		\n\t" // ebx = nerr
-         "movl %%ebx, %25		\n\t" // [-36] = nerr
-         "movl %2, %%eax		\n\t" //
-         "movl %%eax, %24		\n\t" // [-32] = eerr
+         "movl %3, %%ebx                \n\t" // ebx = nerr
+         "movl %%ebx, %25               \n\t" // [-36] = nerr
+         "movl %2, %%eax                \n\t" //
+         "movl %%eax, %24               \n\t" // [-32] = eerr
 
-         ".align 16			\n\t"
+         ".align 16                     \n\t"
 
-         "movl %%eax, %26		\n"   // x = w1
-".LoopX_1c:				\n\t"
-         "decl %26			\n\t" // x--
-         "js .Xend1_c			\n\t" // if x < 0 then end
+         "movl %%eax, %26               \n"   // x = w1
+".LoopX_1c:                             \n\t"
+         "decl %26                      \n\t" // x--
+         "js .Xend1_c                   \n\t" // if x < 0 then end
 
          // do conversion of 4 pixels
-         "movq %2, %%mm0		\n\t" // mm0 = err
+         "movq %2, %%mm0                \n\t" // mm0 = err
 
 
 
 
-         "jmp .LoopX_1c			\n"
-".Xend1_c:				\n\t"
+         "jmp .LoopX_1c                 \n"
+".Xend1_c:                              \n\t"
 
-         "movl %28, %%eax		\n\t"
-         "movl %%eax, %26		\n"   // x = w2
-".LoopX_2c:				\n\t"
-         "decl %26			\n\t" // x--
-         "js .Xend2_c			\n\t" //
+         "movl %28, %%eax               \n\t"
+         "movl %%eax, %26               \n"   // x = w2
+".LoopX_2c:                             \n\t"
+         "decl %26                      \n\t" // x--
+         "js .Xend2_c                   \n\t" //
          // do conversion
-         "jmp .LoopX_2c			\n"
-".Xend2_c:				\n\t"
+         "jmp .LoopX_2c                 \n"
+".Xend2_c:                              \n\t"
 
-         "movl %27, %%eax		\n\t"
-         "jmp .LoopYc			\n"
+         "movl %27, %%eax               \n\t"
+         "jmp .LoopYc                   \n"
 
-".Endc:					\n\t" // THE END
-         "emms				\n\t"
-         "popal				\n\t"
+".Endc:                                 \n\t" // THE END
+         "emms                          \n\t"
+         "popal                         \n\t"
          :
          :
          "m" (image),                      // %0
@@ -497,234 +497,234 @@
 
     asm volatile
         (
-         "pushal       			\n\t"
+         "pushal                        \n\t"
 
-         "movl %9, %%eax		\n\t"
-         "mulb %9			\n\t"
-         "movl %%eax, %15		\n\t" // cpcpc = cpc*cpc
+         "movl %9, %%eax                \n\t"
+         "mulb %9                       \n\t"
+         "movl %%eax, %15               \n\t" // cpcpc = cpc*cpc
 
          // eax will always be <= 0xffff
 
          // process 1 pixel / cycle, each component treated as 16bit
-         "movl %0, %%esi		\n"   // esi = image->data
+         "movl %0, %%esi                \n"   // esi = image->data
 
-".LoopYb:				\n\t"
-         "movl %10, %%ecx		\n\t"
-         "movl %%ecx, %14		\n\t" // x = width
+".LoopYb:                               \n\t"
+         "movl %10, %%ecx               \n\t"
+         "movl %%ecx, %14               \n\t" // x = width
 
-         "movl %11, %%ecx		\n\t"
-         "decl %%ecx			\n\t" // y--
-         "movl %%ecx, %11		\n\t"
-         "js .Endb			\n\t" // if y < 0, goto end
-         "andl $1, %%ecx		\n\t"
-         "jz .LoopY_1b			\n"   // if (y&1) goto LoopY_1
+         "movl %11, %%ecx               \n\t"
+         "decl %%ecx                    \n\t" // y--
+         "movl %%ecx, %11               \n\t"
+         "js .Endb                      \n\t" // if y < 0, goto end
+         "andl $1, %%ecx                \n\t"
+         "jz .LoopY_1b                  \n"   // if (y&1) goto LoopY_1
 
-".LoopY_0b:				\n\t"
+".LoopY_0b:                             \n\t"
 
-         "movl %2, %%ebx		\n\t" // ebx = err
-//useless "movl %%ebx, %20		\n\t" // [-36] = err
-         "movl %3, %%ecx		\n\t" //
-         "movl %%ecx, %19		\n\t" // [-32] = nerr
+         "movl %2, %%ebx                \n\t" // ebx = err
+//useless "movl %%ebx, %20              \n\t" // [-36] = err
+         "movl %3, %%ecx                \n\t" //
+         "movl %%ecx, %19               \n\t" // [-32] = nerr
 
-         "movl $0, (%%ecx)		\n\t" // init error of nerr[0] to 0
+         "movl $0, (%%ecx)              \n\t" // init error of nerr[0] to 0
 
-         "jmp .LoopXb			\n"
+         "jmp .LoopXb                   \n"
 
-".LoopY_1b:				\n\t"
+".LoopY_1b:                             \n\t"
 
-         "movl %3, %%ebx		\n\t" // ebx = nerr
-//useless "movl %%ebx, %20		\n\t" // [-36] = nerr
-         "movl %2, %%ecx		\n\t" //
-         "movl %%ecx, %19		\n\t" // [-32] = err
+         "movl %3, %%ebx                \n\t" // ebx = nerr
+//useless "movl %%ebx, %20              \n\t" // [-36] = nerr
+         "movl %2, %%ecx                \n\t" //
+         "movl %%ecx, %19               \n\t" // [-32] = err
 
-         "movl $0, (%%ecx)		\n\t" // init error of nerr[0] to 0
+         "movl $0, (%%ecx)              \n\t" // init error of nerr[0] to 0
 
 
-         ".align 16			\n"
-".LoopXb:				\n\t"
+         ".align 16                     \n"
+".LoopXb:                               \n\t"
 
 
-         "movl %4, %%edi		\n\t" // edi = ctable
-         "xorl %%edx, %%edx		\n\t" // zero the upper word on edx
+         "movl %4, %%edi                \n\t" // edi = ctable
+         "xorl %%edx, %%edx             \n\t" // zero the upper word on edx
 
          // RED
 
          // depends on ebx==err, esi==image->data, edi
-         "movzbw (%%esi), %%dx		\n\t" // dx = image->data[0]
-         "movsbw (%%ebx), %%ax		\n\t" // ax = error[0]
-         "addw %%ax, %%dx		\n\t" // pixel.red = data[0] + error[0]
-
-         "testb %%dh, %%dh		\n\t" // test if pixel.red < 0 or > 255
-         "jz .OKRb			\n\t" // 0 <= pixel.red <= 255
-         "js .NEGRb			\n\t" // pixel.red < 0
-         "movw $0xff, %%dx		\n\t" // pixel.red > 255
-         "jmp .OKRb			\n"
-".NEGRb:				\n\t"
-         "xorw %%dx, %%dx		\n"
-".OKRb:					\n\t"
+         "movzbw (%%esi), %%dx          \n\t" // dx = image->data[0]
+         "movsbw (%%ebx), %%ax          \n\t" // ax = error[0]
+         "addw %%ax, %%dx               \n\t" // pixel.red = data[0] + error[0]
+
+         "testb %%dh, %%dh              \n\t" // test if pixel.red < 0 or > 255
+         "jz .OKRb                      \n\t" // 0 <= pixel.red <= 255
+         "js .NEGRb                     \n\t" // pixel.red < 0
+         "movw $0xff, %%dx              \n\t" // pixel.red > 255
+         "jmp .OKRb                     \n"
+".NEGRb:                                \n\t"
+         "xorw %%dx, %%dx               \n"
+".OKRb:                                 \n\t"
          //partial reg
-         "leal (%%edi, %%edx, 2), %%ecx	\n\t" // ecx = &ctable[pixel.red]
+         "leal (%%edi, %%edx, 2), %%ecx \n\t" // ecx = &ctable[pixel.red]
          //agi
-         "movl (%%ecx), %%eax		\n\t" // ax = ctable[pixel.red]
-         "movw %%ax, %16		\n\t" // save rr
+         "movl (%%ecx), %%eax           \n\t" // ax = ctable[pixel.red]
+         "movw %%ax, %16                \n\t" // save rr
 
-         "mulb %5			\n\t" // ax = rr*dr
-         "subw %%ax, %%dx		\n\t" // rer = dx = dx - rr*dr
+         "mulb %5                       \n\t" // ax = rr*dr
+         "subw %%ax, %%dx               \n\t" // rer = dx = dx - rr*dr
 
-         "movswl %%dx, %%eax		\n\t" // save rer
+         "movswl %%dx, %%eax            \n\t" // save rer
 
          // distribute error
-         "leal (, %%eax, 8), %%ecx	\n\t"
-         "subw %%dx, %%cx		\n\t" // cx = rer * 7
-         "sarw $4, %%cx			\n\t" // cx = rer * 7 / 16
-         "addb %%cl, 4(%%ebx)		\n\t" // err[x+1] += rer * 7 / 16
-
-         "movl %19, %%ecx		\n\t" // ecx = nerr
-
-         "leaw (%%eax, %%eax, 4), %%dx	\n\t" // dx = rer * 5
-         "sarw $4, %%dx			\n\t" // dx = rer * 5 / 16
-         "addb %%dl, (%%ecx)		\n\t" // nerr[x] += rer * 5 / 16
-
-         "leaw (%%eax, %%eax, 2), %%dx	\n\t" // dx = rer * 3
-         "sarw $4, %%dx			\n\t" // dx = rer * 3 / 16
-         "addb %%dl, -4(%%ecx)		\n\t" // nerr[x-1] += rer * 3 / 16
+         "leal (, %%eax, 8), %%ecx      \n\t"
+         "subw %%dx, %%cx               \n\t" // cx = rer * 7
+         "sarw $4, %%cx                 \n\t" // cx = rer * 7 / 16
+         "addb %%cl, 4(%%ebx)           \n\t" // err[x+1] += rer * 7 / 16
+
+         "movl %19, %%ecx               \n\t" // ecx = nerr
+
+         "leaw (%%eax, %%eax, 4), %%dx  \n\t" // dx = rer * 5
+         "sarw $4, %%dx                 \n\t" // dx = rer * 5 / 16
+         "addb %%dl, (%%ecx)            \n\t" // nerr[x] += rer * 5 / 16
+
+         "leaw (%%eax, %%eax, 2), %%dx  \n\t" // dx = rer * 3
+         "sarw $4, %%dx                 \n\t" // dx = rer * 3 / 16
+         "addb %%dl, -4(%%ecx)          \n\t" // nerr[x-1] += rer * 3 / 16
 
-         "sarw $4, %%ax			\n\t" // ax = rer / 16
-         "movb %%al, 4(%%ecx)		\n\t" // nerr[x+1] = rer / 16
+         "sarw $4, %%ax                 \n\t" // ax = rer / 16
+         "movb %%al, 4(%%ecx)           \n\t" // nerr[x+1] = rer / 16
 
 
          // GREEN
 
          // depends on ebx, esi, edi
-         "movzbw 1(%%esi), %%dx		\n\t" // dx = image->data[1]
-         "movsbw 1(%%ebx), %%ax		\n\t" // ax = error[1]
-         "addw %%ax, %%dx		\n\t" // pixel.grn = data[1] + error[1]
-
-         "testb %%dh, %%dh		\n\t" // test if pixel.grn < 0 or > 255
-         "jz .OKGb			\n\t" // 0 <= pixel.grn <= 255
-         "js .NEGGb			\n\t" // pixel.grn < 0
-         "movw $0xff, %%dx		\n\t" // pixel.grn > 255
-         "jmp .OKGb			\n"
-".NEGGb:				\n\t"
-         "xorw %%dx, %%dx		\n"
-".OKGb:					\n\t"
+         "movzbw 1(%%esi), %%dx         \n\t" // dx = image->data[1]
+         "movsbw 1(%%ebx), %%ax         \n\t" // ax = error[1]
+         "addw %%ax, %%dx               \n\t" // pixel.grn = data[1] + error[1]
+
+         "testb %%dh, %%dh              \n\t" // test if pixel.grn < 0 or > 255
+         "jz .OKGb                      \n\t" // 0 <= pixel.grn <= 255
+         "js .NEGGb                     \n\t" // pixel.grn < 0
+         "movw $0xff, %%dx              \n\t" // pixel.grn > 255
+         "jmp .OKGb                     \n"
+".NEGGb:                                \n\t"
+         "xorw %%dx, %%dx               \n"
+".OKGb:                                 \n\t"
          // partial reg
-         "leal (%%edi, %%edx, 2), %%ecx	\n\t" // ecx = &ctable[pixel.grn]
+         "leal (%%edi, %%edx, 2), %%ecx \n\t" // ecx = &ctable[pixel.grn]
          //agi
-         "movw (%%ecx), %%ax		\n\t" // ax = ctable[pixel.grn]
-         "movw %%ax, %17		\n\t" // save gg
+         "movw (%%ecx), %%ax            \n\t" // ax = ctable[pixel.grn]
+         "movw %%ax, %17                \n\t" // save gg
 
-         "mulb %6			\n\t" // ax = gg*dg
-         "subw %%ax, %%dx		\n\t" // ger = dx = dx - gg*dg
+         "mulb %6                       \n\t" // ax = gg*dg
+         "subw %%ax, %%dx               \n\t" // ger = dx = dx - gg*dg
 
-         "movswl %%dx, %%eax		\n\t" // save ger
+         "movswl %%dx, %%eax            \n\t" // save ger
 
          // distribute error
 
-         "leal (, %%eax, 8), %%ecx	\n\t"
-         "subw %%dx, %%cx		\n\t" // cx = ger * 7
-         "sarw $4, %%cx			\n\t" // cx = ger * 7 / 16
-         "addb %%cl, 5(%%ebx)		\n\t" // err[x+1] += ger * 7 / 16
-
-         "movl %19, %%ecx		\n\t" // ecx = nerr
-
-         "leaw (%%eax, %%eax, 4), %%dx	\n\t" // dx = ger * 5
-         "sarw $4, %%dx			\n\t" // dx = ger * 5 / 16
-         "addb %%dl, 1(%%ecx)		\n\t" // nerr[x] += ger * 5 / 16
-
-         "leaw (%%eax, %%eax, 2), %%dx	\n\t" // dx = ger * 3
-         "sarw $4, %%dx			\n\t" // dx = ger * 3 / 16
-         "addb %%dl, -3(%%ecx)		\n\t" // nerr[x-1] += ger * 3 / 16
+         "leal (, %%eax, 8), %%ecx      \n\t"
+         "subw %%dx, %%cx               \n\t" // cx = ger * 7
+         "sarw $4, %%cx                 \n\t" // cx = ger * 7 / 16
+         "addb %%cl, 5(%%ebx)           \n\t" // err[x+1] += ger * 7 / 16
+
+         "movl %19, %%ecx               \n\t" // ecx = nerr
+
+         "leaw (%%eax, %%eax, 4), %%dx  \n\t" // dx = ger * 5
+         "sarw $4, %%dx                 \n\t" // dx = ger * 5 / 16
+         "addb %%dl, 1(%%ecx)           \n\t" // nerr[x] += ger * 5 / 16
+
+         "leaw (%%eax, %%eax, 2), %%dx  \n\t" // dx = ger * 3
+         "sarw $4, %%dx                 \n\t" // dx = ger * 3 / 16
+         "addb %%dl, -3(%%ecx)          \n\t" // nerr[x-1] += ger * 3 / 16
 
-         "sarw $4, %%ax			\n\t" // ax = ger / 16
-         "movb %%al, 5(%%ecx)		\n\t" // nerr[x+1] = ger / 16
+         "sarw $4, %%ax                 \n\t" // ax = ger / 16
+         "movb %%al, 5(%%ecx)           \n\t" // nerr[x+1] = ger / 16
 
 
          // BLUE
 
          // depends on ebx, esi
-         "movzbw 2(%%esi), %%dx		\n\t" // dx = image->data[2]
-         "movsbw 2(%%ebx), %%ax		\n\t" // ax = error[2]
-         "addw %%ax, %%dx		\n\t" // pixel.grn = data[2] + error[2]
-
-         "testb %%dh, %%dh		\n\t" // test if pixel.blu < 0 or > 255
-         "jz .OKBb			\n\t" // 0 <= pixel.blu <= 255
-         "js .NEGBb			\n\t" // pixel.blu < 0
-         "movw $0xff, %%dx		\n\t" // pixel.blu > 255
-         "jmp .OKBb			\n"
-".NEGBb:				\n\t"
-         "xorw %%dx, %%dx			\n"
-".OKBb:					\n\t"
+         "movzbw 2(%%esi), %%dx         \n\t" // dx = image->data[2]
+         "movsbw 2(%%ebx), %%ax         \n\t" // ax = error[2]
+         "addw %%ax, %%dx               \n\t" // pixel.grn = data[2] + error[2]
+
+         "testb %%dh, %%dh              \n\t" // test if pixel.blu < 0 or > 255
+         "jz .OKBb                      \n\t" // 0 <= pixel.blu <= 255
+         "js .NEGBb                     \n\t" // pixel.blu < 0
+         "movw $0xff, %%dx              \n\t" // pixel.blu > 255
+         "jmp .OKBb                     \n"
+".NEGBb:                                \n\t"
+         "xorw %%dx, %%dx                       \n"
+".OKBb:                                 \n\t"
          //partial reg
-         "leal (%%edi, %%edx, 2), %%ecx	\n\t" // ecx = &ctable[pixel.blu]
+         "leal (%%edi, %%edx, 2), %%ecx \n\t" // ecx = &ctable[pixel.blu]
          //agi
-         "movw (%%ecx), %%ax		\n\t" // ax = ctable[pixel.blu]
-         "movw %%ax, %18		\n\t" // save bb
+         "movw (%%ecx), %%ax            \n\t" // ax = ctable[pixel.blu]
+         "movw %%ax, %18                \n\t" // save bb
 
-         "mulb %7			\n\t" // ax = bb*db
-         "subw %%ax, %%dx		\n\t" // ber = dx = dx - bb*db
-         "movswl %%dx, %%eax		\n\t" // save ber
+         "mulb %7                       \n\t" // ax = bb*db
+         "subw %%ax, %%dx               \n\t" // ber = dx = dx - bb*db
+         "movswl %%dx, %%eax            \n\t" // save ber
 
          // distribute error
-         "leal (, %%eax, 8), %%ecx	\n\t"
-         "subw %%dx, %%cx		\n\t" // cx = ber * 7
-         "sarw $4, %%cx			\n\t" // cx = ber * 7 / 16
-         "addb %%cl, 6(%%ebx)		\n\t" // err[x+1] += ber * 7 / 16
+         "leal (, %%eax, 8), %%ecx      \n\t"
+         "subw %%dx, %%cx               \n\t" // cx = ber * 7
+         "sarw $4, %%cx                 \n\t" // cx = ber * 7 / 16
+         "addb %%cl, 6(%%ebx)           \n\t" // err[x+1] += ber * 7 / 16
 
-         "movl %19, %%ecx		\n\t" // ecx = nerr
+         "movl %19, %%ecx               \n\t" // ecx = nerr
 
-         "leaw (%%eax, %%eax, 4), %%dx	\n\t" // dx = ber * 5
-         "sarw $4, %%dx			\n\t" // dx = ber * 5 / 16
-         "addb %%dl, 2(%%ecx)		\n\t" // nerr[x] += ber * 5 / 16
+         "leaw (%%eax, %%eax, 4), %%dx  \n\t" // dx = ber * 5
+         "sarw $4, %%dx                 \n\t" // dx = ber * 5 / 16
+         "addb %%dl, 2(%%ecx)           \n\t" // nerr[x] += ber * 5 / 16
 
-         "leaw (%%eax, %%eax, 2), %%dx	\n\t" // dx = ber * 3
-         "sarw $4, %%dx			\n\t" // dx = ber * 3 / 16
-         "addb %%dl, -4(%%ecx)		\n\t" // nerr[x-1] += ber * 3 / 16
+         "leaw (%%eax, %%eax, 2), %%dx  \n\t" // dx = ber * 3
+         "sarw $4, %%dx                 \n\t" // dx = ber * 3 / 16
+         "addb %%dl, -4(%%ecx)          \n\t" // nerr[x-1] += ber * 3 / 16
 
-         "sarw $4, %%ax			\n\t" // ax = ber / 16
-         "movb %%al, 6(%%ecx)		\n\t" // nerr[x+1] = ber / 16
+         "sarw $4, %%ax                 \n\t" // ax = ber / 16
+         "movb %%al, 6(%%ecx)           \n\t" // nerr[x+1] = ber / 16
 
-         "andl $0xffff, %%eax		\n\t"
+         "andl $0xffff, %%eax           \n\t"
          // depends on eax & 0xffff0000 == 0
          // calculate the index of the value of the pixel
-         "movw %16, %%ax		\n\t" // ax = rr
-         "mulb %15			\n\t" // ax = cpcpc*rr
-         "movw %%ax, %%cx		\n\t"
-         "movw %17, %%ax		\n\t" // ax = gg
-         "mulb %9			\n\t" // ax = cpc*gg
-         "addw %%cx, %%ax		\n\t" // ax = cpc*gg + cpcpc*rr
-         "addw %18, %%ax		\n\t" // ax = cpcpc*rr + cpc*gg + bb
+         "movw %16, %%ax                \n\t" // ax = rr
+         "mulb %15                      \n\t" // ax = cpcpc*rr
+         "movw %%ax, %%cx               \n\t"
+         "movw %17, %%ax                \n\t" // ax = gg
+         "mulb %9                       \n\t" // ax = cpc*gg
+         "addw %%cx, %%ax               \n\t" // ax = cpc*gg + cpcpc*rr
+         "addw %18, %%ax                \n\t" // ax = cpcpc*rr + cpc*gg + bb
 
-         "movl %8, %%ecx		\n\t"
+         "movl %8, %%ecx                \n\t"
          //agi
-         "leal (%%ecx, %%eax, 4), %%edx	\n\t"
+         "leal (%%ecx, %%eax, 4), %%edx \n\t"
          //agi
-         "movb (%%edx), %%cl		\n\t" // cl = pixels[ax]
+         "movb (%%edx), %%cl            \n\t" // cl = pixels[ax]
 
          // store the pixel
-         "movl %1, %%eax		\n\t"
-         "movb %%cl, (%%eax)		\n\t" // *ximage = cl
-         "incl %1			\n\t" // ximage++
+         "movl %1, %%eax                \n\t"
+         "movb %%cl, (%%eax)            \n\t" // *ximage = cl
+         "incl %1                       \n\t" // ximage++
 
          // prepare for next iteration on X
 
-         "addl $4, %19			\n\t" // nerr += 4
-         "addl $4, %%ebx		\n\t" // err += 4
+         "addl $4, %19                  \n\t" // nerr += 4
+         "addl $4, %%ebx                \n\t" // err += 4
 
-         "addl %12, %%esi		\n\t" // image->data += bpp
+         "addl %12, %%esi               \n\t" // image->data += bpp
 
-         "decl %14			\n\t" // x--
-         "jnz .LoopXb			\n\t" // if x>0, goto .LoopX
+         "decl %14                      \n\t" // x--
+         "jnz .LoopXb                   \n\t" // if x>0, goto .LoopX
 
 
-         "movl %13, %%eax		\n\t"
-         "addl %%eax, %1		\n\t" // add extra offset to ximage
+         "movl %13, %%eax               \n\t"
+         "addl %%eax, %1                \n\t" // add extra offset to ximage
 
-         "jmp .LoopYb			\n"
+         "jmp .LoopYb                   \n"
 
-".Endb:					\n\t"
-         "emms				\n\t"
-         "popal				\n\t"
+".Endb:                                 \n\t"
+         "emms                          \n\t"
+         "popal                         \n\t"
          :
          :
          "m" (image),         // %0
